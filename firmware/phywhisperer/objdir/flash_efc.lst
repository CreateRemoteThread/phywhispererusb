   1              	 .cpu cortex-m3
   2              	 .eabi_attribute 20,1
   3              	 .eabi_attribute 21,1
   4              	 .eabi_attribute 23,3
   5              	 .eabi_attribute 24,1
   6              	 .eabi_attribute 25,1
   7              	 .eabi_attribute 26,1
   8              	 .eabi_attribute 30,6
   9              	 .eabi_attribute 34,1
  10              	 .eabi_attribute 18,4
  11              	 .file "flash_efc.c"
  12              	 .text
  13              	.Ltext0:
  14              	 .cfi_sections .debug_frame
  15              	 .section .bss.cpu_irq_critical_section_counter,"aw",%nobits
  16              	 .align 2
  19              	cpu_irq_critical_section_counter:
  20 0000 00000000 	 .space 4
  21              	 .section .bss.cpu_irq_prev_interrupt_state,"aw",%nobits
  24              	cpu_irq_prev_interrupt_state:
  25 0000 00       	 .space 1
  26              	 .section .text.osc_get_rate,"ax",%progbits
  27              	 .align 1
  28              	 .syntax unified
  29              	 .thumb
  30              	 .thumb_func
  31              	 .fpu softvfp
  33              	osc_get_rate:
  34              	.LFB72:
  35              	 .file 1 ".././hal/sam3u1c/inc/sam3u/osc.h"
   1:.././hal/sam3u1c/inc/sam3u/osc.h **** /**
   2:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \file
   3:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
   4:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \brief Chip-specific oscillator management functions.
   5:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
   6:.././hal/sam3u1c/inc/sam3u/osc.h ****  * Copyright (c) 2011 - 2013 Atmel Corporation. All rights reserved.
   7:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
   8:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \asf_license_start
   9:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  10:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \page License
  11:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  12:.././hal/sam3u1c/inc/sam3u/osc.h ****  * Redistribution and use in source and binary forms, with or without
  13:.././hal/sam3u1c/inc/sam3u/osc.h ****  * modification, are permitted provided that the following conditions are met:
  14:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  15:.././hal/sam3u1c/inc/sam3u/osc.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    this list of conditions and the following disclaimer.
  17:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  18:.././hal/sam3u1c/inc/sam3u/osc.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    and/or other materials provided with the distribution.
  21:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  22:.././hal/sam3u1c/inc/sam3u/osc.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    from this software without specific prior written permission.
  24:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  25:.././hal/sam3u1c/inc/sam3u/osc.h ****  * 4. This software may only be redistributed and used in connection with an
  26:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    Atmel microcontroller product.
  27:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  28:.././hal/sam3u1c/inc/sam3u/osc.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:.././hal/sam3u1c/inc/sam3u/osc.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:.././hal/sam3u1c/inc/sam3u/osc.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:.././hal/sam3u1c/inc/sam3u/osc.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:.././hal/sam3u1c/inc/sam3u/osc.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:.././hal/sam3u1c/inc/sam3u/osc.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:.././hal/sam3u1c/inc/sam3u/osc.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:.././hal/sam3u1c/inc/sam3u/osc.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:.././hal/sam3u1c/inc/sam3u/osc.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:.././hal/sam3u1c/inc/sam3u/osc.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:.././hal/sam3u1c/inc/sam3u/osc.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  40:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \asf_license_stop
  41:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  42:.././hal/sam3u1c/inc/sam3u/osc.h ****  */
  43:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  44:.././hal/sam3u1c/inc/sam3u/osc.h **** #ifndef CHIP_OSC_H_INCLUDED
  45:.././hal/sam3u1c/inc/sam3u/osc.h **** #define CHIP_OSC_H_INCLUDED
  46:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  47:.././hal/sam3u1c/inc/sam3u/osc.h **** #include "board.h"
  48:.././hal/sam3u1c/inc/sam3u/osc.h **** #include "pmc.h"
  49:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  50:.././hal/sam3u1c/inc/sam3u/osc.h **** /// @cond 0
  51:.././hal/sam3u1c/inc/sam3u/osc.h **** /**INDENT-OFF**/
  52:.././hal/sam3u1c/inc/sam3u/osc.h **** #ifdef __cplusplus
  53:.././hal/sam3u1c/inc/sam3u/osc.h **** extern "C" {
  54:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  55:.././hal/sam3u1c/inc/sam3u/osc.h **** /**INDENT-ON**/
  56:.././hal/sam3u1c/inc/sam3u/osc.h **** /// @endcond
  57:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  58:.././hal/sam3u1c/inc/sam3u/osc.h **** /*
  59:.././hal/sam3u1c/inc/sam3u/osc.h ****  * Below BOARD_XXX macros are related to the specific board, and
  60:.././hal/sam3u1c/inc/sam3u/osc.h ****  * should be defined by the board code, otherwise default value are used.
  61:.././hal/sam3u1c/inc/sam3u/osc.h ****  */
  62:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_FREQ_SLCK_XTAL)
  63:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board slow clock xtal frequency has not been defined.
  64:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_FREQ_SLCK_XTAL      (32768UL)
  65:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  66:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  67:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_FREQ_SLCK_BYPASS)
  68:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board slow clock bypass frequency has not been defined.
  69:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_FREQ_SLCK_BYPASS    (32768UL)
  70:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  71:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  72:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_FREQ_MAINCK_XTAL)
  73:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board main clock xtal frequency has not been defined.
  74:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_FREQ_MAINCK_XTAL    (12000000UL)
  75:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  76:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  77:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_FREQ_MAINCK_BYPASS)
  78:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board main clock bypass frequency has not been defined.
  79:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_FREQ_MAINCK_BYPASS  (12000000UL)
  80:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  81:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  82:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_OSC_STARTUP_US)
  83:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board main clock xtal startup time has not been defined.
  84:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_OSC_STARTUP_US      (15625UL)
  85:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  86:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  87:.././hal/sam3u1c/inc/sam3u/osc.h **** /**
  88:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \weakgroup osc_group
  89:.././hal/sam3u1c/inc/sam3u/osc.h ****  * @{
  90:.././hal/sam3u1c/inc/sam3u/osc.h ****  */
  91:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  92:.././hal/sam3u1c/inc/sam3u/osc.h **** //! \name Oscillator identifiers
  93:.././hal/sam3u1c/inc/sam3u/osc.h **** //@{
  94:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_RC             0    //!< Internal 32kHz RC oscillator.
  95:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_XTAL           1    //!< External 32kHz crystal oscillator.
  96:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_BYPASS         2    //!< External 32kHz bypass oscillator.
  97:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_4M_RC            3    //!< Internal 4MHz RC oscillator.
  98:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_8M_RC            4    //!< Internal 8MHz RC oscillator.
  99:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_12M_RC           5    //!< Internal 12MHz RC oscillator.
 100:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_XTAL             6    //!< External crystal oscillator.
 101:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_BYPASS           7    //!< External bypass oscillator.
 102:.././hal/sam3u1c/inc/sam3u/osc.h **** //@}
 103:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 104:.././hal/sam3u1c/inc/sam3u/osc.h **** //! \name Oscillator clock speed in hertz
 105:.././hal/sam3u1c/inc/sam3u/osc.h **** //@{
 106:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_RC_HZ          CHIP_FREQ_SLCK_RC               //!< Internal 32kHz RC oscillat
 107:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_XTAL_HZ        BOARD_FREQ_SLCK_XTAL            //!< External 32kHz crystal osc
 108:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_BYPASS_HZ      BOARD_FREQ_SLCK_BYPASS          //!< External 32kHz bypass osci
 109:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_4M_RC_HZ         CHIP_FREQ_MAINCK_RC_4MHZ        //!< Internal 4MHz RC oscillato
 110:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_8M_RC_HZ         CHIP_FREQ_MAINCK_RC_8MHZ        //!< Internal 8MHz RC oscillato
 111:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_12M_RC_HZ        CHIP_FREQ_MAINCK_RC_12MHZ       //!< Internal 12MHz RC oscillat
 112:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_XTAL_HZ          BOARD_FREQ_MAINCK_XTAL          //!< External crystal oscillato
 113:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_BYPASS_HZ        BOARD_FREQ_MAINCK_BYPASS        //!< External bypass oscillator
 114:.././hal/sam3u1c/inc/sam3u/osc.h **** //@}
 115:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 116:.././hal/sam3u1c/inc/sam3u/osc.h **** static inline void osc_enable(uint32_t ul_id)
 117:.././hal/sam3u1c/inc/sam3u/osc.h **** {
 118:.././hal/sam3u1c/inc/sam3u/osc.h **** 	switch (ul_id) {
 119:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_RC:
 120:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 121:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 122:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_XTAL:
 123:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_switch_sclk_to_32kxtal(PMC_OSC_XTAL);
 124:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 125:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 126:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_BYPASS:
 127:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_switch_sclk_to_32kxtal(PMC_OSC_BYPASS);
 128:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 129:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 130:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 131:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_4M_RC:
 132:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_enable_fastrc(CKGR_MOR_MOSCRCF_4_MHz);
 133:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 134:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 135:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_8M_RC:
 136:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_enable_fastrc(CKGR_MOR_MOSCRCF_8_MHz);
 137:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 138:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 139:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_12M_RC:
 140:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_enable_fastrc(CKGR_MOR_MOSCRCF_12_MHz);
 141:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 142:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 143:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 144:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_XTAL:
 145:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_enable_main_xtal(pmc_us_to_moscxtst(
 146:.././hal/sam3u1c/inc/sam3u/osc.h **** 				BOARD_OSC_STARTUP_US, OSC_SLCK_32K_RC_HZ));
 147:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 148:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 149:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_BYPASS:
 150:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_bypass_main_xtal();
 151:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 152:.././hal/sam3u1c/inc/sam3u/osc.h **** 	}
 153:.././hal/sam3u1c/inc/sam3u/osc.h **** }
 154:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 155:.././hal/sam3u1c/inc/sam3u/osc.h **** static inline void osc_disable(uint32_t ul_id)
 156:.././hal/sam3u1c/inc/sam3u/osc.h **** {
 157:.././hal/sam3u1c/inc/sam3u/osc.h **** 	switch (ul_id) {
 158:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_RC:
 159:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_XTAL:
 160:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_BYPASS:
 161:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 162:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 163:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_4M_RC:
 164:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_8M_RC:
 165:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_12M_RC:
 166:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_disable_fastrc();
 167:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 168:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 169:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_XTAL:
 170:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_disable_xtal(PMC_OSC_XTAL);
 171:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 172:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 173:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_BYPASS:
 174:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_disable_xtal(PMC_OSC_BYPASS);
 175:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 176:.././hal/sam3u1c/inc/sam3u/osc.h **** 	}
 177:.././hal/sam3u1c/inc/sam3u/osc.h **** }
 178:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 179:.././hal/sam3u1c/inc/sam3u/osc.h **** static inline bool osc_is_ready(uint32_t ul_id)
 180:.././hal/sam3u1c/inc/sam3u/osc.h **** {
 181:.././hal/sam3u1c/inc/sam3u/osc.h **** 	switch (ul_id) {
 182:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_RC:
 183:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return 1;
 184:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 185:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_XTAL:
 186:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_BYPASS:
 187:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return pmc_osc_is_ready_32kxtal();
 188:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 189:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_4M_RC:
 190:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_8M_RC:
 191:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_12M_RC:
 192:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return pmc_osc_is_ready_fastrc();
 193:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 194:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_XTAL:
 195:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_BYPASS:
 196:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return pmc_osc_is_ready_main_xtal();
 197:.././hal/sam3u1c/inc/sam3u/osc.h **** 	}
 198:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 199:.././hal/sam3u1c/inc/sam3u/osc.h **** 	return 0;
 200:.././hal/sam3u1c/inc/sam3u/osc.h **** }
 201:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 202:.././hal/sam3u1c/inc/sam3u/osc.h **** static inline uint32_t osc_get_rate(uint32_t ul_id)
 203:.././hal/sam3u1c/inc/sam3u/osc.h **** {
  36              	 .loc 1 203 0
  37              	 .cfi_startproc
  38              	 
  39              	 
  40              	 
  41 0000 80B4     	 push {r7}
  42              	.LCFI0:
  43              	 .cfi_def_cfa_offset 4
  44              	 .cfi_offset 7,-4
  45 0002 83B0     	 sub sp,sp,#12
  46              	.LCFI1:
  47              	 .cfi_def_cfa_offset 16
  48 0004 00AF     	 add r7,sp,#0
  49              	.LCFI2:
  50              	 .cfi_def_cfa_register 7
  51 0006 7860     	 str r0,[r7,#4]
 204:.././hal/sam3u1c/inc/sam3u/osc.h **** 	switch (ul_id) {
  52              	 .loc 1 204 0
  53 0008 7B68     	 ldr r3,[r7,#4]
  54 000a 072B     	 cmp r3,#7
  55 000c 23D8     	 bhi .L2
  56 000e 01A2     	 adr r2,.L4
  57 0010 52F823F0 	 ldr pc,[r2,r3,lsl#2]
  58              	 .p2align 2
  59              	.L4:
  60 0014 35000000 	 .word .L3+1
  61 0018 3B000000 	 .word .L5+1
  62 001c 3F000000 	 .word .L6+1
  63 0020 43000000 	 .word .L7+1
  64 0024 47000000 	 .word .L8+1
  65 0028 4B000000 	 .word .L9+1
  66 002c 4F000000 	 .word .L10+1
  67 0030 53000000 	 .word .L11+1
  68              	 .p2align 1
  69              	.L3:
 205:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_RC:
 206:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return OSC_SLCK_32K_RC_HZ;
  70              	 .loc 1 206 0
  71 0034 4FF4FA43 	 mov r3,#32000
  72 0038 0EE0     	 b .L12
  73              	.L5:
 207:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 208:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_XTAL:
 209:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return BOARD_FREQ_SLCK_XTAL;
  74              	 .loc 1 209 0
  75 003a 0023     	 movs r3,#0
  76 003c 0CE0     	 b .L12
  77              	.L6:
 210:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 211:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_BYPASS:
 212:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return BOARD_FREQ_SLCK_BYPASS;
  78              	 .loc 1 212 0
  79 003e 0023     	 movs r3,#0
  80 0040 0AE0     	 b .L12
  81              	.L7:
 213:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 214:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_4M_RC:
 215:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return OSC_MAINCK_4M_RC_HZ;
  82              	 .loc 1 215 0
  83 0042 084B     	 ldr r3,.L13
  84 0044 08E0     	 b .L12
  85              	.L8:
 216:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 217:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_8M_RC:
 218:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return OSC_MAINCK_8M_RC_HZ;
  86              	 .loc 1 218 0
  87 0046 084B     	 ldr r3,.L13+4
  88 0048 06E0     	 b .L12
  89              	.L9:
 219:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 220:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_12M_RC:
 221:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return OSC_MAINCK_12M_RC_HZ;
  90              	 .loc 1 221 0
  91 004a 084B     	 ldr r3,.L13+8
  92 004c 04E0     	 b .L12
  93              	.L10:
 222:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 223:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_XTAL:
 224:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return BOARD_FREQ_MAINCK_XTAL;
  94              	 .loc 1 224 0
  95 004e 074B     	 ldr r3,.L13+8
  96 0050 02E0     	 b .L12
  97              	.L11:
 225:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 226:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_BYPASS:
 227:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return BOARD_FREQ_MAINCK_BYPASS;
  98              	 .loc 1 227 0
  99 0052 064B     	 ldr r3,.L13+8
 100 0054 00E0     	 b .L12
 101              	.L2:
 228:.././hal/sam3u1c/inc/sam3u/osc.h **** 	}
 229:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 230:.././hal/sam3u1c/inc/sam3u/osc.h **** 	return 0;
 102              	 .loc 1 230 0
 103 0056 0023     	 movs r3,#0
 104              	.L12:
 231:.././hal/sam3u1c/inc/sam3u/osc.h **** }
 105              	 .loc 1 231 0
 106 0058 1846     	 mov r0,r3
 107 005a 0C37     	 adds r7,r7,#12
 108              	.LCFI3:
 109              	 .cfi_def_cfa_offset 4
 110 005c BD46     	 mov sp,r7
 111              	.LCFI4:
 112              	 .cfi_def_cfa_register 13
 113              	 
 114 005e 80BC     	 pop {r7}
 115              	.LCFI5:
 116              	 .cfi_restore 7
 117              	 .cfi_def_cfa_offset 0
 118 0060 7047     	 bx lr
 119              	.L14:
 120 0062 00BF     	 .align 2
 121              	.L13:
 122 0064 00093D00 	 .word 4000000
 123 0068 00127A00 	 .word 8000000
 124 006c 001BB700 	 .word 12000000
 125              	 .cfi_endproc
 126              	.LFE72:
 128              	 .section .text.sysclk_get_main_hz,"ax",%progbits
 129              	 .align 1
 130              	 .syntax unified
 131              	 .thumb
 132              	 .thumb_func
 133              	 .fpu softvfp
 135              	sysclk_get_main_hz:
 136              	.LFB83:
 137              	 .file 2 ".././hal/sam3u1c/inc/sam3u/sysclk.h"
   1:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
   2:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \file
   3:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
   4:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Chip-specific system clock management functions.
   5:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
   6:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Copyright (c) 2011 - 2014 Atmel Corporation. All rights reserved.
   7:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
   8:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \asf_license_start
   9:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  10:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \page License
  11:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  12:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  15:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  18:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  22:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    from this software without specific prior written permission.
  24:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  25:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    Atmel microcontroller product.
  27:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  28:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  40:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \asf_license_stop
  41:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  42:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
  43:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  44:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifndef CHIP_SYSCLK_H_INCLUDED
  45:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define CHIP_SYSCLK_H_INCLUDED
  46:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  47:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #include <osc.h>
  48:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #include <pll.h>
  49:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  50:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
  51:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \page sysclk_quickstart Quick Start Guide for the System Clock Management service (SAM3U)
  52:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  53:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * This is the quick start guide for the \ref sysclk_group "System Clock Management"
  54:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * service, with step-by-step instructions on how to configure and use the service for
  55:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * specific use cases.
  56:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  57:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \section sysclk_quickstart_usecases System Clock Management use cases
  58:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * - \ref sysclk_quickstart_basic
  59:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  60:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \section sysclk_quickstart_basic Basic usage of the System Clock Management service
  61:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * This section will present a basic use case for the System Clock Management service.
  62:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * This use case will configure the main system clock to 96MHz, using an internal PLL
  63:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * module to multiply the frequency of a crystal attached to the microcontroller.
  64:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  65:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_prereq Prerequisites
  66:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  - None
  67:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  68:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_setup_steps Initialization code
  69:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Add to the application initialization code:
  70:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \code
  71:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	sysclk_init();
  72:.././hal/sam3u1c/inc/sam3u/sysclk.h **** \endcode
  73:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  74:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_setup_steps_workflow Workflow
  75:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * -# Configure the system clocks according to the settings in conf_clock.h:
  76:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    \code sysclk_init(); \endcode
  77:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  78:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_example_code Example code
  79:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   Add or uncomment the following in your conf_clock.h header file, commenting out all other
  80:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   definitions of the same symbol(s):
  81:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \code
  82:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_SYSCLK_SOURCE        SYSCLK_SRC_PLLACK
  83:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  84:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   // Fpll0 = (Fclk * PLL_mul) / PLL_div
  85:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_PLL0_SOURCE          PLL_SRC_MAINCK_XTAL
  86:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_PLL0_MUL             (96000000UL / BOARD_FREQ_MAINCK_XTAL)
  87:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_PLL0_DIV             1
  88:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  89:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   // Fbus = Fsys / BUS_div
  90:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_SYSCLK_PRES          SYSCLK_PRES_1
  91:.././hal/sam3u1c/inc/sam3u/sysclk.h **** \endcode
  92:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  93:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_example_workflow Workflow
  94:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  -# Configure the main system clock to use the output of the PLL module as its source:
  95:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \code #define CONFIG_SYSCLK_SOURCE          SYSCLK_SRC_PLLACK \endcode
  96:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  -# Configure the PLL module to use the fast external fast crystal oscillator as its source:
  97:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \code #define CONFIG_PLL0_SOURCE            PLL_SRC_MAINCK_XTAL \endcode
  98:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  -# Configure the PLL module to multiply the external fast crystal oscillator frequency up to 96
  99:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \code
 100:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	#define CONFIG_PLL0_MUL             (96000000UL / BOARD_FREQ_MAINCK_XTAL)
 101:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	#define CONFIG_PLL0_DIV             1
 102:.././hal/sam3u1c/inc/sam3u/sysclk.h **** \endcode
 103:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \note For user boards, \c BOARD_FREQ_MAINCK_XTAL should be defined in the board \c conf_board.
 104:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *         file as the frequency of the fast crystal attached to the microcontroller.
 105:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  -# Configure the main clock to run at the full 96MHz, disable scaling of the main system clock 
 106:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    \code
 107:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	#define CONFIG_SYSCLK_PRES         SYSCLK_PRES_1
 108:.././hal/sam3u1c/inc/sam3u/sysclk.h **** \endcode
 109:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    \note Some dividers are powers of two, while others are integer division factors. Refer to th
 110:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *          formulas in the conf_clock.h template commented above each division define.
 111:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 112:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 113:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /// @cond 0
 114:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**INDENT-OFF**/
 115:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef __cplusplus
 116:.././hal/sam3u1c/inc/sam3u/sysclk.h **** extern "C" {
 117:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 118:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**INDENT-ON**/
 119:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /// @endcond
 120:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 121:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 122:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \weakgroup sysclk_group
 123:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * @{
 124:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 125:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 126:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //! \name Configuration Symbols
 127:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@{
 128:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 129:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \def CONFIG_SYSCLK_SOURCE
 130:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Initial/static main system clock source
 131:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 132:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * The main system clock will be configured to use this clock during
 133:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * initialization.
 134:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 135:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifndef CONFIG_SYSCLK_SOURCE
 136:.././hal/sam3u1c/inc/sam3u/sysclk.h **** # define CONFIG_SYSCLK_SOURCE   SYSCLK_SRC_MAINCK_4M_RC
 137:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 138:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 139:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \def CONFIG_SYSCLK_PRES
 140:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Initial CPU clock divider (mck)
 141:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 142:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * The MCK will run at
 143:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \f[
 144:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   f_{MCK} = \frac{f_{sys}}{\mathrm{CONFIG\_SYSCLK\_PRES}}\,\mbox{Hz}
 145:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \f]
 146:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * after initialization.
 147:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 148:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifndef CONFIG_SYSCLK_PRES
 149:.././hal/sam3u1c/inc/sam3u/sysclk.h **** # define CONFIG_SYSCLK_PRES  0
 150:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 151:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 152:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@}
 153:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 154:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //! \name Master Clock Sources (MCK)
 155:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@{
 156:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_SLCK_RC              0       //!< Internal 32kHz RC oscillator as master source 
 157:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_SLCK_XTAL            1       //!< External 32kHz crystal oscillator as master so
 158:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_SLCK_BYPASS          2       //!< External 32kHz bypass oscillator as master sou
 159:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_4M_RC         3       //!< Internal 4MHz RC oscillator as master source c
 160:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_8M_RC         4       //!< Internal 8MHz RC oscillator as master source c
 161:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_12M_RC        5       //!< Internal 12MHz RC oscillator as master source 
 162:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_XTAL          6       //!< External crystal oscillator as master source c
 163:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_BYPASS        7       //!< External bypass oscillator as master source cl
 164:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_PLLACK               8       //!< Use PLLACK as master source clock
 165:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_UPLLCK               9       //!< Use UPLLCK as master source clock
 166:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@}
 167:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 168:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //! \name Master Clock Prescalers (MCK)
 169:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@{
 170:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_1           PMC_MCKR_PRES_CLK_1     //!< Set master clock prescaler to 1
 171:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_2           PMC_MCKR_PRES_CLK_2     //!< Set master clock prescaler to 2
 172:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_4           PMC_MCKR_PRES_CLK_4     //!< Set master clock prescaler to 4
 173:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_8           PMC_MCKR_PRES_CLK_8     //!< Set master clock prescaler to 8
 174:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_16          PMC_MCKR_PRES_CLK_16    //!< Set master clock prescaler to 16
 175:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_32          PMC_MCKR_PRES_CLK_32    //!< Set master clock prescaler to 32
 176:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_64          PMC_MCKR_PRES_CLK_64    //!< Set master clock prescaler to 64
 177:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_3           PMC_MCKR_PRES_CLK_3     //!< Set master clock prescaler to 3
 178:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@}
 179:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 180:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 181:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \def CONFIG_USBCLK_SOURCE
 182:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Configuration symbol for the USB generic clock source
 183:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 184:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Sets the clock source to use for the USB. The source must also be properly
 185:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * configured.
 186:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 187:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Define this to one of the \c USBCLK_SRC_xxx settings. Leave it undefined if
 188:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * USB is not required.
 189:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 190:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef __DOXYGEN__
 191:.././hal/sam3u1c/inc/sam3u/sysclk.h **** # define CONFIG_USBCLK_SOURCE
 192:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 193:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 194:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 195:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \def CONFIG_USBCLK_DIV
 196:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Configuration symbol for the USB generic clock divider setting
 197:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 198:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Sets the clock division for the USB generic clock. If a USB clock source is
 199:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * selected with CONFIG_USBCLK_SOURCE, this configuration symbol must also be
 200:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * defined.
 201:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 202:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef __DOXYGEN__
 203:.././hal/sam3u1c/inc/sam3u/sysclk.h **** # define CONFIG_USBCLK_DIV
 204:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 205:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 206:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 207:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \name Querying the system clock
 208:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 209:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * The following functions may be used to query the current frequency of
 210:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * the system clock and the CPU and bus clocks derived from it.
 211:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * sysclk_get_main_hz() and sysclk_get_cpu_hz() can be assumed to be
 212:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * available on all platforms, although some platforms may define
 213:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * additional accessors for various chip-internal bus clocks. These are
 214:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * usually not intended to be queried directly by generic code.
 215:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 216:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@{
 217:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 218:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 219:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 220:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 221:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \todo This function assumes that the main clock source never changes
 222:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * once it's been set up, and that PLL0 always runs at the compile-time
 223:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * configured default rate. While this is probably the most common
 224:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * configuration, which we want to support as a special case for
 225:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * performance reasons, we will at some point need to support more
 226:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * dynamic setups as well.
 227:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 228:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #if (defined CONFIG_SYSCLK_DEFAULT_RETURNS_SLOW_OSC)
 229:.././hal/sam3u1c/inc/sam3u/sysclk.h **** extern uint32_t sysclk_initialized;
 230:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 231:.././hal/sam3u1c/inc/sam3u/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 232:.././hal/sam3u1c/inc/sam3u/sysclk.h **** {
 138              	 .loc 2 232 0
 139              	 .cfi_startproc
 140              	 
 141              	 
 142 0000 80B5     	 push {r7,lr}
 143              	.LCFI6:
 144              	 .cfi_def_cfa_offset 8
 145              	 .cfi_offset 7,-8
 146              	 .cfi_offset 14,-4
 147 0002 00AF     	 add r7,sp,#0
 148              	.LCFI7:
 149              	 .cfi_def_cfa_register 7
 233:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #if (defined CONFIG_SYSCLK_DEFAULT_RETURNS_SLOW_OSC)
 234:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	if (!sysclk_initialized ) {
 235:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_4M_RC_HZ;
 236:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 237:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 238:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 239:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	/* Config system clock setting */
 240:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_SLCK_RC) {
 241:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_SLCK_32K_RC_HZ;
 242:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_SLCK_XTAL) {
 243:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_SLCK_32K_XTAL_HZ;
 244:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_SLCK_BYPASS) {
 245:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_SLCK_32K_BYPASS_HZ;
 246:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_4M_RC) {
 247:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_4M_RC_HZ;
 248:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_8M_RC) {
 249:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_8M_RC_HZ;
 250:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_12M_RC) {
 251:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_12M_RC_HZ;
 252:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_XTAL) {
 253:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_XTAL_HZ;
 254:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_BYPASS) {
 255:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_BYPASS_HZ;
 256:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 257:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef CONFIG_PLL0_SOURCE
 258:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_PLLACK) {
 259:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return pll_get_default_rate(0);
 150              	 .loc 2 259 0
 151 0004 0620     	 movs r0,#6
 152 0006 034B     	 ldr r3,.L17
 153 0008 9847     	 blx r3
 154              	.LVL0:
 155 000a 0346     	 mov r3,r0
 156 000c 1B01     	 lsls r3,r3,#4
 260:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 261:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 262:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 263:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef CONFIG_PLL1_SOURCE
 264:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_UPLLCK) {
 265:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return PLL_UPLL_HZ;
 266:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 267:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 268:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	else {
 269:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		/* unhandled_case(CONFIG_SYSCLK_SOURCE); */
 270:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return 0;
 271:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 272:.././hal/sam3u1c/inc/sam3u/sysclk.h **** }
 157              	 .loc 2 272 0
 158 000e 1846     	 mov r0,r3
 159 0010 80BD     	 pop {r7,pc}
 160              	.L18:
 161 0012 00BF     	 .align 2
 162              	.L17:
 163 0014 00000000 	 .word osc_get_rate
 164              	 .cfi_endproc
 165              	.LFE83:
 167              	 .section .text.sysclk_get_cpu_hz,"ax",%progbits
 168              	 .align 1
 169              	 .syntax unified
 170              	 .thumb
 171              	 .thumb_func
 172              	 .fpu softvfp
 174              	sysclk_get_cpu_hz:
 175              	.LFB84:
 273:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 274:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 275:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Return the current rate in Hz of the CPU clock
 276:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 277:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \todo This function assumes that the CPU always runs at the system
 278:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * clock frequency. We want to support at least two more scenarios:
 279:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Fixed CPU/bus clock dividers (config symbols) and dynamic CPU/bus
 280:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * clock dividers (which may change at run time). Ditto for all the bus
 281:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * clocks.
 282:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 283:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \return Frequency of the CPU clock, in Hz.
 284:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 285:.././hal/sam3u1c/inc/sam3u/sysclk.h **** static inline uint32_t sysclk_get_cpu_hz(void)
 286:.././hal/sam3u1c/inc/sam3u/sysclk.h **** {
 176              	 .loc 2 286 0
 177              	 .cfi_startproc
 178              	 
 179              	 
 180 0000 80B5     	 push {r7,lr}
 181              	.LCFI8:
 182              	 .cfi_def_cfa_offset 8
 183              	 .cfi_offset 7,-8
 184              	 .cfi_offset 14,-4
 185 0002 00AF     	 add r7,sp,#0
 186              	.LCFI9:
 187              	 .cfi_def_cfa_register 7
 287:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	/* CONFIG_SYSCLK_PRES is the register value for setting the expected */
 288:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	/* prescaler, not an immediate value. */
 289:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	return sysclk_get_main_hz() /
 188              	 .loc 2 289 0
 189 0004 024B     	 ldr r3,.L21
 190 0006 9847     	 blx r3
 191              	.LVL1:
 192 0008 0346     	 mov r3,r0
 193 000a 5B08     	 lsrs r3,r3,#1
 290:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		((CONFIG_SYSCLK_PRES == SYSCLK_PRES_3) ? 3 :
 291:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 			(1 << (CONFIG_SYSCLK_PRES >> PMC_MCKR_PRES_Pos)));
 292:.././hal/sam3u1c/inc/sam3u/sysclk.h **** }
 194              	 .loc 2 292 0
 195 000c 1846     	 mov r0,r3
 196 000e 80BD     	 pop {r7,pc}
 197              	.L22:
 198              	 .align 2
 199              	.L21:
 200 0010 00000000 	 .word sysclk_get_main_hz
 201              	 .cfi_endproc
 202              	.LFE84:
 204              	 .section .bss.gs_ul_page_buffer,"aw",%nobits
 205              	 .align 2
 208              	gs_ul_page_buffer:
 209 0000 00000000 	 .space 256
 209      00000000 
 209      00000000 
 209      00000000 
 209      00000000 
 210              	 .section .text.translate_address,"ax",%progbits
 211              	 .align 1
 212              	 .syntax unified
 213              	 .thumb
 214              	 .thumb_func
 215              	 .fpu softvfp
 217              	translate_address:
 218              	.LFB89:
 219              	 .file 3 ".././hal/sam3u1c/flash_efc.c"
   1:.././hal/sam3u1c/flash_efc.c **** /**
   2:.././hal/sam3u1c/flash_efc.c ****  * \file
   3:.././hal/sam3u1c/flash_efc.c ****  *
   4:.././hal/sam3u1c/flash_efc.c ****  * \brief Embedded Flash service for SAM.
   5:.././hal/sam3u1c/flash_efc.c ****  *
   6:.././hal/sam3u1c/flash_efc.c ****  * Copyright (c) 2011-2014 Atmel Corporation. All rights reserved.
   7:.././hal/sam3u1c/flash_efc.c ****  *
   8:.././hal/sam3u1c/flash_efc.c ****  * \asf_license_start
   9:.././hal/sam3u1c/flash_efc.c ****  *
  10:.././hal/sam3u1c/flash_efc.c ****  * \page License
  11:.././hal/sam3u1c/flash_efc.c ****  *
  12:.././hal/sam3u1c/flash_efc.c ****  * Redistribution and use in source and binary forms, with or without
  13:.././hal/sam3u1c/flash_efc.c ****  * modification, are permitted provided that the following conditions are met:
  14:.././hal/sam3u1c/flash_efc.c ****  *
  15:.././hal/sam3u1c/flash_efc.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:.././hal/sam3u1c/flash_efc.c ****  *    this list of conditions and the following disclaimer.
  17:.././hal/sam3u1c/flash_efc.c ****  *
  18:.././hal/sam3u1c/flash_efc.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:.././hal/sam3u1c/flash_efc.c ****  *    this list of conditions and the following disclaimer in the documentation
  20:.././hal/sam3u1c/flash_efc.c ****  *    and/or other materials provided with the distribution.
  21:.././hal/sam3u1c/flash_efc.c ****  *
  22:.././hal/sam3u1c/flash_efc.c ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:.././hal/sam3u1c/flash_efc.c ****  *    from this software without specific prior written permission.
  24:.././hal/sam3u1c/flash_efc.c ****  *
  25:.././hal/sam3u1c/flash_efc.c ****  * 4. This software may only be redistributed and used in connection with an
  26:.././hal/sam3u1c/flash_efc.c ****  *    Atmel microcontroller product.
  27:.././hal/sam3u1c/flash_efc.c ****  *
  28:.././hal/sam3u1c/flash_efc.c ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:.././hal/sam3u1c/flash_efc.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:.././hal/sam3u1c/flash_efc.c ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:.././hal/sam3u1c/flash_efc.c ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:.././hal/sam3u1c/flash_efc.c ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:.././hal/sam3u1c/flash_efc.c ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:.././hal/sam3u1c/flash_efc.c ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:.././hal/sam3u1c/flash_efc.c ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:.././hal/sam3u1c/flash_efc.c ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:.././hal/sam3u1c/flash_efc.c ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:.././hal/sam3u1c/flash_efc.c ****  * POSSIBILITY OF SUCH DAMAGE.
  39:.././hal/sam3u1c/flash_efc.c ****  *
  40:.././hal/sam3u1c/flash_efc.c ****  * \asf_license_stop
  41:.././hal/sam3u1c/flash_efc.c ****  *
  42:.././hal/sam3u1c/flash_efc.c ****  */
  43:.././hal/sam3u1c/flash_efc.c **** 
  44:.././hal/sam3u1c/flash_efc.c **** #include <string.h>
  45:.././hal/sam3u1c/flash_efc.c **** #include <assert.h>
  46:.././hal/sam3u1c/flash_efc.c **** #include "flash_efc.h"
  47:.././hal/sam3u1c/flash_efc.c **** #include "sysclk.h"
  48:.././hal/sam3u1c/flash_efc.c **** 
  49:.././hal/sam3u1c/flash_efc.c **** /// @cond 0
  50:.././hal/sam3u1c/flash_efc.c **** /**INDENT-OFF**/
  51:.././hal/sam3u1c/flash_efc.c **** #ifdef __cplusplus
  52:.././hal/sam3u1c/flash_efc.c **** extern "C" {
  53:.././hal/sam3u1c/flash_efc.c **** #endif
  54:.././hal/sam3u1c/flash_efc.c **** /**INDENT-ON**/
  55:.././hal/sam3u1c/flash_efc.c **** /// @endcond
  56:.././hal/sam3u1c/flash_efc.c **** 
  57:.././hal/sam3u1c/flash_efc.c **** /**
  58:.././hal/sam3u1c/flash_efc.c ****  * \defgroup sam_services_flash_efc_group Embedded Flash Service
  59:.././hal/sam3u1c/flash_efc.c ****  *
  60:.././hal/sam3u1c/flash_efc.c ****  * The Embedded Flash service provides functions for internal flash operations.
  61:.././hal/sam3u1c/flash_efc.c ****  *
  62:.././hal/sam3u1c/flash_efc.c ****  * @{
  63:.././hal/sam3u1c/flash_efc.c ****  */
  64:.././hal/sam3u1c/flash_efc.c **** 
  65:.././hal/sam3u1c/flash_efc.c **** #if (SAM4E || SAM4N || SAM4S || SAM4C || SAMG || SAM4CP || SAM4CM)
  66:.././hal/sam3u1c/flash_efc.c **** /* User signature size */
  67:.././hal/sam3u1c/flash_efc.c **** # define FLASH_USER_SIG_SIZE   (512)
  68:.././hal/sam3u1c/flash_efc.c **** #endif
  69:.././hal/sam3u1c/flash_efc.c **** 
  70:.././hal/sam3u1c/flash_efc.c **** #if SAM4S
  71:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash Controller 0. */
  72:.././hal/sam3u1c/flash_efc.c **** # define EFC     EFC0
  73:.././hal/sam3u1c/flash_efc.c **** #if (SAM4SD16 || SAM4SD32)
  74:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
  75:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        3
  76:.././hal/sam3u1c/flash_efc.c **** #else
  77:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
  78:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        2
  79:.././hal/sam3u1c/flash_efc.c **** #endif
  80:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash 0 base address. */
  81:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_ADDR     IFLASH0_ADDR
  82:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
  83:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
  84:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
  85:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
  86:.././hal/sam3u1c/flash_efc.c **** #elif (SAM3XA || SAM3U4)
  87:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash Controller 0. */
  88:.././hal/sam3u1c/flash_efc.c **** # define EFC     EFC0
  89:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
  90:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        3
  91:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash 0 base address. */
  92:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_ADDR     IFLASH0_ADDR
  93:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
  94:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
  95:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
  96:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
  97:.././hal/sam3u1c/flash_efc.c **** #elif (SAM3U)
  98:.././hal/sam3u1c/flash_efc.c **** /* There is no EFC1 for SAM3U except for SAM3U4 */
  99:.././hal/sam3u1c/flash_efc.c **** # undef EFC1
 100:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash Controller 0. */
 101:.././hal/sam3u1c/flash_efc.c **** # define EFC     EFC0
 102:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
 103:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        2
 104:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash 0 base address. */
 105:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_ADDR     IFLASH0_ADDR
 106:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
 107:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
 108:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
 109:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
 110:.././hal/sam3u1c/flash_efc.c **** #elif (SAM3SD8)
 111:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
 112:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        3
 113:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
 114:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
 115:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
 116:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
 117:.././hal/sam3u1c/flash_efc.c **** #elif (SAM4C32 || SAM4CMP32 || SAM4CMS32)
 118:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number SAM4C(M)32. */
 119:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        3
 120:.././hal/sam3u1c/flash_efc.c **** #else
 121:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
 122:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        2
 123:.././hal/sam3u1c/flash_efc.c **** #endif
 124:.././hal/sam3u1c/flash_efc.c **** 
 125:.././hal/sam3u1c/flash_efc.c **** #if (SAM4C || SAM4CP || SAM4CM)
 126:.././hal/sam3u1c/flash_efc.c **** #if (SAM4C32 || SAM4CMP32 || SAM4CMS32)
 127:.././hal/sam3u1c/flash_efc.c **** # define EFC     EFC0
 128:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash 0 base address. */
 129:.././hal/sam3u1c/flash_efc.c **** # define IFLASH0_ADDR    IFLASH0_CNC_ADDR
 130:.././hal/sam3u1c/flash_efc.c **** # define IFLASH1_ADDR    IFLASH1_CNC_ADDR
 131:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_ADDR     IFLASH0_ADDR
 132:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
 133:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
 134:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
 135:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
 136:.././hal/sam3u1c/flash_efc.c **** #else
 137:.././hal/sam3u1c/flash_efc.c **** #define IFLASH_ADDR  IFLASH_CNC_ADDR
 138:.././hal/sam3u1c/flash_efc.c **** #endif
 139:.././hal/sam3u1c/flash_efc.c **** #endif
 140:.././hal/sam3u1c/flash_efc.c **** 
 141:.././hal/sam3u1c/flash_efc.c **** /* Flash page buffer for alignment */
 142:.././hal/sam3u1c/flash_efc.c **** static uint32_t gs_ul_page_buffer[IFLASH_PAGE_SIZE / sizeof(uint32_t)];
 143:.././hal/sam3u1c/flash_efc.c **** 
 144:.././hal/sam3u1c/flash_efc.c **** /**
 145:.././hal/sam3u1c/flash_efc.c ****  * \brief Translate the given flash address to page and offset values.
 146:.././hal/sam3u1c/flash_efc.c ****  * \note pus_page and pus_offset must not be null in order to store the
 147:.././hal/sam3u1c/flash_efc.c ****  * corresponding values.
 148:.././hal/sam3u1c/flash_efc.c ****  *
 149:.././hal/sam3u1c/flash_efc.c ****  * \param pp_efc Pointer to an EFC pointer.
 150:.././hal/sam3u1c/flash_efc.c ****  * \param ul_addr Address to translate.
 151:.././hal/sam3u1c/flash_efc.c ****  * \param pus_page The first page accessed.
 152:.././hal/sam3u1c/flash_efc.c ****  * \param pus_offset Byte offset in the first page.
 153:.././hal/sam3u1c/flash_efc.c ****  */
 154:.././hal/sam3u1c/flash_efc.c **** static void translate_address(Efc **pp_efc, uint32_t ul_addr,
 155:.././hal/sam3u1c/flash_efc.c **** 		uint16_t *pus_page, uint16_t *pus_offset)
 156:.././hal/sam3u1c/flash_efc.c **** {
 220              	 .loc 3 156 0
 221              	 .cfi_startproc
 222              	 
 223              	 
 224              	 
 225 0000 80B4     	 push {r7}
 226              	.LCFI10:
 227              	 .cfi_def_cfa_offset 4
 228              	 .cfi_offset 7,-4
 229 0002 87B0     	 sub sp,sp,#28
 230              	.LCFI11:
 231              	 .cfi_def_cfa_offset 32
 232 0004 00AF     	 add r7,sp,#0
 233              	.LCFI12:
 234              	 .cfi_def_cfa_register 7
 235 0006 F860     	 str r0,[r7,#12]
 236 0008 B960     	 str r1,[r7,#8]
 237 000a 7A60     	 str r2,[r7,#4]
 238 000c 3B60     	 str r3,[r7]
 157:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 158:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 159:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_offset;
 160:.././hal/sam3u1c/flash_efc.c **** 
 161:.././hal/sam3u1c/flash_efc.c **** #if (SAM3XA || SAM3U4)
 162:.././hal/sam3u1c/flash_efc.c **** 	if (ul_addr >= IFLASH1_ADDR) {
 163:.././hal/sam3u1c/flash_efc.c **** 		p_efc = EFC1;
 164:.././hal/sam3u1c/flash_efc.c **** 		us_page = (ul_addr - IFLASH1_ADDR) / IFLASH1_PAGE_SIZE;
 165:.././hal/sam3u1c/flash_efc.c **** 		us_offset = (ul_addr - IFLASH1_ADDR) % IFLASH1_PAGE_SIZE;
 166:.././hal/sam3u1c/flash_efc.c **** 	} else {
 167:.././hal/sam3u1c/flash_efc.c **** 		p_efc = EFC0;
 168:.././hal/sam3u1c/flash_efc.c **** 		us_page = (ul_addr - IFLASH0_ADDR) / IFLASH0_PAGE_SIZE;
 169:.././hal/sam3u1c/flash_efc.c **** 		us_offset = (ul_addr - IFLASH0_ADDR) % IFLASH0_PAGE_SIZE;
 170:.././hal/sam3u1c/flash_efc.c **** 	}
 171:.././hal/sam3u1c/flash_efc.c **** #elif (SAM4SD16 || SAM4SD32 || SAM4C32 || SAM4CMP32 || SAM4CMS32)
 172:.././hal/sam3u1c/flash_efc.c **** 	uint32_t uc_gpnvm2;
 173:.././hal/sam3u1c/flash_efc.c **** 	uc_gpnvm2 = flash_is_gpnvm_set(2);
 174:.././hal/sam3u1c/flash_efc.c **** 	if (ul_addr >= IFLASH1_ADDR) {
 175:.././hal/sam3u1c/flash_efc.c **** 		if(uc_gpnvm2 == FLASH_RC_YES) {
 176:.././hal/sam3u1c/flash_efc.c **** 			p_efc = EFC0;
 177:.././hal/sam3u1c/flash_efc.c **** 		} else {
 178:.././hal/sam3u1c/flash_efc.c **** 			p_efc = EFC1;
 179:.././hal/sam3u1c/flash_efc.c **** 		}
 180:.././hal/sam3u1c/flash_efc.c **** 		us_page = (ul_addr - IFLASH1_ADDR) / IFLASH1_PAGE_SIZE;
 181:.././hal/sam3u1c/flash_efc.c **** 		us_offset = (ul_addr - IFLASH1_ADDR) % IFLASH1_PAGE_SIZE;
 182:.././hal/sam3u1c/flash_efc.c **** 	} else {
 183:.././hal/sam3u1c/flash_efc.c **** 		if(uc_gpnvm2 == FLASH_RC_YES) {
 184:.././hal/sam3u1c/flash_efc.c **** 			p_efc = EFC1;
 185:.././hal/sam3u1c/flash_efc.c **** 		} else {
 186:.././hal/sam3u1c/flash_efc.c **** 			p_efc = EFC0;
 187:.././hal/sam3u1c/flash_efc.c **** 		}
 188:.././hal/sam3u1c/flash_efc.c **** 		us_page = (ul_addr - IFLASH0_ADDR) / IFLASH0_PAGE_SIZE;
 189:.././hal/sam3u1c/flash_efc.c **** 		us_offset = (ul_addr - IFLASH0_ADDR) % IFLASH0_PAGE_SIZE;
 190:.././hal/sam3u1c/flash_efc.c **** 	}
 191:.././hal/sam3u1c/flash_efc.c **** #elif (SAM3SD8)
 192:.././hal/sam3u1c/flash_efc.c **** 	p_efc = EFC;
 193:.././hal/sam3u1c/flash_efc.c **** 	us_page = (ul_addr - IFLASH0_ADDR) / IFLASH0_PAGE_SIZE;
 194:.././hal/sam3u1c/flash_efc.c **** 	us_offset = (ul_addr - IFLASH0_ADDR) % IFLASH0_PAGE_SIZE;
 195:.././hal/sam3u1c/flash_efc.c **** #else
 196:.././hal/sam3u1c/flash_efc.c **** 	Assert(ul_addr >= IFLASH_ADDR);
 197:.././hal/sam3u1c/flash_efc.c **** 	Assert(ul_addr <= (IFLASH_ADDR + IFLASH_SIZE));
 198:.././hal/sam3u1c/flash_efc.c **** 
 199:.././hal/sam3u1c/flash_efc.c **** 	p_efc = EFC;
 239              	 .loc 3 199 0
 240 000e 114B     	 ldr r3,.L28
 241 0010 7B61     	 str r3,[r7,#20]
 200:.././hal/sam3u1c/flash_efc.c **** 	us_page = (ul_addr - IFLASH_ADDR) / IFLASH_PAGE_SIZE;
 242              	 .loc 3 200 0
 243 0012 BB68     	 ldr r3,[r7,#8]
 244 0014 A3F50023 	 sub r3,r3,#524288
 245 0018 1B0A     	 lsrs r3,r3,#8
 246 001a 7B82     	 strh r3,[r7,#18]
 201:.././hal/sam3u1c/flash_efc.c **** 	us_offset = (ul_addr - IFLASH_ADDR) % IFLASH_PAGE_SIZE;
 247              	 .loc 3 201 0
 248 001c BB68     	 ldr r3,[r7,#8]
 249 001e 9BB2     	 uxth r3,r3
 250 0020 DBB2     	 uxtb r3,r3
 251 0022 3B82     	 strh r3,[r7,#16]
 202:.././hal/sam3u1c/flash_efc.c **** #endif
 203:.././hal/sam3u1c/flash_efc.c **** 
 204:.././hal/sam3u1c/flash_efc.c **** 	/* Store values */
 205:.././hal/sam3u1c/flash_efc.c **** 	if (pp_efc) {
 252              	 .loc 3 205 0
 253 0024 FB68     	 ldr r3,[r7,#12]
 254 0026 002B     	 cmp r3,#0
 255 0028 02D0     	 beq .L24
 206:.././hal/sam3u1c/flash_efc.c **** 		*pp_efc = p_efc;
 256              	 .loc 3 206 0
 257 002a FB68     	 ldr r3,[r7,#12]
 258 002c 7A69     	 ldr r2,[r7,#20]
 259 002e 1A60     	 str r2,[r3]
 260              	.L24:
 207:.././hal/sam3u1c/flash_efc.c **** 	}
 208:.././hal/sam3u1c/flash_efc.c **** 
 209:.././hal/sam3u1c/flash_efc.c **** 	if (pus_page) {
 261              	 .loc 3 209 0
 262 0030 7B68     	 ldr r3,[r7,#4]
 263 0032 002B     	 cmp r3,#0
 264 0034 02D0     	 beq .L25
 210:.././hal/sam3u1c/flash_efc.c **** 		*pus_page = us_page;
 265              	 .loc 3 210 0
 266 0036 7B68     	 ldr r3,[r7,#4]
 267 0038 7A8A     	 ldrh r2,[r7,#18]
 268 003a 1A80     	 strh r2,[r3]
 269              	.L25:
 211:.././hal/sam3u1c/flash_efc.c **** 	}
 212:.././hal/sam3u1c/flash_efc.c **** 
 213:.././hal/sam3u1c/flash_efc.c **** 	if (pus_offset) {
 270              	 .loc 3 213 0
 271 003c 3B68     	 ldr r3,[r7]
 272 003e 002B     	 cmp r3,#0
 273 0040 02D0     	 beq .L27
 214:.././hal/sam3u1c/flash_efc.c **** 		*pus_offset = us_offset;
 274              	 .loc 3 214 0
 275 0042 3B68     	 ldr r3,[r7]
 276 0044 3A8A     	 ldrh r2,[r7,#16]
 277 0046 1A80     	 strh r2,[r3]
 278              	.L27:
 215:.././hal/sam3u1c/flash_efc.c **** 	}
 216:.././hal/sam3u1c/flash_efc.c **** }
 279              	 .loc 3 216 0
 280 0048 00BF     	 nop
 281 004a 1C37     	 adds r7,r7,#28
 282              	.LCFI13:
 283              	 .cfi_def_cfa_offset 4
 284 004c BD46     	 mov sp,r7
 285              	.LCFI14:
 286              	 .cfi_def_cfa_register 13
 287              	 
 288 004e 80BC     	 pop {r7}
 289              	.LCFI15:
 290              	 .cfi_restore 7
 291              	 .cfi_def_cfa_offset 0
 292 0050 7047     	 bx lr
 293              	.L29:
 294 0052 00BF     	 .align 2
 295              	.L28:
 296 0054 00080E40 	 .word 1074661376
 297              	 .cfi_endproc
 298              	.LFE89:
 300              	 .section .text.compute_address,"ax",%progbits
 301              	 .align 1
 302              	 .syntax unified
 303              	 .thumb
 304              	 .thumb_func
 305              	 .fpu softvfp
 307              	compute_address:
 308              	.LFB90:
 217:.././hal/sam3u1c/flash_efc.c **** 
 218:.././hal/sam3u1c/flash_efc.c **** /**
 219:.././hal/sam3u1c/flash_efc.c ****  * \brief Compute the address of a flash by the given page and offset.
 220:.././hal/sam3u1c/flash_efc.c ****  *
 221:.././hal/sam3u1c/flash_efc.c ****  * \param p_efc Pointer to an EFC instance.
 222:.././hal/sam3u1c/flash_efc.c ****  * \param us_page Page number.
 223:.././hal/sam3u1c/flash_efc.c ****  * \param us_offset Byte offset inside page.
 224:.././hal/sam3u1c/flash_efc.c ****  * \param pul_addr Computed address (optional).
 225:.././hal/sam3u1c/flash_efc.c ****  */
 226:.././hal/sam3u1c/flash_efc.c **** static void compute_address(Efc *p_efc, uint16_t us_page, uint16_t us_offset,
 227:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_addr)
 228:.././hal/sam3u1c/flash_efc.c **** {
 309              	 .loc 3 228 0
 310              	 .cfi_startproc
 311              	 
 312              	 
 313              	 
 314 0000 80B4     	 push {r7}
 315              	.LCFI16:
 316              	 .cfi_def_cfa_offset 4
 317              	 .cfi_offset 7,-4
 318 0002 87B0     	 sub sp,sp,#28
 319              	.LCFI17:
 320              	 .cfi_def_cfa_offset 32
 321 0004 00AF     	 add r7,sp,#0
 322              	.LCFI18:
 323              	 .cfi_def_cfa_register 7
 324 0006 F860     	 str r0,[r7,#12]
 325 0008 7B60     	 str r3,[r7,#4]
 326 000a 0B46     	 mov r3,r1
 327 000c 7B81     	 strh r3,[r7,#10]
 328 000e 1346     	 mov r3,r2
 329 0010 3B81     	 strh r3,[r7,#8]
 229:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_addr;
 230:.././hal/sam3u1c/flash_efc.c **** 
 231:.././hal/sam3u1c/flash_efc.c **** /* Dual bank flash */
 232:.././hal/sam3u1c/flash_efc.c **** #ifdef EFC1
 233:.././hal/sam3u1c/flash_efc.c **** 	/* Compute address */
 234:.././hal/sam3u1c/flash_efc.c **** #if (SAM4SD16 || SAM4SD32 || SAM4C32 || SAM4CMP32 || SAM4CMS32)
 235:.././hal/sam3u1c/flash_efc.c **** 	uint32_t uc_gpnvm2;
 236:.././hal/sam3u1c/flash_efc.c **** 	uc_gpnvm2 = flash_is_gpnvm_set(2);
 237:.././hal/sam3u1c/flash_efc.c **** 	if (p_efc == EFC0) {
 238:.././hal/sam3u1c/flash_efc.c **** 		if(uc_gpnvm2 == FLASH_RC_YES) {
 239:.././hal/sam3u1c/flash_efc.c **** 			ul_addr = IFLASH1_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 240:.././hal/sam3u1c/flash_efc.c **** 		} else {
 241:.././hal/sam3u1c/flash_efc.c **** 			ul_addr = IFLASH0_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 242:.././hal/sam3u1c/flash_efc.c **** 		}
 243:.././hal/sam3u1c/flash_efc.c **** 	} else {
 244:.././hal/sam3u1c/flash_efc.c **** 		if(uc_gpnvm2 == FLASH_RC_YES) {
 245:.././hal/sam3u1c/flash_efc.c **** 			ul_addr = IFLASH0_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 246:.././hal/sam3u1c/flash_efc.c **** 		} else {
 247:.././hal/sam3u1c/flash_efc.c **** 			ul_addr = IFLASH1_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 248:.././hal/sam3u1c/flash_efc.c **** 		}
 249:.././hal/sam3u1c/flash_efc.c **** 	}
 250:.././hal/sam3u1c/flash_efc.c **** #else
 251:.././hal/sam3u1c/flash_efc.c **** 	ul_addr = (p_efc == EFC0) ?
 252:.././hal/sam3u1c/flash_efc.c **** 			IFLASH0_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset :
 253:.././hal/sam3u1c/flash_efc.c **** 			IFLASH1_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 254:.././hal/sam3u1c/flash_efc.c **** #endif
 255:.././hal/sam3u1c/flash_efc.c **** /* One bank flash */
 256:.././hal/sam3u1c/flash_efc.c **** #else
 257:.././hal/sam3u1c/flash_efc.c **** 	/* avoid Cppcheck Warning */
 258:.././hal/sam3u1c/flash_efc.c **** 	UNUSED(p_efc);
 259:.././hal/sam3u1c/flash_efc.c **** 	/* Compute address */
 260:.././hal/sam3u1c/flash_efc.c **** 	ul_addr = IFLASH_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 330              	 .loc 3 260 0
 331 0012 7B89     	 ldrh r3,[r7,#10]
 332 0014 03F50063 	 add r3,r3,#2048
 333 0018 1A02     	 lsls r2,r3,#8
 334 001a 3B89     	 ldrh r3,[r7,#8]
 335 001c 1344     	 add r3,r3,r2
 336 001e 7B61     	 str r3,[r7,#20]
 261:.././hal/sam3u1c/flash_efc.c **** #endif
 262:.././hal/sam3u1c/flash_efc.c **** 
 263:.././hal/sam3u1c/flash_efc.c **** 	/* Store result */
 264:.././hal/sam3u1c/flash_efc.c **** 	if (pul_addr != NULL) {
 337              	 .loc 3 264 0
 338 0020 7B68     	 ldr r3,[r7,#4]
 339 0022 002B     	 cmp r3,#0
 340 0024 02D0     	 beq .L32
 265:.././hal/sam3u1c/flash_efc.c **** 		*pul_addr = ul_addr;
 341              	 .loc 3 265 0
 342 0026 7B68     	 ldr r3,[r7,#4]
 343 0028 7A69     	 ldr r2,[r7,#20]
 344 002a 1A60     	 str r2,[r3]
 345              	.L32:
 266:.././hal/sam3u1c/flash_efc.c **** 	}
 267:.././hal/sam3u1c/flash_efc.c **** }
 346              	 .loc 3 267 0
 347 002c 00BF     	 nop
 348 002e 1C37     	 adds r7,r7,#28
 349              	.LCFI19:
 350              	 .cfi_def_cfa_offset 4
 351 0030 BD46     	 mov sp,r7
 352              	.LCFI20:
 353              	 .cfi_def_cfa_register 13
 354              	 
 355 0032 80BC     	 pop {r7}
 356              	.LCFI21:
 357              	 .cfi_restore 7
 358              	 .cfi_def_cfa_offset 0
 359 0034 7047     	 bx lr
 360              	 .cfi_endproc
 361              	.LFE90:
 363              	 .section .text.compute_lock_range,"ax",%progbits
 364              	 .align 1
 365              	 .syntax unified
 366              	 .thumb
 367              	 .thumb_func
 368              	 .fpu softvfp
 370              	compute_lock_range:
 371              	.LFB91:
 268:.././hal/sam3u1c/flash_efc.c **** 
 269:.././hal/sam3u1c/flash_efc.c **** /**
 270:.././hal/sam3u1c/flash_efc.c ****  * \brief Compute the lock range associated with the given address range.
 271:.././hal/sam3u1c/flash_efc.c ****  *
 272:.././hal/sam3u1c/flash_efc.c ****  * \param ul_start Start address of lock range.
 273:.././hal/sam3u1c/flash_efc.c ****  * \param ul_end End address of lock range.
 274:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_start Actual start address of lock range.
 275:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_end Actual end address of lock range.
 276:.././hal/sam3u1c/flash_efc.c ****  */
 277:.././hal/sam3u1c/flash_efc.c **** static void compute_lock_range(uint32_t ul_start, uint32_t ul_end,
 278:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_actual_start, uint32_t *pul_actual_end)
 279:.././hal/sam3u1c/flash_efc.c **** {
 372              	 .loc 3 279 0
 373              	 .cfi_startproc
 374              	 
 375              	 
 376              	 
 377 0000 80B4     	 push {r7}
 378              	.LCFI22:
 379              	 .cfi_def_cfa_offset 4
 380              	 .cfi_offset 7,-4
 381 0002 87B0     	 sub sp,sp,#28
 382              	.LCFI23:
 383              	 .cfi_def_cfa_offset 32
 384 0004 00AF     	 add r7,sp,#0
 385              	.LCFI24:
 386              	 .cfi_def_cfa_register 7
 387 0006 F860     	 str r0,[r7,#12]
 388 0008 B960     	 str r1,[r7,#8]
 389 000a 7A60     	 str r2,[r7,#4]
 390 000c 3B60     	 str r3,[r7]
 280:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_actual_start, ul_actual_end;
 281:.././hal/sam3u1c/flash_efc.c **** 
 282:.././hal/sam3u1c/flash_efc.c **** 	ul_actual_start = ul_start - (ul_start % IFLASH_LOCK_REGION_SIZE);
 391              	 .loc 3 282 0
 392 000e FB68     	 ldr r3,[r7,#12]
 393 0010 23F4FF53 	 bic r3,r3,#8160
 394 0014 23F01F03 	 bic r3,r3,#31
 395 0018 7B61     	 str r3,[r7,#20]
 283:.././hal/sam3u1c/flash_efc.c **** 	ul_actual_end = ul_end - (ul_end % IFLASH_LOCK_REGION_SIZE) +
 396              	 .loc 3 283 0
 397 001a BB68     	 ldr r3,[r7,#8]
 398 001c 23F4FF53 	 bic r3,r3,#8160
 399 0020 23F01F03 	 bic r3,r3,#31
 400 0024 03F5FF53 	 add r3,r3,#8160
 401 0028 1F33     	 adds r3,r3,#31
 402 002a 3B61     	 str r3,[r7,#16]
 284:.././hal/sam3u1c/flash_efc.c **** 			IFLASH_LOCK_REGION_SIZE - 1;
 285:.././hal/sam3u1c/flash_efc.c **** 
 286:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_start) {
 403              	 .loc 3 286 0
 404 002c 7B68     	 ldr r3,[r7,#4]
 405 002e 002B     	 cmp r3,#0
 406 0030 02D0     	 beq .L34
 287:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_start = ul_actual_start;
 407              	 .loc 3 287 0
 408 0032 7B68     	 ldr r3,[r7,#4]
 409 0034 7A69     	 ldr r2,[r7,#20]
 410 0036 1A60     	 str r2,[r3]
 411              	.L34:
 288:.././hal/sam3u1c/flash_efc.c **** 	}
 289:.././hal/sam3u1c/flash_efc.c **** 
 290:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_end) {
 412              	 .loc 3 290 0
 413 0038 3B68     	 ldr r3,[r7]
 414 003a 002B     	 cmp r3,#0
 415 003c 02D0     	 beq .L36
 291:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_end = ul_actual_end;
 416              	 .loc 3 291 0
 417 003e 3B68     	 ldr r3,[r7]
 418 0040 3A69     	 ldr r2,[r7,#16]
 419 0042 1A60     	 str r2,[r3]
 420              	.L36:
 292:.././hal/sam3u1c/flash_efc.c **** 	}
 293:.././hal/sam3u1c/flash_efc.c **** }
 421              	 .loc 3 293 0
 422 0044 00BF     	 nop
 423 0046 1C37     	 adds r7,r7,#28
 424              	.LCFI25:
 425              	 .cfi_def_cfa_offset 4
 426 0048 BD46     	 mov sp,r7
 427              	.LCFI26:
 428              	 .cfi_def_cfa_register 13
 429              	 
 430 004a 80BC     	 pop {r7}
 431              	.LCFI27:
 432              	 .cfi_restore 7
 433              	 .cfi_def_cfa_offset 0
 434 004c 7047     	 bx lr
 435              	 .cfi_endproc
 436              	.LFE91:
 438              	 .section .text.flash_init,"ax",%progbits
 439              	 .align 1
 440              	 .global flash_init
 441              	 .syntax unified
 442              	 .thumb
 443              	 .thumb_func
 444              	 .fpu softvfp
 446              	flash_init:
 447              	.LFB92:
 294:.././hal/sam3u1c/flash_efc.c **** 
 295:.././hal/sam3u1c/flash_efc.c **** /**
 296:.././hal/sam3u1c/flash_efc.c ****  * \brief Initialize the flash service.
 297:.././hal/sam3u1c/flash_efc.c ****  *
 298:.././hal/sam3u1c/flash_efc.c ****  * \param ul_mode FLASH_ACCESS_MODE_128 or FLASH_ACCESS_MODE_64.
 299:.././hal/sam3u1c/flash_efc.c ****  * \param ul_fws The number of wait states in cycle (no shift).
 300:.././hal/sam3u1c/flash_efc.c ****  *
 301:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 302:.././hal/sam3u1c/flash_efc.c ****  */
 303:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_init(uint32_t ul_mode, uint32_t ul_fws)
 304:.././hal/sam3u1c/flash_efc.c **** {
 448              	 .loc 3 304 0
 449              	 .cfi_startproc
 450              	 
 451              	 
 452 0000 80B5     	 push {r7,lr}
 453              	.LCFI28:
 454              	 .cfi_def_cfa_offset 8
 455              	 .cfi_offset 7,-8
 456              	 .cfi_offset 14,-4
 457 0002 82B0     	 sub sp,sp,#8
 458              	.LCFI29:
 459              	 .cfi_def_cfa_offset 16
 460 0004 00AF     	 add r7,sp,#0
 461              	.LCFI30:
 462              	 .cfi_def_cfa_register 7
 463 0006 7860     	 str r0,[r7,#4]
 464 0008 3960     	 str r1,[r7]
 305:.././hal/sam3u1c/flash_efc.c **** 	efc_init(EFC, ul_mode, ul_fws);
 465              	 .loc 3 305 0
 466 000a 3A68     	 ldr r2,[r7]
 467 000c 7968     	 ldr r1,[r7,#4]
 468 000e 0448     	 ldr r0,.L39
 469 0010 044B     	 ldr r3,.L39+4
 470 0012 9847     	 blx r3
 471              	.LVL2:
 306:.././hal/sam3u1c/flash_efc.c **** 
 307:.././hal/sam3u1c/flash_efc.c **** #ifdef EFC1
 308:.././hal/sam3u1c/flash_efc.c **** 	efc_init(EFC1, ul_mode, ul_fws);
 309:.././hal/sam3u1c/flash_efc.c **** #endif
 310:.././hal/sam3u1c/flash_efc.c **** 
 311:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 472              	 .loc 3 311 0
 473 0014 0023     	 movs r3,#0
 312:.././hal/sam3u1c/flash_efc.c **** }
 474              	 .loc 3 312 0
 475 0016 1846     	 mov r0,r3
 476 0018 0837     	 adds r7,r7,#8
 477              	.LCFI31:
 478              	 .cfi_def_cfa_offset 8
 479 001a BD46     	 mov sp,r7
 480              	.LCFI32:
 481              	 .cfi_def_cfa_register 13
 482              	 
 483 001c 80BD     	 pop {r7,pc}
 484              	.L40:
 485 001e 00BF     	 .align 2
 486              	.L39:
 487 0020 00080E40 	 .word 1074661376
 488 0024 00000000 	 .word efc_init
 489              	 .cfi_endproc
 490              	.LFE92:
 492              	 .section .text.flash_set_wait_state,"ax",%progbits
 493              	 .align 1
 494              	 .global flash_set_wait_state
 495              	 .syntax unified
 496              	 .thumb
 497              	 .thumb_func
 498              	 .fpu softvfp
 500              	flash_set_wait_state:
 501              	.LFB93:
 313:.././hal/sam3u1c/flash_efc.c **** 
 314:.././hal/sam3u1c/flash_efc.c **** /**
 315:.././hal/sam3u1c/flash_efc.c ****  * \brief Set flash wait state.
 316:.././hal/sam3u1c/flash_efc.c ****  *
 317:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 318:.././hal/sam3u1c/flash_efc.c ****  * \param ul_fws The number of wait states in cycle (no shift).
 319:.././hal/sam3u1c/flash_efc.c ****  *
 320:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 321:.././hal/sam3u1c/flash_efc.c ****  */
 322:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_set_wait_state(uint32_t ul_address, uint32_t ul_fws)
 323:.././hal/sam3u1c/flash_efc.c **** {
 502              	 .loc 3 323 0
 503              	 .cfi_startproc
 504              	 
 505              	 
 506 0000 90B5     	 push {r4,r7,lr}
 507              	.LCFI33:
 508              	 .cfi_def_cfa_offset 12
 509              	 .cfi_offset 4,-12
 510              	 .cfi_offset 7,-8
 511              	 .cfi_offset 14,-4
 512 0002 85B0     	 sub sp,sp,#20
 513              	.LCFI34:
 514              	 .cfi_def_cfa_offset 32
 515 0004 00AF     	 add r7,sp,#0
 516              	.LCFI35:
 517              	 .cfi_def_cfa_register 7
 518 0006 7860     	 str r0,[r7,#4]
 519 0008 3960     	 str r1,[r7]
 324:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 325:.././hal/sam3u1c/flash_efc.c **** 
 326:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 520              	 .loc 3 326 0
 521 000a 07F10C00 	 add r0,r7,#12
 522 000e 0023     	 movs r3,#0
 523 0010 0022     	 movs r2,#0
 524 0012 7968     	 ldr r1,[r7,#4]
 525 0014 054C     	 ldr r4,.L43
 526 0016 A047     	 blx r4
 527              	.LVL3:
 327:.././hal/sam3u1c/flash_efc.c **** 	efc_set_wait_state(p_efc, ul_fws);
 528              	 .loc 3 327 0
 529 0018 FB68     	 ldr r3,[r7,#12]
 530 001a 3968     	 ldr r1,[r7]
 531 001c 1846     	 mov r0,r3
 532 001e 044B     	 ldr r3,.L43+4
 533 0020 9847     	 blx r3
 534              	.LVL4:
 328:.././hal/sam3u1c/flash_efc.c **** 
 329:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 535              	 .loc 3 329 0
 536 0022 0023     	 movs r3,#0
 330:.././hal/sam3u1c/flash_efc.c **** }
 537              	 .loc 3 330 0
 538 0024 1846     	 mov r0,r3
 539 0026 1437     	 adds r7,r7,#20
 540              	.LCFI36:
 541              	 .cfi_def_cfa_offset 12
 542 0028 BD46     	 mov sp,r7
 543              	.LCFI37:
 544              	 .cfi_def_cfa_register 13
 545              	 
 546 002a 90BD     	 pop {r4,r7,pc}
 547              	.L44:
 548              	 .align 2
 549              	.L43:
 550 002c 00000000 	 .word translate_address
 551 0030 00000000 	 .word efc_set_wait_state
 552              	 .cfi_endproc
 553              	.LFE93:
 555              	 .section .text.flash_set_wait_state_adaptively,"ax",%progbits
 556              	 .align 1
 557              	 .global flash_set_wait_state_adaptively
 558              	 .syntax unified
 559              	 .thumb
 560              	 .thumb_func
 561              	 .fpu softvfp
 563              	flash_set_wait_state_adaptively:
 564              	.LFB94:
 331:.././hal/sam3u1c/flash_efc.c **** 
 332:.././hal/sam3u1c/flash_efc.c **** /**
 333:.././hal/sam3u1c/flash_efc.c ****  * \brief Set flash wait state.
 334:.././hal/sam3u1c/flash_efc.c ****  *
 335:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 336:.././hal/sam3u1c/flash_efc.c ****  * \param ul_fws The number of wait states in cycle (no shift).
 337:.././hal/sam3u1c/flash_efc.c ****  *
 338:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 339:.././hal/sam3u1c/flash_efc.c ****  */
 340:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_set_wait_state_adaptively(uint32_t ul_address)
 341:.././hal/sam3u1c/flash_efc.c **** {
 565              	 .loc 3 341 0
 566              	 .cfi_startproc
 567              	 
 568              	 
 569 0000 90B5     	 push {r4,r7,lr}
 570              	.LCFI38:
 571              	 .cfi_def_cfa_offset 12
 572              	 .cfi_offset 4,-12
 573              	 .cfi_offset 7,-8
 574              	 .cfi_offset 14,-4
 575 0002 85B0     	 sub sp,sp,#20
 576              	.LCFI39:
 577              	 .cfi_def_cfa_offset 32
 578 0004 00AF     	 add r7,sp,#0
 579              	.LCFI40:
 580              	 .cfi_def_cfa_register 7
 581 0006 7860     	 str r0,[r7,#4]
 342:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 343:.././hal/sam3u1c/flash_efc.c **** 	uint32_t clock = sysclk_get_cpu_hz();
 582              	 .loc 3 343 0
 583 0008 1D4B     	 ldr r3,.L52
 584 000a 9847     	 blx r3
 585              	.LVL5:
 586 000c F860     	 str r0,[r7,#12]
 344:.././hal/sam3u1c/flash_efc.c **** 
 345:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 587              	 .loc 3 345 0
 588 000e 07F10800 	 add r0,r7,#8
 589 0012 0023     	 movs r3,#0
 590 0014 0022     	 movs r2,#0
 591 0016 7968     	 ldr r1,[r7,#4]
 592 0018 1A4C     	 ldr r4,.L52+4
 593 001a A047     	 blx r4
 594              	.LVL6:
 346:.././hal/sam3u1c/flash_efc.c **** 
 347:.././hal/sam3u1c/flash_efc.c **** 	/* Set FWS for embedded Flash access according to operating frequency */
 348:.././hal/sam3u1c/flash_efc.c **** 	if (clock < CHIP_FREQ_FWS_0) {
 595              	 .loc 3 348 0
 596 001c FB68     	 ldr r3,[r7,#12]
 597 001e 1A4A     	 ldr r2,.L52+8
 598 0020 9342     	 cmp r3,r2
 599 0022 05D8     	 bhi .L46
 349:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 0);
 600              	 .loc 3 349 0
 601 0024 BB68     	 ldr r3,[r7,#8]
 602 0026 0021     	 movs r1,#0
 603 0028 1846     	 mov r0,r3
 604 002a 184B     	 ldr r3,.L52+12
 605 002c 9847     	 blx r3
 606              	.LVL7:
 607 002e 22E0     	 b .L47
 608              	.L46:
 350:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_1) {
 609              	 .loc 3 350 0
 610 0030 FB68     	 ldr r3,[r7,#12]
 611 0032 174A     	 ldr r2,.L52+16
 612 0034 9342     	 cmp r3,r2
 613 0036 05D8     	 bhi .L48
 351:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 1);
 614              	 .loc 3 351 0
 615 0038 BB68     	 ldr r3,[r7,#8]
 616 003a 0121     	 movs r1,#1
 617 003c 1846     	 mov r0,r3
 618 003e 134B     	 ldr r3,.L52+12
 619 0040 9847     	 blx r3
 620              	.LVL8:
 621 0042 18E0     	 b .L47
 622              	.L48:
 352:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_2) {
 623              	 .loc 3 352 0
 624 0044 FB68     	 ldr r3,[r7,#12]
 625 0046 134A     	 ldr r2,.L52+20
 626 0048 9342     	 cmp r3,r2
 627 004a 05D8     	 bhi .L49
 353:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 2);
 628              	 .loc 3 353 0
 629 004c BB68     	 ldr r3,[r7,#8]
 630 004e 0221     	 movs r1,#2
 631 0050 1846     	 mov r0,r3
 632 0052 0E4B     	 ldr r3,.L52+12
 633 0054 9847     	 blx r3
 634              	.LVL9:
 635 0056 0EE0     	 b .L47
 636              	.L49:
 354:.././hal/sam3u1c/flash_efc.c **** #if (SAM3XA || SAM3U)
 355:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_3) {
 637              	 .loc 3 355 0
 638 0058 FB68     	 ldr r3,[r7,#12]
 639 005a 0F4A     	 ldr r2,.L52+24
 640 005c 9342     	 cmp r3,r2
 641 005e 05D8     	 bhi .L50
 356:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 3);
 642              	 .loc 3 356 0
 643 0060 BB68     	 ldr r3,[r7,#8]
 644 0062 0321     	 movs r1,#3
 645 0064 1846     	 mov r0,r3
 646 0066 094B     	 ldr r3,.L52+12
 647 0068 9847     	 blx r3
 648              	.LVL10:
 649 006a 04E0     	 b .L47
 650              	.L50:
 357:.././hal/sam3u1c/flash_efc.c **** 	} else {
 358:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 4);
 651              	 .loc 3 358 0
 652 006c BB68     	 ldr r3,[r7,#8]
 653 006e 0421     	 movs r1,#4
 654 0070 1846     	 mov r0,r3
 655 0072 064B     	 ldr r3,.L52+12
 656 0074 9847     	 blx r3
 657              	.LVL11:
 658              	.L47:
 359:.././hal/sam3u1c/flash_efc.c **** 	}
 360:.././hal/sam3u1c/flash_efc.c **** #elif (SAM4S || SAM4E || SAM4N || SAM4C || SAM4CP || SAM4CM)
 361:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_3) {
 362:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 3);
 363:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_4) {
 364:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 4);
 365:.././hal/sam3u1c/flash_efc.c **** 	} else {
 366:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 5);
 367:.././hal/sam3u1c/flash_efc.c **** 	}
 368:.././hal/sam3u1c/flash_efc.c **** #else
 369:.././hal/sam3u1c/flash_efc.c **** 	} else {
 370:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 3);
 371:.././hal/sam3u1c/flash_efc.c **** 	}
 372:.././hal/sam3u1c/flash_efc.c **** #endif
 373:.././hal/sam3u1c/flash_efc.c **** 
 374:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 659              	 .loc 3 374 0
 660 0076 0023     	 movs r3,#0
 375:.././hal/sam3u1c/flash_efc.c **** }
 661              	 .loc 3 375 0
 662 0078 1846     	 mov r0,r3
 663 007a 1437     	 adds r7,r7,#20
 664              	.LCFI41:
 665              	 .cfi_def_cfa_offset 12
 666 007c BD46     	 mov sp,r7
 667              	.LCFI42:
 668              	 .cfi_def_cfa_register 13
 669              	 
 670 007e 90BD     	 pop {r4,r7,pc}
 671              	.L53:
 672              	 .align 2
 673              	.L52:
 674 0080 00000000 	 .word sysclk_get_cpu_hz
 675 0084 00000000 	 .word translate_address
 676 0088 FF356E01 	 .word 23999999
 677 008c 00000000 	 .word efc_set_wait_state
 678 0090 FF596202 	 .word 39999999
 679 0094 FFA14A04 	 .word 71999999
 680 0098 FFBC0105 	 .word 83999999
 681              	 .cfi_endproc
 682              	.LFE94:
 684              	 .section .text.flash_get_wait_state,"ax",%progbits
 685              	 .align 1
 686              	 .global flash_get_wait_state
 687              	 .syntax unified
 688              	 .thumb
 689              	 .thumb_func
 690              	 .fpu softvfp
 692              	flash_get_wait_state:
 693              	.LFB95:
 376:.././hal/sam3u1c/flash_efc.c **** 
 377:.././hal/sam3u1c/flash_efc.c **** /**
 378:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash wait state.
 379:.././hal/sam3u1c/flash_efc.c ****  *
 380:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 381:.././hal/sam3u1c/flash_efc.c ****  *
 382:.././hal/sam3u1c/flash_efc.c ****  * \return The number of wait states in cycle (no shift).
 383:.././hal/sam3u1c/flash_efc.c ****  */
 384:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_wait_state(uint32_t ul_address)
 385:.././hal/sam3u1c/flash_efc.c **** {
 694              	 .loc 3 385 0
 695              	 .cfi_startproc
 696              	 
 697              	 
 698 0000 90B5     	 push {r4,r7,lr}
 699              	.LCFI43:
 700              	 .cfi_def_cfa_offset 12
 701              	 .cfi_offset 4,-12
 702              	 .cfi_offset 7,-8
 703              	 .cfi_offset 14,-4
 704 0002 85B0     	 sub sp,sp,#20
 705              	.LCFI44:
 706              	 .cfi_def_cfa_offset 32
 707 0004 00AF     	 add r7,sp,#0
 708              	.LCFI45:
 709              	 .cfi_def_cfa_register 7
 710 0006 7860     	 str r0,[r7,#4]
 386:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 387:.././hal/sam3u1c/flash_efc.c **** 
 388:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 711              	 .loc 3 388 0
 712 0008 07F10C00 	 add r0,r7,#12
 713 000c 0023     	 movs r3,#0
 714 000e 0022     	 movs r2,#0
 715 0010 7968     	 ldr r1,[r7,#4]
 716 0012 054C     	 ldr r4,.L56
 717 0014 A047     	 blx r4
 718              	.LVL12:
 389:.././hal/sam3u1c/flash_efc.c **** 	return efc_get_wait_state(p_efc);
 719              	 .loc 3 389 0
 720 0016 FB68     	 ldr r3,[r7,#12]
 721 0018 1846     	 mov r0,r3
 722 001a 044B     	 ldr r3,.L56+4
 723 001c 9847     	 blx r3
 724              	.LVL13:
 725 001e 0346     	 mov r3,r0
 390:.././hal/sam3u1c/flash_efc.c **** }
 726              	 .loc 3 390 0
 727 0020 1846     	 mov r0,r3
 728 0022 1437     	 adds r7,r7,#20
 729              	.LCFI46:
 730              	 .cfi_def_cfa_offset 12
 731 0024 BD46     	 mov sp,r7
 732              	.LCFI47:
 733              	 .cfi_def_cfa_register 13
 734              	 
 735 0026 90BD     	 pop {r4,r7,pc}
 736              	.L57:
 737              	 .align 2
 738              	.L56:
 739 0028 00000000 	 .word translate_address
 740 002c 00000000 	 .word efc_get_wait_state
 741              	 .cfi_endproc
 742              	.LFE95:
 744              	 .section .text.flash_get_descriptor,"ax",%progbits
 745              	 .align 1
 746              	 .global flash_get_descriptor
 747              	 .syntax unified
 748              	 .thumb
 749              	 .thumb_func
 750              	 .fpu softvfp
 752              	flash_get_descriptor:
 753              	.LFB96:
 391:.././hal/sam3u1c/flash_efc.c **** 
 392:.././hal/sam3u1c/flash_efc.c **** /**
 393:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash descriptor.
 394:.././hal/sam3u1c/flash_efc.c ****  *
 395:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 396:.././hal/sam3u1c/flash_efc.c ****  * \param pul_flash_descriptor Pointer to a data buffer to store flash descriptor.
 397:.././hal/sam3u1c/flash_efc.c ****  * \param ul_size Data buffer size in DWORD.
 398:.././hal/sam3u1c/flash_efc.c ****  *
 399:.././hal/sam3u1c/flash_efc.c ****  * \return The actual descriptor length.
 400:.././hal/sam3u1c/flash_efc.c ****  */
 401:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_descriptor(uint32_t ul_address,
 402:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_flash_descriptor, uint32_t ul_size)
 403:.././hal/sam3u1c/flash_efc.c **** {
 754              	 .loc 3 403 0
 755              	 .cfi_startproc
 756              	 
 757              	 
 758 0000 90B5     	 push {r4,r7,lr}
 759              	.LCFI48:
 760              	 .cfi_def_cfa_offset 12
 761              	 .cfi_offset 4,-12
 762              	 .cfi_offset 7,-8
 763              	 .cfi_offset 14,-4
 764 0002 89B0     	 sub sp,sp,#36
 765              	.LCFI49:
 766              	 .cfi_def_cfa_offset 48
 767 0004 00AF     	 add r7,sp,#0
 768              	.LCFI50:
 769              	 .cfi_def_cfa_register 7
 770 0006 F860     	 str r0,[r7,#12]
 771 0008 B960     	 str r1,[r7,#8]
 772 000a 7A60     	 str r2,[r7,#4]
 404:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 405:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_tmp;
 406:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_cnt;
 407:.././hal/sam3u1c/flash_efc.c **** 
 408:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 773              	 .loc 3 408 0
 774 000c 07F11400 	 add r0,r7,#20
 775 0010 0023     	 movs r3,#0
 776 0012 0022     	 movs r2,#0
 777 0014 F968     	 ldr r1,[r7,#12]
 778 0016 144C     	 ldr r4,.L64
 779 0018 A047     	 blx r4
 780              	.LVL14:
 409:.././hal/sam3u1c/flash_efc.c **** 
 410:.././hal/sam3u1c/flash_efc.c **** 	/* Command fails */
 411:.././hal/sam3u1c/flash_efc.c **** 	if (FLASH_RC_OK != efc_perform_command(p_efc, EFC_FCMD_GETD, 0)) {
 781              	 .loc 3 411 0
 782 001a 7B69     	 ldr r3,[r7,#20]
 783 001c 0022     	 movs r2,#0
 784 001e 0021     	 movs r1,#0
 785 0020 1846     	 mov r0,r3
 786 0022 124B     	 ldr r3,.L64+4
 787 0024 9847     	 blx r3
 788              	.LVL15:
 789 0026 0346     	 mov r3,r0
 790 0028 002B     	 cmp r3,#0
 791 002a 01D0     	 beq .L59
 412:.././hal/sam3u1c/flash_efc.c **** 		return 0;
 792              	 .loc 3 412 0
 793 002c 0023     	 movs r3,#0
 794 002e 17E0     	 b .L63
 795              	.L59:
 413:.././hal/sam3u1c/flash_efc.c **** 	} else {
 414:.././hal/sam3u1c/flash_efc.c **** 		/* Read until no result */
 415:.././hal/sam3u1c/flash_efc.c **** 		for (ul_cnt = 0;; ul_cnt++) {
 796              	 .loc 3 415 0
 797 0030 0023     	 movs r3,#0
 798 0032 FB61     	 str r3,[r7,#28]
 799              	.L62:
 416:.././hal/sam3u1c/flash_efc.c **** 			ul_tmp = efc_get_result(p_efc);
 800              	 .loc 3 416 0
 801 0034 7B69     	 ldr r3,[r7,#20]
 802 0036 1846     	 mov r0,r3
 803 0038 0D4B     	 ldr r3,.L64+8
 804 003a 9847     	 blx r3
 805              	.LVL16:
 806 003c B861     	 str r0,[r7,#24]
 417:.././hal/sam3u1c/flash_efc.c **** 			if ((ul_size > ul_cnt) && (ul_tmp != 0)) {
 807              	 .loc 3 417 0
 808 003e 7A68     	 ldr r2,[r7,#4]
 809 0040 FB69     	 ldr r3,[r7,#28]
 810 0042 9A42     	 cmp r2,r3
 811 0044 0BD9     	 bls .L61
 812              	 .loc 3 417 0 is_stmt 0 discriminator 1
 813 0046 BB69     	 ldr r3,[r7,#24]
 814 0048 002B     	 cmp r3,#0
 815 004a 08D0     	 beq .L61
 418:.././hal/sam3u1c/flash_efc.c **** 				*pul_flash_descriptor++ = ul_tmp;
 816              	 .loc 3 418 0 is_stmt 1
 817 004c BB68     	 ldr r3,[r7,#8]
 818 004e 1A1D     	 adds r2,r3,#4
 819 0050 BA60     	 str r2,[r7,#8]
 820 0052 BA69     	 ldr r2,[r7,#24]
 821 0054 1A60     	 str r2,[r3]
 415:.././hal/sam3u1c/flash_efc.c **** 			ul_tmp = efc_get_result(p_efc);
 822              	 .loc 3 415 0
 823 0056 FB69     	 ldr r3,[r7,#28]
 824 0058 0133     	 adds r3,r3,#1
 825 005a FB61     	 str r3,[r7,#28]
 416:.././hal/sam3u1c/flash_efc.c **** 			if ((ul_size > ul_cnt) && (ul_tmp != 0)) {
 826              	 .loc 3 416 0
 827 005c EAE7     	 b .L62
 828              	.L61:
 419:.././hal/sam3u1c/flash_efc.c **** 			} else {
 420:.././hal/sam3u1c/flash_efc.c **** 				break;
 421:.././hal/sam3u1c/flash_efc.c **** 			}
 422:.././hal/sam3u1c/flash_efc.c **** 		}
 423:.././hal/sam3u1c/flash_efc.c **** 	}
 424:.././hal/sam3u1c/flash_efc.c **** 
 425:.././hal/sam3u1c/flash_efc.c **** 	return ul_cnt;
 829              	 .loc 3 425 0
 830 005e FB69     	 ldr r3,[r7,#28]
 831              	.L63:
 426:.././hal/sam3u1c/flash_efc.c **** }
 832              	 .loc 3 426 0 discriminator 1
 833 0060 1846     	 mov r0,r3
 834 0062 2437     	 adds r7,r7,#36
 835              	.LCFI51:
 836              	 .cfi_def_cfa_offset 12
 837 0064 BD46     	 mov sp,r7
 838              	.LCFI52:
 839              	 .cfi_def_cfa_register 13
 840              	 
 841 0066 90BD     	 pop {r4,r7,pc}
 842              	.L65:
 843              	 .align 2
 844              	.L64:
 845 0068 00000000 	 .word translate_address
 846 006c 00000000 	 .word efc_perform_command
 847 0070 00000000 	 .word efc_get_result
 848              	 .cfi_endproc
 849              	.LFE96:
 851              	 .section .text.flash_get_page_count,"ax",%progbits
 852              	 .align 1
 853              	 .global flash_get_page_count
 854              	 .syntax unified
 855              	 .thumb
 856              	 .thumb_func
 857              	 .fpu softvfp
 859              	flash_get_page_count:
 860              	.LFB97:
 427:.././hal/sam3u1c/flash_efc.c **** 
 428:.././hal/sam3u1c/flash_efc.c **** /**
 429:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash total page count for the specified bank.
 430:.././hal/sam3u1c/flash_efc.c ****  *
 431:.././hal/sam3u1c/flash_efc.c ****  * \note The flash descriptor must be fetched from flash_get_descriptor
 432:.././hal/sam3u1c/flash_efc.c ****  * function first.
 433:.././hal/sam3u1c/flash_efc.c ****  *
 434:.././hal/sam3u1c/flash_efc.c ****  * \param pul_flash_descriptor Pointer to a flash descriptor.
 435:.././hal/sam3u1c/flash_efc.c ****  *
 436:.././hal/sam3u1c/flash_efc.c ****  * \return The flash total page count.
 437:.././hal/sam3u1c/flash_efc.c ****  */
 438:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_page_count(const uint32_t *pul_flash_descriptor)
 439:.././hal/sam3u1c/flash_efc.c **** {
 861              	 .loc 3 439 0
 862              	 .cfi_startproc
 863              	 
 864              	 
 865              	 
 866 0000 80B4     	 push {r7}
 867              	.LCFI53:
 868              	 .cfi_def_cfa_offset 4
 869              	 .cfi_offset 7,-4
 870 0002 83B0     	 sub sp,sp,#12
 871              	.LCFI54:
 872              	 .cfi_def_cfa_offset 16
 873 0004 00AF     	 add r7,sp,#0
 874              	.LCFI55:
 875              	 .cfi_def_cfa_register 7
 876 0006 7860     	 str r0,[r7,#4]
 440:.././hal/sam3u1c/flash_efc.c **** 	return (pul_flash_descriptor[1] / pul_flash_descriptor[2]);
 877              	 .loc 3 440 0
 878 0008 7B68     	 ldr r3,[r7,#4]
 879 000a 0433     	 adds r3,r3,#4
 880 000c 1A68     	 ldr r2,[r3]
 881 000e 7B68     	 ldr r3,[r7,#4]
 882 0010 0833     	 adds r3,r3,#8
 883 0012 1B68     	 ldr r3,[r3]
 884 0014 B2FBF3F3 	 udiv r3,r2,r3
 441:.././hal/sam3u1c/flash_efc.c **** }
 885              	 .loc 3 441 0
 886 0018 1846     	 mov r0,r3
 887 001a 0C37     	 adds r7,r7,#12
 888              	.LCFI56:
 889              	 .cfi_def_cfa_offset 4
 890 001c BD46     	 mov sp,r7
 891              	.LCFI57:
 892              	 .cfi_def_cfa_register 13
 893              	 
 894 001e 80BC     	 pop {r7}
 895              	.LCFI58:
 896              	 .cfi_restore 7
 897              	 .cfi_def_cfa_offset 0
 898 0020 7047     	 bx lr
 899              	 .cfi_endproc
 900              	.LFE97:
 902              	 .section .text.flash_get_page_count_per_region,"ax",%progbits
 903              	 .align 1
 904              	 .global flash_get_page_count_per_region
 905              	 .syntax unified
 906              	 .thumb
 907              	 .thumb_func
 908              	 .fpu softvfp
 910              	flash_get_page_count_per_region:
 911              	.LFB98:
 442:.././hal/sam3u1c/flash_efc.c **** 
 443:.././hal/sam3u1c/flash_efc.c **** /**
 444:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash page count per region (plane) for the specified bank.
 445:.././hal/sam3u1c/flash_efc.c ****  *
 446:.././hal/sam3u1c/flash_efc.c ****  * \note The flash descriptor must be fetched from flash_get_descriptor
 447:.././hal/sam3u1c/flash_efc.c ****  * function first.
 448:.././hal/sam3u1c/flash_efc.c ****  *
 449:.././hal/sam3u1c/flash_efc.c ****  * \param pul_flash_descriptor Pointer to a flash descriptor.
 450:.././hal/sam3u1c/flash_efc.c ****  *
 451:.././hal/sam3u1c/flash_efc.c ****  * \return The flash page count per region (plane).
 452:.././hal/sam3u1c/flash_efc.c ****  */
 453:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_page_count_per_region(const uint32_t *pul_flash_descriptor)
 454:.././hal/sam3u1c/flash_efc.c **** {
 912              	 .loc 3 454 0
 913              	 .cfi_startproc
 914              	 
 915              	 
 916              	 
 917 0000 80B4     	 push {r7}
 918              	.LCFI59:
 919              	 .cfi_def_cfa_offset 4
 920              	 .cfi_offset 7,-4
 921 0002 83B0     	 sub sp,sp,#12
 922              	.LCFI60:
 923              	 .cfi_def_cfa_offset 16
 924 0004 00AF     	 add r7,sp,#0
 925              	.LCFI61:
 926              	 .cfi_def_cfa_register 7
 927 0006 7860     	 str r0,[r7,#4]
 455:.././hal/sam3u1c/flash_efc.c **** 	return (pul_flash_descriptor[4] / pul_flash_descriptor[2]);
 928              	 .loc 3 455 0
 929 0008 7B68     	 ldr r3,[r7,#4]
 930 000a 1033     	 adds r3,r3,#16
 931 000c 1A68     	 ldr r2,[r3]
 932 000e 7B68     	 ldr r3,[r7,#4]
 933 0010 0833     	 adds r3,r3,#8
 934 0012 1B68     	 ldr r3,[r3]
 935 0014 B2FBF3F3 	 udiv r3,r2,r3
 456:.././hal/sam3u1c/flash_efc.c **** }
 936              	 .loc 3 456 0
 937 0018 1846     	 mov r0,r3
 938 001a 0C37     	 adds r7,r7,#12
 939              	.LCFI62:
 940              	 .cfi_def_cfa_offset 4
 941 001c BD46     	 mov sp,r7
 942              	.LCFI63:
 943              	 .cfi_def_cfa_register 13
 944              	 
 945 001e 80BC     	 pop {r7}
 946              	.LCFI64:
 947              	 .cfi_restore 7
 948              	 .cfi_def_cfa_offset 0
 949 0020 7047     	 bx lr
 950              	 .cfi_endproc
 951              	.LFE98:
 953              	 .section .text.flash_get_region_count,"ax",%progbits
 954              	 .align 1
 955              	 .global flash_get_region_count
 956              	 .syntax unified
 957              	 .thumb
 958              	 .thumb_func
 959              	 .fpu softvfp
 961              	flash_get_region_count:
 962              	.LFB99:
 457:.././hal/sam3u1c/flash_efc.c **** 
 458:.././hal/sam3u1c/flash_efc.c **** /**
 459:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash region (plane) count for the specified bank.
 460:.././hal/sam3u1c/flash_efc.c ****  *
 461:.././hal/sam3u1c/flash_efc.c ****  * \note The flash descriptor must be fetched from flash_get_descriptor
 462:.././hal/sam3u1c/flash_efc.c ****  * function first.
 463:.././hal/sam3u1c/flash_efc.c ****  *
 464:.././hal/sam3u1c/flash_efc.c ****  * \param pul_flash_descriptor Pointer to a flash descriptor.
 465:.././hal/sam3u1c/flash_efc.c ****  *
 466:.././hal/sam3u1c/flash_efc.c ****  * \return The flash region (plane) count.
 467:.././hal/sam3u1c/flash_efc.c ****  */
 468:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_region_count(const uint32_t *pul_flash_descriptor)
 469:.././hal/sam3u1c/flash_efc.c **** {
 963              	 .loc 3 469 0
 964              	 .cfi_startproc
 965              	 
 966              	 
 967              	 
 968 0000 80B4     	 push {r7}
 969              	.LCFI65:
 970              	 .cfi_def_cfa_offset 4
 971              	 .cfi_offset 7,-4
 972 0002 83B0     	 sub sp,sp,#12
 973              	.LCFI66:
 974              	 .cfi_def_cfa_offset 16
 975 0004 00AF     	 add r7,sp,#0
 976              	.LCFI67:
 977              	 .cfi_def_cfa_register 7
 978 0006 7860     	 str r0,[r7,#4]
 470:.././hal/sam3u1c/flash_efc.c **** 	return (pul_flash_descriptor[3]);
 979              	 .loc 3 470 0
 980 0008 7B68     	 ldr r3,[r7,#4]
 981 000a 0C33     	 adds r3,r3,#12
 982 000c 1B68     	 ldr r3,[r3]
 471:.././hal/sam3u1c/flash_efc.c **** }
 983              	 .loc 3 471 0
 984 000e 1846     	 mov r0,r3
 985 0010 0C37     	 adds r7,r7,#12
 986              	.LCFI68:
 987              	 .cfi_def_cfa_offset 4
 988 0012 BD46     	 mov sp,r7
 989              	.LCFI69:
 990              	 .cfi_def_cfa_register 13
 991              	 
 992 0014 80BC     	 pop {r7}
 993              	.LCFI70:
 994              	 .cfi_restore 7
 995              	 .cfi_def_cfa_offset 0
 996 0016 7047     	 bx lr
 997              	 .cfi_endproc
 998              	.LFE99:
 1000              	 .section .text.flash_erase_all,"ax",%progbits
 1001              	 .align 1
 1002              	 .global flash_erase_all
 1003              	 .syntax unified
 1004              	 .thumb
 1005              	 .thumb_func
 1006              	 .fpu softvfp
 1008              	flash_erase_all:
 1009              	.LFB100:
 472:.././hal/sam3u1c/flash_efc.c **** 
 473:.././hal/sam3u1c/flash_efc.c **** /**
 474:.././hal/sam3u1c/flash_efc.c ****  * \brief Erase the entire flash.
 475:.././hal/sam3u1c/flash_efc.c ****  *
 476:.././hal/sam3u1c/flash_efc.c ****  * \note Only the flash bank including ul_address will be erased. If there are
 477:.././hal/sam3u1c/flash_efc.c ****  * two flash banks, we need to call this function twice with each bank start
 478:.././hal/sam3u1c/flash_efc.c ****  * address.
 479:.././hal/sam3u1c/flash_efc.c ****  *
 480:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address  Flash bank start address.
 481:.././hal/sam3u1c/flash_efc.c ****  *
 482:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 483:.././hal/sam3u1c/flash_efc.c ****  */
 484:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_erase_all(uint32_t ul_address)
 485:.././hal/sam3u1c/flash_efc.c **** {
 1010              	 .loc 3 485 0
 1011              	 .cfi_startproc
 1012              	 
 1013              	 
 1014 0000 90B5     	 push {r4,r7,lr}
 1015              	.LCFI71:
 1016              	 .cfi_def_cfa_offset 12
 1017              	 .cfi_offset 4,-12
 1018              	 .cfi_offset 7,-8
 1019              	 .cfi_offset 14,-4
 1020 0002 85B0     	 sub sp,sp,#20
 1021              	.LCFI72:
 1022              	 .cfi_def_cfa_offset 32
 1023 0004 00AF     	 add r7,sp,#0
 1024              	.LCFI73:
 1025              	 .cfi_def_cfa_register 7
 1026 0006 7860     	 str r0,[r7,#4]
 486:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 487:.././hal/sam3u1c/flash_efc.c **** 
 488:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 1027              	 .loc 3 488 0
 1028 0008 07F10C00 	 add r0,r7,#12
 1029 000c 0023     	 movs r3,#0
 1030 000e 0022     	 movs r2,#0
 1031 0010 7968     	 ldr r1,[r7,#4]
 1032 0012 094C     	 ldr r4,.L76
 1033 0014 A047     	 blx r4
 1034              	.LVL17:
 489:.././hal/sam3u1c/flash_efc.c **** 
 490:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(p_efc, EFC_FCMD_EA, 0)) {
 1035              	 .loc 3 490 0
 1036 0016 FB68     	 ldr r3,[r7,#12]
 1037 0018 0022     	 movs r2,#0
 1038 001a 0521     	 movs r1,#5
 1039 001c 1846     	 mov r0,r3
 1040 001e 074B     	 ldr r3,.L76+4
 1041 0020 9847     	 blx r3
 1042              	.LVL18:
 1043 0022 0346     	 mov r3,r0
 1044 0024 002B     	 cmp r3,#0
 1045 0026 01D0     	 beq .L73
 491:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 1046              	 .loc 3 491 0
 1047 0028 1023     	 movs r3,#16
 1048 002a 00E0     	 b .L75
 1049              	.L73:
 492:.././hal/sam3u1c/flash_efc.c **** 	}
 493:.././hal/sam3u1c/flash_efc.c **** 
 494:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 1050              	 .loc 3 494 0
 1051 002c 0023     	 movs r3,#0
 1052              	.L75:
 495:.././hal/sam3u1c/flash_efc.c **** }
 1053              	 .loc 3 495 0 discriminator 1
 1054 002e 1846     	 mov r0,r3
 1055 0030 1437     	 adds r7,r7,#20
 1056              	.LCFI74:
 1057              	 .cfi_def_cfa_offset 12
 1058 0032 BD46     	 mov sp,r7
 1059              	.LCFI75:
 1060              	 .cfi_def_cfa_register 13
 1061              	 
 1062 0034 90BD     	 pop {r4,r7,pc}
 1063              	.L77:
 1064 0036 00BF     	 .align 2
 1065              	.L76:
 1066 0038 00000000 	 .word translate_address
 1067 003c 00000000 	 .word efc_perform_command
 1068              	 .cfi_endproc
 1069              	.LFE100:
 1071              	 .section .text.flash_write,"ax",%progbits
 1072              	 .align 1
 1073              	 .global flash_write
 1074              	 .syntax unified
 1075              	 .thumb
 1076              	 .thumb_func
 1077              	 .fpu softvfp
 1079              	flash_write:
 1080              	.LFB101:
 496:.././hal/sam3u1c/flash_efc.c **** 
 497:.././hal/sam3u1c/flash_efc.c **** #if SAM3SD8
 498:.././hal/sam3u1c/flash_efc.c **** /**
 499:.././hal/sam3u1c/flash_efc.c ****  * \brief Erase the flash by plane.
 500:.././hal/sam3u1c/flash_efc.c ****  *
 501:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash plane start address.
 502:.././hal/sam3u1c/flash_efc.c ****  *
 503:.././hal/sam3u1c/flash_efc.c ****  * \note Erase plane command needs a page number parameter which belongs to
 504:.././hal/sam3u1c/flash_efc.c ****  * the plane to be erased.
 505:.././hal/sam3u1c/flash_efc.c ****  *
 506:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 507:.././hal/sam3u1c/flash_efc.c ****  */
 508:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_erase_plane(uint32_t ul_address)
 509:.././hal/sam3u1c/flash_efc.c **** {
 510:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 511:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 512:.././hal/sam3u1c/flash_efc.c **** 
 513:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, &us_page, NULL);
 514:.././hal/sam3u1c/flash_efc.c **** 
 515:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(p_efc, EFC_FCMD_EPL, us_page)) {
 516:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 517:.././hal/sam3u1c/flash_efc.c **** 	}
 518:.././hal/sam3u1c/flash_efc.c **** 
 519:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 520:.././hal/sam3u1c/flash_efc.c **** }
 521:.././hal/sam3u1c/flash_efc.c **** #endif
 522:.././hal/sam3u1c/flash_efc.c **** 
 523:.././hal/sam3u1c/flash_efc.c **** #if (SAM4S || SAM4E || SAM4N || SAM4C || SAMG || SAM4CP || SAM4CM)
 524:.././hal/sam3u1c/flash_efc.c **** /**
 525:.././hal/sam3u1c/flash_efc.c ****  * \brief Erase the specified pages of flash.
 526:.././hal/sam3u1c/flash_efc.c ****  *
 527:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 528:.././hal/sam3u1c/flash_efc.c ****  *
 529:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 530:.././hal/sam3u1c/flash_efc.c ****  */
 531:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_erase_page(uint32_t ul_address, uint8_t uc_page_num)
 532:.././hal/sam3u1c/flash_efc.c **** {
 533:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 534:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 535:.././hal/sam3u1c/flash_efc.c **** 
 536:.././hal/sam3u1c/flash_efc.c **** 	if (uc_page_num >= IFLASH_ERASE_PAGES_INVALID) {
 537:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 538:.././hal/sam3u1c/flash_efc.c **** 	}
 539:.././hal/sam3u1c/flash_efc.c **** 
 540:.././hal/sam3u1c/flash_efc.c **** 	if (ul_address & (IFLASH_PAGE_SIZE - 1)) {
 541:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 542:.././hal/sam3u1c/flash_efc.c **** 	}
 543:.././hal/sam3u1c/flash_efc.c **** 
 544:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, &us_page, NULL);
 545:.././hal/sam3u1c/flash_efc.c **** 
 546:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(p_efc, EFC_FCMD_EPA,
 547:.././hal/sam3u1c/flash_efc.c **** 					(us_page | uc_page_num))) {
 548:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 549:.././hal/sam3u1c/flash_efc.c **** 	}
 550:.././hal/sam3u1c/flash_efc.c **** 
 551:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 552:.././hal/sam3u1c/flash_efc.c **** }
 553:.././hal/sam3u1c/flash_efc.c **** 
 554:.././hal/sam3u1c/flash_efc.c **** /**
 555:.././hal/sam3u1c/flash_efc.c ****  * \brief Erase the flash sector.
 556:.././hal/sam3u1c/flash_efc.c ****  *
 557:.././hal/sam3u1c/flash_efc.c ****  * \note Erase sector command needs a page number parameter which belongs to
 558:.././hal/sam3u1c/flash_efc.c ****  * the sector to be erased.
 559:.././hal/sam3u1c/flash_efc.c ****  *
 560:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash sector start address.
 561:.././hal/sam3u1c/flash_efc.c ****  *
 562:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 563:.././hal/sam3u1c/flash_efc.c ****  */
 564:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_erase_sector(uint32_t ul_address)
 565:.././hal/sam3u1c/flash_efc.c **** {
 566:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 567:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 568:.././hal/sam3u1c/flash_efc.c **** 
 569:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, &us_page, NULL);
 570:.././hal/sam3u1c/flash_efc.c **** 
 571:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(p_efc, EFC_FCMD_ES, us_page)) {
 572:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 573:.././hal/sam3u1c/flash_efc.c **** 	}
 574:.././hal/sam3u1c/flash_efc.c **** 
 575:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 576:.././hal/sam3u1c/flash_efc.c **** }
 577:.././hal/sam3u1c/flash_efc.c **** #endif
 578:.././hal/sam3u1c/flash_efc.c **** 
 579:.././hal/sam3u1c/flash_efc.c **** /**
 580:.././hal/sam3u1c/flash_efc.c ****  * \brief Write a data buffer on flash.
 581:.././hal/sam3u1c/flash_efc.c ****  *
 582:.././hal/sam3u1c/flash_efc.c ****  * \note This function works in polling mode, and thus only returns when the
 583:.././hal/sam3u1c/flash_efc.c ****  * data has been effectively written.
 584:.././hal/sam3u1c/flash_efc.c ****  * \note For dual bank flash, this function doesn't support cross write from
 585:.././hal/sam3u1c/flash_efc.c ****  * bank 0 to bank 1. In this case, flash_write must be called twice (ie for
 586:.././hal/sam3u1c/flash_efc.c ****  * each bank).
 587:.././hal/sam3u1c/flash_efc.c ****  *
 588:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Write address.
 589:.././hal/sam3u1c/flash_efc.c ****  * \param p_buffer Data buffer.
 590:.././hal/sam3u1c/flash_efc.c ****  * \param ul_size Size of data buffer in bytes.
 591:.././hal/sam3u1c/flash_efc.c ****  * \param ul_erase_flag Flag to set if erase first.
 592:.././hal/sam3u1c/flash_efc.c ****  *
 593:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful, otherwise returns an error code.
 594:.././hal/sam3u1c/flash_efc.c ****  */
 595:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_write(uint32_t ul_address, const void *p_buffer,
 596:.././hal/sam3u1c/flash_efc.c **** 		uint32_t ul_size, uint32_t ul_erase_flag)
 597:.././hal/sam3u1c/flash_efc.c **** {
 1081              	 .loc 3 597 0
 1082              	 .cfi_startproc
 1083              	 
 1084              	 
 1085 0000 90B5     	 push {r4,r7,lr}
 1086              	.LCFI76:
 1087              	 .cfi_def_cfa_offset 12
 1088              	 .cfi_offset 4,-12
 1089              	 .cfi_offset 7,-8
 1090              	 .cfi_offset 14,-4
 1091 0002 8FB0     	 sub sp,sp,#60
 1092              	.LCFI77:
 1093              	 .cfi_def_cfa_offset 72
 1094 0004 00AF     	 add r7,sp,#0
 1095              	.LCFI78:
 1096              	 .cfi_def_cfa_register 7
 1097 0006 F860     	 str r0,[r7,#12]
 1098 0008 B960     	 str r1,[r7,#8]
 1099 000a 7A60     	 str r2,[r7,#4]
 1100 000c 3B60     	 str r3,[r7]
 598:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 599:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_fws_temp;
 600:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 601:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_offset;
 602:.././hal/sam3u1c/flash_efc.c **** 	uint32_t writeSize;
 603:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_page_addr;
 604:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_padding;
 605:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_error;
 606:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_idx;
 607:.././hal/sam3u1c/flash_efc.c **** 	uint32_t *p_aligned_dest;
 608:.././hal/sam3u1c/flash_efc.c **** 	uint8_t *puc_page_buffer = (uint8_t *) gs_ul_page_buffer;
 1101              	 .loc 3 608 0
 1102 000e 4A4B     	 ldr r3,.L88
 1103 0010 BB62     	 str r3,[r7,#40]
 609:.././hal/sam3u1c/flash_efc.c **** 
 610:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, &us_page, &us_offset);
 1104              	 .loc 3 610 0
 1105 0012 07F11403 	 add r3,r7,#20
 1106 0016 07F11602 	 add r2,r7,#22
 1107 001a 07F11800 	 add r0,r7,#24
 1108 001e F968     	 ldr r1,[r7,#12]
 1109 0020 464C     	 ldr r4,.L88+4
 1110 0022 A047     	 blx r4
 1111              	.LVL19:
 611:.././hal/sam3u1c/flash_efc.c **** 
 612:.././hal/sam3u1c/flash_efc.c **** 	/* According to the errata, set the wait state value to 6. */
 613:.././hal/sam3u1c/flash_efc.c **** 	ul_fws_temp = efc_get_wait_state(p_efc);
 1112              	 .loc 3 613 0
 1113 0024 BB69     	 ldr r3,[r7,#24]
 1114 0026 1846     	 mov r0,r3
 1115 0028 454B     	 ldr r3,.L88+8
 1116 002a 9847     	 blx r3
 1117              	.LVL20:
 1118 002c 7862     	 str r0,[r7,#36]
 614:.././hal/sam3u1c/flash_efc.c **** 	efc_set_wait_state(p_efc, 6);
 1119              	 .loc 3 614 0
 1120 002e BB69     	 ldr r3,[r7,#24]
 1121 0030 0621     	 movs r1,#6
 1122 0032 1846     	 mov r0,r3
 1123 0034 434B     	 ldr r3,.L88+12
 1124 0036 9847     	 blx r3
 1125              	.LVL21:
 615:.././hal/sam3u1c/flash_efc.c **** 
 616:.././hal/sam3u1c/flash_efc.c **** 	/* Write all pages */
 617:.././hal/sam3u1c/flash_efc.c **** 	while (ul_size > 0) {
 1126              	 .loc 3 617 0
 1127 0038 71E0     	 b .L79
 1128              	.L86:
 618:.././hal/sam3u1c/flash_efc.c **** 		/* Copy data in temporary buffer to avoid alignment problems. */
 619:.././hal/sam3u1c/flash_efc.c **** 		writeSize = Min((uint32_t) IFLASH_PAGE_SIZE - us_offset,
 1129              	 .loc 3 619 0
 1130 003a BB8A     	 ldrh r3,[r7,#20]
 1131 003c C3F58073 	 rsb r3,r3,#256
 1132 0040 7A68     	 ldr r2,[r7,#4]
 1133 0042 9342     	 cmp r3,r2
 1134 0044 28BF     	 it cs
 1135 0046 1346     	 movcs r3,r2
 1136 0048 3B62     	 str r3,[r7,#32]
 620:.././hal/sam3u1c/flash_efc.c **** 				ul_size);
 621:.././hal/sam3u1c/flash_efc.c **** 		compute_address(p_efc, us_page, 0, &ul_page_addr);
 1137              	 .loc 3 621 0
 1138 004a B869     	 ldr r0,[r7,#24]
 1139 004c F98A     	 ldrh r1,[r7,#22]
 1140 004e 07F11003 	 add r3,r7,#16
 1141 0052 0022     	 movs r2,#0
 1142 0054 3C4C     	 ldr r4,.L88+16
 1143 0056 A047     	 blx r4
 1144              	.LVL22:
 622:.././hal/sam3u1c/flash_efc.c **** 		us_padding = IFLASH_PAGE_SIZE - us_offset - writeSize;
 1145              	 .loc 3 622 0
 1146 0058 BB8A     	 ldrh r3,[r7,#20]
 1147 005a 5B42     	 negs r3,r3
 1148 005c 9AB2     	 uxth r2,r3
 1149 005e 3B6A     	 ldr r3,[r7,#32]
 1150 0060 9BB2     	 uxth r3,r3
 1151 0062 D31A     	 subs r3,r2,r3
 1152 0064 9BB2     	 uxth r3,r3
 1153 0066 03F58073 	 add r3,r3,#256
 1154 006a FB83     	 strh r3,[r7,#30]
 623:.././hal/sam3u1c/flash_efc.c **** 
 624:.././hal/sam3u1c/flash_efc.c **** 		/* Pre-buffer data */
 625:.././hal/sam3u1c/flash_efc.c **** 		memcpy(puc_page_buffer, (void *)ul_page_addr, us_offset);
 1155              	 .loc 3 625 0
 1156 006c 3B69     	 ldr r3,[r7,#16]
 1157 006e 1946     	 mov r1,r3
 1158 0070 BB8A     	 ldrh r3,[r7,#20]
 1159 0072 1A46     	 mov r2,r3
 1160 0074 B86A     	 ldr r0,[r7,#40]
 1161 0076 354B     	 ldr r3,.L88+20
 1162 0078 9847     	 blx r3
 1163              	.LVL23:
 626:.././hal/sam3u1c/flash_efc.c **** 
 627:.././hal/sam3u1c/flash_efc.c **** 		/* Buffer data */
 628:.././hal/sam3u1c/flash_efc.c **** 		memcpy(puc_page_buffer + us_offset, p_buffer, writeSize);
 1164              	 .loc 3 628 0
 1165 007a BB8A     	 ldrh r3,[r7,#20]
 1166 007c 1A46     	 mov r2,r3
 1167 007e BB6A     	 ldr r3,[r7,#40]
 1168 0080 1344     	 add r3,r3,r2
 1169 0082 3A6A     	 ldr r2,[r7,#32]
 1170 0084 B968     	 ldr r1,[r7,#8]
 1171 0086 1846     	 mov r0,r3
 1172 0088 304B     	 ldr r3,.L88+20
 1173 008a 9847     	 blx r3
 1174              	.LVL24:
 629:.././hal/sam3u1c/flash_efc.c **** 
 630:.././hal/sam3u1c/flash_efc.c **** 		/* Post-buffer data */
 631:.././hal/sam3u1c/flash_efc.c **** 		memcpy(puc_page_buffer + us_offset + writeSize,
 1175              	 .loc 3 631 0
 1176 008c BB8A     	 ldrh r3,[r7,#20]
 1177 008e 1A46     	 mov r2,r3
 1178 0090 3B6A     	 ldr r3,[r7,#32]
 1179 0092 1344     	 add r3,r3,r2
 1180 0094 BA6A     	 ldr r2,[r7,#40]
 1181 0096 D018     	 adds r0,r2,r3
 632:.././hal/sam3u1c/flash_efc.c **** 				(void *)(ul_page_addr + us_offset + writeSize),
 1182              	 .loc 3 632 0
 1183 0098 BB8A     	 ldrh r3,[r7,#20]
 1184 009a 1A46     	 mov r2,r3
 1185 009c 3B69     	 ldr r3,[r7,#16]
 1186 009e 1A44     	 add r2,r2,r3
 1187 00a0 3B6A     	 ldr r3,[r7,#32]
 1188 00a2 1344     	 add r3,r3,r2
 631:.././hal/sam3u1c/flash_efc.c **** 				(void *)(ul_page_addr + us_offset + writeSize),
 1189              	 .loc 3 631 0
 1190 00a4 1946     	 mov r1,r3
 1191 00a6 FB8B     	 ldrh r3,[r7,#30]
 1192 00a8 1A46     	 mov r2,r3
 1193 00aa 284B     	 ldr r3,.L88+20
 1194 00ac 9847     	 blx r3
 1195              	.LVL25:
 633:.././hal/sam3u1c/flash_efc.c **** 				us_padding);
 634:.././hal/sam3u1c/flash_efc.c **** 
 635:.././hal/sam3u1c/flash_efc.c **** 		/* Write page.
 636:.././hal/sam3u1c/flash_efc.c **** 		 * Writing 8-bit and 16-bit data is not allowed and may lead to
 637:.././hal/sam3u1c/flash_efc.c **** 		 * unpredictable data corruption.
 638:.././hal/sam3u1c/flash_efc.c **** 		 */
 639:.././hal/sam3u1c/flash_efc.c **** 		p_aligned_dest = (uint32_t *) ul_page_addr;
 1196              	 .loc 3 639 0
 1197 00ae 3B69     	 ldr r3,[r7,#16]
 1198 00b0 FB62     	 str r3,[r7,#44]
 640:.././hal/sam3u1c/flash_efc.c **** 		for (ul_idx = 0; ul_idx < (IFLASH_PAGE_SIZE / sizeof(uint32_t));
 1199              	 .loc 3 640 0
 1200 00b2 0023     	 movs r3,#0
 1201 00b4 3B63     	 str r3,[r7,#48]
 1202 00b6 0AE0     	 b .L80
 1203              	.L81:
 641:.././hal/sam3u1c/flash_efc.c **** 				++ul_idx) {
 642:.././hal/sam3u1c/flash_efc.c **** 			*p_aligned_dest++ = gs_ul_page_buffer[ul_idx];
 1204              	 .loc 3 642 0
 1205 00b8 FB6A     	 ldr r3,[r7,#44]
 1206 00ba 1A1D     	 adds r2,r3,#4
 1207 00bc FA62     	 str r2,[r7,#44]
 1208 00be 1E49     	 ldr r1,.L88
 1209 00c0 3A6B     	 ldr r2,[r7,#48]
 1210 00c2 51F82220 	 ldr r2,[r1,r2,lsl#2]
 1211 00c6 1A60     	 str r2,[r3]
 641:.././hal/sam3u1c/flash_efc.c **** 				++ul_idx) {
 1212              	 .loc 3 641 0
 1213 00c8 3B6B     	 ldr r3,[r7,#48]
 1214 00ca 0133     	 adds r3,r3,#1
 1215 00cc 3B63     	 str r3,[r7,#48]
 1216              	.L80:
 640:.././hal/sam3u1c/flash_efc.c **** 		for (ul_idx = 0; ul_idx < (IFLASH_PAGE_SIZE / sizeof(uint32_t));
 1217              	 .loc 3 640 0 discriminator 1
 1218 00ce 3B6B     	 ldr r3,[r7,#48]
 1219 00d0 3F2B     	 cmp r3,#63
 1220 00d2 F1D9     	 bls .L81
 643:.././hal/sam3u1c/flash_efc.c **** 		}
 644:.././hal/sam3u1c/flash_efc.c **** 
 645:.././hal/sam3u1c/flash_efc.c **** 		if (ul_erase_flag) {
 1221              	 .loc 3 645 0
 1222 00d4 3B68     	 ldr r3,[r7]
 1223 00d6 002B     	 cmp r3,#0
 1224 00d8 07D0     	 beq .L82
 646:.././hal/sam3u1c/flash_efc.c **** 			ul_error = efc_perform_command(p_efc, EFC_FCMD_EWP,
 1225              	 .loc 3 646 0
 1226 00da BB69     	 ldr r3,[r7,#24]
 1227 00dc FA8A     	 ldrh r2,[r7,#22]
 1228 00de 0321     	 movs r1,#3
 1229 00e0 1846     	 mov r0,r3
 1230 00e2 1B4B     	 ldr r3,.L88+24
 1231 00e4 9847     	 blx r3
 1232              	.LVL26:
 1233 00e6 7863     	 str r0,[r7,#52]
 1234 00e8 06E0     	 b .L83
 1235              	.L82:
 647:.././hal/sam3u1c/flash_efc.c **** 					us_page);
 648:.././hal/sam3u1c/flash_efc.c **** 		} else {
 649:.././hal/sam3u1c/flash_efc.c **** 			ul_error = efc_perform_command(p_efc, EFC_FCMD_WP,
 1236              	 .loc 3 649 0
 1237 00ea BB69     	 ldr r3,[r7,#24]
 1238 00ec FA8A     	 ldrh r2,[r7,#22]
 1239 00ee 0121     	 movs r1,#1
 1240 00f0 1846     	 mov r0,r3
 1241 00f2 174B     	 ldr r3,.L88+24
 1242 00f4 9847     	 blx r3
 1243              	.LVL27:
 1244 00f6 7863     	 str r0,[r7,#52]
 1245              	.L83:
 650:.././hal/sam3u1c/flash_efc.c **** 					us_page);
 651:.././hal/sam3u1c/flash_efc.c **** 		}
 652:.././hal/sam3u1c/flash_efc.c **** 
 653:.././hal/sam3u1c/flash_efc.c **** 		if (ul_error) {
 1246              	 .loc 3 653 0
 1247 00f8 7B6B     	 ldr r3,[r7,#52]
 1248 00fa 002B     	 cmp r3,#0
 1249 00fc 01D0     	 beq .L84
 654:.././hal/sam3u1c/flash_efc.c **** 			return ul_error;
 1250              	 .loc 3 654 0
 1251 00fe 7B6B     	 ldr r3,[r7,#52]
 1252 0100 16E0     	 b .L87
 1253              	.L84:
 655:.././hal/sam3u1c/flash_efc.c **** 		}
 656:.././hal/sam3u1c/flash_efc.c **** 
 657:.././hal/sam3u1c/flash_efc.c **** 		/* Progression */
 658:.././hal/sam3u1c/flash_efc.c **** 		p_buffer = (void *)((uint32_t) p_buffer + writeSize);
 1254              	 .loc 3 658 0
 1255 0102 BA68     	 ldr r2,[r7,#8]
 1256 0104 3B6A     	 ldr r3,[r7,#32]
 1257 0106 1344     	 add r3,r3,r2
 1258 0108 BB60     	 str r3,[r7,#8]
 659:.././hal/sam3u1c/flash_efc.c **** 		ul_size -= writeSize;
 1259              	 .loc 3 659 0
 1260 010a 7A68     	 ldr r2,[r7,#4]
 1261 010c 3B6A     	 ldr r3,[r7,#32]
 1262 010e D31A     	 subs r3,r2,r3
 1263 0110 7B60     	 str r3,[r7,#4]
 660:.././hal/sam3u1c/flash_efc.c **** 		us_page++;
 1264              	 .loc 3 660 0
 1265 0112 FB8A     	 ldrh r3,[r7,#22]
 1266 0114 0133     	 adds r3,r3,#1
 1267 0116 9BB2     	 uxth r3,r3
 1268 0118 FB82     	 strh r3,[r7,#22]
 661:.././hal/sam3u1c/flash_efc.c **** 		us_offset = 0;
 1269              	 .loc 3 661 0
 1270 011a 0023     	 movs r3,#0
 1271 011c BB82     	 strh r3,[r7,#20]
 1272              	.L79:
 617:.././hal/sam3u1c/flash_efc.c **** 		/* Copy data in temporary buffer to avoid alignment problems. */
 1273              	 .loc 3 617 0
 1274 011e 7B68     	 ldr r3,[r7,#4]
 1275 0120 002B     	 cmp r3,#0
 1276 0122 8AD1     	 bne .L86
 662:.././hal/sam3u1c/flash_efc.c **** 	}
 663:.././hal/sam3u1c/flash_efc.c **** 
 664:.././hal/sam3u1c/flash_efc.c **** 	/* According to the errata, restore the wait state value. */
 665:.././hal/sam3u1c/flash_efc.c **** 	efc_set_wait_state(p_efc, ul_fws_temp);
 1277              	 .loc 3 665 0
 1278 0124 BB69     	 ldr r3,[r7,#24]
 1279 0126 796A     	 ldr r1,[r7,#36]
 1280 0128 1846     	 mov r0,r3
 1281 012a 064B     	 ldr r3,.L88+12
 1282 012c 9847     	 blx r3
 1283              	.LVL28:
 666:.././hal/sam3u1c/flash_efc.c **** 
 667:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 1284              	 .loc 3 667 0
 1285 012e 0023     	 movs r3,#0
 1286              	.L87:
 668:.././hal/sam3u1c/flash_efc.c **** }
 1287              	 .loc 3 668 0 discriminator 1
 1288 0130 1846     	 mov r0,r3
 1289 0132 3C37     	 adds r7,r7,#60
 1290              	.LCFI79:
 1291              	 .cfi_def_cfa_offset 12
 1292 0134 BD46     	 mov sp,r7
 1293              	.LCFI80:
 1294              	 .cfi_def_cfa_register 13
 1295              	 
 1296 0136 90BD     	 pop {r4,r7,pc}
 1297              	.L89:
 1298              	 .align 2
 1299              	.L88:
 1300 0138 00000000 	 .word gs_ul_page_buffer
 1301 013c 00000000 	 .word translate_address
 1302 0140 00000000 	 .word efc_get_wait_state
 1303 0144 00000000 	 .word efc_set_wait_state
 1304 0148 00000000 	 .word compute_address
 1305 014c 00000000 	 .word memcpy
 1306 0150 00000000 	 .word efc_perform_command
 1307              	 .cfi_endproc
 1308              	.LFE101:
 1310              	 .section .text.flash_lock,"ax",%progbits
 1311              	 .align 1
 1312              	 .global flash_lock
 1313              	 .syntax unified
 1314              	 .thumb
 1315              	 .thumb_func
 1316              	 .fpu softvfp
 1318              	flash_lock:
 1319              	.LFB102:
 669:.././hal/sam3u1c/flash_efc.c **** 
 670:.././hal/sam3u1c/flash_efc.c **** 
 671:.././hal/sam3u1c/flash_efc.c **** /**
 672:.././hal/sam3u1c/flash_efc.c ****  * \brief Lock all the regions in the given address range. The actual lock
 673:.././hal/sam3u1c/flash_efc.c ****  * range is reported through two output parameters.
 674:.././hal/sam3u1c/flash_efc.c ****  *
 675:.././hal/sam3u1c/flash_efc.c ****  * \param ul_start Start address of lock range.
 676:.././hal/sam3u1c/flash_efc.c ****  * \param ul_end End address of lock range.
 677:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_start Start address of the actual lock range (optional).
 678:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_end End address of the actual lock range (optional).
 679:.././hal/sam3u1c/flash_efc.c ****  *
 680:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful, otherwise returns an error code.
 681:.././hal/sam3u1c/flash_efc.c ****  */
 682:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_lock(uint32_t ul_start, uint32_t ul_end,
 683:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_actual_start, uint32_t *pul_actual_end)
 684:.././hal/sam3u1c/flash_efc.c **** {
 1320              	 .loc 3 684 0
 1321              	 .cfi_startproc
 1322              	 
 1323              	 
 1324 0000 90B5     	 push {r4,r7,lr}
 1325              	.LCFI81:
 1326              	 .cfi_def_cfa_offset 12
 1327              	 .cfi_offset 4,-12
 1328              	 .cfi_offset 7,-8
 1329              	 .cfi_offset 14,-4
 1330 0002 8BB0     	 sub sp,sp,#44
 1331              	.LCFI82:
 1332              	 .cfi_def_cfa_offset 56
 1333 0004 00AF     	 add r7,sp,#0
 1334              	.LCFI83:
 1335              	 .cfi_def_cfa_register 7
 1336 0006 F860     	 str r0,[r7,#12]
 1337 0008 B960     	 str r1,[r7,#8]
 1338 000a 7A60     	 str r2,[r7,#4]
 1339 000c 3B60     	 str r3,[r7]
 685:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 686:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_actual_start, ul_actual_end;
 687:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_start_page, us_end_page;
 688:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_error;
 689:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_num_pages_in_region =
 1340              	 .loc 3 689 0
 1341 000e 2023     	 movs r3,#32
 1342 0010 FB84     	 strh r3,[r7,#38]
 690:.././hal/sam3u1c/flash_efc.c **** 			IFLASH_LOCK_REGION_SIZE / IFLASH_PAGE_SIZE;
 691:.././hal/sam3u1c/flash_efc.c **** 
 692:.././hal/sam3u1c/flash_efc.c **** 	/* Compute actual lock range and store it */
 693:.././hal/sam3u1c/flash_efc.c **** 	compute_lock_range(ul_start, ul_end, &ul_actual_start, &ul_actual_end);
 1343              	 .loc 3 693 0
 1344 0012 07F11403 	 add r3,r7,#20
 1345 0016 07F11802 	 add r2,r7,#24
 1346 001a B968     	 ldr r1,[r7,#8]
 1347 001c F868     	 ldr r0,[r7,#12]
 1348 001e 1C4C     	 ldr r4,.L98
 1349 0020 A047     	 blx r4
 1350              	.LVL29:
 694:.././hal/sam3u1c/flash_efc.c **** 
 695:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_start != NULL) {
 1351              	 .loc 3 695 0
 1352 0022 7B68     	 ldr r3,[r7,#4]
 1353 0024 002B     	 cmp r3,#0
 1354 0026 02D0     	 beq .L91
 696:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_start = ul_actual_start;
 1355              	 .loc 3 696 0
 1356 0028 BA69     	 ldr r2,[r7,#24]
 1357 002a 7B68     	 ldr r3,[r7,#4]
 1358 002c 1A60     	 str r2,[r3]
 1359              	.L91:
 697:.././hal/sam3u1c/flash_efc.c **** 	}
 698:.././hal/sam3u1c/flash_efc.c **** 
 699:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_end != NULL) {
 1360              	 .loc 3 699 0
 1361 002e 3B68     	 ldr r3,[r7]
 1362 0030 002B     	 cmp r3,#0
 1363 0032 02D0     	 beq .L92
 700:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_end = ul_actual_end;
 1364              	 .loc 3 700 0
 1365 0034 7A69     	 ldr r2,[r7,#20]
 1366 0036 3B68     	 ldr r3,[r7]
 1367 0038 1A60     	 str r2,[r3]
 1368              	.L92:
 701:.././hal/sam3u1c/flash_efc.c **** 	}
 702:.././hal/sam3u1c/flash_efc.c **** 
 703:.././hal/sam3u1c/flash_efc.c **** 	/* Compute page numbers */
 704:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_actual_start, &us_start_page, 0);
 1369              	 .loc 3 704 0
 1370 003a B969     	 ldr r1,[r7,#24]
 1371 003c 07F11202 	 add r2,r7,#18
 1372 0040 07F11C00 	 add r0,r7,#28
 1373 0044 0023     	 movs r3,#0
 1374 0046 134C     	 ldr r4,.L98+4
 1375 0048 A047     	 blx r4
 1376              	.LVL30:
 705:.././hal/sam3u1c/flash_efc.c **** 	translate_address(0, ul_actual_end, &us_end_page, 0);
 1377              	 .loc 3 705 0
 1378 004a 7969     	 ldr r1,[r7,#20]
 1379 004c 07F11002 	 add r2,r7,#16
 1380 0050 0023     	 movs r3,#0
 1381 0052 0020     	 movs r0,#0
 1382 0054 0F4C     	 ldr r4,.L98+4
 1383 0056 A047     	 blx r4
 1384              	.LVL31:
 706:.././hal/sam3u1c/flash_efc.c **** 
 707:.././hal/sam3u1c/flash_efc.c **** 	/* Lock all pages */
 708:.././hal/sam3u1c/flash_efc.c **** 	while (us_start_page < us_end_page) {
 1385              	 .loc 3 708 0
 1386 0058 10E0     	 b .L93
 1387              	.L96:
 709:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_SLB, us_start_page);
 1388              	 .loc 3 709 0
 1389 005a FB69     	 ldr r3,[r7,#28]
 1390 005c 7A8A     	 ldrh r2,[r7,#18]
 1391 005e 0821     	 movs r1,#8
 1392 0060 1846     	 mov r0,r3
 1393 0062 0D4B     	 ldr r3,.L98+8
 1394 0064 9847     	 blx r3
 1395              	.LVL32:
 1396 0066 3862     	 str r0,[r7,#32]
 710:.././hal/sam3u1c/flash_efc.c **** 
 711:.././hal/sam3u1c/flash_efc.c **** 		if (ul_error) {
 1397              	 .loc 3 711 0
 1398 0068 3B6A     	 ldr r3,[r7,#32]
 1399 006a 002B     	 cmp r3,#0
 1400 006c 01D0     	 beq .L94
 712:.././hal/sam3u1c/flash_efc.c **** 			return ul_error;
 1401              	 .loc 3 712 0
 1402 006e 3B6A     	 ldr r3,[r7,#32]
 1403 0070 09E0     	 b .L97
 1404              	.L94:
 713:.././hal/sam3u1c/flash_efc.c **** 		}
 714:.././hal/sam3u1c/flash_efc.c **** 		us_start_page += us_num_pages_in_region;
 1405              	 .loc 3 714 0
 1406 0072 7A8A     	 ldrh r2,[r7,#18]
 1407 0074 FB8C     	 ldrh r3,[r7,#38]
 1408 0076 1344     	 add r3,r3,r2
 1409 0078 9BB2     	 uxth r3,r3
 1410 007a 7B82     	 strh r3,[r7,#18]
 1411              	.L93:
 708:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_SLB, us_start_page);
 1412              	 .loc 3 708 0
 1413 007c 7A8A     	 ldrh r2,[r7,#18]
 1414 007e 3B8A     	 ldrh r3,[r7,#16]
 1415 0080 9A42     	 cmp r2,r3
 1416 0082 EAD3     	 bcc .L96
 715:.././hal/sam3u1c/flash_efc.c **** 	}
 716:.././hal/sam3u1c/flash_efc.c **** 
 717:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 1417              	 .loc 3 717 0
 1418 0084 0023     	 movs r3,#0
 1419              	.L97:
 718:.././hal/sam3u1c/flash_efc.c **** }
 1420              	 .loc 3 718 0 discriminator 1
 1421 0086 1846     	 mov r0,r3
 1422 0088 2C37     	 adds r7,r7,#44
 1423              	.LCFI84:
 1424              	 .cfi_def_cfa_offset 12
 1425 008a BD46     	 mov sp,r7
 1426              	.LCFI85:
 1427              	 .cfi_def_cfa_register 13
 1428              	 
 1429 008c 90BD     	 pop {r4,r7,pc}
 1430              	.L99:
 1431 008e 00BF     	 .align 2
 1432              	.L98:
 1433 0090 00000000 	 .word compute_lock_range
 1434 0094 00000000 	 .word translate_address
 1435 0098 00000000 	 .word efc_perform_command
 1436              	 .cfi_endproc
 1437              	.LFE102:
 1439              	 .section .text.flash_unlock,"ax",%progbits
 1440              	 .align 1
 1441              	 .global flash_unlock
 1442              	 .syntax unified
 1443              	 .thumb
 1444              	 .thumb_func
 1445              	 .fpu softvfp
 1447              	flash_unlock:
 1448              	.LFB103:
 719:.././hal/sam3u1c/flash_efc.c **** 
 720:.././hal/sam3u1c/flash_efc.c **** /**
 721:.././hal/sam3u1c/flash_efc.c ****  * \brief Unlock all the regions in the given address range. The actual unlock
 722:.././hal/sam3u1c/flash_efc.c ****  * range is reported through two output parameters.
 723:.././hal/sam3u1c/flash_efc.c ****  *
 724:.././hal/sam3u1c/flash_efc.c ****  * \param ul_start Start address of unlock range.
 725:.././hal/sam3u1c/flash_efc.c ****  * \param ul_end End address of unlock range.
 726:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_start Start address of the actual unlock range (optional).
 727:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_end End address of the actual unlock range (optional).
 728:.././hal/sam3u1c/flash_efc.c ****  *
 729:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful, otherwise returns an error code.
 730:.././hal/sam3u1c/flash_efc.c ****  */
 731:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_unlock(uint32_t ul_start, uint32_t ul_end,
 732:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_actual_start, uint32_t *pul_actual_end)
 733:.././hal/sam3u1c/flash_efc.c **** {
 1449              	 .loc 3 733 0
 1450              	 .cfi_startproc
 1451              	 
 1452              	 
 1453 0000 90B5     	 push {r4,r7,lr}
 1454              	.LCFI86:
 1455              	 .cfi_def_cfa_offset 12
 1456              	 .cfi_offset 4,-12
 1457              	 .cfi_offset 7,-8
 1458              	 .cfi_offset 14,-4
 1459 0002 8BB0     	 sub sp,sp,#44
 1460              	.LCFI87:
 1461              	 .cfi_def_cfa_offset 56
 1462 0004 00AF     	 add r7,sp,#0
 1463              	.LCFI88:
 1464              	 .cfi_def_cfa_register 7
 1465 0006 F860     	 str r0,[r7,#12]
 1466 0008 B960     	 str r1,[r7,#8]
 1467 000a 7A60     	 str r2,[r7,#4]
 1468 000c 3B60     	 str r3,[r7]
 734:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 735:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_actual_start, ul_actual_end;
 736:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_start_page, us_end_page;
 737:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_error;
 738:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_num_pages_in_region =
 1469              	 .loc 3 738 0
 1470 000e 2023     	 movs r3,#32
 1471 0010 FB84     	 strh r3,[r7,#38]
 739:.././hal/sam3u1c/flash_efc.c **** 			IFLASH_LOCK_REGION_SIZE / IFLASH_PAGE_SIZE;
 740:.././hal/sam3u1c/flash_efc.c **** 
 741:.././hal/sam3u1c/flash_efc.c **** 	/* Compute actual unlock range and store it */
 742:.././hal/sam3u1c/flash_efc.c **** 	compute_lock_range(ul_start, ul_end, &ul_actual_start, &ul_actual_end);
 1472              	 .loc 3 742 0
 1473 0012 07F11403 	 add r3,r7,#20
 1474 0016 07F11802 	 add r2,r7,#24
 1475 001a B968     	 ldr r1,[r7,#8]
 1476 001c F868     	 ldr r0,[r7,#12]
 1477 001e 1C4C     	 ldr r4,.L108
 1478 0020 A047     	 blx r4
 1479              	.LVL33:
 743:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_start != NULL) {
 1480              	 .loc 3 743 0
 1481 0022 7B68     	 ldr r3,[r7,#4]
 1482 0024 002B     	 cmp r3,#0
 1483 0026 02D0     	 beq .L101
 744:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_start = ul_actual_start;
 1484              	 .loc 3 744 0
 1485 0028 BA69     	 ldr r2,[r7,#24]
 1486 002a 7B68     	 ldr r3,[r7,#4]
 1487 002c 1A60     	 str r2,[r3]
 1488              	.L101:
 745:.././hal/sam3u1c/flash_efc.c **** 	}
 746:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_end != NULL) {
 1489              	 .loc 3 746 0
 1490 002e 3B68     	 ldr r3,[r7]
 1491 0030 002B     	 cmp r3,#0
 1492 0032 02D0     	 beq .L102
 747:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_end = ul_actual_end;
 1493              	 .loc 3 747 0
 1494 0034 7A69     	 ldr r2,[r7,#20]
 1495 0036 3B68     	 ldr r3,[r7]
 1496 0038 1A60     	 str r2,[r3]
 1497              	.L102:
 748:.././hal/sam3u1c/flash_efc.c **** 	}
 749:.././hal/sam3u1c/flash_efc.c **** 
 750:.././hal/sam3u1c/flash_efc.c **** 	/* Compute page numbers */
 751:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_actual_start, &us_start_page, 0);
 1498              	 .loc 3 751 0
 1499 003a B969     	 ldr r1,[r7,#24]
 1500 003c 07F11202 	 add r2,r7,#18
 1501 0040 07F11C00 	 add r0,r7,#28
 1502 0044 0023     	 movs r3,#0
 1503 0046 134C     	 ldr r4,.L108+4
 1504 0048 A047     	 blx r4
 1505              	.LVL34:
 752:.././hal/sam3u1c/flash_efc.c **** 	translate_address(0, ul_actual_end, &us_end_page, 0);
 1506              	 .loc 3 752 0
 1507 004a 7969     	 ldr r1,[r7,#20]
 1508 004c 07F11002 	 add r2,r7,#16
 1509 0050 0023     	 movs r3,#0
 1510 0052 0020     	 movs r0,#0
 1511 0054 0F4C     	 ldr r4,.L108+4
 1512 0056 A047     	 blx r4
 1513              	.LVL35:
 753:.././hal/sam3u1c/flash_efc.c **** 
 754:.././hal/sam3u1c/flash_efc.c **** 	/* Unlock all pages */
 755:.././hal/sam3u1c/flash_efc.c **** 	while (us_start_page < us_end_page) {
 1514              	 .loc 3 755 0
 1515 0058 10E0     	 b .L103
 1516              	.L106:
 756:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_CLB,
 1517              	 .loc 3 756 0
 1518 005a FB69     	 ldr r3,[r7,#28]
 1519 005c 7A8A     	 ldrh r2,[r7,#18]
 1520 005e 0921     	 movs r1,#9
 1521 0060 1846     	 mov r0,r3
 1522 0062 0D4B     	 ldr r3,.L108+8
 1523 0064 9847     	 blx r3
 1524              	.LVL36:
 1525 0066 3862     	 str r0,[r7,#32]
 757:.././hal/sam3u1c/flash_efc.c **** 				us_start_page);
 758:.././hal/sam3u1c/flash_efc.c **** 		if (ul_error) {
 1526              	 .loc 3 758 0
 1527 0068 3B6A     	 ldr r3,[r7,#32]
 1528 006a 002B     	 cmp r3,#0
 1529 006c 01D0     	 beq .L104
 759:.././hal/sam3u1c/flash_efc.c **** 			return ul_error;
 1530              	 .loc 3 759 0
 1531 006e 3B6A     	 ldr r3,[r7,#32]
 1532 0070 09E0     	 b .L107
 1533              	.L104:
 760:.././hal/sam3u1c/flash_efc.c **** 		}
 761:.././hal/sam3u1c/flash_efc.c **** 		us_start_page += us_num_pages_in_region;
 1534              	 .loc 3 761 0
 1535 0072 7A8A     	 ldrh r2,[r7,#18]
 1536 0074 FB8C     	 ldrh r3,[r7,#38]
 1537 0076 1344     	 add r3,r3,r2
 1538 0078 9BB2     	 uxth r3,r3
 1539 007a 7B82     	 strh r3,[r7,#18]
 1540              	.L103:
 755:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_CLB,
 1541              	 .loc 3 755 0
 1542 007c 7A8A     	 ldrh r2,[r7,#18]
 1543 007e 3B8A     	 ldrh r3,[r7,#16]
 1544 0080 9A42     	 cmp r2,r3
 1545 0082 EAD3     	 bcc .L106
 762:.././hal/sam3u1c/flash_efc.c **** 	}
 763:.././hal/sam3u1c/flash_efc.c **** 
 764:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 1546              	 .loc 3 764 0
 1547 0084 0023     	 movs r3,#0
 1548              	.L107:
 765:.././hal/sam3u1c/flash_efc.c **** }
 1549              	 .loc 3 765 0 discriminator 1
 1550 0086 1846     	 mov r0,r3
 1551 0088 2C37     	 adds r7,r7,#44
 1552              	.LCFI89:
 1553              	 .cfi_def_cfa_offset 12
 1554 008a BD46     	 mov sp,r7
 1555              	.LCFI90:
 1556              	 .cfi_def_cfa_register 13
 1557              	 
 1558 008c 90BD     	 pop {r4,r7,pc}
 1559              	.L109:
 1560 008e 00BF     	 .align 2
 1561              	.L108:
 1562 0090 00000000 	 .word compute_lock_range
 1563 0094 00000000 	 .word translate_address
 1564 0098 00000000 	 .word efc_perform_command
 1565              	 .cfi_endproc
 1566              	.LFE103:
 1568              	 .section .text.flash_is_locked,"ax",%progbits
 1569              	 .align 1
 1570              	 .global flash_is_locked
 1571              	 .syntax unified
 1572              	 .thumb
 1573              	 .thumb_func
 1574              	 .fpu softvfp
 1576              	flash_is_locked:
 1577              	.LFB104:
 766:.././hal/sam3u1c/flash_efc.c **** 
 767:.././hal/sam3u1c/flash_efc.c **** /**
 768:.././hal/sam3u1c/flash_efc.c ****  * \brief Get the number of locked regions inside the given address range.
 769:.././hal/sam3u1c/flash_efc.c ****  *
 770:.././hal/sam3u1c/flash_efc.c ****  * \param ul_start Start address of range
 771:.././hal/sam3u1c/flash_efc.c ****  * \param ul_end End address of range.
 772:.././hal/sam3u1c/flash_efc.c ****  *
 773:.././hal/sam3u1c/flash_efc.c ****  * \return The number of locked regions inside the given address range.
 774:.././hal/sam3u1c/flash_efc.c ****  */
 775:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_is_locked(uint32_t ul_start, uint32_t ul_end)
 776:.././hal/sam3u1c/flash_efc.c **** {
 1578              	 .loc 3 776 0
 1579              	 .cfi_startproc
 1580              	 
 1581              	 
 1582 0000 90B5     	 push {r4,r7,lr}
 1583              	.LCFI91:
 1584              	 .cfi_def_cfa_offset 12
 1585              	 .cfi_offset 4,-12
 1586              	 .cfi_offset 7,-8
 1587              	 .cfi_offset 14,-4
 1588 0002 8BB0     	 sub sp,sp,#44
 1589              	.LCFI92:
 1590              	 .cfi_def_cfa_offset 56
 1591 0004 00AF     	 add r7,sp,#0
 1592              	.LCFI93:
 1593              	 .cfi_def_cfa_register 7
 1594 0006 7860     	 str r0,[r7,#4]
 1595 0008 3960     	 str r1,[r7]
 777:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 778:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_start_page, us_end_page;
 779:.././hal/sam3u1c/flash_efc.c **** 	uint8_t uc_start_region, uc_end_region;
 780:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_num_pages_in_region;
 781:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_status;
 782:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_error;
 783:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_num_locked_regions = 0;
 1596              	 .loc 3 783 0
 1597 000a 0023     	 movs r3,#0
 1598 000c 3B62     	 str r3,[r7,#32]
 784:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_count = 0;
 1599              	 .loc 3 784 0
 1600 000e 0023     	 movs r3,#0
 1601 0010 FB61     	 str r3,[r7,#28]
 785:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_bit = 0;
 1602              	 .loc 3 785 0
 1603 0012 0023     	 movs r3,#0
 1604 0014 BB61     	 str r3,[r7,#24]
 786:.././hal/sam3u1c/flash_efc.c **** 
 787:.././hal/sam3u1c/flash_efc.c **** 	Assert(ul_end >= ul_start);
 788:.././hal/sam3u1c/flash_efc.c **** 
 789:.././hal/sam3u1c/flash_efc.c **** #ifdef EFC1
 790:.././hal/sam3u1c/flash_efc.c **** 	Assert(((ul_start >= IFLASH0_ADDR)
 791:.././hal/sam3u1c/flash_efc.c **** 				&& (ul_end <= IFLASH0_ADDR + IFLASH0_SIZE))
 792:.././hal/sam3u1c/flash_efc.c **** 				|| ((ul_start >= IFLASH1_ADDR)
 793:.././hal/sam3u1c/flash_efc.c **** 					&& (ul_end <= IFLASH1_ADDR + IFLASH1_SIZE)));
 794:.././hal/sam3u1c/flash_efc.c **** #else
 795:.././hal/sam3u1c/flash_efc.c **** 	Assert((ul_start >= IFLASH_ADDR)
 796:.././hal/sam3u1c/flash_efc.c **** 				&& (ul_end <= IFLASH_ADDR + IFLASH_SIZE));
 797:.././hal/sam3u1c/flash_efc.c **** #endif
 798:.././hal/sam3u1c/flash_efc.c **** 
 799:.././hal/sam3u1c/flash_efc.c **** 	/* Compute page numbers */
 800:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_start, &us_start_page, 0);
 1605              	 .loc 3 800 0
 1606 0016 07F10A02 	 add r2,r7,#10
 1607 001a 07F10C00 	 add r0,r7,#12
 1608 001e 0023     	 movs r3,#0
 1609 0020 7968     	 ldr r1,[r7,#4]
 1610 0022 344C     	 ldr r4,.L119
 1611 0024 A047     	 blx r4
 1612              	.LVL37:
 801:.././hal/sam3u1c/flash_efc.c **** 	translate_address(0, ul_end, &us_end_page, 0);
 1613              	 .loc 3 801 0
 1614 0026 07F10802 	 add r2,r7,#8
 1615 002a 0023     	 movs r3,#0
 1616 002c 3968     	 ldr r1,[r7]
 1617 002e 0020     	 movs r0,#0
 1618 0030 304C     	 ldr r4,.L119
 1619 0032 A047     	 blx r4
 1620              	.LVL38:
 802:.././hal/sam3u1c/flash_efc.c **** 
 803:.././hal/sam3u1c/flash_efc.c **** 	/* Compute region numbers */
 804:.././hal/sam3u1c/flash_efc.c **** 	us_num_pages_in_region = IFLASH_LOCK_REGION_SIZE / IFLASH_PAGE_SIZE;
 1621              	 .loc 3 804 0
 1622 0034 2023     	 movs r3,#32
 1623 0036 FB82     	 strh r3,[r7,#22]
 805:.././hal/sam3u1c/flash_efc.c **** 	uc_start_region = us_start_page / us_num_pages_in_region;
 1624              	 .loc 3 805 0
 1625 0038 7A89     	 ldrh r2,[r7,#10]
 1626 003a FB8A     	 ldrh r3,[r7,#22]
 1627 003c B2FBF3F3 	 udiv r3,r2,r3
 1628 0040 9BB2     	 uxth r3,r3
 1629 0042 7B75     	 strb r3,[r7,#21]
 806:.././hal/sam3u1c/flash_efc.c **** 	uc_end_region = us_end_page / us_num_pages_in_region;
 1630              	 .loc 3 806 0
 1631 0044 3A89     	 ldrh r2,[r7,#8]
 1632 0046 FB8A     	 ldrh r3,[r7,#22]
 1633 0048 B2FBF3F3 	 udiv r3,r2,r3
 1634 004c 9BB2     	 uxth r3,r3
 1635 004e 3B75     	 strb r3,[r7,#20]
 807:.././hal/sam3u1c/flash_efc.c **** 
 808:.././hal/sam3u1c/flash_efc.c **** 	/* Retrieve lock status */
 809:.././hal/sam3u1c/flash_efc.c **** 	ul_error = efc_perform_command(p_efc, EFC_FCMD_GLB, 0);
 1636              	 .loc 3 809 0
 1637 0050 FB68     	 ldr r3,[r7,#12]
 1638 0052 0022     	 movs r2,#0
 1639 0054 0A21     	 movs r1,#10
 1640 0056 1846     	 mov r0,r3
 1641 0058 274B     	 ldr r3,.L119+4
 1642 005a 9847     	 blx r3
 1643              	.LVL39:
 1644 005c 3861     	 str r0,[r7,#16]
 810:.././hal/sam3u1c/flash_efc.c **** 	if (ul_error) {
 1645              	 .loc 3 810 0
 1646 005e 3B69     	 ldr r3,[r7,#16]
 1647 0060 002B     	 cmp r3,#0
 1648 0062 01D0     	 beq .L111
 811:.././hal/sam3u1c/flash_efc.c **** 		return ul_error;
 1649              	 .loc 3 811 0
 1650 0064 3B69     	 ldr r3,[r7,#16]
 1651 0066 40E0     	 b .L118
 1652              	.L111:
 812:.././hal/sam3u1c/flash_efc.c **** 	}
 813:.././hal/sam3u1c/flash_efc.c ****     UNUSED(ul_error);
 814:.././hal/sam3u1c/flash_efc.c **** 
 815:.././hal/sam3u1c/flash_efc.c **** 	/* Skip unrequested regions (if necessary) */
 816:.././hal/sam3u1c/flash_efc.c **** 	ul_status = efc_get_result(p_efc);
 1653              	 .loc 3 816 0
 1654 0068 FB68     	 ldr r3,[r7,#12]
 1655 006a 1846     	 mov r0,r3
 1656 006c 234B     	 ldr r3,.L119+8
 1657 006e 9847     	 blx r3
 1658              	.LVL40:
 1659 0070 7862     	 str r0,[r7,#36]
 817:.././hal/sam3u1c/flash_efc.c **** 	while (!(ul_count <= uc_start_region &&
 1660              	 .loc 3 817 0
 1661 0072 07E0     	 b .L113
 1662              	.L114:
 818:.././hal/sam3u1c/flash_efc.c **** 			uc_start_region < (ul_count + 32))) {
 819:.././hal/sam3u1c/flash_efc.c **** 		ul_status = efc_get_result(p_efc);
 1663              	 .loc 3 819 0
 1664 0074 FB68     	 ldr r3,[r7,#12]
 1665 0076 1846     	 mov r0,r3
 1666 0078 204B     	 ldr r3,.L119+8
 1667 007a 9847     	 blx r3
 1668              	.LVL41:
 1669 007c 7862     	 str r0,[r7,#36]
 820:.././hal/sam3u1c/flash_efc.c **** 		ul_count += 32;
 1670              	 .loc 3 820 0
 1671 007e FB69     	 ldr r3,[r7,#28]
 1672 0080 2033     	 adds r3,r3,#32
 1673 0082 FB61     	 str r3,[r7,#28]
 1674              	.L113:
 817:.././hal/sam3u1c/flash_efc.c **** 	while (!(ul_count <= uc_start_region &&
 1675              	 .loc 3 817 0
 1676 0084 7B7D     	 ldrb r3,[r7,#21]
 1677 0086 FA69     	 ldr r2,[r7,#28]
 1678 0088 9A42     	 cmp r2,r3
 1679 008a F3D8     	 bhi .L114
 818:.././hal/sam3u1c/flash_efc.c **** 			uc_start_region < (ul_count + 32))) {
 1680              	 .loc 3 818 0 discriminator 1
 1681 008c 7A7D     	 ldrb r2,[r7,#21]
 1682 008e FB69     	 ldr r3,[r7,#28]
 1683 0090 2033     	 adds r3,r3,#32
 817:.././hal/sam3u1c/flash_efc.c **** 	while (!(ul_count <= uc_start_region &&
 1684              	 .loc 3 817 0 discriminator 1
 1685 0092 9A42     	 cmp r2,r3
 1686 0094 EED2     	 bcs .L114
 821:.././hal/sam3u1c/flash_efc.c **** 	}
 822:.././hal/sam3u1c/flash_efc.c **** 
 823:.././hal/sam3u1c/flash_efc.c **** 	/* Check status of each involved region */
 824:.././hal/sam3u1c/flash_efc.c **** 	ul_bit = uc_start_region - ul_count;
 1687              	 .loc 3 824 0
 1688 0096 7A7D     	 ldrb r2,[r7,#21]
 1689 0098 FB69     	 ldr r3,[r7,#28]
 1690 009a D31A     	 subs r3,r2,r3
 1691 009c BB61     	 str r3,[r7,#24]
 825:.././hal/sam3u1c/flash_efc.c **** 
 826:.././hal/sam3u1c/flash_efc.c **** 	/* Number of region to check (must be > 0) */
 827:.././hal/sam3u1c/flash_efc.c **** 	ul_count = uc_end_region - uc_start_region + 1;
 1692              	 .loc 3 827 0
 1693 009e 3A7D     	 ldrb r2,[r7,#20]
 1694 00a0 7B7D     	 ldrb r3,[r7,#21]
 1695 00a2 D31A     	 subs r3,r2,r3
 1696 00a4 0133     	 adds r3,r3,#1
 1697 00a6 FB61     	 str r3,[r7,#28]
 828:.././hal/sam3u1c/flash_efc.c **** 
 829:.././hal/sam3u1c/flash_efc.c **** 	while (ul_count > 0) {
 1698              	 .loc 3 829 0
 1699 00a8 1BE0     	 b .L115
 1700              	.L117:
 830:.././hal/sam3u1c/flash_efc.c **** 		if (ul_status & (1 << (ul_bit))) {
 1701              	 .loc 3 830 0
 1702 00aa 0122     	 movs r2,#1
 1703 00ac BB69     	 ldr r3,[r7,#24]
 1704 00ae 02FA03F3 	 lsl r3,r2,r3
 1705 00b2 1A46     	 mov r2,r3
 1706 00b4 7B6A     	 ldr r3,[r7,#36]
 1707 00b6 1340     	 ands r3,r3,r2
 1708 00b8 002B     	 cmp r3,#0
 1709 00ba 02D0     	 beq .L116
 831:.././hal/sam3u1c/flash_efc.c **** 			ul_num_locked_regions++;
 1710              	 .loc 3 831 0
 1711 00bc 3B6A     	 ldr r3,[r7,#32]
 1712 00be 0133     	 adds r3,r3,#1
 1713 00c0 3B62     	 str r3,[r7,#32]
 1714              	.L116:
 832:.././hal/sam3u1c/flash_efc.c **** 		}
 833:.././hal/sam3u1c/flash_efc.c **** 
 834:.././hal/sam3u1c/flash_efc.c **** 		ul_count -= 1;
 1715              	 .loc 3 834 0
 1716 00c2 FB69     	 ldr r3,[r7,#28]
 1717 00c4 013B     	 subs r3,r3,#1
 1718 00c6 FB61     	 str r3,[r7,#28]
 835:.././hal/sam3u1c/flash_efc.c **** 		ul_bit += 1;
 1719              	 .loc 3 835 0
 1720 00c8 BB69     	 ldr r3,[r7,#24]
 1721 00ca 0133     	 adds r3,r3,#1
 1722 00cc BB61     	 str r3,[r7,#24]
 836:.././hal/sam3u1c/flash_efc.c **** 		if (ul_bit == 32) {
 1723              	 .loc 3 836 0
 1724 00ce BB69     	 ldr r3,[r7,#24]
 1725 00d0 202B     	 cmp r3,#32
 1726 00d2 06D1     	 bne .L115
 837:.././hal/sam3u1c/flash_efc.c **** 			ul_status = efc_get_result(p_efc);
 1727              	 .loc 3 837 0
 1728 00d4 FB68     	 ldr r3,[r7,#12]
 1729 00d6 1846     	 mov r0,r3
 1730 00d8 084B     	 ldr r3,.L119+8
 1731 00da 9847     	 blx r3
 1732              	.LVL42:
 1733 00dc 7862     	 str r0,[r7,#36]
 838:.././hal/sam3u1c/flash_efc.c **** 			ul_bit = 0;
 1734              	 .loc 3 838 0
 1735 00de 0023     	 movs r3,#0
 1736 00e0 BB61     	 str r3,[r7,#24]
 1737              	.L115:
 829:.././hal/sam3u1c/flash_efc.c **** 		if (ul_status & (1 << (ul_bit))) {
 1738              	 .loc 3 829 0
 1739 00e2 FB69     	 ldr r3,[r7,#28]
 1740 00e4 002B     	 cmp r3,#0
 1741 00e6 E0D1     	 bne .L117
 839:.././hal/sam3u1c/flash_efc.c **** 		}
 840:.././hal/sam3u1c/flash_efc.c **** 	}
 841:.././hal/sam3u1c/flash_efc.c **** 
 842:.././hal/sam3u1c/flash_efc.c **** 	return ul_num_locked_regions;
 1742              	 .loc 3 842 0
 1743 00e8 3B6A     	 ldr r3,[r7,#32]
 1744              	.L118:
 843:.././hal/sam3u1c/flash_efc.c **** }
 1745              	 .loc 3 843 0 discriminator 1
 1746 00ea 1846     	 mov r0,r3
 1747 00ec 2C37     	 adds r7,r7,#44
 1748              	.LCFI94:
 1749              	 .cfi_def_cfa_offset 12
 1750 00ee BD46     	 mov sp,r7
 1751              	.LCFI95:
 1752              	 .cfi_def_cfa_register 13
 1753              	 
 1754 00f0 90BD     	 pop {r4,r7,pc}
 1755              	.L120:
 1756 00f2 00BF     	 .align 2
 1757              	.L119:
 1758 00f4 00000000 	 .word translate_address
 1759 00f8 00000000 	 .word efc_perform_command
 1760 00fc 00000000 	 .word efc_get_result
 1761              	 .cfi_endproc
 1762              	.LFE104:
 1764              	 .section .text.flash_set_gpnvm,"ax",%progbits
 1765              	 .align 1
 1766              	 .global flash_set_gpnvm
 1767              	 .syntax unified
 1768              	 .thumb
 1769              	 .thumb_func
 1770              	 .fpu softvfp
 1772              	flash_set_gpnvm:
 1773              	.LFB105:
 844:.././hal/sam3u1c/flash_efc.c **** 
 845:.././hal/sam3u1c/flash_efc.c **** /**
 846:.././hal/sam3u1c/flash_efc.c ****  * \brief Set the given GPNVM bit.
 847:.././hal/sam3u1c/flash_efc.c ****  *
 848:.././hal/sam3u1c/flash_efc.c ****  * \param ul_gpnvm GPNVM bit index.
 849:.././hal/sam3u1c/flash_efc.c ****  *
 850:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 851:.././hal/sam3u1c/flash_efc.c ****  */
 852:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_set_gpnvm(uint32_t ul_gpnvm)
 853:.././hal/sam3u1c/flash_efc.c **** {
 1774              	 .loc 3 853 0
 1775              	 .cfi_startproc
 1776              	 
 1777              	 
 1778 0000 80B5     	 push {r7,lr}
 1779              	.LCFI96:
 1780              	 .cfi_def_cfa_offset 8
 1781              	 .cfi_offset 7,-8
 1782              	 .cfi_offset 14,-4
 1783 0002 82B0     	 sub sp,sp,#8
 1784              	.LCFI97:
 1785              	 .cfi_def_cfa_offset 16
 1786 0004 00AF     	 add r7,sp,#0
 1787              	.LCFI98:
 1788              	 .cfi_def_cfa_register 7
 1789 0006 7860     	 str r0,[r7,#4]
 854:.././hal/sam3u1c/flash_efc.c **** 	if (ul_gpnvm >= GPNVM_NUM_MAX) {
 1790              	 .loc 3 854 0
 1791 0008 7B68     	 ldr r3,[r7,#4]
 1792 000a 012B     	 cmp r3,#1
 1793 000c 01D9     	 bls .L122
 855:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 1794              	 .loc 3 855 0
 1795 000e 1123     	 movs r3,#17
 1796 0010 12E0     	 b .L123
 1797              	.L122:
 856:.././hal/sam3u1c/flash_efc.c **** 	}
 857:.././hal/sam3u1c/flash_efc.c **** 
 858:.././hal/sam3u1c/flash_efc.c **** 	if (FLASH_RC_YES == flash_is_gpnvm_set(ul_gpnvm)) {
 1798              	 .loc 3 858 0
 1799 0012 7868     	 ldr r0,[r7,#4]
 1800 0014 0A4B     	 ldr r3,.L126
 1801 0016 9847     	 blx r3
 1802              	.LVL43:
 1803 0018 0346     	 mov r3,r0
 1804 001a 012B     	 cmp r3,#1
 1805 001c 01D1     	 bne .L124
 859:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_OK;
 1806              	 .loc 3 859 0
 1807 001e 0023     	 movs r3,#0
 1808 0020 0AE0     	 b .L123
 1809              	.L124:
 860:.././hal/sam3u1c/flash_efc.c **** 	}
 861:.././hal/sam3u1c/flash_efc.c **** 
 862:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK == efc_perform_command(EFC, EFC_FCMD_SGPB, ul_gpnvm)) {
 1810              	 .loc 3 862 0
 1811 0022 7A68     	 ldr r2,[r7,#4]
 1812 0024 0B21     	 movs r1,#11
 1813 0026 0748     	 ldr r0,.L126+4
 1814 0028 074B     	 ldr r3,.L126+8
 1815 002a 9847     	 blx r3
 1816              	.LVL44:
 1817 002c 0346     	 mov r3,r0
 1818 002e 002B     	 cmp r3,#0
 1819 0030 01D1     	 bne .L125
 863:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_OK;
 1820              	 .loc 3 863 0
 1821 0032 0023     	 movs r3,#0
 1822 0034 00E0     	 b .L123
 1823              	.L125:
 864:.././hal/sam3u1c/flash_efc.c **** 	}
 865:.././hal/sam3u1c/flash_efc.c **** 
 866:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_ERROR;
 1824              	 .loc 3 866 0
 1825 0036 1023     	 movs r3,#16
 1826              	.L123:
 867:.././hal/sam3u1c/flash_efc.c **** }
 1827              	 .loc 3 867 0
 1828 0038 1846     	 mov r0,r3
 1829 003a 0837     	 adds r7,r7,#8
 1830              	.LCFI99:
 1831              	 .cfi_def_cfa_offset 8
 1832 003c BD46     	 mov sp,r7
 1833              	.LCFI100:
 1834              	 .cfi_def_cfa_register 13
 1835              	 
 1836 003e 80BD     	 pop {r7,pc}
 1837              	.L127:
 1838              	 .align 2
 1839              	.L126:
 1840 0040 00000000 	 .word flash_is_gpnvm_set
 1841 0044 00080E40 	 .word 1074661376
 1842 0048 00000000 	 .word efc_perform_command
 1843              	 .cfi_endproc
 1844              	.LFE105:
 1846              	 .section .text.flash_clear_gpnvm,"ax",%progbits
 1847              	 .align 1
 1848              	 .global flash_clear_gpnvm
 1849              	 .syntax unified
 1850              	 .thumb
 1851              	 .thumb_func
 1852              	 .fpu softvfp
 1854              	flash_clear_gpnvm:
 1855              	.LFB106:
 868:.././hal/sam3u1c/flash_efc.c **** 
 869:.././hal/sam3u1c/flash_efc.c **** /**
 870:.././hal/sam3u1c/flash_efc.c ****  * \brief Clear the given GPNVM bit.
 871:.././hal/sam3u1c/flash_efc.c ****  *
 872:.././hal/sam3u1c/flash_efc.c ****  * \param ul_gpnvm GPNVM bit index.
 873:.././hal/sam3u1c/flash_efc.c ****  *
 874:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 875:.././hal/sam3u1c/flash_efc.c ****  */
 876:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_clear_gpnvm(uint32_t ul_gpnvm)
 877:.././hal/sam3u1c/flash_efc.c **** {
 1856              	 .loc 3 877 0
 1857              	 .cfi_startproc
 1858              	 
 1859              	 
 1860 0000 80B5     	 push {r7,lr}
 1861              	.LCFI101:
 1862              	 .cfi_def_cfa_offset 8
 1863              	 .cfi_offset 7,-8
 1864              	 .cfi_offset 14,-4
 1865 0002 82B0     	 sub sp,sp,#8
 1866              	.LCFI102:
 1867              	 .cfi_def_cfa_offset 16
 1868 0004 00AF     	 add r7,sp,#0
 1869              	.LCFI103:
 1870              	 .cfi_def_cfa_register 7
 1871 0006 7860     	 str r0,[r7,#4]
 878:.././hal/sam3u1c/flash_efc.c **** 	if (ul_gpnvm >= GPNVM_NUM_MAX) {
 1872              	 .loc 3 878 0
 1873 0008 7B68     	 ldr r3,[r7,#4]
 1874 000a 012B     	 cmp r3,#1
 1875 000c 01D9     	 bls .L129
 879:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 1876              	 .loc 3 879 0
 1877 000e 1123     	 movs r3,#17
 1878 0010 12E0     	 b .L130
 1879              	.L129:
 880:.././hal/sam3u1c/flash_efc.c **** 	}
 881:.././hal/sam3u1c/flash_efc.c **** 
 882:.././hal/sam3u1c/flash_efc.c **** 	if (FLASH_RC_NO == flash_is_gpnvm_set(ul_gpnvm)) {
 1880              	 .loc 3 882 0
 1881 0012 7868     	 ldr r0,[r7,#4]
 1882 0014 0A4B     	 ldr r3,.L133
 1883 0016 9847     	 blx r3
 1884              	.LVL45:
 1885 0018 0346     	 mov r3,r0
 1886 001a 002B     	 cmp r3,#0
 1887 001c 01D1     	 bne .L131
 883:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_OK;
 1888              	 .loc 3 883 0
 1889 001e 0023     	 movs r3,#0
 1890 0020 0AE0     	 b .L130
 1891              	.L131:
 884:.././hal/sam3u1c/flash_efc.c **** 	}
 885:.././hal/sam3u1c/flash_efc.c **** 
 886:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK == efc_perform_command(EFC, EFC_FCMD_CGPB, ul_gpnvm)) {
 1892              	 .loc 3 886 0
 1893 0022 7A68     	 ldr r2,[r7,#4]
 1894 0024 0C21     	 movs r1,#12
 1895 0026 0748     	 ldr r0,.L133+4
 1896 0028 074B     	 ldr r3,.L133+8
 1897 002a 9847     	 blx r3
 1898              	.LVL46:
 1899 002c 0346     	 mov r3,r0
 1900 002e 002B     	 cmp r3,#0
 1901 0030 01D1     	 bne .L132
 887:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_OK;
 1902              	 .loc 3 887 0
 1903 0032 0023     	 movs r3,#0
 1904 0034 00E0     	 b .L130
 1905              	.L132:
 888:.././hal/sam3u1c/flash_efc.c **** 	}
 889:.././hal/sam3u1c/flash_efc.c **** 
 890:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_ERROR;
 1906              	 .loc 3 890 0
 1907 0036 1023     	 movs r3,#16
 1908              	.L130:
 891:.././hal/sam3u1c/flash_efc.c **** }
 1909              	 .loc 3 891 0
 1910 0038 1846     	 mov r0,r3
 1911 003a 0837     	 adds r7,r7,#8
 1912              	.LCFI104:
 1913              	 .cfi_def_cfa_offset 8
 1914 003c BD46     	 mov sp,r7
 1915              	.LCFI105:
 1916              	 .cfi_def_cfa_register 13
 1917              	 
 1918 003e 80BD     	 pop {r7,pc}
 1919              	.L134:
 1920              	 .align 2
 1921              	.L133:
 1922 0040 00000000 	 .word flash_is_gpnvm_set
 1923 0044 00080E40 	 .word 1074661376
 1924 0048 00000000 	 .word efc_perform_command
 1925              	 .cfi_endproc
 1926              	.LFE106:
 1928              	 .section .text.flash_is_gpnvm_set,"ax",%progbits
 1929              	 .align 1
 1930              	 .global flash_is_gpnvm_set
 1931              	 .syntax unified
 1932              	 .thumb
 1933              	 .thumb_func
 1934              	 .fpu softvfp
 1936              	flash_is_gpnvm_set:
 1937              	.LFB107:
 892:.././hal/sam3u1c/flash_efc.c **** 
 893:.././hal/sam3u1c/flash_efc.c **** /**
 894:.././hal/sam3u1c/flash_efc.c ****  * \brief Check if the given GPNVM bit is set or not.
 895:.././hal/sam3u1c/flash_efc.c ****  *
 896:.././hal/sam3u1c/flash_efc.c ****  * \param ul_gpnvm GPNVM bit index.
 897:.././hal/sam3u1c/flash_efc.c ****  *
 898:.././hal/sam3u1c/flash_efc.c ****  * \retval 1 If the given GPNVM bit is currently set.
 899:.././hal/sam3u1c/flash_efc.c ****  * \retval 0 If the given GPNVM bit is currently cleared.
 900:.././hal/sam3u1c/flash_efc.c ****  * otherwise returns an error code.
 901:.././hal/sam3u1c/flash_efc.c ****  */
 902:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_is_gpnvm_set(uint32_t ul_gpnvm)
 903:.././hal/sam3u1c/flash_efc.c **** {
 1938              	 .loc 3 903 0
 1939              	 .cfi_startproc
 1940              	 
 1941              	 
 1942 0000 80B5     	 push {r7,lr}
 1943              	.LCFI106:
 1944              	 .cfi_def_cfa_offset 8
 1945              	 .cfi_offset 7,-8
 1946              	 .cfi_offset 14,-4
 1947 0002 84B0     	 sub sp,sp,#16
 1948              	.LCFI107:
 1949              	 .cfi_def_cfa_offset 24
 1950 0004 00AF     	 add r7,sp,#0
 1951              	.LCFI108:
 1952              	 .cfi_def_cfa_register 7
 1953 0006 7860     	 str r0,[r7,#4]
 904:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_gpnvm_bits;
 905:.././hal/sam3u1c/flash_efc.c **** 
 906:.././hal/sam3u1c/flash_efc.c **** 	if (ul_gpnvm >= GPNVM_NUM_MAX) {
 1954              	 .loc 3 906 0
 1955 0008 7B68     	 ldr r3,[r7,#4]
 1956 000a 012B     	 cmp r3,#1
 1957 000c 01D9     	 bls .L136
 907:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 1958              	 .loc 3 907 0
 1959 000e 1123     	 movs r3,#17
 1960 0010 19E0     	 b .L137
 1961              	.L136:
 908:.././hal/sam3u1c/flash_efc.c **** 	}
 909:.././hal/sam3u1c/flash_efc.c **** 
 910:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(EFC, EFC_FCMD_GGPB, 0)) {
 1962              	 .loc 3 910 0
 1963 0012 0022     	 movs r2,#0
 1964 0014 0D21     	 movs r1,#13
 1965 0016 0E48     	 ldr r0,.L140
 1966 0018 0E4B     	 ldr r3,.L140+4
 1967 001a 9847     	 blx r3
 1968              	.LVL47:
 1969 001c 0346     	 mov r3,r0
 1970 001e 002B     	 cmp r3,#0
 1971 0020 01D0     	 beq .L138
 911:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 1972              	 .loc 3 911 0
 1973 0022 1023     	 movs r3,#16
 1974 0024 0FE0     	 b .L137
 1975              	.L138:
 912:.././hal/sam3u1c/flash_efc.c **** 	}
 913:.././hal/sam3u1c/flash_efc.c **** 
 914:.././hal/sam3u1c/flash_efc.c **** 	ul_gpnvm_bits = efc_get_result(EFC);
 1976              	 .loc 3 914 0
 1977 0026 0A48     	 ldr r0,.L140
 1978 0028 0B4B     	 ldr r3,.L140+8
 1979 002a 9847     	 blx r3
 1980              	.LVL48:
 1981 002c F860     	 str r0,[r7,#12]
 915:.././hal/sam3u1c/flash_efc.c **** 	if (ul_gpnvm_bits & (1 << ul_gpnvm)) {
 1982              	 .loc 3 915 0
 1983 002e 0122     	 movs r2,#1
 1984 0030 7B68     	 ldr r3,[r7,#4]
 1985 0032 02FA03F3 	 lsl r3,r2,r3
 1986 0036 1A46     	 mov r2,r3
 1987 0038 FB68     	 ldr r3,[r7,#12]
 1988 003a 1340     	 ands r3,r3,r2
 1989 003c 002B     	 cmp r3,#0
 1990 003e 01D0     	 beq .L139
 916:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_YES;
 1991              	 .loc 3 916 0
 1992 0040 0123     	 movs r3,#1
 1993 0042 00E0     	 b .L137
 1994              	.L139:
 917:.././hal/sam3u1c/flash_efc.c **** 	}
 918:.././hal/sam3u1c/flash_efc.c **** 
 919:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_NO;
 1995              	 .loc 3 919 0
 1996 0044 0023     	 movs r3,#0
 1997              	.L137:
 920:.././hal/sam3u1c/flash_efc.c **** }
 1998              	 .loc 3 920 0
 1999 0046 1846     	 mov r0,r3
 2000 0048 1037     	 adds r7,r7,#16
 2001              	.LCFI109:
 2002              	 .cfi_def_cfa_offset 8
 2003 004a BD46     	 mov sp,r7
 2004              	.LCFI110:
 2005              	 .cfi_def_cfa_register 13
 2006              	 
 2007 004c 80BD     	 pop {r7,pc}
 2008              	.L141:
 2009 004e 00BF     	 .align 2
 2010              	.L140:
 2011 0050 00080E40 	 .word 1074661376
 2012 0054 00000000 	 .word efc_perform_command
 2013 0058 00000000 	 .word efc_get_result
 2014              	 .cfi_endproc
 2015              	.LFE107:
 2017              	 .section .text.flash_enable_security_bit,"ax",%progbits
 2018              	 .align 1
 2019              	 .global flash_enable_security_bit
 2020              	 .syntax unified
 2021              	 .thumb
 2022              	 .thumb_func
 2023              	 .fpu softvfp
 2025              	flash_enable_security_bit:
 2026              	.LFB108:
 921:.././hal/sam3u1c/flash_efc.c **** 
 922:.././hal/sam3u1c/flash_efc.c **** /**
 923:.././hal/sam3u1c/flash_efc.c ****  * \brief Set security bit.
 924:.././hal/sam3u1c/flash_efc.c ****  *
 925:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 926:.././hal/sam3u1c/flash_efc.c ****  */
 927:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_enable_security_bit(void)
 928:.././hal/sam3u1c/flash_efc.c **** {
 2027              	 .loc 3 928 0
 2028              	 .cfi_startproc
 2029              	 
 2030              	 
 2031 0000 80B5     	 push {r7,lr}
 2032              	.LCFI111:
 2033              	 .cfi_def_cfa_offset 8
 2034              	 .cfi_offset 7,-8
 2035              	 .cfi_offset 14,-4
 2036 0002 00AF     	 add r7,sp,#0
 2037              	.LCFI112:
 2038              	 .cfi_def_cfa_register 7
 929:.././hal/sam3u1c/flash_efc.c **** 	return flash_set_gpnvm(0);
 2039              	 .loc 3 929 0
 2040 0004 0020     	 movs r0,#0
 2041 0006 024B     	 ldr r3,.L144
 2042 0008 9847     	 blx r3
 2043              	.LVL49:
 2044 000a 0346     	 mov r3,r0
 930:.././hal/sam3u1c/flash_efc.c **** }
 2045              	 .loc 3 930 0
 2046 000c 1846     	 mov r0,r3
 2047 000e 80BD     	 pop {r7,pc}
 2048              	.L145:
 2049              	 .align 2
 2050              	.L144:
 2051 0010 00000000 	 .word flash_set_gpnvm
 2052              	 .cfi_endproc
 2053              	.LFE108:
 2055              	 .section .text.flash_is_security_bit_enabled,"ax",%progbits
 2056              	 .align 1
 2057              	 .global flash_is_security_bit_enabled
 2058              	 .syntax unified
 2059              	 .thumb
 2060              	 .thumb_func
 2061              	 .fpu softvfp
 2063              	flash_is_security_bit_enabled:
 2064              	.LFB109:
 931:.././hal/sam3u1c/flash_efc.c **** 
 932:.././hal/sam3u1c/flash_efc.c **** /**
 933:.././hal/sam3u1c/flash_efc.c ****  * \brief Check if the security bit is set or not.
 934:.././hal/sam3u1c/flash_efc.c ****  *
 935:.././hal/sam3u1c/flash_efc.c ****  * \retval 1 If the security bit is currently set.
 936:.././hal/sam3u1c/flash_efc.c ****  * \retval 0 If the security bit is currently cleared.
 937:.././hal/sam3u1c/flash_efc.c ****  * otherwise returns an error code.
 938:.././hal/sam3u1c/flash_efc.c ****  */
 939:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_is_security_bit_enabled(void)
 940:.././hal/sam3u1c/flash_efc.c **** {
 2065              	 .loc 3 940 0
 2066              	 .cfi_startproc
 2067              	 
 2068              	 
 2069 0000 80B5     	 push {r7,lr}
 2070              	.LCFI113:
 2071              	 .cfi_def_cfa_offset 8
 2072              	 .cfi_offset 7,-8
 2073              	 .cfi_offset 14,-4
 2074 0002 00AF     	 add r7,sp,#0
 2075              	.LCFI114:
 2076              	 .cfi_def_cfa_register 7
 941:.././hal/sam3u1c/flash_efc.c **** 	return flash_is_gpnvm_set(0);
 2077              	 .loc 3 941 0
 2078 0004 0020     	 movs r0,#0
 2079 0006 024B     	 ldr r3,.L148
 2080 0008 9847     	 blx r3
 2081              	.LVL50:
 2082 000a 0346     	 mov r3,r0
 942:.././hal/sam3u1c/flash_efc.c **** }
 2083              	 .loc 3 942 0
 2084 000c 1846     	 mov r0,r3
 2085 000e 80BD     	 pop {r7,pc}
 2086              	.L149:
 2087              	 .align 2
 2088              	.L148:
 2089 0010 00000000 	 .word flash_is_gpnvm_set
 2090              	 .cfi_endproc
 2091              	.LFE109:
 2093              	 .section .text.flash_read_unique_id,"ax",%progbits
 2094              	 .align 1
 2095              	 .global flash_read_unique_id
 2096              	 .syntax unified
 2097              	 .thumb
 2098              	 .thumb_func
 2099              	 .fpu softvfp
 2101              	flash_read_unique_id:
 2102              	.LFB110:
 943:.././hal/sam3u1c/flash_efc.c **** 
 944:.././hal/sam3u1c/flash_efc.c **** /**
 945:.././hal/sam3u1c/flash_efc.c ****  * \brief Read the flash unique ID.
 946:.././hal/sam3u1c/flash_efc.c ****  *
 947:.././hal/sam3u1c/flash_efc.c ****  * \param pul_data Pointer to a data buffer to store 128-bit unique ID.
 948:.././hal/sam3u1c/flash_efc.c ****  * \param ul_size Data buffer size in DWORD.
 949:.././hal/sam3u1c/flash_efc.c ****  *
 950:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 951:.././hal/sam3u1c/flash_efc.c ****  */
 952:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_read_unique_id(uint32_t *pul_data, uint32_t ul_size)
 953:.././hal/sam3u1c/flash_efc.c **** {
 2103              	 .loc 3 953 0
 2104              	 .cfi_startproc
 2105              	 
 2106              	 
 2107 0000 90B5     	 push {r4,r7,lr}
 2108              	.LCFI115:
 2109              	 .cfi_def_cfa_offset 12
 2110              	 .cfi_offset 4,-12
 2111              	 .cfi_offset 7,-8
 2112              	 .cfi_offset 14,-4
 2113 0002 8BB0     	 sub sp,sp,#44
 2114              	.LCFI116:
 2115              	 .cfi_def_cfa_offset 56
 2116 0004 02AF     	 add r7,sp,#8
 2117              	.LCFI117:
 2118              	 .cfi_def_cfa 7,48
 2119 0006 7860     	 str r0,[r7,#4]
 2120 0008 3960     	 str r1,[r7]
 954:.././hal/sam3u1c/flash_efc.c **** 	uint32_t uid_buf[4];
 955:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_idx;
 956:.././hal/sam3u1c/flash_efc.c **** 
 957:.././hal/sam3u1c/flash_efc.c **** 	if (FLASH_RC_OK != efc_perform_read_sequence(EFC, EFC_FCMD_STUI,
 2121              	 .loc 3 957 0
 2122 000a 07F10C02 	 add r2,r7,#12
 2123 000e 0423     	 movs r3,#4
 2124 0010 0093     	 str r3,[sp]
 2125 0012 1346     	 mov r3,r2
 2126 0014 0F22     	 movs r2,#15
 2127 0016 0E21     	 movs r1,#14
 2128 0018 1348     	 ldr r0,.L157
 2129 001a 144C     	 ldr r4,.L157+4
 2130 001c A047     	 blx r4
 2131              	.LVL51:
 2132 001e 0346     	 mov r3,r0
 2133 0020 002B     	 cmp r3,#0
 2134 0022 01D0     	 beq .L151
 958:.././hal/sam3u1c/flash_efc.c **** 			EFC_FCMD_SPUI, uid_buf, 4)) {
 959:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 2135              	 .loc 3 959 0
 2136 0024 1023     	 movs r3,#16
 2137 0026 1BE0     	 b .L156
 2138              	.L151:
 960:.././hal/sam3u1c/flash_efc.c **** 	}
 961:.././hal/sam3u1c/flash_efc.c **** 
 962:.././hal/sam3u1c/flash_efc.c **** 	if (ul_size > 4) {
 2139              	 .loc 3 962 0
 2140 0028 3B68     	 ldr r3,[r7]
 2141 002a 042B     	 cmp r3,#4
 2142 002c 01D9     	 bls .L153
 963:.././hal/sam3u1c/flash_efc.c **** 		/* Only 4 dword to store unique ID */
 964:.././hal/sam3u1c/flash_efc.c **** 		ul_size = 4;
 2143              	 .loc 3 964 0
 2144 002e 0423     	 movs r3,#4
 2145 0030 3B60     	 str r3,[r7]
 2146              	.L153:
 965:.././hal/sam3u1c/flash_efc.c **** 	}
 966:.././hal/sam3u1c/flash_efc.c **** 
 967:.././hal/sam3u1c/flash_efc.c **** 	for (ul_idx = 0; ul_idx < ul_size; ul_idx++) {
 2147              	 .loc 3 967 0
 2148 0032 0023     	 movs r3,#0
 2149 0034 FB61     	 str r3,[r7,#28]
 2150 0036 0EE0     	 b .L154
 2151              	.L155:
 968:.././hal/sam3u1c/flash_efc.c **** 		pul_data[ul_idx] = uid_buf[ul_idx];
 2152              	 .loc 3 968 0 discriminator 3
 2153 0038 FB69     	 ldr r3,[r7,#28]
 2154 003a 9B00     	 lsls r3,r3,#2
 2155 003c 7A68     	 ldr r2,[r7,#4]
 2156 003e 1A44     	 add r2,r2,r3
 2157 0040 FB69     	 ldr r3,[r7,#28]
 2158 0042 9B00     	 lsls r3,r3,#2
 2159 0044 07F12001 	 add r1,r7,#32
 2160 0048 0B44     	 add r3,r3,r1
 2161 004a 53F8143C 	 ldr r3,[r3,#-20]
 2162 004e 1360     	 str r3,[r2]
 967:.././hal/sam3u1c/flash_efc.c **** 		pul_data[ul_idx] = uid_buf[ul_idx];
 2163              	 .loc 3 967 0 discriminator 3
 2164 0050 FB69     	 ldr r3,[r7,#28]
 2165 0052 0133     	 adds r3,r3,#1
 2166 0054 FB61     	 str r3,[r7,#28]
 2167              	.L154:
 967:.././hal/sam3u1c/flash_efc.c **** 		pul_data[ul_idx] = uid_buf[ul_idx];
 2168              	 .loc 3 967 0 is_stmt 0 discriminator 1
 2169 0056 FA69     	 ldr r2,[r7,#28]
 2170 0058 3B68     	 ldr r3,[r7]
 2171 005a 9A42     	 cmp r2,r3
 2172 005c ECD3     	 bcc .L155
 969:.././hal/sam3u1c/flash_efc.c **** 	}
 970:.././hal/sam3u1c/flash_efc.c **** 
 971:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 2173              	 .loc 3 971 0 is_stmt 1
 2174 005e 0023     	 movs r3,#0
 2175              	.L156:
 972:.././hal/sam3u1c/flash_efc.c **** }
 2176              	 .loc 3 972 0 discriminator 1
 2177 0060 1846     	 mov r0,r3
 2178 0062 2437     	 adds r7,r7,#36
 2179              	.LCFI118:
 2180              	 .cfi_def_cfa_offset 12
 2181 0064 BD46     	 mov sp,r7
 2182              	.LCFI119:
 2183              	 .cfi_def_cfa_register 13
 2184              	 
 2185 0066 90BD     	 pop {r4,r7,pc}
 2186              	.L158:
 2187              	 .align 2
 2188              	.L157:
 2189 0068 00080E40 	 .word 1074661376
 2190 006c 00000000 	 .word efc_perform_read_sequence
 2191              	 .cfi_endproc
 2192              	.LFE110:
 2194              	 .text
 2195              	.Letext0:
 2196              	 .file 4 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 2197              	 .file 5 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include\\sys\\lock.h"
 2198              	 .file 6 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include\\sys\\_types.h"
 2199              	 .file 7 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\lib\\gcc\\arm-none-eabi\\7.3.1\\include\\stddef.h"
 2200              	 .file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include\\sys\\reent.h"
 2201              	 .file 9 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 2202              	 .file 10 ".././hal/sam3u1c/inc/sam3u1c.h"
 2203              	 .file 11 ".././hal/sam3u1c/inc/core_cm3.h"
 2204              	 .file 12 ".././hal/sam3u1c/inc/system_sam3u.h"
 2205              	 .file 13 ".././hal/sam3u1c/inc/component/component_efc.h"
 2206              	 .file 14 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include\\stdlib.h"
 2207              	 .file 15 ".././hal/sam3u1c/inc/interrupt/interrupt_sam_nvic.h"
 2208              	 .file 16 ".././hal/sam3u1c/inc/efc.h"
 2209              	 .file 17 ".././hal/sam3u1c/inc/flash_efc.h"
 2210              	 .file 18 ".././hal/sam3u1c/inc/sam3u/pll.h"
 2211              	 .file 19 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:00000000 flash_efc.c
    {standard input}:16     .bss.cpu_irq_critical_section_counter:00000000 $d
    {standard input}:19     .bss.cpu_irq_critical_section_counter:00000000 cpu_irq_critical_section_counter
    {standard input}:24     .bss.cpu_irq_prev_interrupt_state:00000000 cpu_irq_prev_interrupt_state
    {standard input}:25     .bss.cpu_irq_prev_interrupt_state:00000000 $d
    {standard input}:27     .text.osc_get_rate:00000000 $t
    {standard input}:33     .text.osc_get_rate:00000000 osc_get_rate
    {standard input}:60     .text.osc_get_rate:00000014 $d
    {standard input}:68     .text.osc_get_rate:00000034 $t
    {standard input}:122    .text.osc_get_rate:00000064 $d
    {standard input}:129    .text.sysclk_get_main_hz:00000000 $t
    {standard input}:135    .text.sysclk_get_main_hz:00000000 sysclk_get_main_hz
    {standard input}:163    .text.sysclk_get_main_hz:00000014 $d
    {standard input}:168    .text.sysclk_get_cpu_hz:00000000 $t
    {standard input}:174    .text.sysclk_get_cpu_hz:00000000 sysclk_get_cpu_hz
    {standard input}:200    .text.sysclk_get_cpu_hz:00000010 $d
    {standard input}:205    .bss.gs_ul_page_buffer:00000000 $d
    {standard input}:208    .bss.gs_ul_page_buffer:00000000 gs_ul_page_buffer
    {standard input}:211    .text.translate_address:00000000 $t
    {standard input}:217    .text.translate_address:00000000 translate_address
    {standard input}:296    .text.translate_address:00000054 $d
    {standard input}:301    .text.compute_address:00000000 $t
    {standard input}:307    .text.compute_address:00000000 compute_address
    {standard input}:364    .text.compute_lock_range:00000000 $t
    {standard input}:370    .text.compute_lock_range:00000000 compute_lock_range
    {standard input}:439    .text.flash_init:00000000 $t
    {standard input}:446    .text.flash_init:00000000 flash_init
    {standard input}:487    .text.flash_init:00000020 $d
    {standard input}:493    .text.flash_set_wait_state:00000000 $t
    {standard input}:500    .text.flash_set_wait_state:00000000 flash_set_wait_state
    {standard input}:550    .text.flash_set_wait_state:0000002c $d
    {standard input}:556    .text.flash_set_wait_state_adaptively:00000000 $t
    {standard input}:563    .text.flash_set_wait_state_adaptively:00000000 flash_set_wait_state_adaptively
    {standard input}:674    .text.flash_set_wait_state_adaptively:00000080 $d
    {standard input}:685    .text.flash_get_wait_state:00000000 $t
    {standard input}:692    .text.flash_get_wait_state:00000000 flash_get_wait_state
    {standard input}:739    .text.flash_get_wait_state:00000028 $d
    {standard input}:745    .text.flash_get_descriptor:00000000 $t
    {standard input}:752    .text.flash_get_descriptor:00000000 flash_get_descriptor
    {standard input}:845    .text.flash_get_descriptor:00000068 $d
    {standard input}:852    .text.flash_get_page_count:00000000 $t
    {standard input}:859    .text.flash_get_page_count:00000000 flash_get_page_count
    {standard input}:903    .text.flash_get_page_count_per_region:00000000 $t
    {standard input}:910    .text.flash_get_page_count_per_region:00000000 flash_get_page_count_per_region
    {standard input}:954    .text.flash_get_region_count:00000000 $t
    {standard input}:961    .text.flash_get_region_count:00000000 flash_get_region_count
    {standard input}:1001   .text.flash_erase_all:00000000 $t
    {standard input}:1008   .text.flash_erase_all:00000000 flash_erase_all
    {standard input}:1066   .text.flash_erase_all:00000038 $d
    {standard input}:1072   .text.flash_write:00000000 $t
    {standard input}:1079   .text.flash_write:00000000 flash_write
    {standard input}:1300   .text.flash_write:00000138 $d
    {standard input}:1311   .text.flash_lock:00000000 $t
    {standard input}:1318   .text.flash_lock:00000000 flash_lock
    {standard input}:1433   .text.flash_lock:00000090 $d
    {standard input}:1440   .text.flash_unlock:00000000 $t
    {standard input}:1447   .text.flash_unlock:00000000 flash_unlock
    {standard input}:1562   .text.flash_unlock:00000090 $d
    {standard input}:1569   .text.flash_is_locked:00000000 $t
    {standard input}:1576   .text.flash_is_locked:00000000 flash_is_locked
    {standard input}:1758   .text.flash_is_locked:000000f4 $d
    {standard input}:1765   .text.flash_set_gpnvm:00000000 $t
    {standard input}:1772   .text.flash_set_gpnvm:00000000 flash_set_gpnvm
    {standard input}:1840   .text.flash_set_gpnvm:00000040 $d
    {standard input}:1936   .text.flash_is_gpnvm_set:00000000 flash_is_gpnvm_set
    {standard input}:1847   .text.flash_clear_gpnvm:00000000 $t
    {standard input}:1854   .text.flash_clear_gpnvm:00000000 flash_clear_gpnvm
    {standard input}:1922   .text.flash_clear_gpnvm:00000040 $d
    {standard input}:1929   .text.flash_is_gpnvm_set:00000000 $t
    {standard input}:2011   .text.flash_is_gpnvm_set:00000050 $d
    {standard input}:2018   .text.flash_enable_security_bit:00000000 $t
    {standard input}:2025   .text.flash_enable_security_bit:00000000 flash_enable_security_bit
    {standard input}:2051   .text.flash_enable_security_bit:00000010 $d
    {standard input}:2056   .text.flash_is_security_bit_enabled:00000000 $t
    {standard input}:2063   .text.flash_is_security_bit_enabled:00000000 flash_is_security_bit_enabled
    {standard input}:2089   .text.flash_is_security_bit_enabled:00000010 $d
    {standard input}:2094   .text.flash_read_unique_id:00000000 $t
    {standard input}:2101   .text.flash_read_unique_id:00000000 flash_read_unique_id
    {standard input}:2189   .text.flash_read_unique_id:00000068 $d
                           .group:00000000 wm4.0.7d8dd4860124405c65f5049e8a79afcb
                           .group:00000000 wm4._newlib_version.h.4.875b979a44719054cd750d0952ad3fd6
                           .group:00000000 wm4.newlib.h.18.5e5ca3429233af402d406a202f1fc1ac
                           .group:00000000 wm4.ieeefp.h.77.220d9cccac42cd58761758bee2df4ce6
                           .group:00000000 wm4.features.h.22.026edb2397769f4ae13f35900dbdb560
                           .group:00000000 wm4.config.h.220.6cac6a9685cfce5e83c17784171638d9
                           .group:00000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:00000000 wm4.stddef.h.39.99b5021e28f91cdb161c889e07266673
                           .group:00000000 wm4._default_types.h.6.959254cf5f09734ea7516c89e8bb21bd
                           .group:00000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:00000000 wm4._types.h.125.5cf8a495f1f7ef36777ad868a1e32068
                           .group:00000000 wm4.stddef.h.161.5349cb105733e8777bfb0cf53c4e3f34
                           .group:00000000 wm4._types.h.184.03611d4f6b5bec9997bcf4279eceba07
                           .group:00000000 wm4.reent.h.17.90c2574d4acdcfce933db5cb09ff35fe
                           .group:00000000 wm4.cdefs.h.47.14fad0b327eb9dcf106599b738d85132
                           .group:00000000 wm4.string.h.15.dab3980bf35408a4c507182805e2de3a
                           .group:00000000 wm4.stddef.h.161.19e15733342b50ead2919490b095303e
                           .group:00000000 wm4.assert.h.11.7fe9eb241be6b0fee772a1e693b81ae3
                           .group:00000000 wm4.parts.h.45.afc900689b2c82332e69d798acedc875
                           .group:00000000 wm4.tpaste.h.45.af3ee36765243b162c88f7f944858426
                           .group:00000000 wm4.stringz.h.45.c4f6cbe0005e6c1d2139bc6c0e4f4722
                           .group:00000000 wm4.mrepeat.h.59.c5daaed201a4340b0edf435161d0b77f
                           .group:00000000 wm4._intsup.h.10.cce27fed8484c08a33f522034c30d2b5
                           .group:00000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:00000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:00000000 wm4.sam3u1c.h.220.c0b54b5a55bc87791749ae17b1487779
                           .group:00000000 wm4.core_cm3.h.32.5c59c312db585622d253fdb887b0afb1
                           .group:00000000 wm4.core_cmInstr.h.25.d8165482ef3061013a2fc83e2d85f3d9
                           .group:00000000 wm4.core_cm3.h.127.b561404f2a159dc517b409bc244d16c1
                           .group:00000000 wm4.component_adc.h.43.d49887380d07d1cd08cc4e37b3485e31
                           .group:00000000 wm4.component_adc12b.h.43.eadc09f1073923fb91f1f393cc397dcb
                           .group:00000000 wm4.component_chipid.h.43.15825c969b1cc9eeea3d9416499874c8
                           .group:00000000 wm4.component_dmac.h.43.cc8187b1cf6bfeadc91b14fdd28b9e8b
                           .group:00000000 wm4.component_efc.h.43.cb1b3997ad9ea3733ad421ecbfd02fdd
                           .group:00000000 wm4.component_gpbr.h.43.49b7e13894fe38b29f2243bbbe530227
                           .group:00000000 wm4.component_hsmci.h.43.7b7194c92e1480c038f3342f7cec440a
                           .group:00000000 wm4.component_matrix.h.43.1d209838fb75b4827119203a357141ee
                           .group:00000000 wm4.component_pdc.h.43.19528a5f9ef5a348234ea06f89069c55
                           .group:00000000 wm4.component_pio.h.43.163b46c3683ccf92e8de39a5554f50e8
                           .group:00000000 wm4.component_pmc.h.43.ee4f030602866917aeed15fb2b948de8
                           .group:00000000 wm4.component_pwm.h.43.ab6262a86f0aea354b43fe6dce7e7eb3
                           .group:00000000 wm4.component_rstc.h.43.4eb59dc2ddcf585fabf251d0c329fcdd
                           .group:00000000 wm4.component_rtc.h.43.ba8ccafc772b11d562a3cceab8b95072
                           .group:00000000 wm4.component_rtt.h.43.3206ef8f067e5e747c3c4c7e719c1429
                           .group:00000000 wm4.component_smc.h.43.907847915f1a5616734199d7e34424fa
                           .group:00000000 wm4.component_spi.h.43.a2a09df64ab768c0a32be55285c74ded
                           .group:00000000 wm4.component_ssc.h.43.d7c78f990c13fc511671b64798c4bcd0
                           .group:00000000 wm4.component_supc.h.43.7d17f8e5ed3ba815e84381152735062f
                           .group:00000000 wm4.component_tc.h.43.662eac8137408372b4f9d26c0b5f8621
                           .group:00000000 wm4.component_twi.h.43.eda18625bd851fc4605861f5b3240c0b
                           .group:00000000 wm4.component_uart.h.43.2d92735c5ea05c973661e1ba99a2f37c
                           .group:00000000 wm4.component_udphs.h.43.21cecd26a4e44df0013037f29f2716e4
                           .group:00000000 wm4.component_usart.h.43.7872f8f455adb38b67b9fbdb15657fbe
                           .group:00000000 wm4.component_wdt.h.43.e31e10a5469b62c3660b49ab250f802f
                           .group:00000000 wm4.instance_hsmci.h.43.e233236cc7fd5a805539a7ecc0e1d8d2
                           .group:00000000 wm4.instance_ssc.h.43.c0cfabc3b9f3bb60745c913111bce965
                           .group:00000000 wm4.instance_spi.h.43.570ae46af19e4179d9796872b9a8b9bc
                           .group:00000000 wm4.instance_tc0.h.43.049b3a82387d2961594190609e896a29
                           .group:00000000 wm4.instance_twi0.h.43.255dc0afa9e0d45eaea0a935eca2f103
                           .group:00000000 wm4.instance_twi1.h.43.652d1d407893f259f2a817544ba662c2
                           .group:00000000 wm4.instance_pwm.h.43.88294acec3ca56d6fc521038521a1567
                           .group:00000000 wm4.instance_usart0.h.43.e26677512aee3dd3bedd71d394410000
                           .group:00000000 wm4.instance_usart1.h.43.1ba97dbc6610d9fb3132b9d845688201
                           .group:00000000 wm4.instance_usart2.h.43.baa1bf30b3c5acdee90c4a1f50fe9ebd
                           .group:00000000 wm4.instance_udphs.h.43.b1ce94181e0d1f22877b81c6040a4363
                           .group:00000000 wm4.instance_adc12b.h.43.d73ed59e867ccdfdb846d9ef32a50c0c
                           .group:00000000 wm4.instance_adc.h.43.2b7611a00afeb4c555339b844d4b8456
                           .group:00000000 wm4.instance_dmac.h.43.ee72691d84889c8f285932be4a075ddb
                           .group:00000000 wm4.instance_smc.h.43.29610fd00979caaaa65821ad40e9da06
                           .group:00000000 wm4.instance_matrix.h.43.01ee474141594385374c41a29daeeefe
                           .group:00000000 wm4.instance_pmc.h.43.37430325ed7b8b24c3fe640c41c29ef5
                           .group:00000000 wm4.instance_uart.h.43.bd378395ba022bc8670c82ebe656fbbd
                           .group:00000000 wm4.instance_chipid.h.43.29cd8fb600f149aa58830fcc78fe36f9
                           .group:00000000 wm4.instance_efc0.h.43.6b85dba20721a7e9fc4350e78d193680
                           .group:00000000 wm4.instance_efc1.h.43.2c5e94fc4d2742678318d73450d08d57
                           .group:00000000 wm4.instance_pioa.h.43.eeb46cc3bfe01a1f28e67aa3a6851ed8
                           .group:00000000 wm4.instance_piob.h.43.652ce26b6c37ac56f9ed42a9216d9aca
                           .group:00000000 wm4.instance_rstc.h.43.c5de224364a50a85f237c0b864aa4c8f
                           .group:00000000 wm4.instance_supc.h.43.a5f1a5ca08f468ccf34ed3653e045f1f
                           .group:00000000 wm4.instance_rtt.h.43.8622b192c23334996132415e3095df7f
                           .group:00000000 wm4.instance_wdt.h.43.407ea53e133eacf09acf2c7fcb6b7524
                           .group:00000000 wm4.instance_rtc.h.43.f70b77f9180401c8d9d920cb4a1cd166
                           .group:00000000 wm4.instance_gpbr.h.43.9066cb40d557f6755101368854272348
                           .group:00000000 wm4.sam3u1c.h.312.ae446d8e874d34ca3df78faf190c678f
                           .group:00000000 wm4.pio_sam3u1c.h.43.18b24f16e1710ff2a400d88fe33c5107
                           .group:00000000 wm4.sam3u1c.h.442.cd4bbc3af493e98bc9b60c2905132ed0
                           .group:00000000 wm4.stdio.h.27.3fc80220048df77954e38daec3bb9670
                           .group:00000000 wm4.stdarg.h.34.3a23a216c0c293b3d2ea2e89281481e6
                           .group:00000000 wm4.types.h.40.e8c16e7ec36ba55f133d0616070e25fc
                           .group:00000000 wm4._endian.h.31.65a10590763c3dde1ac4a7f66d7d4891
                           .group:00000000 wm4.endian.h.9.49f3a4695c1b61e8a0808de3c4a106cb
                           .group:00000000 wm4._timeval.h.30.0e8bfd94e85db17dda3286ee81496fe6
                           .group:00000000 wm4.timespec.h.41.d855182eb0e690443ab8651bcedca6e1
                           .group:00000000 wm4.select.h.19.97ca6fd0c752a0f3b6719fd314d361e6
                           .group:00000000 wm4.types.h.69.ed3eae3cf73030a737515151ebcab7a1
                           .group:00000000 wm4.sched.h.22.c60982713a5c428609783c78f9c78d95
                           .group:00000000 wm4._pthreadtypes.h.36.fcee9961c35163dde6267ef772ad1972
                           .group:00000000 wm4.stdio.h.2.4aa87247282eca6c8f36f9de33d8df1a
                           .group:00000000 wm4.stdio.h.81.932d0c162786b883f622b8d05c120c78
                           .group:00000000 wm4.stdbool.h.29.07dce69c3b78884144b7f7bd19483461
                           .group:00000000 wm4.stdlib.h.13.4ed386f5c1a80d71e72172885d946ef2
                           .group:00000000 wm4.alloca.h.8.dfc0c703c47ec3e69746825b17d9e66d
                           .group:00000000 wm4.stdlib.h.56.d4493cd3736e51e9d56335045f26df45
                           .group:00000000 wm4.compiler.h.88.0e6ad966134fa012ce9a34053d3f48aa
                           .group:00000000 wm4.interrupt_sam_nvic.h.45.4876da6c127868305d66389e87e0876f
                           .group:00000000 wm4.compiler.h.425.66dd29c210af3287ed85ec3553a3e6b1
                           .group:00000000 wm4.efc.h.45.ec5734119c630498df26106bacf9a684
                           .group:00000000 wm4.flash_efc.h.90.a4a39259055880dc10b861c5fe1b99e7
                           .group:00000000 wm4.conf_clock.h.45.5dc276d21b4d793a62f1a9757cc18d5c
                           .group:00000000 wm4.board.h.48.ce8d06c36cc583d9bf62738411f62e4d
                           .group:00000000 wm4.cw521.h.62.d34c289ace4a92d90be8fb389db40479
                           .group:00000000 wm4.pmc.h.45.bbe1bf97a811e3b283420b2eeadf0b35
                           .group:00000000 wm4.osc.h.94.b766cddafe899eca01d775f7b2906680
                           .group:00000000 wm4.pll.h.45.a605c31ca466ae25752a678e8572be48
                           .group:00000000 wm4.sysclk.h.156.541a142b0016a365728ea1f7c0e3db84

UNDEFINED SYMBOLS
efc_init
efc_set_wait_state
efc_get_wait_state
efc_perform_command
efc_get_result
memcpy
efc_perform_read_sequence
