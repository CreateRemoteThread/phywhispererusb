   1              	 .cpu cortex-m3
   2              	 .eabi_attribute 20,1
   3              	 .eabi_attribute 21,1
   4              	 .eabi_attribute 23,3
   5              	 .eabi_attribute 24,1
   6              	 .eabi_attribute 25,1
   7              	 .eabi_attribute 26,1
   8              	 .eabi_attribute 30,6
   9              	 .eabi_attribute 34,1
  10              	 .eabi_attribute 18,4
  11              	 .file "flash_efc.c"
  12              	 .text
  13              	.Ltext0:
  14              	 .cfi_sections .debug_frame
  15              	 .section .bss.cpu_irq_critical_section_counter,"aw",%nobits
  16              	 .align 2
  19              	cpu_irq_critical_section_counter:
  20 0000 00000000 	 .space 4
  21              	 .section .bss.cpu_irq_prev_interrupt_state,"aw",%nobits
  24              	cpu_irq_prev_interrupt_state:
  25 0000 00       	 .space 1
  26              	 .section .text.osc_get_rate,"ax",%progbits
  27              	 .align 1
  28              	 .arch armv7-m
  29              	 .syntax unified
  30              	 .thumb
  31              	 .thumb_func
  32              	 .fpu softvfp
  34              	osc_get_rate:
  35              	.LFB72:
  36              	 .file 1 ".././hal/sam3u1c/inc/sam3u/osc.h"
   1:.././hal/sam3u1c/inc/sam3u/osc.h **** /**
   2:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \file
   3:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
   4:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \brief Chip-specific oscillator management functions.
   5:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
   6:.././hal/sam3u1c/inc/sam3u/osc.h ****  * Copyright (c) 2011 - 2013 Atmel Corporation. All rights reserved.
   7:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
   8:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \asf_license_start
   9:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  10:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \page License
  11:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  12:.././hal/sam3u1c/inc/sam3u/osc.h ****  * Redistribution and use in source and binary forms, with or without
  13:.././hal/sam3u1c/inc/sam3u/osc.h ****  * modification, are permitted provided that the following conditions are met:
  14:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  15:.././hal/sam3u1c/inc/sam3u/osc.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    this list of conditions and the following disclaimer.
  17:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  18:.././hal/sam3u1c/inc/sam3u/osc.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    and/or other materials provided with the distribution.
  21:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  22:.././hal/sam3u1c/inc/sam3u/osc.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    from this software without specific prior written permission.
  24:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  25:.././hal/sam3u1c/inc/sam3u/osc.h ****  * 4. This software may only be redistributed and used in connection with an
  26:.././hal/sam3u1c/inc/sam3u/osc.h ****  *    Atmel microcontroller product.
  27:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  28:.././hal/sam3u1c/inc/sam3u/osc.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:.././hal/sam3u1c/inc/sam3u/osc.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:.././hal/sam3u1c/inc/sam3u/osc.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:.././hal/sam3u1c/inc/sam3u/osc.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:.././hal/sam3u1c/inc/sam3u/osc.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:.././hal/sam3u1c/inc/sam3u/osc.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:.././hal/sam3u1c/inc/sam3u/osc.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:.././hal/sam3u1c/inc/sam3u/osc.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:.././hal/sam3u1c/inc/sam3u/osc.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:.././hal/sam3u1c/inc/sam3u/osc.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:.././hal/sam3u1c/inc/sam3u/osc.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  40:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \asf_license_stop
  41:.././hal/sam3u1c/inc/sam3u/osc.h ****  *
  42:.././hal/sam3u1c/inc/sam3u/osc.h ****  */
  43:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  44:.././hal/sam3u1c/inc/sam3u/osc.h **** #ifndef CHIP_OSC_H_INCLUDED
  45:.././hal/sam3u1c/inc/sam3u/osc.h **** #define CHIP_OSC_H_INCLUDED
  46:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  47:.././hal/sam3u1c/inc/sam3u/osc.h **** #include "board.h"
  48:.././hal/sam3u1c/inc/sam3u/osc.h **** #include "pmc.h"
  49:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  50:.././hal/sam3u1c/inc/sam3u/osc.h **** /// @cond 0
  51:.././hal/sam3u1c/inc/sam3u/osc.h **** /**INDENT-OFF**/
  52:.././hal/sam3u1c/inc/sam3u/osc.h **** #ifdef __cplusplus
  53:.././hal/sam3u1c/inc/sam3u/osc.h **** extern "C" {
  54:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  55:.././hal/sam3u1c/inc/sam3u/osc.h **** /**INDENT-ON**/
  56:.././hal/sam3u1c/inc/sam3u/osc.h **** /// @endcond
  57:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  58:.././hal/sam3u1c/inc/sam3u/osc.h **** /*
  59:.././hal/sam3u1c/inc/sam3u/osc.h ****  * Below BOARD_XXX macros are related to the specific board, and
  60:.././hal/sam3u1c/inc/sam3u/osc.h ****  * should be defined by the board code, otherwise default value are used.
  61:.././hal/sam3u1c/inc/sam3u/osc.h ****  */
  62:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_FREQ_SLCK_XTAL)
  63:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board slow clock xtal frequency has not been defined.
  64:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_FREQ_SLCK_XTAL      (32768UL)
  65:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  66:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  67:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_FREQ_SLCK_BYPASS)
  68:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board slow clock bypass frequency has not been defined.
  69:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_FREQ_SLCK_BYPASS    (32768UL)
  70:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  71:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  72:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_FREQ_MAINCK_XTAL)
  73:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board main clock xtal frequency has not been defined.
  74:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_FREQ_MAINCK_XTAL    (12000000UL)
  75:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  76:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  77:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_FREQ_MAINCK_BYPASS)
  78:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board main clock bypass frequency has not been defined.
  79:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_FREQ_MAINCK_BYPASS  (12000000UL)
  80:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  81:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  82:.././hal/sam3u1c/inc/sam3u/osc.h **** #if !defined(BOARD_OSC_STARTUP_US)
  83:.././hal/sam3u1c/inc/sam3u/osc.h **** #  warning The board main clock xtal startup time has not been defined.
  84:.././hal/sam3u1c/inc/sam3u/osc.h **** #  define BOARD_OSC_STARTUP_US      (15625UL)
  85:.././hal/sam3u1c/inc/sam3u/osc.h **** #endif
  86:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  87:.././hal/sam3u1c/inc/sam3u/osc.h **** /**
  88:.././hal/sam3u1c/inc/sam3u/osc.h ****  * \weakgroup osc_group
  89:.././hal/sam3u1c/inc/sam3u/osc.h ****  * @{
  90:.././hal/sam3u1c/inc/sam3u/osc.h ****  */
  91:.././hal/sam3u1c/inc/sam3u/osc.h **** 
  92:.././hal/sam3u1c/inc/sam3u/osc.h **** //! \name Oscillator identifiers
  93:.././hal/sam3u1c/inc/sam3u/osc.h **** //@{
  94:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_RC             0    //!< Internal 32kHz RC oscillator.
  95:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_XTAL           1    //!< External 32kHz crystal oscillator.
  96:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_BYPASS         2    //!< External 32kHz bypass oscillator.
  97:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_4M_RC            3    //!< Internal 4MHz RC oscillator.
  98:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_8M_RC            4    //!< Internal 8MHz RC oscillator.
  99:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_12M_RC           5    //!< Internal 12MHz RC oscillator.
 100:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_XTAL             6    //!< External crystal oscillator.
 101:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_BYPASS           7    //!< External bypass oscillator.
 102:.././hal/sam3u1c/inc/sam3u/osc.h **** //@}
 103:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 104:.././hal/sam3u1c/inc/sam3u/osc.h **** //! \name Oscillator clock speed in hertz
 105:.././hal/sam3u1c/inc/sam3u/osc.h **** //@{
 106:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_RC_HZ          CHIP_FREQ_SLCK_RC               //!< Internal 32kHz RC oscillat
 107:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_XTAL_HZ        BOARD_FREQ_SLCK_XTAL            //!< External 32kHz crystal osc
 108:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_SLCK_32K_BYPASS_HZ      BOARD_FREQ_SLCK_BYPASS          //!< External 32kHz bypass osci
 109:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_4M_RC_HZ         CHIP_FREQ_MAINCK_RC_4MHZ        //!< Internal 4MHz RC oscillato
 110:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_8M_RC_HZ         CHIP_FREQ_MAINCK_RC_8MHZ        //!< Internal 8MHz RC oscillato
 111:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_12M_RC_HZ        CHIP_FREQ_MAINCK_RC_12MHZ       //!< Internal 12MHz RC oscillat
 112:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_XTAL_HZ          BOARD_FREQ_MAINCK_XTAL          //!< External crystal oscillato
 113:.././hal/sam3u1c/inc/sam3u/osc.h **** #define OSC_MAINCK_BYPASS_HZ        BOARD_FREQ_MAINCK_BYPASS        //!< External bypass oscillator
 114:.././hal/sam3u1c/inc/sam3u/osc.h **** //@}
 115:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 116:.././hal/sam3u1c/inc/sam3u/osc.h **** static inline void osc_enable(uint32_t ul_id)
 117:.././hal/sam3u1c/inc/sam3u/osc.h **** {
 118:.././hal/sam3u1c/inc/sam3u/osc.h **** 	switch (ul_id) {
 119:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_RC:
 120:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 121:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 122:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_XTAL:
 123:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_switch_sclk_to_32kxtal(PMC_OSC_XTAL);
 124:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 125:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 126:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_BYPASS:
 127:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_switch_sclk_to_32kxtal(PMC_OSC_BYPASS);
 128:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 129:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 130:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 131:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_4M_RC:
 132:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_enable_fastrc(CKGR_MOR_MOSCRCF_4_MHz);
 133:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 134:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 135:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_8M_RC:
 136:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_enable_fastrc(CKGR_MOR_MOSCRCF_8_MHz);
 137:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 138:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 139:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_12M_RC:
 140:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_enable_fastrc(CKGR_MOR_MOSCRCF_12_MHz);
 141:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 142:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 143:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 144:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_XTAL:
 145:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_enable_main_xtal(pmc_us_to_moscxtst(
 146:.././hal/sam3u1c/inc/sam3u/osc.h **** 				BOARD_OSC_STARTUP_US, OSC_SLCK_32K_RC_HZ));
 147:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 148:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 149:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_BYPASS:
 150:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_bypass_main_xtal();
 151:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 152:.././hal/sam3u1c/inc/sam3u/osc.h **** 	}
 153:.././hal/sam3u1c/inc/sam3u/osc.h **** }
 154:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 155:.././hal/sam3u1c/inc/sam3u/osc.h **** static inline void osc_disable(uint32_t ul_id)
 156:.././hal/sam3u1c/inc/sam3u/osc.h **** {
 157:.././hal/sam3u1c/inc/sam3u/osc.h **** 	switch (ul_id) {
 158:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_RC:
 159:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_XTAL:
 160:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_BYPASS:
 161:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 162:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 163:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_4M_RC:
 164:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_8M_RC:
 165:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_12M_RC:
 166:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_disable_fastrc();
 167:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 168:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 169:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_XTAL:
 170:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_disable_xtal(PMC_OSC_XTAL);
 171:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 172:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 173:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_BYPASS:
 174:.././hal/sam3u1c/inc/sam3u/osc.h **** 		pmc_osc_disable_xtal(PMC_OSC_BYPASS);
 175:.././hal/sam3u1c/inc/sam3u/osc.h **** 		break;
 176:.././hal/sam3u1c/inc/sam3u/osc.h **** 	}
 177:.././hal/sam3u1c/inc/sam3u/osc.h **** }
 178:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 179:.././hal/sam3u1c/inc/sam3u/osc.h **** static inline bool osc_is_ready(uint32_t ul_id)
 180:.././hal/sam3u1c/inc/sam3u/osc.h **** {
 181:.././hal/sam3u1c/inc/sam3u/osc.h **** 	switch (ul_id) {
 182:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_RC:
 183:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return 1;
 184:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 185:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_XTAL:
 186:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_BYPASS:
 187:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return pmc_osc_is_ready_32kxtal();
 188:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 189:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_4M_RC:
 190:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_8M_RC:
 191:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_12M_RC:
 192:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return pmc_osc_is_ready_fastrc();
 193:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 194:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_XTAL:
 195:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_BYPASS:
 196:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return pmc_osc_is_ready_main_xtal();
 197:.././hal/sam3u1c/inc/sam3u/osc.h **** 	}
 198:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 199:.././hal/sam3u1c/inc/sam3u/osc.h **** 	return 0;
 200:.././hal/sam3u1c/inc/sam3u/osc.h **** }
 201:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 202:.././hal/sam3u1c/inc/sam3u/osc.h **** static inline uint32_t osc_get_rate(uint32_t ul_id)
 203:.././hal/sam3u1c/inc/sam3u/osc.h **** {
  37              	 .loc 1 203 1
  38              	 .cfi_startproc
  39              	 
  40              	 
  41              	 
  42 0000 80B4     	 push {r7}
  43              	.LCFI0:
  44              	 .cfi_def_cfa_offset 4
  45              	 .cfi_offset 7,-4
  46 0002 83B0     	 sub sp,sp,#12
  47              	.LCFI1:
  48              	 .cfi_def_cfa_offset 16
  49 0004 00AF     	 add r7,sp,#0
  50              	.LCFI2:
  51              	 .cfi_def_cfa_register 7
  52 0006 7860     	 str r0,[r7,#4]
 204:.././hal/sam3u1c/inc/sam3u/osc.h **** 	switch (ul_id) {
  53              	 .loc 1 204 2
  54 0008 7B68     	 ldr r3,[r7,#4]
  55 000a 072B     	 cmp r3,#7
  56 000c 23D8     	 bhi .L2
  57 000e 01A2     	 adr r2,.L4
  58 0010 52F823F0 	 ldr pc,[r2,r3,lsl#2]
  59              	 .p2align 2
  60              	.L4:
  61 0014 35000000 	 .word .L11+1
  62 0018 3B000000 	 .word .L10+1
  63 001c 3F000000 	 .word .L9+1
  64 0020 43000000 	 .word .L8+1
  65 0024 47000000 	 .word .L7+1
  66 0028 4B000000 	 .word .L6+1
  67 002c 4F000000 	 .word .L5+1
  68 0030 53000000 	 .word .L3+1
  69              	 .p2align 1
  70              	.L11:
 205:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_RC:
 206:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return OSC_SLCK_32K_RC_HZ;
  71              	 .loc 1 206 10
  72 0034 4FF4FA43 	 mov r3,#32000
  73 0038 0EE0     	 b .L12
  74              	.L10:
 207:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 208:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_XTAL:
 209:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return BOARD_FREQ_SLCK_XTAL;
  75              	 .loc 1 209 10
  76 003a 0023     	 movs r3,#0
  77 003c 0CE0     	 b .L12
  78              	.L9:
 210:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 211:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_SLCK_32K_BYPASS:
 212:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return BOARD_FREQ_SLCK_BYPASS;
  79              	 .loc 1 212 10
  80 003e 0023     	 movs r3,#0
  81 0040 0AE0     	 b .L12
  82              	.L8:
 213:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 214:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_4M_RC:
 215:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return OSC_MAINCK_4M_RC_HZ;
  83              	 .loc 1 215 10
  84 0042 084B     	 ldr r3,.L13
  85 0044 08E0     	 b .L12
  86              	.L7:
 216:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 217:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_8M_RC:
 218:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return OSC_MAINCK_8M_RC_HZ;
  87              	 .loc 1 218 10
  88 0046 084B     	 ldr r3,.L13+4
  89 0048 06E0     	 b .L12
  90              	.L6:
 219:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 220:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_12M_RC:
 221:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return OSC_MAINCK_12M_RC_HZ;
  91              	 .loc 1 221 10
  92 004a 084B     	 ldr r3,.L13+8
  93 004c 04E0     	 b .L12
  94              	.L5:
 222:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 223:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_XTAL:
 224:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return BOARD_FREQ_MAINCK_XTAL;
  95              	 .loc 1 224 10
  96 004e 074B     	 ldr r3,.L13+8
  97 0050 02E0     	 b .L12
  98              	.L3:
 225:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 226:.././hal/sam3u1c/inc/sam3u/osc.h **** 	case OSC_MAINCK_BYPASS:
 227:.././hal/sam3u1c/inc/sam3u/osc.h **** 		return BOARD_FREQ_MAINCK_BYPASS;
  99              	 .loc 1 227 10
 100 0052 064B     	 ldr r3,.L13+8
 101 0054 00E0     	 b .L12
 102              	.L2:
 228:.././hal/sam3u1c/inc/sam3u/osc.h **** 	}
 229:.././hal/sam3u1c/inc/sam3u/osc.h **** 
 230:.././hal/sam3u1c/inc/sam3u/osc.h **** 	return 0;
 103              	 .loc 1 230 9
 104 0056 0023     	 movs r3,#0
 105              	.L12:
 231:.././hal/sam3u1c/inc/sam3u/osc.h **** }
 106              	 .loc 1 231 1
 107 0058 1846     	 mov r0,r3
 108 005a 0C37     	 adds r7,r7,#12
 109              	.LCFI3:
 110              	 .cfi_def_cfa_offset 4
 111 005c BD46     	 mov sp,r7
 112              	.LCFI4:
 113              	 .cfi_def_cfa_register 13
 114              	 
 115 005e 80BC     	 pop {r7}
 116              	.LCFI5:
 117              	 .cfi_restore 7
 118              	 .cfi_def_cfa_offset 0
 119 0060 7047     	 bx lr
 120              	.L14:
 121 0062 00BF     	 .align 2
 122              	.L13:
 123 0064 00093D00 	 .word 4000000
 124 0068 00127A00 	 .word 8000000
 125 006c 001BB700 	 .word 12000000
 126              	 .cfi_endproc
 127              	.LFE72:
 129              	 .section .text.sysclk_get_main_hz,"ax",%progbits
 130              	 .align 1
 131              	 .syntax unified
 132              	 .thumb
 133              	 .thumb_func
 134              	 .fpu softvfp
 136              	sysclk_get_main_hz:
 137              	.LFB83:
 138              	 .file 2 ".././hal/sam3u1c/inc/sam3u/sysclk.h"
   1:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
   2:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \file
   3:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
   4:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Chip-specific system clock management functions.
   5:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
   6:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Copyright (c) 2011 - 2014 Atmel Corporation. All rights reserved.
   7:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
   8:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \asf_license_start
   9:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  10:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \page License
  11:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  12:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  15:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  18:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  22:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    from this software without specific prior written permission.
  24:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  25:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    Atmel microcontroller product.
  27:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  28:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  40:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \asf_license_stop
  41:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  42:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
  43:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  44:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifndef CHIP_SYSCLK_H_INCLUDED
  45:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define CHIP_SYSCLK_H_INCLUDED
  46:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  47:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #include <osc.h>
  48:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #include <pll.h>
  49:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  50:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
  51:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \page sysclk_quickstart Quick Start Guide for the System Clock Management service (SAM3U)
  52:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  53:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * This is the quick start guide for the \ref sysclk_group "System Clock Management"
  54:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * service, with step-by-step instructions on how to configure and use the service for
  55:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * specific use cases.
  56:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  57:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \section sysclk_quickstart_usecases System Clock Management use cases
  58:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * - \ref sysclk_quickstart_basic
  59:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  60:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \section sysclk_quickstart_basic Basic usage of the System Clock Management service
  61:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * This section will present a basic use case for the System Clock Management service.
  62:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * This use case will configure the main system clock to 96MHz, using an internal PLL
  63:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * module to multiply the frequency of a crystal attached to the microcontroller.
  64:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  65:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_prereq Prerequisites
  66:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  - None
  67:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  68:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_setup_steps Initialization code
  69:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Add to the application initialization code:
  70:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \code
  71:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	sysclk_init();
  72:.././hal/sam3u1c/inc/sam3u/sysclk.h **** \endcode
  73:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  74:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_setup_steps_workflow Workflow
  75:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * -# Configure the system clocks according to the settings in conf_clock.h:
  76:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    \code sysclk_init(); \endcode
  77:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  78:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_example_code Example code
  79:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   Add or uncomment the following in your conf_clock.h header file, commenting out all other
  80:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   definitions of the same symbol(s):
  81:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \code
  82:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_SYSCLK_SOURCE        SYSCLK_SRC_PLLACK
  83:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  84:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   // Fpll0 = (Fclk * PLL_mul) / PLL_div
  85:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_PLL0_SOURCE          PLL_SRC_MAINCK_XTAL
  86:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_PLL0_MUL             (96000000UL / BOARD_FREQ_MAINCK_XTAL)
  87:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_PLL0_DIV             1
  88:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
  89:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   // Fbus = Fsys / BUS_div
  90:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	   #define CONFIG_SYSCLK_PRES          SYSCLK_PRES_1
  91:.././hal/sam3u1c/inc/sam3u/sysclk.h **** \endcode
  92:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
  93:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \subsection sysclk_quickstart_use_case_1_example_workflow Workflow
  94:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  -# Configure the main system clock to use the output of the PLL module as its source:
  95:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \code #define CONFIG_SYSCLK_SOURCE          SYSCLK_SRC_PLLACK \endcode
  96:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  -# Configure the PLL module to use the fast external fast crystal oscillator as its source:
  97:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \code #define CONFIG_PLL0_SOURCE            PLL_SRC_MAINCK_XTAL \endcode
  98:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  -# Configure the PLL module to multiply the external fast crystal oscillator frequency up to 96
  99:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \code
 100:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	#define CONFIG_PLL0_MUL             (96000000UL / BOARD_FREQ_MAINCK_XTAL)
 101:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	#define CONFIG_PLL0_DIV             1
 102:.././hal/sam3u1c/inc/sam3u/sysclk.h **** \endcode
 103:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   \note For user boards, \c BOARD_FREQ_MAINCK_XTAL should be defined in the board \c conf_board.
 104:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *         file as the frequency of the fast crystal attached to the microcontroller.
 105:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *  -# Configure the main clock to run at the full 96MHz, disable scaling of the main system clock 
 106:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    \code
 107:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	#define CONFIG_SYSCLK_PRES         SYSCLK_PRES_1
 108:.././hal/sam3u1c/inc/sam3u/sysclk.h **** \endcode
 109:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *    \note Some dividers are powers of two, while others are integer division factors. Refer to th
 110:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *          formulas in the conf_clock.h template commented above each division define.
 111:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 112:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 113:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /// @cond 0
 114:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**INDENT-OFF**/
 115:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef __cplusplus
 116:.././hal/sam3u1c/inc/sam3u/sysclk.h **** extern "C" {
 117:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 118:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**INDENT-ON**/
 119:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /// @endcond
 120:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 121:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 122:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \weakgroup sysclk_group
 123:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * @{
 124:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 125:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 126:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //! \name Configuration Symbols
 127:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@{
 128:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 129:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \def CONFIG_SYSCLK_SOURCE
 130:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Initial/static main system clock source
 131:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 132:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * The main system clock will be configured to use this clock during
 133:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * initialization.
 134:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 135:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifndef CONFIG_SYSCLK_SOURCE
 136:.././hal/sam3u1c/inc/sam3u/sysclk.h **** # define CONFIG_SYSCLK_SOURCE   SYSCLK_SRC_MAINCK_4M_RC
 137:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 138:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 139:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \def CONFIG_SYSCLK_PRES
 140:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Initial CPU clock divider (mck)
 141:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 142:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * The MCK will run at
 143:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \f[
 144:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *   f_{MCK} = \frac{f_{sys}}{\mathrm{CONFIG\_SYSCLK\_PRES}}\,\mbox{Hz}
 145:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \f]
 146:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * after initialization.
 147:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 148:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifndef CONFIG_SYSCLK_PRES
 149:.././hal/sam3u1c/inc/sam3u/sysclk.h **** # define CONFIG_SYSCLK_PRES  0
 150:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 151:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 152:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@}
 153:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 154:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //! \name Master Clock Sources (MCK)
 155:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@{
 156:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_SLCK_RC              0       //!< Internal 32kHz RC oscillator as master source 
 157:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_SLCK_XTAL            1       //!< External 32kHz crystal oscillator as master so
 158:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_SLCK_BYPASS          2       //!< External 32kHz bypass oscillator as master sou
 159:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_4M_RC         3       //!< Internal 4MHz RC oscillator as master source c
 160:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_8M_RC         4       //!< Internal 8MHz RC oscillator as master source c
 161:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_12M_RC        5       //!< Internal 12MHz RC oscillator as master source 
 162:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_XTAL          6       //!< External crystal oscillator as master source c
 163:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_MAINCK_BYPASS        7       //!< External bypass oscillator as master source cl
 164:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_PLLACK               8       //!< Use PLLACK as master source clock
 165:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_SRC_UPLLCK               9       //!< Use UPLLCK as master source clock
 166:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@}
 167:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 168:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //! \name Master Clock Prescalers (MCK)
 169:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@{
 170:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_1           PMC_MCKR_PRES_CLK_1     //!< Set master clock prescaler to 1
 171:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_2           PMC_MCKR_PRES_CLK_2     //!< Set master clock prescaler to 2
 172:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_4           PMC_MCKR_PRES_CLK_4     //!< Set master clock prescaler to 4
 173:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_8           PMC_MCKR_PRES_CLK_8     //!< Set master clock prescaler to 8
 174:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_16          PMC_MCKR_PRES_CLK_16    //!< Set master clock prescaler to 16
 175:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_32          PMC_MCKR_PRES_CLK_32    //!< Set master clock prescaler to 32
 176:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_64          PMC_MCKR_PRES_CLK_64    //!< Set master clock prescaler to 64
 177:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #define SYSCLK_PRES_3           PMC_MCKR_PRES_CLK_3     //!< Set master clock prescaler to 3
 178:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@}
 179:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 180:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 181:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \def CONFIG_USBCLK_SOURCE
 182:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Configuration symbol for the USB generic clock source
 183:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 184:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Sets the clock source to use for the USB. The source must also be properly
 185:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * configured.
 186:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 187:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Define this to one of the \c USBCLK_SRC_xxx settings. Leave it undefined if
 188:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * USB is not required.
 189:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 190:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef __DOXYGEN__
 191:.././hal/sam3u1c/inc/sam3u/sysclk.h **** # define CONFIG_USBCLK_SOURCE
 192:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 193:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 194:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 195:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \def CONFIG_USBCLK_DIV
 196:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Configuration symbol for the USB generic clock divider setting
 197:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 198:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Sets the clock division for the USB generic clock. If a USB clock source is
 199:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * selected with CONFIG_USBCLK_SOURCE, this configuration symbol must also be
 200:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * defined.
 201:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 202:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef __DOXYGEN__
 203:.././hal/sam3u1c/inc/sam3u/sysclk.h **** # define CONFIG_USBCLK_DIV
 204:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 205:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 206:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 207:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \name Querying the system clock
 208:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 209:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * The following functions may be used to query the current frequency of
 210:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * the system clock and the CPU and bus clocks derived from it.
 211:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * sysclk_get_main_hz() and sysclk_get_cpu_hz() can be assumed to be
 212:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * available on all platforms, although some platforms may define
 213:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * additional accessors for various chip-internal bus clocks. These are
 214:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * usually not intended to be queried directly by generic code.
 215:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 216:.././hal/sam3u1c/inc/sam3u/sysclk.h **** //@{
 217:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 218:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 219:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 220:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 221:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \todo This function assumes that the main clock source never changes
 222:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * once it's been set up, and that PLL0 always runs at the compile-time
 223:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * configured default rate. While this is probably the most common
 224:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * configuration, which we want to support as a special case for
 225:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * performance reasons, we will at some point need to support more
 226:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * dynamic setups as well.
 227:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 228:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #if (defined CONFIG_SYSCLK_DEFAULT_RETURNS_SLOW_OSC)
 229:.././hal/sam3u1c/inc/sam3u/sysclk.h **** extern uint32_t sysclk_initialized;
 230:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 231:.././hal/sam3u1c/inc/sam3u/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 232:.././hal/sam3u1c/inc/sam3u/sysclk.h **** {
 139              	 .loc 2 232 1
 140              	 .cfi_startproc
 141              	 
 142              	 
 143 0000 80B5     	 push {r7,lr}
 144              	.LCFI6:
 145              	 .cfi_def_cfa_offset 8
 146              	 .cfi_offset 7,-8
 147              	 .cfi_offset 14,-4
 148 0002 00AF     	 add r7,sp,#0
 149              	.LCFI7:
 150              	 .cfi_def_cfa_register 7
 233:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #if (defined CONFIG_SYSCLK_DEFAULT_RETURNS_SLOW_OSC)
 234:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	if (!sysclk_initialized ) {
 235:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_4M_RC_HZ;
 236:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 237:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 238:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 239:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	/* Config system clock setting */
 240:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_SLCK_RC) {
 241:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_SLCK_32K_RC_HZ;
 242:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_SLCK_XTAL) {
 243:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_SLCK_32K_XTAL_HZ;
 244:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_SLCK_BYPASS) {
 245:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_SLCK_32K_BYPASS_HZ;
 246:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_4M_RC) {
 247:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_4M_RC_HZ;
 248:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_8M_RC) {
 249:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_8M_RC_HZ;
 250:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_12M_RC) {
 251:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_12M_RC_HZ;
 252:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_XTAL) {
 253:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_XTAL_HZ;
 254:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	} else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_MAINCK_BYPASS) {
 255:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return OSC_MAINCK_BYPASS_HZ;
 256:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 257:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef CONFIG_PLL0_SOURCE
 258:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_PLLACK) {
 259:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return pll_get_default_rate(0);
 151              	 .loc 2 259 10
 152 0004 0620     	 movs r0,#6
 153 0006 034B     	 ldr r3,.L17
 154 0008 9847     	 blx r3
 155              	.LVL0:
 156 000a 0346     	 mov r3,r0
 157 000c 1B01     	 lsls r3,r3,#4
 260:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 261:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 262:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 263:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #ifdef CONFIG_PLL1_SOURCE
 264:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	else if (CONFIG_SYSCLK_SOURCE == SYSCLK_SRC_UPLLCK) {
 265:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return PLL_UPLL_HZ;
 266:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 267:.././hal/sam3u1c/inc/sam3u/sysclk.h **** #endif
 268:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	else {
 269:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		/* unhandled_case(CONFIG_SYSCLK_SOURCE); */
 270:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		return 0;
 271:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	}
 272:.././hal/sam3u1c/inc/sam3u/sysclk.h **** }
 158              	 .loc 2 272 1
 159 000e 1846     	 mov r0,r3
 160 0010 80BD     	 pop {r7,pc}
 161              	.L18:
 162 0012 00BF     	 .align 2
 163              	.L17:
 164 0014 00000000 	 .word osc_get_rate
 165              	 .cfi_endproc
 166              	.LFE83:
 168              	 .section .text.sysclk_get_cpu_hz,"ax",%progbits
 169              	 .align 1
 170              	 .syntax unified
 171              	 .thumb
 172              	 .thumb_func
 173              	 .fpu softvfp
 175              	sysclk_get_cpu_hz:
 176              	.LFB84:
 273:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 
 274:.././hal/sam3u1c/inc/sam3u/sysclk.h **** /**
 275:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \brief Return the current rate in Hz of the CPU clock
 276:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 277:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \todo This function assumes that the CPU always runs at the system
 278:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * clock frequency. We want to support at least two more scenarios:
 279:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * Fixed CPU/bus clock dividers (config symbols) and dynamic CPU/bus
 280:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * clock dividers (which may change at run time). Ditto for all the bus
 281:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * clocks.
 282:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  *
 283:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  * \return Frequency of the CPU clock, in Hz.
 284:.././hal/sam3u1c/inc/sam3u/sysclk.h ****  */
 285:.././hal/sam3u1c/inc/sam3u/sysclk.h **** static inline uint32_t sysclk_get_cpu_hz(void)
 286:.././hal/sam3u1c/inc/sam3u/sysclk.h **** {
 177              	 .loc 2 286 1
 178              	 .cfi_startproc
 179              	 
 180              	 
 181 0000 80B5     	 push {r7,lr}
 182              	.LCFI8:
 183              	 .cfi_def_cfa_offset 8
 184              	 .cfi_offset 7,-8
 185              	 .cfi_offset 14,-4
 186 0002 00AF     	 add r7,sp,#0
 187              	.LCFI9:
 188              	 .cfi_def_cfa_register 7
 287:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	/* CONFIG_SYSCLK_PRES is the register value for setting the expected */
 288:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	/* prescaler, not an immediate value. */
 289:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 	return sysclk_get_main_hz() /
 189              	 .loc 2 289 9
 190 0004 024B     	 ldr r3,.L21
 191 0006 9847     	 blx r3
 192              	.LVL1:
 193 0008 0346     	 mov r3,r0
 194              	 .loc 2 289 30
 195 000a 5B08     	 lsrs r3,r3,#1
 290:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 		((CONFIG_SYSCLK_PRES == SYSCLK_PRES_3) ? 3 :
 291:.././hal/sam3u1c/inc/sam3u/sysclk.h **** 			(1 << (CONFIG_SYSCLK_PRES >> PMC_MCKR_PRES_Pos)));
 292:.././hal/sam3u1c/inc/sam3u/sysclk.h **** }
 196              	 .loc 2 292 1
 197 000c 1846     	 mov r0,r3
 198 000e 80BD     	 pop {r7,pc}
 199              	.L22:
 200              	 .align 2
 201              	.L21:
 202 0010 00000000 	 .word sysclk_get_main_hz
 203              	 .cfi_endproc
 204              	.LFE84:
 206              	 .section .bss.gs_ul_page_buffer,"aw",%nobits
 207              	 .align 2
 210              	gs_ul_page_buffer:
 211 0000 00000000 	 .space 256
 211      00000000 
 211      00000000 
 211      00000000 
 211      00000000 
 212              	 .section .text.translate_address,"ax",%progbits
 213              	 .align 1
 214              	 .syntax unified
 215              	 .thumb
 216              	 .thumb_func
 217              	 .fpu softvfp
 219              	translate_address:
 220              	.LFB89:
 221              	 .file 3 ".././hal/sam3u1c/flash_efc.c"
   1:.././hal/sam3u1c/flash_efc.c **** /**
   2:.././hal/sam3u1c/flash_efc.c ****  * \file
   3:.././hal/sam3u1c/flash_efc.c ****  *
   4:.././hal/sam3u1c/flash_efc.c ****  * \brief Embedded Flash service for SAM.
   5:.././hal/sam3u1c/flash_efc.c ****  *
   6:.././hal/sam3u1c/flash_efc.c ****  * Copyright (c) 2011-2014 Atmel Corporation. All rights reserved.
   7:.././hal/sam3u1c/flash_efc.c ****  *
   8:.././hal/sam3u1c/flash_efc.c ****  * \asf_license_start
   9:.././hal/sam3u1c/flash_efc.c ****  *
  10:.././hal/sam3u1c/flash_efc.c ****  * \page License
  11:.././hal/sam3u1c/flash_efc.c ****  *
  12:.././hal/sam3u1c/flash_efc.c ****  * Redistribution and use in source and binary forms, with or without
  13:.././hal/sam3u1c/flash_efc.c ****  * modification, are permitted provided that the following conditions are met:
  14:.././hal/sam3u1c/flash_efc.c ****  *
  15:.././hal/sam3u1c/flash_efc.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:.././hal/sam3u1c/flash_efc.c ****  *    this list of conditions and the following disclaimer.
  17:.././hal/sam3u1c/flash_efc.c ****  *
  18:.././hal/sam3u1c/flash_efc.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:.././hal/sam3u1c/flash_efc.c ****  *    this list of conditions and the following disclaimer in the documentation
  20:.././hal/sam3u1c/flash_efc.c ****  *    and/or other materials provided with the distribution.
  21:.././hal/sam3u1c/flash_efc.c ****  *
  22:.././hal/sam3u1c/flash_efc.c ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:.././hal/sam3u1c/flash_efc.c ****  *    from this software without specific prior written permission.
  24:.././hal/sam3u1c/flash_efc.c ****  *
  25:.././hal/sam3u1c/flash_efc.c ****  * 4. This software may only be redistributed and used in connection with an
  26:.././hal/sam3u1c/flash_efc.c ****  *    Atmel microcontroller product.
  27:.././hal/sam3u1c/flash_efc.c ****  *
  28:.././hal/sam3u1c/flash_efc.c ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:.././hal/sam3u1c/flash_efc.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:.././hal/sam3u1c/flash_efc.c ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:.././hal/sam3u1c/flash_efc.c ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:.././hal/sam3u1c/flash_efc.c ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:.././hal/sam3u1c/flash_efc.c ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:.././hal/sam3u1c/flash_efc.c ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:.././hal/sam3u1c/flash_efc.c ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:.././hal/sam3u1c/flash_efc.c ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:.././hal/sam3u1c/flash_efc.c ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:.././hal/sam3u1c/flash_efc.c ****  * POSSIBILITY OF SUCH DAMAGE.
  39:.././hal/sam3u1c/flash_efc.c ****  *
  40:.././hal/sam3u1c/flash_efc.c ****  * \asf_license_stop
  41:.././hal/sam3u1c/flash_efc.c ****  *
  42:.././hal/sam3u1c/flash_efc.c ****  */
  43:.././hal/sam3u1c/flash_efc.c **** 
  44:.././hal/sam3u1c/flash_efc.c **** #include <string.h>
  45:.././hal/sam3u1c/flash_efc.c **** #include <assert.h>
  46:.././hal/sam3u1c/flash_efc.c **** #include "flash_efc.h"
  47:.././hal/sam3u1c/flash_efc.c **** #include "sysclk.h"
  48:.././hal/sam3u1c/flash_efc.c **** 
  49:.././hal/sam3u1c/flash_efc.c **** /// @cond 0
  50:.././hal/sam3u1c/flash_efc.c **** /**INDENT-OFF**/
  51:.././hal/sam3u1c/flash_efc.c **** #ifdef __cplusplus
  52:.././hal/sam3u1c/flash_efc.c **** extern "C" {
  53:.././hal/sam3u1c/flash_efc.c **** #endif
  54:.././hal/sam3u1c/flash_efc.c **** /**INDENT-ON**/
  55:.././hal/sam3u1c/flash_efc.c **** /// @endcond
  56:.././hal/sam3u1c/flash_efc.c **** 
  57:.././hal/sam3u1c/flash_efc.c **** /**
  58:.././hal/sam3u1c/flash_efc.c ****  * \defgroup sam_services_flash_efc_group Embedded Flash Service
  59:.././hal/sam3u1c/flash_efc.c ****  *
  60:.././hal/sam3u1c/flash_efc.c ****  * The Embedded Flash service provides functions for internal flash operations.
  61:.././hal/sam3u1c/flash_efc.c ****  *
  62:.././hal/sam3u1c/flash_efc.c ****  * @{
  63:.././hal/sam3u1c/flash_efc.c ****  */
  64:.././hal/sam3u1c/flash_efc.c **** 
  65:.././hal/sam3u1c/flash_efc.c **** #if (SAM4E || SAM4N || SAM4S || SAM4C || SAMG || SAM4CP || SAM4CM)
  66:.././hal/sam3u1c/flash_efc.c **** /* User signature size */
  67:.././hal/sam3u1c/flash_efc.c **** # define FLASH_USER_SIG_SIZE   (512)
  68:.././hal/sam3u1c/flash_efc.c **** #endif
  69:.././hal/sam3u1c/flash_efc.c **** 
  70:.././hal/sam3u1c/flash_efc.c **** #if SAM4S
  71:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash Controller 0. */
  72:.././hal/sam3u1c/flash_efc.c **** # define EFC     EFC0
  73:.././hal/sam3u1c/flash_efc.c **** #if (SAM4SD16 || SAM4SD32)
  74:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
  75:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        3
  76:.././hal/sam3u1c/flash_efc.c **** #else
  77:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
  78:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        2
  79:.././hal/sam3u1c/flash_efc.c **** #endif
  80:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash 0 base address. */
  81:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_ADDR     IFLASH0_ADDR
  82:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
  83:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
  84:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
  85:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
  86:.././hal/sam3u1c/flash_efc.c **** #elif (SAM3XA || SAM3U4)
  87:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash Controller 0. */
  88:.././hal/sam3u1c/flash_efc.c **** # define EFC     EFC0
  89:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
  90:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        3
  91:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash 0 base address. */
  92:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_ADDR     IFLASH0_ADDR
  93:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
  94:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
  95:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
  96:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
  97:.././hal/sam3u1c/flash_efc.c **** #elif (SAM3U)
  98:.././hal/sam3u1c/flash_efc.c **** /* There is no EFC1 for SAM3U except for SAM3U4 */
  99:.././hal/sam3u1c/flash_efc.c **** # undef EFC1
 100:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash Controller 0. */
 101:.././hal/sam3u1c/flash_efc.c **** # define EFC     EFC0
 102:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
 103:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        2
 104:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash 0 base address. */
 105:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_ADDR     IFLASH0_ADDR
 106:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
 107:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
 108:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
 109:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
 110:.././hal/sam3u1c/flash_efc.c **** #elif (SAM3SD8)
 111:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
 112:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        3
 113:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
 114:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
 115:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
 116:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
 117:.././hal/sam3u1c/flash_efc.c **** #elif (SAM4C32 || SAM4CMP32 || SAM4CMS32)
 118:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number SAM4C(M)32. */
 119:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        3
 120:.././hal/sam3u1c/flash_efc.c **** #else
 121:.././hal/sam3u1c/flash_efc.c **** /* The max GPNVM number. */
 122:.././hal/sam3u1c/flash_efc.c **** # define GPNVM_NUM_MAX        2
 123:.././hal/sam3u1c/flash_efc.c **** #endif
 124:.././hal/sam3u1c/flash_efc.c **** 
 125:.././hal/sam3u1c/flash_efc.c **** #if (SAM4C || SAM4CP || SAM4CM)
 126:.././hal/sam3u1c/flash_efc.c **** #if (SAM4C32 || SAM4CMP32 || SAM4CMS32)
 127:.././hal/sam3u1c/flash_efc.c **** # define EFC     EFC0
 128:.././hal/sam3u1c/flash_efc.c **** /* Internal Flash 0 base address. */
 129:.././hal/sam3u1c/flash_efc.c **** # define IFLASH0_ADDR    IFLASH0_CNC_ADDR
 130:.././hal/sam3u1c/flash_efc.c **** # define IFLASH1_ADDR    IFLASH1_CNC_ADDR
 131:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_ADDR     IFLASH0_ADDR
 132:.././hal/sam3u1c/flash_efc.c **** /* Internal flash page size. */
 133:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_PAGE_SIZE     IFLASH0_PAGE_SIZE
 134:.././hal/sam3u1c/flash_efc.c **** /* Internal flash lock region size. */
 135:.././hal/sam3u1c/flash_efc.c **** # define IFLASH_LOCK_REGION_SIZE     IFLASH0_LOCK_REGION_SIZE
 136:.././hal/sam3u1c/flash_efc.c **** #else
 137:.././hal/sam3u1c/flash_efc.c **** #define IFLASH_ADDR  IFLASH_CNC_ADDR
 138:.././hal/sam3u1c/flash_efc.c **** #endif
 139:.././hal/sam3u1c/flash_efc.c **** #endif
 140:.././hal/sam3u1c/flash_efc.c **** 
 141:.././hal/sam3u1c/flash_efc.c **** /* Flash page buffer for alignment */
 142:.././hal/sam3u1c/flash_efc.c **** static uint32_t gs_ul_page_buffer[IFLASH_PAGE_SIZE / sizeof(uint32_t)];
 143:.././hal/sam3u1c/flash_efc.c **** 
 144:.././hal/sam3u1c/flash_efc.c **** /**
 145:.././hal/sam3u1c/flash_efc.c ****  * \brief Translate the given flash address to page and offset values.
 146:.././hal/sam3u1c/flash_efc.c ****  * \note pus_page and pus_offset must not be null in order to store the
 147:.././hal/sam3u1c/flash_efc.c ****  * corresponding values.
 148:.././hal/sam3u1c/flash_efc.c ****  *
 149:.././hal/sam3u1c/flash_efc.c ****  * \param pp_efc Pointer to an EFC pointer.
 150:.././hal/sam3u1c/flash_efc.c ****  * \param ul_addr Address to translate.
 151:.././hal/sam3u1c/flash_efc.c ****  * \param pus_page The first page accessed.
 152:.././hal/sam3u1c/flash_efc.c ****  * \param pus_offset Byte offset in the first page.
 153:.././hal/sam3u1c/flash_efc.c ****  */
 154:.././hal/sam3u1c/flash_efc.c **** static void translate_address(Efc **pp_efc, uint32_t ul_addr,
 155:.././hal/sam3u1c/flash_efc.c **** 		uint16_t *pus_page, uint16_t *pus_offset)
 156:.././hal/sam3u1c/flash_efc.c **** {
 222              	 .loc 3 156 1
 223              	 .cfi_startproc
 224              	 
 225              	 
 226              	 
 227 0000 80B4     	 push {r7}
 228              	.LCFI10:
 229              	 .cfi_def_cfa_offset 4
 230              	 .cfi_offset 7,-4
 231 0002 87B0     	 sub sp,sp,#28
 232              	.LCFI11:
 233              	 .cfi_def_cfa_offset 32
 234 0004 00AF     	 add r7,sp,#0
 235              	.LCFI12:
 236              	 .cfi_def_cfa_register 7
 237 0006 F860     	 str r0,[r7,#12]
 238 0008 B960     	 str r1,[r7,#8]
 239 000a 7A60     	 str r2,[r7,#4]
 240 000c 3B60     	 str r3,[r7]
 157:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 158:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 159:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_offset;
 160:.././hal/sam3u1c/flash_efc.c **** 
 161:.././hal/sam3u1c/flash_efc.c **** #if (SAM3XA || SAM3U4)
 162:.././hal/sam3u1c/flash_efc.c **** 	if (ul_addr >= IFLASH1_ADDR) {
 163:.././hal/sam3u1c/flash_efc.c **** 		p_efc = EFC1;
 164:.././hal/sam3u1c/flash_efc.c **** 		us_page = (ul_addr - IFLASH1_ADDR) / IFLASH1_PAGE_SIZE;
 165:.././hal/sam3u1c/flash_efc.c **** 		us_offset = (ul_addr - IFLASH1_ADDR) % IFLASH1_PAGE_SIZE;
 166:.././hal/sam3u1c/flash_efc.c **** 	} else {
 167:.././hal/sam3u1c/flash_efc.c **** 		p_efc = EFC0;
 168:.././hal/sam3u1c/flash_efc.c **** 		us_page = (ul_addr - IFLASH0_ADDR) / IFLASH0_PAGE_SIZE;
 169:.././hal/sam3u1c/flash_efc.c **** 		us_offset = (ul_addr - IFLASH0_ADDR) % IFLASH0_PAGE_SIZE;
 170:.././hal/sam3u1c/flash_efc.c **** 	}
 171:.././hal/sam3u1c/flash_efc.c **** #elif (SAM4SD16 || SAM4SD32 || SAM4C32 || SAM4CMP32 || SAM4CMS32)
 172:.././hal/sam3u1c/flash_efc.c **** 	uint32_t uc_gpnvm2;
 173:.././hal/sam3u1c/flash_efc.c **** 	uc_gpnvm2 = flash_is_gpnvm_set(2);
 174:.././hal/sam3u1c/flash_efc.c **** 	if (ul_addr >= IFLASH1_ADDR) {
 175:.././hal/sam3u1c/flash_efc.c **** 		if(uc_gpnvm2 == FLASH_RC_YES) {
 176:.././hal/sam3u1c/flash_efc.c **** 			p_efc = EFC0;
 177:.././hal/sam3u1c/flash_efc.c **** 		} else {
 178:.././hal/sam3u1c/flash_efc.c **** 			p_efc = EFC1;
 179:.././hal/sam3u1c/flash_efc.c **** 		}
 180:.././hal/sam3u1c/flash_efc.c **** 		us_page = (ul_addr - IFLASH1_ADDR) / IFLASH1_PAGE_SIZE;
 181:.././hal/sam3u1c/flash_efc.c **** 		us_offset = (ul_addr - IFLASH1_ADDR) % IFLASH1_PAGE_SIZE;
 182:.././hal/sam3u1c/flash_efc.c **** 	} else {
 183:.././hal/sam3u1c/flash_efc.c **** 		if(uc_gpnvm2 == FLASH_RC_YES) {
 184:.././hal/sam3u1c/flash_efc.c **** 			p_efc = EFC1;
 185:.././hal/sam3u1c/flash_efc.c **** 		} else {
 186:.././hal/sam3u1c/flash_efc.c **** 			p_efc = EFC0;
 187:.././hal/sam3u1c/flash_efc.c **** 		}
 188:.././hal/sam3u1c/flash_efc.c **** 		us_page = (ul_addr - IFLASH0_ADDR) / IFLASH0_PAGE_SIZE;
 189:.././hal/sam3u1c/flash_efc.c **** 		us_offset = (ul_addr - IFLASH0_ADDR) % IFLASH0_PAGE_SIZE;
 190:.././hal/sam3u1c/flash_efc.c **** 	}
 191:.././hal/sam3u1c/flash_efc.c **** #elif (SAM3SD8)
 192:.././hal/sam3u1c/flash_efc.c **** 	p_efc = EFC;
 193:.././hal/sam3u1c/flash_efc.c **** 	us_page = (ul_addr - IFLASH0_ADDR) / IFLASH0_PAGE_SIZE;
 194:.././hal/sam3u1c/flash_efc.c **** 	us_offset = (ul_addr - IFLASH0_ADDR) % IFLASH0_PAGE_SIZE;
 195:.././hal/sam3u1c/flash_efc.c **** #else
 196:.././hal/sam3u1c/flash_efc.c **** 	Assert(ul_addr >= IFLASH_ADDR);
 197:.././hal/sam3u1c/flash_efc.c **** 	Assert(ul_addr <= (IFLASH_ADDR + IFLASH_SIZE));
 198:.././hal/sam3u1c/flash_efc.c **** 
 199:.././hal/sam3u1c/flash_efc.c **** 	p_efc = EFC;
 241              	 .loc 3 199 8
 242 000e 114B     	 ldr r3,.L28
 243 0010 7B61     	 str r3,[r7,#20]
 200:.././hal/sam3u1c/flash_efc.c **** 	us_page = (ul_addr - IFLASH_ADDR) / IFLASH_PAGE_SIZE;
 244              	 .loc 3 200 21
 245 0012 BB68     	 ldr r3,[r7,#8]
 246 0014 A3F50023 	 sub r3,r3,#524288
 247              	 .loc 3 200 36
 248 0018 1B0A     	 lsrs r3,r3,#8
 249              	 .loc 3 200 10
 250 001a 7B82     	 strh r3,[r7,#18]
 201:.././hal/sam3u1c/flash_efc.c **** 	us_offset = (ul_addr - IFLASH_ADDR) % IFLASH_PAGE_SIZE;
 251              	 .loc 3 201 38
 252 001c BB68     	 ldr r3,[r7,#8]
 253 001e 9BB2     	 uxth r3,r3
 254              	 .loc 3 201 12
 255 0020 DBB2     	 uxtb r3,r3
 256 0022 3B82     	 strh r3,[r7,#16]
 202:.././hal/sam3u1c/flash_efc.c **** #endif
 203:.././hal/sam3u1c/flash_efc.c **** 
 204:.././hal/sam3u1c/flash_efc.c **** 	/* Store values */
 205:.././hal/sam3u1c/flash_efc.c **** 	if (pp_efc) {
 257              	 .loc 3 205 5
 258 0024 FB68     	 ldr r3,[r7,#12]
 259 0026 002B     	 cmp r3,#0
 260 0028 02D0     	 beq .L24
 206:.././hal/sam3u1c/flash_efc.c **** 		*pp_efc = p_efc;
 261              	 .loc 3 206 11
 262 002a FB68     	 ldr r3,[r7,#12]
 263 002c 7A69     	 ldr r2,[r7,#20]
 264 002e 1A60     	 str r2,[r3]
 265              	.L24:
 207:.././hal/sam3u1c/flash_efc.c **** 	}
 208:.././hal/sam3u1c/flash_efc.c **** 
 209:.././hal/sam3u1c/flash_efc.c **** 	if (pus_page) {
 266              	 .loc 3 209 5
 267 0030 7B68     	 ldr r3,[r7,#4]
 268 0032 002B     	 cmp r3,#0
 269 0034 02D0     	 beq .L25
 210:.././hal/sam3u1c/flash_efc.c **** 		*pus_page = us_page;
 270              	 .loc 3 210 13
 271 0036 7B68     	 ldr r3,[r7,#4]
 272 0038 7A8A     	 ldrh r2,[r7,#18]
 273 003a 1A80     	 strh r2,[r3]
 274              	.L25:
 211:.././hal/sam3u1c/flash_efc.c **** 	}
 212:.././hal/sam3u1c/flash_efc.c **** 
 213:.././hal/sam3u1c/flash_efc.c **** 	if (pus_offset) {
 275              	 .loc 3 213 5
 276 003c 3B68     	 ldr r3,[r7]
 277 003e 002B     	 cmp r3,#0
 278 0040 02D0     	 beq .L27
 214:.././hal/sam3u1c/flash_efc.c **** 		*pus_offset = us_offset;
 279              	 .loc 3 214 15
 280 0042 3B68     	 ldr r3,[r7]
 281 0044 3A8A     	 ldrh r2,[r7,#16]
 282 0046 1A80     	 strh r2,[r3]
 283              	.L27:
 215:.././hal/sam3u1c/flash_efc.c **** 	}
 216:.././hal/sam3u1c/flash_efc.c **** }
 284              	 .loc 3 216 1
 285 0048 00BF     	 nop
 286 004a 1C37     	 adds r7,r7,#28
 287              	.LCFI13:
 288              	 .cfi_def_cfa_offset 4
 289 004c BD46     	 mov sp,r7
 290              	.LCFI14:
 291              	 .cfi_def_cfa_register 13
 292              	 
 293 004e 80BC     	 pop {r7}
 294              	.LCFI15:
 295              	 .cfi_restore 7
 296              	 .cfi_def_cfa_offset 0
 297 0050 7047     	 bx lr
 298              	.L29:
 299 0052 00BF     	 .align 2
 300              	.L28:
 301 0054 00080E40 	 .word 1074661376
 302              	 .cfi_endproc
 303              	.LFE89:
 305              	 .section .text.compute_address,"ax",%progbits
 306              	 .align 1
 307              	 .syntax unified
 308              	 .thumb
 309              	 .thumb_func
 310              	 .fpu softvfp
 312              	compute_address:
 313              	.LFB90:
 217:.././hal/sam3u1c/flash_efc.c **** 
 218:.././hal/sam3u1c/flash_efc.c **** /**
 219:.././hal/sam3u1c/flash_efc.c ****  * \brief Compute the address of a flash by the given page and offset.
 220:.././hal/sam3u1c/flash_efc.c ****  *
 221:.././hal/sam3u1c/flash_efc.c ****  * \param p_efc Pointer to an EFC instance.
 222:.././hal/sam3u1c/flash_efc.c ****  * \param us_page Page number.
 223:.././hal/sam3u1c/flash_efc.c ****  * \param us_offset Byte offset inside page.
 224:.././hal/sam3u1c/flash_efc.c ****  * \param pul_addr Computed address (optional).
 225:.././hal/sam3u1c/flash_efc.c ****  */
 226:.././hal/sam3u1c/flash_efc.c **** static void compute_address(Efc *p_efc, uint16_t us_page, uint16_t us_offset,
 227:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_addr)
 228:.././hal/sam3u1c/flash_efc.c **** {
 314              	 .loc 3 228 1
 315              	 .cfi_startproc
 316              	 
 317              	 
 318              	 
 319 0000 80B4     	 push {r7}
 320              	.LCFI16:
 321              	 .cfi_def_cfa_offset 4
 322              	 .cfi_offset 7,-4
 323 0002 87B0     	 sub sp,sp,#28
 324              	.LCFI17:
 325              	 .cfi_def_cfa_offset 32
 326 0004 00AF     	 add r7,sp,#0
 327              	.LCFI18:
 328              	 .cfi_def_cfa_register 7
 329 0006 F860     	 str r0,[r7,#12]
 330 0008 7B60     	 str r3,[r7,#4]
 331 000a 0B46     	 mov r3,r1
 332 000c 7B81     	 strh r3,[r7,#10]
 333 000e 1346     	 mov r3,r2
 334 0010 3B81     	 strh r3,[r7,#8]
 229:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_addr;
 230:.././hal/sam3u1c/flash_efc.c **** 
 231:.././hal/sam3u1c/flash_efc.c **** /* Dual bank flash */
 232:.././hal/sam3u1c/flash_efc.c **** #ifdef EFC1
 233:.././hal/sam3u1c/flash_efc.c **** 	/* Compute address */
 234:.././hal/sam3u1c/flash_efc.c **** #if (SAM4SD16 || SAM4SD32 || SAM4C32 || SAM4CMP32 || SAM4CMS32)
 235:.././hal/sam3u1c/flash_efc.c **** 	uint32_t uc_gpnvm2;
 236:.././hal/sam3u1c/flash_efc.c **** 	uc_gpnvm2 = flash_is_gpnvm_set(2);
 237:.././hal/sam3u1c/flash_efc.c **** 	if (p_efc == EFC0) {
 238:.././hal/sam3u1c/flash_efc.c **** 		if(uc_gpnvm2 == FLASH_RC_YES) {
 239:.././hal/sam3u1c/flash_efc.c **** 			ul_addr = IFLASH1_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 240:.././hal/sam3u1c/flash_efc.c **** 		} else {
 241:.././hal/sam3u1c/flash_efc.c **** 			ul_addr = IFLASH0_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 242:.././hal/sam3u1c/flash_efc.c **** 		}
 243:.././hal/sam3u1c/flash_efc.c **** 	} else {
 244:.././hal/sam3u1c/flash_efc.c **** 		if(uc_gpnvm2 == FLASH_RC_YES) {
 245:.././hal/sam3u1c/flash_efc.c **** 			ul_addr = IFLASH0_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 246:.././hal/sam3u1c/flash_efc.c **** 		} else {
 247:.././hal/sam3u1c/flash_efc.c **** 			ul_addr = IFLASH1_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 248:.././hal/sam3u1c/flash_efc.c **** 		}
 249:.././hal/sam3u1c/flash_efc.c **** 	}
 250:.././hal/sam3u1c/flash_efc.c **** #else
 251:.././hal/sam3u1c/flash_efc.c **** 	ul_addr = (p_efc == EFC0) ?
 252:.././hal/sam3u1c/flash_efc.c **** 			IFLASH0_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset :
 253:.././hal/sam3u1c/flash_efc.c **** 			IFLASH1_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 254:.././hal/sam3u1c/flash_efc.c **** #endif
 255:.././hal/sam3u1c/flash_efc.c **** /* One bank flash */
 256:.././hal/sam3u1c/flash_efc.c **** #else
 257:.././hal/sam3u1c/flash_efc.c **** 	/* avoid Cppcheck Warning */
 258:.././hal/sam3u1c/flash_efc.c **** 	UNUSED(p_efc);
 259:.././hal/sam3u1c/flash_efc.c **** 	/* Compute address */
 260:.././hal/sam3u1c/flash_efc.c **** 	ul_addr = IFLASH_ADDR + us_page * IFLASH_PAGE_SIZE + us_offset;
 335              	 .loc 3 260 24
 336 0012 7B89     	 ldrh r3,[r7,#10]
 337 0014 03F50063 	 add r3,r3,#2048
 338 0018 1A02     	 lsls r2,r3,#8
 339              	 .loc 3 260 53
 340 001a 3B89     	 ldrh r3,[r7,#8]
 341              	 .loc 3 260 10
 342 001c 1344     	 add r3,r3,r2
 343 001e 7B61     	 str r3,[r7,#20]
 261:.././hal/sam3u1c/flash_efc.c **** #endif
 262:.././hal/sam3u1c/flash_efc.c **** 
 263:.././hal/sam3u1c/flash_efc.c **** 	/* Store result */
 264:.././hal/sam3u1c/flash_efc.c **** 	if (pul_addr != NULL) {
 344              	 .loc 3 264 5
 345 0020 7B68     	 ldr r3,[r7,#4]
 346 0022 002B     	 cmp r3,#0
 347 0024 02D0     	 beq .L32
 265:.././hal/sam3u1c/flash_efc.c **** 		*pul_addr = ul_addr;
 348              	 .loc 3 265 13
 349 0026 7B68     	 ldr r3,[r7,#4]
 350 0028 7A69     	 ldr r2,[r7,#20]
 351 002a 1A60     	 str r2,[r3]
 352              	.L32:
 266:.././hal/sam3u1c/flash_efc.c **** 	}
 267:.././hal/sam3u1c/flash_efc.c **** }
 353              	 .loc 3 267 1
 354 002c 00BF     	 nop
 355 002e 1C37     	 adds r7,r7,#28
 356              	.LCFI19:
 357              	 .cfi_def_cfa_offset 4
 358 0030 BD46     	 mov sp,r7
 359              	.LCFI20:
 360              	 .cfi_def_cfa_register 13
 361              	 
 362 0032 80BC     	 pop {r7}
 363              	.LCFI21:
 364              	 .cfi_restore 7
 365              	 .cfi_def_cfa_offset 0
 366 0034 7047     	 bx lr
 367              	 .cfi_endproc
 368              	.LFE90:
 370              	 .section .text.compute_lock_range,"ax",%progbits
 371              	 .align 1
 372              	 .syntax unified
 373              	 .thumb
 374              	 .thumb_func
 375              	 .fpu softvfp
 377              	compute_lock_range:
 378              	.LFB91:
 268:.././hal/sam3u1c/flash_efc.c **** 
 269:.././hal/sam3u1c/flash_efc.c **** /**
 270:.././hal/sam3u1c/flash_efc.c ****  * \brief Compute the lock range associated with the given address range.
 271:.././hal/sam3u1c/flash_efc.c ****  *
 272:.././hal/sam3u1c/flash_efc.c ****  * \param ul_start Start address of lock range.
 273:.././hal/sam3u1c/flash_efc.c ****  * \param ul_end End address of lock range.
 274:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_start Actual start address of lock range.
 275:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_end Actual end address of lock range.
 276:.././hal/sam3u1c/flash_efc.c ****  */
 277:.././hal/sam3u1c/flash_efc.c **** static void compute_lock_range(uint32_t ul_start, uint32_t ul_end,
 278:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_actual_start, uint32_t *pul_actual_end)
 279:.././hal/sam3u1c/flash_efc.c **** {
 379              	 .loc 3 279 1
 380              	 .cfi_startproc
 381              	 
 382              	 
 383              	 
 384 0000 80B4     	 push {r7}
 385              	.LCFI22:
 386              	 .cfi_def_cfa_offset 4
 387              	 .cfi_offset 7,-4
 388 0002 87B0     	 sub sp,sp,#28
 389              	.LCFI23:
 390              	 .cfi_def_cfa_offset 32
 391 0004 00AF     	 add r7,sp,#0
 392              	.LCFI24:
 393              	 .cfi_def_cfa_register 7
 394 0006 F860     	 str r0,[r7,#12]
 395 0008 B960     	 str r1,[r7,#8]
 396 000a 7A60     	 str r2,[r7,#4]
 397 000c 3B60     	 str r3,[r7]
 280:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_actual_start, ul_actual_end;
 281:.././hal/sam3u1c/flash_efc.c **** 
 282:.././hal/sam3u1c/flash_efc.c **** 	ul_actual_start = ul_start - (ul_start % IFLASH_LOCK_REGION_SIZE);
 398              	 .loc 3 282 18
 399 000e FB68     	 ldr r3,[r7,#12]
 400 0010 23F4FF53 	 bic r3,r3,#8160
 401 0014 23F01F03 	 bic r3,r3,#31
 402 0018 7B61     	 str r3,[r7,#20]
 283:.././hal/sam3u1c/flash_efc.c **** 	ul_actual_end = ul_end - (ul_end % IFLASH_LOCK_REGION_SIZE) +
 403              	 .loc 3 283 25
 404 001a BB68     	 ldr r3,[r7,#8]
 405 001c 23F4FF53 	 bic r3,r3,#8160
 406 0020 23F01F03 	 bic r3,r3,#31
 407              	 .loc 3 283 16
 408 0024 03F5FF53 	 add r3,r3,#8160
 409 0028 1F33     	 adds r3,r3,#31
 410 002a 3B61     	 str r3,[r7,#16]
 284:.././hal/sam3u1c/flash_efc.c **** 			IFLASH_LOCK_REGION_SIZE - 1;
 285:.././hal/sam3u1c/flash_efc.c **** 
 286:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_start) {
 411              	 .loc 3 286 5
 412 002c 7B68     	 ldr r3,[r7,#4]
 413 002e 002B     	 cmp r3,#0
 414 0030 02D0     	 beq .L34
 287:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_start = ul_actual_start;
 415              	 .loc 3 287 21
 416 0032 7B68     	 ldr r3,[r7,#4]
 417 0034 7A69     	 ldr r2,[r7,#20]
 418 0036 1A60     	 str r2,[r3]
 419              	.L34:
 288:.././hal/sam3u1c/flash_efc.c **** 	}
 289:.././hal/sam3u1c/flash_efc.c **** 
 290:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_end) {
 420              	 .loc 3 290 5
 421 0038 3B68     	 ldr r3,[r7]
 422 003a 002B     	 cmp r3,#0
 423 003c 02D0     	 beq .L36
 291:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_end = ul_actual_end;
 424              	 .loc 3 291 19
 425 003e 3B68     	 ldr r3,[r7]
 426 0040 3A69     	 ldr r2,[r7,#16]
 427 0042 1A60     	 str r2,[r3]
 428              	.L36:
 292:.././hal/sam3u1c/flash_efc.c **** 	}
 293:.././hal/sam3u1c/flash_efc.c **** }
 429              	 .loc 3 293 1
 430 0044 00BF     	 nop
 431 0046 1C37     	 adds r7,r7,#28
 432              	.LCFI25:
 433              	 .cfi_def_cfa_offset 4
 434 0048 BD46     	 mov sp,r7
 435              	.LCFI26:
 436              	 .cfi_def_cfa_register 13
 437              	 
 438 004a 80BC     	 pop {r7}
 439              	.LCFI27:
 440              	 .cfi_restore 7
 441              	 .cfi_def_cfa_offset 0
 442 004c 7047     	 bx lr
 443              	 .cfi_endproc
 444              	.LFE91:
 446              	 .section .text.flash_init,"ax",%progbits
 447              	 .align 1
 448              	 .global flash_init
 449              	 .syntax unified
 450              	 .thumb
 451              	 .thumb_func
 452              	 .fpu softvfp
 454              	flash_init:
 455              	.LFB92:
 294:.././hal/sam3u1c/flash_efc.c **** 
 295:.././hal/sam3u1c/flash_efc.c **** /**
 296:.././hal/sam3u1c/flash_efc.c ****  * \brief Initialize the flash service.
 297:.././hal/sam3u1c/flash_efc.c ****  *
 298:.././hal/sam3u1c/flash_efc.c ****  * \param ul_mode FLASH_ACCESS_MODE_128 or FLASH_ACCESS_MODE_64.
 299:.././hal/sam3u1c/flash_efc.c ****  * \param ul_fws The number of wait states in cycle (no shift).
 300:.././hal/sam3u1c/flash_efc.c ****  *
 301:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 302:.././hal/sam3u1c/flash_efc.c ****  */
 303:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_init(uint32_t ul_mode, uint32_t ul_fws)
 304:.././hal/sam3u1c/flash_efc.c **** {
 456              	 .loc 3 304 1
 457              	 .cfi_startproc
 458              	 
 459              	 
 460 0000 80B5     	 push {r7,lr}
 461              	.LCFI28:
 462              	 .cfi_def_cfa_offset 8
 463              	 .cfi_offset 7,-8
 464              	 .cfi_offset 14,-4
 465 0002 82B0     	 sub sp,sp,#8
 466              	.LCFI29:
 467              	 .cfi_def_cfa_offset 16
 468 0004 00AF     	 add r7,sp,#0
 469              	.LCFI30:
 470              	 .cfi_def_cfa_register 7
 471 0006 7860     	 str r0,[r7,#4]
 472 0008 3960     	 str r1,[r7]
 305:.././hal/sam3u1c/flash_efc.c **** 	efc_init(EFC, ul_mode, ul_fws);
 473              	 .loc 3 305 2
 474 000a 3A68     	 ldr r2,[r7]
 475 000c 7968     	 ldr r1,[r7,#4]
 476 000e 0448     	 ldr r0,.L39
 477 0010 044B     	 ldr r3,.L39+4
 478 0012 9847     	 blx r3
 479              	.LVL2:
 306:.././hal/sam3u1c/flash_efc.c **** 
 307:.././hal/sam3u1c/flash_efc.c **** #ifdef EFC1
 308:.././hal/sam3u1c/flash_efc.c **** 	efc_init(EFC1, ul_mode, ul_fws);
 309:.././hal/sam3u1c/flash_efc.c **** #endif
 310:.././hal/sam3u1c/flash_efc.c **** 
 311:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 480              	 .loc 3 311 9
 481 0014 0023     	 movs r3,#0
 312:.././hal/sam3u1c/flash_efc.c **** }
 482              	 .loc 3 312 1
 483 0016 1846     	 mov r0,r3
 484 0018 0837     	 adds r7,r7,#8
 485              	.LCFI31:
 486              	 .cfi_def_cfa_offset 8
 487 001a BD46     	 mov sp,r7
 488              	.LCFI32:
 489              	 .cfi_def_cfa_register 13
 490              	 
 491 001c 80BD     	 pop {r7,pc}
 492              	.L40:
 493 001e 00BF     	 .align 2
 494              	.L39:
 495 0020 00080E40 	 .word 1074661376
 496 0024 00000000 	 .word efc_init
 497              	 .cfi_endproc
 498              	.LFE92:
 500              	 .section .text.flash_set_wait_state,"ax",%progbits
 501              	 .align 1
 502              	 .global flash_set_wait_state
 503              	 .syntax unified
 504              	 .thumb
 505              	 .thumb_func
 506              	 .fpu softvfp
 508              	flash_set_wait_state:
 509              	.LFB93:
 313:.././hal/sam3u1c/flash_efc.c **** 
 314:.././hal/sam3u1c/flash_efc.c **** /**
 315:.././hal/sam3u1c/flash_efc.c ****  * \brief Set flash wait state.
 316:.././hal/sam3u1c/flash_efc.c ****  *
 317:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 318:.././hal/sam3u1c/flash_efc.c ****  * \param ul_fws The number of wait states in cycle (no shift).
 319:.././hal/sam3u1c/flash_efc.c ****  *
 320:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 321:.././hal/sam3u1c/flash_efc.c ****  */
 322:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_set_wait_state(uint32_t ul_address, uint32_t ul_fws)
 323:.././hal/sam3u1c/flash_efc.c **** {
 510              	 .loc 3 323 1
 511              	 .cfi_startproc
 512              	 
 513              	 
 514 0000 90B5     	 push {r4,r7,lr}
 515              	.LCFI33:
 516              	 .cfi_def_cfa_offset 12
 517              	 .cfi_offset 4,-12
 518              	 .cfi_offset 7,-8
 519              	 .cfi_offset 14,-4
 520 0002 85B0     	 sub sp,sp,#20
 521              	.LCFI34:
 522              	 .cfi_def_cfa_offset 32
 523 0004 00AF     	 add r7,sp,#0
 524              	.LCFI35:
 525              	 .cfi_def_cfa_register 7
 526 0006 7860     	 str r0,[r7,#4]
 527 0008 3960     	 str r1,[r7]
 324:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 325:.././hal/sam3u1c/flash_efc.c **** 
 326:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 528              	 .loc 3 326 2
 529 000a 07F10C00 	 add r0,r7,#12
 530 000e 0023     	 movs r3,#0
 531 0010 0022     	 movs r2,#0
 532 0012 7968     	 ldr r1,[r7,#4]
 533 0014 054C     	 ldr r4,.L43
 534 0016 A047     	 blx r4
 535              	.LVL3:
 327:.././hal/sam3u1c/flash_efc.c **** 	efc_set_wait_state(p_efc, ul_fws);
 536              	 .loc 3 327 2
 537 0018 FB68     	 ldr r3,[r7,#12]
 538 001a 3968     	 ldr r1,[r7]
 539 001c 1846     	 mov r0,r3
 540 001e 044B     	 ldr r3,.L43+4
 541 0020 9847     	 blx r3
 542              	.LVL4:
 328:.././hal/sam3u1c/flash_efc.c **** 
 329:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 543              	 .loc 3 329 9
 544 0022 0023     	 movs r3,#0
 330:.././hal/sam3u1c/flash_efc.c **** }
 545              	 .loc 3 330 1
 546 0024 1846     	 mov r0,r3
 547 0026 1437     	 adds r7,r7,#20
 548              	.LCFI36:
 549              	 .cfi_def_cfa_offset 12
 550 0028 BD46     	 mov sp,r7
 551              	.LCFI37:
 552              	 .cfi_def_cfa_register 13
 553              	 
 554 002a 90BD     	 pop {r4,r7,pc}
 555              	.L44:
 556              	 .align 2
 557              	.L43:
 558 002c 00000000 	 .word translate_address
 559 0030 00000000 	 .word efc_set_wait_state
 560              	 .cfi_endproc
 561              	.LFE93:
 563              	 .section .text.flash_set_wait_state_adaptively,"ax",%progbits
 564              	 .align 1
 565              	 .global flash_set_wait_state_adaptively
 566              	 .syntax unified
 567              	 .thumb
 568              	 .thumb_func
 569              	 .fpu softvfp
 571              	flash_set_wait_state_adaptively:
 572              	.LFB94:
 331:.././hal/sam3u1c/flash_efc.c **** 
 332:.././hal/sam3u1c/flash_efc.c **** /**
 333:.././hal/sam3u1c/flash_efc.c ****  * \brief Set flash wait state.
 334:.././hal/sam3u1c/flash_efc.c ****  *
 335:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 336:.././hal/sam3u1c/flash_efc.c ****  * \param ul_fws The number of wait states in cycle (no shift).
 337:.././hal/sam3u1c/flash_efc.c ****  *
 338:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 339:.././hal/sam3u1c/flash_efc.c ****  */
 340:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_set_wait_state_adaptively(uint32_t ul_address)
 341:.././hal/sam3u1c/flash_efc.c **** {
 573              	 .loc 3 341 1
 574              	 .cfi_startproc
 575              	 
 576              	 
 577 0000 90B5     	 push {r4,r7,lr}
 578              	.LCFI38:
 579              	 .cfi_def_cfa_offset 12
 580              	 .cfi_offset 4,-12
 581              	 .cfi_offset 7,-8
 582              	 .cfi_offset 14,-4
 583 0002 85B0     	 sub sp,sp,#20
 584              	.LCFI39:
 585              	 .cfi_def_cfa_offset 32
 586 0004 00AF     	 add r7,sp,#0
 587              	.LCFI40:
 588              	 .cfi_def_cfa_register 7
 589 0006 7860     	 str r0,[r7,#4]
 342:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 343:.././hal/sam3u1c/flash_efc.c **** 	uint32_t clock = sysclk_get_cpu_hz();
 590              	 .loc 3 343 19
 591 0008 1D4B     	 ldr r3,.L52
 592 000a 9847     	 blx r3
 593              	.LVL5:
 594 000c F860     	 str r0,[r7,#12]
 344:.././hal/sam3u1c/flash_efc.c **** 
 345:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 595              	 .loc 3 345 2
 596 000e 07F10800 	 add r0,r7,#8
 597 0012 0023     	 movs r3,#0
 598 0014 0022     	 movs r2,#0
 599 0016 7968     	 ldr r1,[r7,#4]
 600 0018 1A4C     	 ldr r4,.L52+4
 601 001a A047     	 blx r4
 602              	.LVL6:
 346:.././hal/sam3u1c/flash_efc.c **** 
 347:.././hal/sam3u1c/flash_efc.c **** 	/* Set FWS for embedded Flash access according to operating frequency */
 348:.././hal/sam3u1c/flash_efc.c **** 	if (clock < CHIP_FREQ_FWS_0) {
 603              	 .loc 3 348 5
 604 001c FB68     	 ldr r3,[r7,#12]
 605 001e 1A4A     	 ldr r2,.L52+8
 606 0020 9342     	 cmp r3,r2
 607 0022 05D8     	 bhi .L46
 349:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 0);
 608              	 .loc 3 349 3
 609 0024 BB68     	 ldr r3,[r7,#8]
 610 0026 0021     	 movs r1,#0
 611 0028 1846     	 mov r0,r3
 612 002a 184B     	 ldr r3,.L52+12
 613 002c 9847     	 blx r3
 614              	.LVL7:
 615 002e 22E0     	 b .L47
 616              	.L46:
 350:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_1) {
 617              	 .loc 3 350 12
 618 0030 FB68     	 ldr r3,[r7,#12]
 619 0032 174A     	 ldr r2,.L52+16
 620 0034 9342     	 cmp r3,r2
 621 0036 05D8     	 bhi .L48
 351:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 1);
 622              	 .loc 3 351 3
 623 0038 BB68     	 ldr r3,[r7,#8]
 624 003a 0121     	 movs r1,#1
 625 003c 1846     	 mov r0,r3
 626 003e 134B     	 ldr r3,.L52+12
 627 0040 9847     	 blx r3
 628              	.LVL8:
 629 0042 18E0     	 b .L47
 630              	.L48:
 352:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_2) {
 631              	 .loc 3 352 12
 632 0044 FB68     	 ldr r3,[r7,#12]
 633 0046 134A     	 ldr r2,.L52+20
 634 0048 9342     	 cmp r3,r2
 635 004a 05D8     	 bhi .L49
 353:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 2);
 636              	 .loc 3 353 3
 637 004c BB68     	 ldr r3,[r7,#8]
 638 004e 0221     	 movs r1,#2
 639 0050 1846     	 mov r0,r3
 640 0052 0E4B     	 ldr r3,.L52+12
 641 0054 9847     	 blx r3
 642              	.LVL9:
 643 0056 0EE0     	 b .L47
 644              	.L49:
 354:.././hal/sam3u1c/flash_efc.c **** #if (SAM3XA || SAM3U)
 355:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_3) {
 645              	 .loc 3 355 12
 646 0058 FB68     	 ldr r3,[r7,#12]
 647 005a 0F4A     	 ldr r2,.L52+24
 648 005c 9342     	 cmp r3,r2
 649 005e 05D8     	 bhi .L50
 356:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 3);
 650              	 .loc 3 356 3
 651 0060 BB68     	 ldr r3,[r7,#8]
 652 0062 0321     	 movs r1,#3
 653 0064 1846     	 mov r0,r3
 654 0066 094B     	 ldr r3,.L52+12
 655 0068 9847     	 blx r3
 656              	.LVL10:
 657 006a 04E0     	 b .L47
 658              	.L50:
 357:.././hal/sam3u1c/flash_efc.c **** 	} else {
 358:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 4);
 659              	 .loc 3 358 3
 660 006c BB68     	 ldr r3,[r7,#8]
 661 006e 0421     	 movs r1,#4
 662 0070 1846     	 mov r0,r3
 663 0072 064B     	 ldr r3,.L52+12
 664 0074 9847     	 blx r3
 665              	.LVL11:
 666              	.L47:
 359:.././hal/sam3u1c/flash_efc.c **** 	}
 360:.././hal/sam3u1c/flash_efc.c **** #elif (SAM4S || SAM4E || SAM4N || SAM4C || SAM4CP || SAM4CM)
 361:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_3) {
 362:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 3);
 363:.././hal/sam3u1c/flash_efc.c **** 	} else if (clock < CHIP_FREQ_FWS_4) {
 364:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 4);
 365:.././hal/sam3u1c/flash_efc.c **** 	} else {
 366:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 5);
 367:.././hal/sam3u1c/flash_efc.c **** 	}
 368:.././hal/sam3u1c/flash_efc.c **** #else
 369:.././hal/sam3u1c/flash_efc.c **** 	} else {
 370:.././hal/sam3u1c/flash_efc.c **** 		efc_set_wait_state(p_efc, 3);
 371:.././hal/sam3u1c/flash_efc.c **** 	}
 372:.././hal/sam3u1c/flash_efc.c **** #endif
 373:.././hal/sam3u1c/flash_efc.c **** 
 374:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 667              	 .loc 3 374 9
 668 0076 0023     	 movs r3,#0
 375:.././hal/sam3u1c/flash_efc.c **** }
 669              	 .loc 3 375 1
 670 0078 1846     	 mov r0,r3
 671 007a 1437     	 adds r7,r7,#20
 672              	.LCFI41:
 673              	 .cfi_def_cfa_offset 12
 674 007c BD46     	 mov sp,r7
 675              	.LCFI42:
 676              	 .cfi_def_cfa_register 13
 677              	 
 678 007e 90BD     	 pop {r4,r7,pc}
 679              	.L53:
 680              	 .align 2
 681              	.L52:
 682 0080 00000000 	 .word sysclk_get_cpu_hz
 683 0084 00000000 	 .word translate_address
 684 0088 FF356E01 	 .word 23999999
 685 008c 00000000 	 .word efc_set_wait_state
 686 0090 FF596202 	 .word 39999999
 687 0094 FFA14A04 	 .word 71999999
 688 0098 FFBC0105 	 .word 83999999
 689              	 .cfi_endproc
 690              	.LFE94:
 692              	 .section .text.flash_get_wait_state,"ax",%progbits
 693              	 .align 1
 694              	 .global flash_get_wait_state
 695              	 .syntax unified
 696              	 .thumb
 697              	 .thumb_func
 698              	 .fpu softvfp
 700              	flash_get_wait_state:
 701              	.LFB95:
 376:.././hal/sam3u1c/flash_efc.c **** 
 377:.././hal/sam3u1c/flash_efc.c **** /**
 378:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash wait state.
 379:.././hal/sam3u1c/flash_efc.c ****  *
 380:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 381:.././hal/sam3u1c/flash_efc.c ****  *
 382:.././hal/sam3u1c/flash_efc.c ****  * \return The number of wait states in cycle (no shift).
 383:.././hal/sam3u1c/flash_efc.c ****  */
 384:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_wait_state(uint32_t ul_address)
 385:.././hal/sam3u1c/flash_efc.c **** {
 702              	 .loc 3 385 1
 703              	 .cfi_startproc
 704              	 
 705              	 
 706 0000 90B5     	 push {r4,r7,lr}
 707              	.LCFI43:
 708              	 .cfi_def_cfa_offset 12
 709              	 .cfi_offset 4,-12
 710              	 .cfi_offset 7,-8
 711              	 .cfi_offset 14,-4
 712 0002 85B0     	 sub sp,sp,#20
 713              	.LCFI44:
 714              	 .cfi_def_cfa_offset 32
 715 0004 00AF     	 add r7,sp,#0
 716              	.LCFI45:
 717              	 .cfi_def_cfa_register 7
 718 0006 7860     	 str r0,[r7,#4]
 386:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 387:.././hal/sam3u1c/flash_efc.c **** 
 388:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 719              	 .loc 3 388 2
 720 0008 07F10C00 	 add r0,r7,#12
 721 000c 0023     	 movs r3,#0
 722 000e 0022     	 movs r2,#0
 723 0010 7968     	 ldr r1,[r7,#4]
 724 0012 054C     	 ldr r4,.L56
 725 0014 A047     	 blx r4
 726              	.LVL12:
 389:.././hal/sam3u1c/flash_efc.c **** 	return efc_get_wait_state(p_efc);
 727              	 .loc 3 389 9
 728 0016 FB68     	 ldr r3,[r7,#12]
 729 0018 1846     	 mov r0,r3
 730 001a 044B     	 ldr r3,.L56+4
 731 001c 9847     	 blx r3
 732              	.LVL13:
 733 001e 0346     	 mov r3,r0
 390:.././hal/sam3u1c/flash_efc.c **** }
 734              	 .loc 3 390 1
 735 0020 1846     	 mov r0,r3
 736 0022 1437     	 adds r7,r7,#20
 737              	.LCFI46:
 738              	 .cfi_def_cfa_offset 12
 739 0024 BD46     	 mov sp,r7
 740              	.LCFI47:
 741              	 .cfi_def_cfa_register 13
 742              	 
 743 0026 90BD     	 pop {r4,r7,pc}
 744              	.L57:
 745              	 .align 2
 746              	.L56:
 747 0028 00000000 	 .word translate_address
 748 002c 00000000 	 .word efc_get_wait_state
 749              	 .cfi_endproc
 750              	.LFE95:
 752              	 .section .text.flash_get_descriptor,"ax",%progbits
 753              	 .align 1
 754              	 .global flash_get_descriptor
 755              	 .syntax unified
 756              	 .thumb
 757              	 .thumb_func
 758              	 .fpu softvfp
 760              	flash_get_descriptor:
 761              	.LFB96:
 391:.././hal/sam3u1c/flash_efc.c **** 
 392:.././hal/sam3u1c/flash_efc.c **** /**
 393:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash descriptor.
 394:.././hal/sam3u1c/flash_efc.c ****  *
 395:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 396:.././hal/sam3u1c/flash_efc.c ****  * \param pul_flash_descriptor Pointer to a data buffer to store flash descriptor.
 397:.././hal/sam3u1c/flash_efc.c ****  * \param ul_size Data buffer size in DWORD.
 398:.././hal/sam3u1c/flash_efc.c ****  *
 399:.././hal/sam3u1c/flash_efc.c ****  * \return The actual descriptor length.
 400:.././hal/sam3u1c/flash_efc.c ****  */
 401:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_descriptor(uint32_t ul_address,
 402:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_flash_descriptor, uint32_t ul_size)
 403:.././hal/sam3u1c/flash_efc.c **** {
 762              	 .loc 3 403 1
 763              	 .cfi_startproc
 764              	 
 765              	 
 766 0000 90B5     	 push {r4,r7,lr}
 767              	.LCFI48:
 768              	 .cfi_def_cfa_offset 12
 769              	 .cfi_offset 4,-12
 770              	 .cfi_offset 7,-8
 771              	 .cfi_offset 14,-4
 772 0002 89B0     	 sub sp,sp,#36
 773              	.LCFI49:
 774              	 .cfi_def_cfa_offset 48
 775 0004 00AF     	 add r7,sp,#0
 776              	.LCFI50:
 777              	 .cfi_def_cfa_register 7
 778 0006 F860     	 str r0,[r7,#12]
 779 0008 B960     	 str r1,[r7,#8]
 780 000a 7A60     	 str r2,[r7,#4]
 404:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 405:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_tmp;
 406:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_cnt;
 407:.././hal/sam3u1c/flash_efc.c **** 
 408:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 781              	 .loc 3 408 2
 782 000c 07F11400 	 add r0,r7,#20
 783 0010 0023     	 movs r3,#0
 784 0012 0022     	 movs r2,#0
 785 0014 F968     	 ldr r1,[r7,#12]
 786 0016 144C     	 ldr r4,.L64
 787 0018 A047     	 blx r4
 788              	.LVL14:
 409:.././hal/sam3u1c/flash_efc.c **** 
 410:.././hal/sam3u1c/flash_efc.c **** 	/* Command fails */
 411:.././hal/sam3u1c/flash_efc.c **** 	if (FLASH_RC_OK != efc_perform_command(p_efc, EFC_FCMD_GETD, 0)) {
 789              	 .loc 3 411 21
 790 001a 7B69     	 ldr r3,[r7,#20]
 791 001c 0022     	 movs r2,#0
 792 001e 0021     	 movs r1,#0
 793 0020 1846     	 mov r0,r3
 794 0022 124B     	 ldr r3,.L64+4
 795 0024 9847     	 blx r3
 796              	.LVL15:
 797 0026 0346     	 mov r3,r0
 798              	 .loc 3 411 5
 799 0028 002B     	 cmp r3,#0
 800 002a 01D0     	 beq .L59
 412:.././hal/sam3u1c/flash_efc.c **** 		return 0;
 801              	 .loc 3 412 10
 802 002c 0023     	 movs r3,#0
 803 002e 17E0     	 b .L63
 804              	.L59:
 413:.././hal/sam3u1c/flash_efc.c **** 	} else {
 414:.././hal/sam3u1c/flash_efc.c **** 		/* Read until no result */
 415:.././hal/sam3u1c/flash_efc.c **** 		for (ul_cnt = 0;; ul_cnt++) {
 805              	 .loc 3 415 15
 806 0030 0023     	 movs r3,#0
 807 0032 FB61     	 str r3,[r7,#28]
 808              	.L62:
 416:.././hal/sam3u1c/flash_efc.c **** 			ul_tmp = efc_get_result(p_efc);
 809              	 .loc 3 416 13
 810 0034 7B69     	 ldr r3,[r7,#20]
 811 0036 1846     	 mov r0,r3
 812 0038 0D4B     	 ldr r3,.L64+8
 813 003a 9847     	 blx r3
 814              	.LVL16:
 815 003c B861     	 str r0,[r7,#24]
 417:.././hal/sam3u1c/flash_efc.c **** 			if ((ul_size > ul_cnt) && (ul_tmp != 0)) {
 816              	 .loc 3 417 7
 817 003e 7A68     	 ldr r2,[r7,#4]
 818 0040 FB69     	 ldr r3,[r7,#28]
 819 0042 9A42     	 cmp r2,r3
 820 0044 0BD9     	 bls .L61
 821              	 .loc 3 417 27 discriminator 1
 822 0046 BB69     	 ldr r3,[r7,#24]
 823 0048 002B     	 cmp r3,#0
 824 004a 08D0     	 beq .L61
 418:.././hal/sam3u1c/flash_efc.c **** 				*pul_flash_descriptor++ = ul_tmp;
 825              	 .loc 3 418 26
 826 004c BB68     	 ldr r3,[r7,#8]
 827 004e 1A1D     	 adds r2,r3,#4
 828 0050 BA60     	 str r2,[r7,#8]
 829              	 .loc 3 418 29
 830 0052 BA69     	 ldr r2,[r7,#24]
 831 0054 1A60     	 str r2,[r3]
 415:.././hal/sam3u1c/flash_efc.c **** 			ul_tmp = efc_get_result(p_efc);
 832              	 .loc 3 415 27
 833 0056 FB69     	 ldr r3,[r7,#28]
 834 0058 0133     	 adds r3,r3,#1
 835 005a FB61     	 str r3,[r7,#28]
 416:.././hal/sam3u1c/flash_efc.c **** 			if ((ul_size > ul_cnt) && (ul_tmp != 0)) {
 836              	 .loc 3 416 11
 837 005c EAE7     	 b .L62
 838              	.L61:
 419:.././hal/sam3u1c/flash_efc.c **** 			} else {
 420:.././hal/sam3u1c/flash_efc.c **** 				break;
 421:.././hal/sam3u1c/flash_efc.c **** 			}
 422:.././hal/sam3u1c/flash_efc.c **** 		}
 423:.././hal/sam3u1c/flash_efc.c **** 	}
 424:.././hal/sam3u1c/flash_efc.c **** 
 425:.././hal/sam3u1c/flash_efc.c **** 	return ul_cnt;
 839              	 .loc 3 425 9
 840 005e FB69     	 ldr r3,[r7,#28]
 841              	.L63:
 426:.././hal/sam3u1c/flash_efc.c **** }
 842              	 .loc 3 426 1 discriminator 1
 843 0060 1846     	 mov r0,r3
 844 0062 2437     	 adds r7,r7,#36
 845              	.LCFI51:
 846              	 .cfi_def_cfa_offset 12
 847 0064 BD46     	 mov sp,r7
 848              	.LCFI52:
 849              	 .cfi_def_cfa_register 13
 850              	 
 851 0066 90BD     	 pop {r4,r7,pc}
 852              	.L65:
 853              	 .align 2
 854              	.L64:
 855 0068 00000000 	 .word translate_address
 856 006c 00000000 	 .word efc_perform_command
 857 0070 00000000 	 .word efc_get_result
 858              	 .cfi_endproc
 859              	.LFE96:
 861              	 .section .text.flash_get_page_count,"ax",%progbits
 862              	 .align 1
 863              	 .global flash_get_page_count
 864              	 .syntax unified
 865              	 .thumb
 866              	 .thumb_func
 867              	 .fpu softvfp
 869              	flash_get_page_count:
 870              	.LFB97:
 427:.././hal/sam3u1c/flash_efc.c **** 
 428:.././hal/sam3u1c/flash_efc.c **** /**
 429:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash total page count for the specified bank.
 430:.././hal/sam3u1c/flash_efc.c ****  *
 431:.././hal/sam3u1c/flash_efc.c ****  * \note The flash descriptor must be fetched from flash_get_descriptor
 432:.././hal/sam3u1c/flash_efc.c ****  * function first.
 433:.././hal/sam3u1c/flash_efc.c ****  *
 434:.././hal/sam3u1c/flash_efc.c ****  * \param pul_flash_descriptor Pointer to a flash descriptor.
 435:.././hal/sam3u1c/flash_efc.c ****  *
 436:.././hal/sam3u1c/flash_efc.c ****  * \return The flash total page count.
 437:.././hal/sam3u1c/flash_efc.c ****  */
 438:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_page_count(const uint32_t *pul_flash_descriptor)
 439:.././hal/sam3u1c/flash_efc.c **** {
 871              	 .loc 3 439 1
 872              	 .cfi_startproc
 873              	 
 874              	 
 875              	 
 876 0000 80B4     	 push {r7}
 877              	.LCFI53:
 878              	 .cfi_def_cfa_offset 4
 879              	 .cfi_offset 7,-4
 880 0002 83B0     	 sub sp,sp,#12
 881              	.LCFI54:
 882              	 .cfi_def_cfa_offset 16
 883 0004 00AF     	 add r7,sp,#0
 884              	.LCFI55:
 885              	 .cfi_def_cfa_register 7
 886 0006 7860     	 str r0,[r7,#4]
 440:.././hal/sam3u1c/flash_efc.c **** 	return (pul_flash_descriptor[1] / pul_flash_descriptor[2]);
 887              	 .loc 3 440 30
 888 0008 7B68     	 ldr r3,[r7,#4]
 889 000a 0433     	 adds r3,r3,#4
 890 000c 1A68     	 ldr r2,[r3]
 891              	 .loc 3 440 56
 892 000e 7B68     	 ldr r3,[r7,#4]
 893 0010 0833     	 adds r3,r3,#8
 894 0012 1B68     	 ldr r3,[r3]
 895              	 .loc 3 440 34
 896 0014 B2FBF3F3 	 udiv r3,r2,r3
 441:.././hal/sam3u1c/flash_efc.c **** }
 897              	 .loc 3 441 1
 898 0018 1846     	 mov r0,r3
 899 001a 0C37     	 adds r7,r7,#12
 900              	.LCFI56:
 901              	 .cfi_def_cfa_offset 4
 902 001c BD46     	 mov sp,r7
 903              	.LCFI57:
 904              	 .cfi_def_cfa_register 13
 905              	 
 906 001e 80BC     	 pop {r7}
 907              	.LCFI58:
 908              	 .cfi_restore 7
 909              	 .cfi_def_cfa_offset 0
 910 0020 7047     	 bx lr
 911              	 .cfi_endproc
 912              	.LFE97:
 914              	 .section .text.flash_get_page_count_per_region,"ax",%progbits
 915              	 .align 1
 916              	 .global flash_get_page_count_per_region
 917              	 .syntax unified
 918              	 .thumb
 919              	 .thumb_func
 920              	 .fpu softvfp
 922              	flash_get_page_count_per_region:
 923              	.LFB98:
 442:.././hal/sam3u1c/flash_efc.c **** 
 443:.././hal/sam3u1c/flash_efc.c **** /**
 444:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash page count per region (plane) for the specified bank.
 445:.././hal/sam3u1c/flash_efc.c ****  *
 446:.././hal/sam3u1c/flash_efc.c ****  * \note The flash descriptor must be fetched from flash_get_descriptor
 447:.././hal/sam3u1c/flash_efc.c ****  * function first.
 448:.././hal/sam3u1c/flash_efc.c ****  *
 449:.././hal/sam3u1c/flash_efc.c ****  * \param pul_flash_descriptor Pointer to a flash descriptor.
 450:.././hal/sam3u1c/flash_efc.c ****  *
 451:.././hal/sam3u1c/flash_efc.c ****  * \return The flash page count per region (plane).
 452:.././hal/sam3u1c/flash_efc.c ****  */
 453:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_page_count_per_region(const uint32_t *pul_flash_descriptor)
 454:.././hal/sam3u1c/flash_efc.c **** {
 924              	 .loc 3 454 1
 925              	 .cfi_startproc
 926              	 
 927              	 
 928              	 
 929 0000 80B4     	 push {r7}
 930              	.LCFI59:
 931              	 .cfi_def_cfa_offset 4
 932              	 .cfi_offset 7,-4
 933 0002 83B0     	 sub sp,sp,#12
 934              	.LCFI60:
 935              	 .cfi_def_cfa_offset 16
 936 0004 00AF     	 add r7,sp,#0
 937              	.LCFI61:
 938              	 .cfi_def_cfa_register 7
 939 0006 7860     	 str r0,[r7,#4]
 455:.././hal/sam3u1c/flash_efc.c **** 	return (pul_flash_descriptor[4] / pul_flash_descriptor[2]);
 940              	 .loc 3 455 30
 941 0008 7B68     	 ldr r3,[r7,#4]
 942 000a 1033     	 adds r3,r3,#16
 943 000c 1A68     	 ldr r2,[r3]
 944              	 .loc 3 455 56
 945 000e 7B68     	 ldr r3,[r7,#4]
 946 0010 0833     	 adds r3,r3,#8
 947 0012 1B68     	 ldr r3,[r3]
 948              	 .loc 3 455 34
 949 0014 B2FBF3F3 	 udiv r3,r2,r3
 456:.././hal/sam3u1c/flash_efc.c **** }
 950              	 .loc 3 456 1
 951 0018 1846     	 mov r0,r3
 952 001a 0C37     	 adds r7,r7,#12
 953              	.LCFI62:
 954              	 .cfi_def_cfa_offset 4
 955 001c BD46     	 mov sp,r7
 956              	.LCFI63:
 957              	 .cfi_def_cfa_register 13
 958              	 
 959 001e 80BC     	 pop {r7}
 960              	.LCFI64:
 961              	 .cfi_restore 7
 962              	 .cfi_def_cfa_offset 0
 963 0020 7047     	 bx lr
 964              	 .cfi_endproc
 965              	.LFE98:
 967              	 .section .text.flash_get_region_count,"ax",%progbits
 968              	 .align 1
 969              	 .global flash_get_region_count
 970              	 .syntax unified
 971              	 .thumb
 972              	 .thumb_func
 973              	 .fpu softvfp
 975              	flash_get_region_count:
 976              	.LFB99:
 457:.././hal/sam3u1c/flash_efc.c **** 
 458:.././hal/sam3u1c/flash_efc.c **** /**
 459:.././hal/sam3u1c/flash_efc.c ****  * \brief Get flash region (plane) count for the specified bank.
 460:.././hal/sam3u1c/flash_efc.c ****  *
 461:.././hal/sam3u1c/flash_efc.c ****  * \note The flash descriptor must be fetched from flash_get_descriptor
 462:.././hal/sam3u1c/flash_efc.c ****  * function first.
 463:.././hal/sam3u1c/flash_efc.c ****  *
 464:.././hal/sam3u1c/flash_efc.c ****  * \param pul_flash_descriptor Pointer to a flash descriptor.
 465:.././hal/sam3u1c/flash_efc.c ****  *
 466:.././hal/sam3u1c/flash_efc.c ****  * \return The flash region (plane) count.
 467:.././hal/sam3u1c/flash_efc.c ****  */
 468:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_get_region_count(const uint32_t *pul_flash_descriptor)
 469:.././hal/sam3u1c/flash_efc.c **** {
 977              	 .loc 3 469 1
 978              	 .cfi_startproc
 979              	 
 980              	 
 981              	 
 982 0000 80B4     	 push {r7}
 983              	.LCFI65:
 984              	 .cfi_def_cfa_offset 4
 985              	 .cfi_offset 7,-4
 986 0002 83B0     	 sub sp,sp,#12
 987              	.LCFI66:
 988              	 .cfi_def_cfa_offset 16
 989 0004 00AF     	 add r7,sp,#0
 990              	.LCFI67:
 991              	 .cfi_def_cfa_register 7
 992 0006 7860     	 str r0,[r7,#4]
 470:.././hal/sam3u1c/flash_efc.c **** 	return (pul_flash_descriptor[3]);
 993              	 .loc 3 470 30
 994 0008 7B68     	 ldr r3,[r7,#4]
 995 000a 0C33     	 adds r3,r3,#12
 996 000c 1B68     	 ldr r3,[r3]
 471:.././hal/sam3u1c/flash_efc.c **** }
 997              	 .loc 3 471 1
 998 000e 1846     	 mov r0,r3
 999 0010 0C37     	 adds r7,r7,#12
 1000              	.LCFI68:
 1001              	 .cfi_def_cfa_offset 4
 1002 0012 BD46     	 mov sp,r7
 1003              	.LCFI69:
 1004              	 .cfi_def_cfa_register 13
 1005              	 
 1006 0014 80BC     	 pop {r7}
 1007              	.LCFI70:
 1008              	 .cfi_restore 7
 1009              	 .cfi_def_cfa_offset 0
 1010 0016 7047     	 bx lr
 1011              	 .cfi_endproc
 1012              	.LFE99:
 1014              	 .section .text.flash_erase_all,"ax",%progbits
 1015              	 .align 1
 1016              	 .global flash_erase_all
 1017              	 .syntax unified
 1018              	 .thumb
 1019              	 .thumb_func
 1020              	 .fpu softvfp
 1022              	flash_erase_all:
 1023              	.LFB100:
 472:.././hal/sam3u1c/flash_efc.c **** 
 473:.././hal/sam3u1c/flash_efc.c **** /**
 474:.././hal/sam3u1c/flash_efc.c ****  * \brief Erase the entire flash.
 475:.././hal/sam3u1c/flash_efc.c ****  *
 476:.././hal/sam3u1c/flash_efc.c ****  * \note Only the flash bank including ul_address will be erased. If there are
 477:.././hal/sam3u1c/flash_efc.c ****  * two flash banks, we need to call this function twice with each bank start
 478:.././hal/sam3u1c/flash_efc.c ****  * address.
 479:.././hal/sam3u1c/flash_efc.c ****  *
 480:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address  Flash bank start address.
 481:.././hal/sam3u1c/flash_efc.c ****  *
 482:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 483:.././hal/sam3u1c/flash_efc.c ****  */
 484:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_erase_all(uint32_t ul_address)
 485:.././hal/sam3u1c/flash_efc.c **** {
 1024              	 .loc 3 485 1
 1025              	 .cfi_startproc
 1026              	 
 1027              	 
 1028 0000 90B5     	 push {r4,r7,lr}
 1029              	.LCFI71:
 1030              	 .cfi_def_cfa_offset 12
 1031              	 .cfi_offset 4,-12
 1032              	 .cfi_offset 7,-8
 1033              	 .cfi_offset 14,-4
 1034 0002 85B0     	 sub sp,sp,#20
 1035              	.LCFI72:
 1036              	 .cfi_def_cfa_offset 32
 1037 0004 00AF     	 add r7,sp,#0
 1038              	.LCFI73:
 1039              	 .cfi_def_cfa_register 7
 1040 0006 7860     	 str r0,[r7,#4]
 486:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 487:.././hal/sam3u1c/flash_efc.c **** 
 488:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, NULL, NULL);
 1041              	 .loc 3 488 2
 1042 0008 07F10C00 	 add r0,r7,#12
 1043 000c 0023     	 movs r3,#0
 1044 000e 0022     	 movs r2,#0
 1045 0010 7968     	 ldr r1,[r7,#4]
 1046 0012 094C     	 ldr r4,.L76
 1047 0014 A047     	 blx r4
 1048              	.LVL17:
 489:.././hal/sam3u1c/flash_efc.c **** 
 490:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(p_efc, EFC_FCMD_EA, 0)) {
 1049              	 .loc 3 490 19
 1050 0016 FB68     	 ldr r3,[r7,#12]
 1051 0018 0022     	 movs r2,#0
 1052 001a 0521     	 movs r1,#5
 1053 001c 1846     	 mov r0,r3
 1054 001e 074B     	 ldr r3,.L76+4
 1055 0020 9847     	 blx r3
 1056              	.LVL18:
 1057 0022 0346     	 mov r3,r0
 1058              	 .loc 3 490 5
 1059 0024 002B     	 cmp r3,#0
 1060 0026 01D0     	 beq .L73
 491:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 1061              	 .loc 3 491 10
 1062 0028 1023     	 movs r3,#16
 1063 002a 00E0     	 b .L75
 1064              	.L73:
 492:.././hal/sam3u1c/flash_efc.c **** 	}
 493:.././hal/sam3u1c/flash_efc.c **** 
 494:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 1065              	 .loc 3 494 9
 1066 002c 0023     	 movs r3,#0
 1067              	.L75:
 495:.././hal/sam3u1c/flash_efc.c **** }
 1068              	 .loc 3 495 1 discriminator 1
 1069 002e 1846     	 mov r0,r3
 1070 0030 1437     	 adds r7,r7,#20
 1071              	.LCFI74:
 1072              	 .cfi_def_cfa_offset 12
 1073 0032 BD46     	 mov sp,r7
 1074              	.LCFI75:
 1075              	 .cfi_def_cfa_register 13
 1076              	 
 1077 0034 90BD     	 pop {r4,r7,pc}
 1078              	.L77:
 1079 0036 00BF     	 .align 2
 1080              	.L76:
 1081 0038 00000000 	 .word translate_address
 1082 003c 00000000 	 .word efc_perform_command
 1083              	 .cfi_endproc
 1084              	.LFE100:
 1086              	 .section .text.flash_write,"ax",%progbits
 1087              	 .align 1
 1088              	 .global flash_write
 1089              	 .syntax unified
 1090              	 .thumb
 1091              	 .thumb_func
 1092              	 .fpu softvfp
 1094              	flash_write:
 1095              	.LFB101:
 496:.././hal/sam3u1c/flash_efc.c **** 
 497:.././hal/sam3u1c/flash_efc.c **** #if SAM3SD8
 498:.././hal/sam3u1c/flash_efc.c **** /**
 499:.././hal/sam3u1c/flash_efc.c ****  * \brief Erase the flash by plane.
 500:.././hal/sam3u1c/flash_efc.c ****  *
 501:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash plane start address.
 502:.././hal/sam3u1c/flash_efc.c ****  *
 503:.././hal/sam3u1c/flash_efc.c ****  * \note Erase plane command needs a page number parameter which belongs to
 504:.././hal/sam3u1c/flash_efc.c ****  * the plane to be erased.
 505:.././hal/sam3u1c/flash_efc.c ****  *
 506:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 507:.././hal/sam3u1c/flash_efc.c ****  */
 508:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_erase_plane(uint32_t ul_address)
 509:.././hal/sam3u1c/flash_efc.c **** {
 510:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 511:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 512:.././hal/sam3u1c/flash_efc.c **** 
 513:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, &us_page, NULL);
 514:.././hal/sam3u1c/flash_efc.c **** 
 515:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(p_efc, EFC_FCMD_EPL, us_page)) {
 516:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 517:.././hal/sam3u1c/flash_efc.c **** 	}
 518:.././hal/sam3u1c/flash_efc.c **** 
 519:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 520:.././hal/sam3u1c/flash_efc.c **** }
 521:.././hal/sam3u1c/flash_efc.c **** #endif
 522:.././hal/sam3u1c/flash_efc.c **** 
 523:.././hal/sam3u1c/flash_efc.c **** #if (SAM4S || SAM4E || SAM4N || SAM4C || SAMG || SAM4CP || SAM4CM)
 524:.././hal/sam3u1c/flash_efc.c **** /**
 525:.././hal/sam3u1c/flash_efc.c ****  * \brief Erase the specified pages of flash.
 526:.././hal/sam3u1c/flash_efc.c ****  *
 527:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash bank start address.
 528:.././hal/sam3u1c/flash_efc.c ****  *
 529:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 530:.././hal/sam3u1c/flash_efc.c ****  */
 531:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_erase_page(uint32_t ul_address, uint8_t uc_page_num)
 532:.././hal/sam3u1c/flash_efc.c **** {
 533:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 534:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 535:.././hal/sam3u1c/flash_efc.c **** 
 536:.././hal/sam3u1c/flash_efc.c **** 	if (uc_page_num >= IFLASH_ERASE_PAGES_INVALID) {
 537:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 538:.././hal/sam3u1c/flash_efc.c **** 	}
 539:.././hal/sam3u1c/flash_efc.c **** 
 540:.././hal/sam3u1c/flash_efc.c **** 	if (ul_address & (IFLASH_PAGE_SIZE - 1)) {
 541:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 542:.././hal/sam3u1c/flash_efc.c **** 	}
 543:.././hal/sam3u1c/flash_efc.c **** 
 544:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, &us_page, NULL);
 545:.././hal/sam3u1c/flash_efc.c **** 
 546:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(p_efc, EFC_FCMD_EPA,
 547:.././hal/sam3u1c/flash_efc.c **** 					(us_page | uc_page_num))) {
 548:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 549:.././hal/sam3u1c/flash_efc.c **** 	}
 550:.././hal/sam3u1c/flash_efc.c **** 
 551:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 552:.././hal/sam3u1c/flash_efc.c **** }
 553:.././hal/sam3u1c/flash_efc.c **** 
 554:.././hal/sam3u1c/flash_efc.c **** /**
 555:.././hal/sam3u1c/flash_efc.c ****  * \brief Erase the flash sector.
 556:.././hal/sam3u1c/flash_efc.c ****  *
 557:.././hal/sam3u1c/flash_efc.c ****  * \note Erase sector command needs a page number parameter which belongs to
 558:.././hal/sam3u1c/flash_efc.c ****  * the sector to be erased.
 559:.././hal/sam3u1c/flash_efc.c ****  *
 560:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Flash sector start address.
 561:.././hal/sam3u1c/flash_efc.c ****  *
 562:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 563:.././hal/sam3u1c/flash_efc.c ****  */
 564:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_erase_sector(uint32_t ul_address)
 565:.././hal/sam3u1c/flash_efc.c **** {
 566:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 567:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 568:.././hal/sam3u1c/flash_efc.c **** 
 569:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, &us_page, NULL);
 570:.././hal/sam3u1c/flash_efc.c **** 
 571:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(p_efc, EFC_FCMD_ES, us_page)) {
 572:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 573:.././hal/sam3u1c/flash_efc.c **** 	}
 574:.././hal/sam3u1c/flash_efc.c **** 
 575:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 576:.././hal/sam3u1c/flash_efc.c **** }
 577:.././hal/sam3u1c/flash_efc.c **** #endif
 578:.././hal/sam3u1c/flash_efc.c **** 
 579:.././hal/sam3u1c/flash_efc.c **** /**
 580:.././hal/sam3u1c/flash_efc.c ****  * \brief Write a data buffer on flash.
 581:.././hal/sam3u1c/flash_efc.c ****  *
 582:.././hal/sam3u1c/flash_efc.c ****  * \note This function works in polling mode, and thus only returns when the
 583:.././hal/sam3u1c/flash_efc.c ****  * data has been effectively written.
 584:.././hal/sam3u1c/flash_efc.c ****  * \note For dual bank flash, this function doesn't support cross write from
 585:.././hal/sam3u1c/flash_efc.c ****  * bank 0 to bank 1. In this case, flash_write must be called twice (ie for
 586:.././hal/sam3u1c/flash_efc.c ****  * each bank).
 587:.././hal/sam3u1c/flash_efc.c ****  *
 588:.././hal/sam3u1c/flash_efc.c ****  * \param ul_address Write address.
 589:.././hal/sam3u1c/flash_efc.c ****  * \param p_buffer Data buffer.
 590:.././hal/sam3u1c/flash_efc.c ****  * \param ul_size Size of data buffer in bytes.
 591:.././hal/sam3u1c/flash_efc.c ****  * \param ul_erase_flag Flag to set if erase first.
 592:.././hal/sam3u1c/flash_efc.c ****  *
 593:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful, otherwise returns an error code.
 594:.././hal/sam3u1c/flash_efc.c ****  */
 595:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_write(uint32_t ul_address, const void *p_buffer,
 596:.././hal/sam3u1c/flash_efc.c **** 		uint32_t ul_size, uint32_t ul_erase_flag)
 597:.././hal/sam3u1c/flash_efc.c **** {
 1096              	 .loc 3 597 1
 1097              	 .cfi_startproc
 1098              	 
 1099              	 
 1100 0000 90B5     	 push {r4,r7,lr}
 1101              	.LCFI76:
 1102              	 .cfi_def_cfa_offset 12
 1103              	 .cfi_offset 4,-12
 1104              	 .cfi_offset 7,-8
 1105              	 .cfi_offset 14,-4
 1106 0002 8FB0     	 sub sp,sp,#60
 1107              	.LCFI77:
 1108              	 .cfi_def_cfa_offset 72
 1109 0004 00AF     	 add r7,sp,#0
 1110              	.LCFI78:
 1111              	 .cfi_def_cfa_register 7
 1112 0006 F860     	 str r0,[r7,#12]
 1113 0008 B960     	 str r1,[r7,#8]
 1114 000a 7A60     	 str r2,[r7,#4]
 1115 000c 3B60     	 str r3,[r7]
 598:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 599:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_fws_temp;
 600:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_page;
 601:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_offset;
 602:.././hal/sam3u1c/flash_efc.c **** 	uint32_t writeSize;
 603:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_page_addr;
 604:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_padding;
 605:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_error;
 606:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_idx;
 607:.././hal/sam3u1c/flash_efc.c **** 	uint32_t *p_aligned_dest;
 608:.././hal/sam3u1c/flash_efc.c **** 	uint8_t *puc_page_buffer = (uint8_t *) gs_ul_page_buffer;
 1116              	 .loc 3 608 11
 1117 000e 494B     	 ldr r3,.L88
 1118 0010 BB62     	 str r3,[r7,#40]
 609:.././hal/sam3u1c/flash_efc.c **** 
 610:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_address, &us_page, &us_offset);
 1119              	 .loc 3 610 2
 1120 0012 07F11403 	 add r3,r7,#20
 1121 0016 07F11602 	 add r2,r7,#22
 1122 001a 07F11800 	 add r0,r7,#24
 1123 001e F968     	 ldr r1,[r7,#12]
 1124 0020 454C     	 ldr r4,.L88+4
 1125 0022 A047     	 blx r4
 1126              	.LVL19:
 611:.././hal/sam3u1c/flash_efc.c **** 
 612:.././hal/sam3u1c/flash_efc.c **** 	/* According to the errata, set the wait state value to 6. */
 613:.././hal/sam3u1c/flash_efc.c **** 	ul_fws_temp = efc_get_wait_state(p_efc);
 1127              	 .loc 3 613 16
 1128 0024 BB69     	 ldr r3,[r7,#24]
 1129 0026 1846     	 mov r0,r3
 1130 0028 444B     	 ldr r3,.L88+8
 1131 002a 9847     	 blx r3
 1132              	.LVL20:
 1133 002c 7862     	 str r0,[r7,#36]
 614:.././hal/sam3u1c/flash_efc.c **** 	efc_set_wait_state(p_efc, 6);
 1134              	 .loc 3 614 2
 1135 002e BB69     	 ldr r3,[r7,#24]
 1136 0030 0621     	 movs r1,#6
 1137 0032 1846     	 mov r0,r3
 1138 0034 424B     	 ldr r3,.L88+12
 1139 0036 9847     	 blx r3
 1140              	.LVL21:
 615:.././hal/sam3u1c/flash_efc.c **** 
 616:.././hal/sam3u1c/flash_efc.c **** 	/* Write all pages */
 617:.././hal/sam3u1c/flash_efc.c **** 	while (ul_size > 0) {
 1141              	 .loc 3 617 8
 1142 0038 6FE0     	 b .L79
 1143              	.L86:
 618:.././hal/sam3u1c/flash_efc.c **** 		/* Copy data in temporary buffer to avoid alignment problems. */
 619:.././hal/sam3u1c/flash_efc.c **** 		writeSize = Min((uint32_t) IFLASH_PAGE_SIZE - us_offset,
 1144              	 .loc 3 619 15
 1145 003a BB8A     	 ldrh r3,[r7,#20]
 1146 003c C3F58073 	 rsb r3,r3,#256
 1147              	 .loc 3 619 13
 1148 0040 7A68     	 ldr r2,[r7,#4]
 1149 0042 9342     	 cmp r3,r2
 1150 0044 28BF     	 it cs
 1151 0046 1346     	 movcs r3,r2
 1152 0048 3B62     	 str r3,[r7,#32]
 620:.././hal/sam3u1c/flash_efc.c **** 				ul_size);
 621:.././hal/sam3u1c/flash_efc.c **** 		compute_address(p_efc, us_page, 0, &ul_page_addr);
 1153              	 .loc 3 621 3
 1154 004a B869     	 ldr r0,[r7,#24]
 1155 004c F98A     	 ldrh r1,[r7,#22]
 1156 004e 07F11003 	 add r3,r7,#16
 1157 0052 0022     	 movs r2,#0
 1158 0054 3B4C     	 ldr r4,.L88+16
 1159 0056 A047     	 blx r4
 1160              	.LVL22:
 622:.././hal/sam3u1c/flash_efc.c **** 		us_padding = IFLASH_PAGE_SIZE - us_offset - writeSize;
 1161              	 .loc 3 622 45
 1162 0058 3B6A     	 ldr r3,[r7,#32]
 1163 005a 9AB2     	 uxth r2,r3
 1164 005c BB8A     	 ldrh r3,[r7,#20]
 1165 005e 1344     	 add r3,r3,r2
 1166 0060 9BB2     	 uxth r3,r3
 1167              	 .loc 3 622 14
 1168 0062 C3F58073 	 rsb r3,r3,#256
 1169 0066 FB83     	 strh r3,[r7,#30]
 623:.././hal/sam3u1c/flash_efc.c **** 
 624:.././hal/sam3u1c/flash_efc.c **** 		/* Pre-buffer data */
 625:.././hal/sam3u1c/flash_efc.c **** 		memcpy(puc_page_buffer, (void *)ul_page_addr, us_offset);
 1170              	 .loc 3 625 3
 1171 0068 3B69     	 ldr r3,[r7,#16]
 1172 006a 1946     	 mov r1,r3
 1173 006c BB8A     	 ldrh r3,[r7,#20]
 1174 006e 1A46     	 mov r2,r3
 1175 0070 B86A     	 ldr r0,[r7,#40]
 1176 0072 354B     	 ldr r3,.L88+20
 1177 0074 9847     	 blx r3
 1178              	.LVL23:
 626:.././hal/sam3u1c/flash_efc.c **** 
 627:.././hal/sam3u1c/flash_efc.c **** 		/* Buffer data */
 628:.././hal/sam3u1c/flash_efc.c **** 		memcpy(puc_page_buffer + us_offset, p_buffer, writeSize);
 1179              	 .loc 3 628 3
 1180 0076 BB8A     	 ldrh r3,[r7,#20]
 1181 0078 1A46     	 mov r2,r3
 1182              	 .loc 3 628 26
 1183 007a BB6A     	 ldr r3,[r7,#40]
 1184 007c 1344     	 add r3,r3,r2
 1185              	 .loc 3 628 3
 1186 007e 3A6A     	 ldr r2,[r7,#32]
 1187 0080 B968     	 ldr r1,[r7,#8]
 1188 0082 1846     	 mov r0,r3
 1189 0084 304B     	 ldr r3,.L88+20
 1190 0086 9847     	 blx r3
 1191              	.LVL24:
 629:.././hal/sam3u1c/flash_efc.c **** 
 630:.././hal/sam3u1c/flash_efc.c **** 		/* Post-buffer data */
 631:.././hal/sam3u1c/flash_efc.c **** 		memcpy(puc_page_buffer + us_offset + writeSize,
 1192              	 .loc 3 631 38
 1193 0088 BB8A     	 ldrh r3,[r7,#20]
 1194 008a 1A46     	 mov r2,r3
 1195 008c 3B6A     	 ldr r3,[r7,#32]
 1196 008e 1344     	 add r3,r3,r2
 1197 0090 BA6A     	 ldr r2,[r7,#40]
 1198 0092 D018     	 adds r0,r2,r3
 632:.././hal/sam3u1c/flash_efc.c **** 				(void *)(ul_page_addr + us_offset + writeSize),
 1199              	 .loc 3 632 27
 1200 0094 BB8A     	 ldrh r3,[r7,#20]
 1201 0096 1A46     	 mov r2,r3
 1202 0098 3B69     	 ldr r3,[r7,#16]
 1203 009a 1A44     	 add r2,r2,r3
 1204              	 .loc 3 632 39
 1205 009c 3B6A     	 ldr r3,[r7,#32]
 1206 009e 1344     	 add r3,r3,r2
 631:.././hal/sam3u1c/flash_efc.c **** 				(void *)(ul_page_addr + us_offset + writeSize),
 1207              	 .loc 3 631 3
 1208 00a0 1946     	 mov r1,r3
 1209 00a2 FB8B     	 ldrh r3,[r7,#30]
 1210 00a4 1A46     	 mov r2,r3
 1211 00a6 284B     	 ldr r3,.L88+20
 1212 00a8 9847     	 blx r3
 1213              	.LVL25:
 633:.././hal/sam3u1c/flash_efc.c **** 				us_padding);
 634:.././hal/sam3u1c/flash_efc.c **** 
 635:.././hal/sam3u1c/flash_efc.c **** 		/* Write page.
 636:.././hal/sam3u1c/flash_efc.c **** 		 * Writing 8-bit and 16-bit data is not allowed and may lead to
 637:.././hal/sam3u1c/flash_efc.c **** 		 * unpredictable data corruption.
 638:.././hal/sam3u1c/flash_efc.c **** 		 */
 639:.././hal/sam3u1c/flash_efc.c **** 		p_aligned_dest = (uint32_t *) ul_page_addr;
 1214              	 .loc 3 639 20
 1215 00aa 3B69     	 ldr r3,[r7,#16]
 1216              	 .loc 3 639 18
 1217 00ac FB62     	 str r3,[r7,#44]
 640:.././hal/sam3u1c/flash_efc.c **** 		for (ul_idx = 0; ul_idx < (IFLASH_PAGE_SIZE / sizeof(uint32_t));
 1218              	 .loc 3 640 15
 1219 00ae 0023     	 movs r3,#0
 1220 00b0 3B63     	 str r3,[r7,#48]
 1221              	 .loc 3 640 3
 1222 00b2 0AE0     	 b .L80
 1223              	.L81:
 641:.././hal/sam3u1c/flash_efc.c **** 				++ul_idx) {
 642:.././hal/sam3u1c/flash_efc.c **** 			*p_aligned_dest++ = gs_ul_page_buffer[ul_idx];
 1224              	 .loc 3 642 19
 1225 00b4 FB6A     	 ldr r3,[r7,#44]
 1226 00b6 1A1D     	 adds r2,r3,#4
 1227 00b8 FA62     	 str r2,[r7,#44]
 1228              	 .loc 3 642 41
 1229 00ba 1E49     	 ldr r1,.L88
 1230 00bc 3A6B     	 ldr r2,[r7,#48]
 1231 00be 51F82220 	 ldr r2,[r1,r2,lsl#2]
 1232              	 .loc 3 642 22
 1233 00c2 1A60     	 str r2,[r3]
 641:.././hal/sam3u1c/flash_efc.c **** 				++ul_idx) {
 1234              	 .loc 3 641 5
 1235 00c4 3B6B     	 ldr r3,[r7,#48]
 1236 00c6 0133     	 adds r3,r3,#1
 1237 00c8 3B63     	 str r3,[r7,#48]
 1238              	.L80:
 640:.././hal/sam3u1c/flash_efc.c **** 		for (ul_idx = 0; ul_idx < (IFLASH_PAGE_SIZE / sizeof(uint32_t));
 1239              	 .loc 3 640 3 discriminator 1
 1240 00ca 3B6B     	 ldr r3,[r7,#48]
 1241 00cc 3F2B     	 cmp r3,#63
 1242 00ce F1D9     	 bls .L81
 643:.././hal/sam3u1c/flash_efc.c **** 		}
 644:.././hal/sam3u1c/flash_efc.c **** 
 645:.././hal/sam3u1c/flash_efc.c **** 		if (ul_erase_flag) {
 1243              	 .loc 3 645 6
 1244 00d0 3B68     	 ldr r3,[r7]
 1245 00d2 002B     	 cmp r3,#0
 1246 00d4 07D0     	 beq .L82
 646:.././hal/sam3u1c/flash_efc.c **** 			ul_error = efc_perform_command(p_efc, EFC_FCMD_EWP,
 1247              	 .loc 3 646 15
 1248 00d6 BB69     	 ldr r3,[r7,#24]
 1249 00d8 FA8A     	 ldrh r2,[r7,#22]
 1250 00da 0321     	 movs r1,#3
 1251 00dc 1846     	 mov r0,r3
 1252 00de 1B4B     	 ldr r3,.L88+24
 1253 00e0 9847     	 blx r3
 1254              	.LVL26:
 1255 00e2 7863     	 str r0,[r7,#52]
 1256 00e4 06E0     	 b .L83
 1257              	.L82:
 647:.././hal/sam3u1c/flash_efc.c **** 					us_page);
 648:.././hal/sam3u1c/flash_efc.c **** 		} else {
 649:.././hal/sam3u1c/flash_efc.c **** 			ul_error = efc_perform_command(p_efc, EFC_FCMD_WP,
 1258              	 .loc 3 649 15
 1259 00e6 BB69     	 ldr r3,[r7,#24]
 1260 00e8 FA8A     	 ldrh r2,[r7,#22]
 1261 00ea 0121     	 movs r1,#1
 1262 00ec 1846     	 mov r0,r3
 1263 00ee 174B     	 ldr r3,.L88+24
 1264 00f0 9847     	 blx r3
 1265              	.LVL27:
 1266 00f2 7863     	 str r0,[r7,#52]
 1267              	.L83:
 650:.././hal/sam3u1c/flash_efc.c **** 					us_page);
 651:.././hal/sam3u1c/flash_efc.c **** 		}
 652:.././hal/sam3u1c/flash_efc.c **** 
 653:.././hal/sam3u1c/flash_efc.c **** 		if (ul_error) {
 1268              	 .loc 3 653 6
 1269 00f4 7B6B     	 ldr r3,[r7,#52]
 1270 00f6 002B     	 cmp r3,#0
 1271 00f8 01D0     	 beq .L84
 654:.././hal/sam3u1c/flash_efc.c **** 			return ul_error;
 1272              	 .loc 3 654 11
 1273 00fa 7B6B     	 ldr r3,[r7,#52]
 1274 00fc 16E0     	 b .L87
 1275              	.L84:
 655:.././hal/sam3u1c/flash_efc.c **** 		}
 656:.././hal/sam3u1c/flash_efc.c **** 
 657:.././hal/sam3u1c/flash_efc.c **** 		/* Progression */
 658:.././hal/sam3u1c/flash_efc.c **** 		p_buffer = (void *)((uint32_t) p_buffer + writeSize);
 1276              	 .loc 3 658 23
 1277 00fe BA68     	 ldr r2,[r7,#8]
 1278              	 .loc 3 658 43
 1279 0100 3B6A     	 ldr r3,[r7,#32]
 1280 0102 1344     	 add r3,r3,r2
 1281              	 .loc 3 658 12
 1282 0104 BB60     	 str r3,[r7,#8]
 659:.././hal/sam3u1c/flash_efc.c **** 		ul_size -= writeSize;
 1283              	 .loc 3 659 11
 1284 0106 7A68     	 ldr r2,[r7,#4]
 1285 0108 3B6A     	 ldr r3,[r7,#32]
 1286 010a D31A     	 subs r3,r2,r3
 1287 010c 7B60     	 str r3,[r7,#4]
 660:.././hal/sam3u1c/flash_efc.c **** 		us_page++;
 1288              	 .loc 3 660 10
 1289 010e FB8A     	 ldrh r3,[r7,#22]
 1290 0110 0133     	 adds r3,r3,#1
 1291 0112 9BB2     	 uxth r3,r3
 1292 0114 FB82     	 strh r3,[r7,#22]
 661:.././hal/sam3u1c/flash_efc.c **** 		us_offset = 0;
 1293              	 .loc 3 661 13
 1294 0116 0023     	 movs r3,#0
 1295 0118 BB82     	 strh r3,[r7,#20]
 1296              	.L79:
 617:.././hal/sam3u1c/flash_efc.c **** 		/* Copy data in temporary buffer to avoid alignment problems. */
 1297              	 .loc 3 617 8
 1298 011a 7B68     	 ldr r3,[r7,#4]
 1299 011c 002B     	 cmp r3,#0
 1300 011e 8CD1     	 bne .L86
 662:.././hal/sam3u1c/flash_efc.c **** 	}
 663:.././hal/sam3u1c/flash_efc.c **** 
 664:.././hal/sam3u1c/flash_efc.c **** 	/* According to the errata, restore the wait state value. */
 665:.././hal/sam3u1c/flash_efc.c **** 	efc_set_wait_state(p_efc, ul_fws_temp);
 1301              	 .loc 3 665 2
 1302 0120 BB69     	 ldr r3,[r7,#24]
 1303 0122 796A     	 ldr r1,[r7,#36]
 1304 0124 1846     	 mov r0,r3
 1305 0126 064B     	 ldr r3,.L88+12
 1306 0128 9847     	 blx r3
 1307              	.LVL28:
 666:.././hal/sam3u1c/flash_efc.c **** 
 667:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 1308              	 .loc 3 667 9
 1309 012a 0023     	 movs r3,#0
 1310              	.L87:
 668:.././hal/sam3u1c/flash_efc.c **** }
 1311              	 .loc 3 668 1 discriminator 1
 1312 012c 1846     	 mov r0,r3
 1313 012e 3C37     	 adds r7,r7,#60
 1314              	.LCFI79:
 1315              	 .cfi_def_cfa_offset 12
 1316 0130 BD46     	 mov sp,r7
 1317              	.LCFI80:
 1318              	 .cfi_def_cfa_register 13
 1319              	 
 1320 0132 90BD     	 pop {r4,r7,pc}
 1321              	.L89:
 1322              	 .align 2
 1323              	.L88:
 1324 0134 00000000 	 .word gs_ul_page_buffer
 1325 0138 00000000 	 .word translate_address
 1326 013c 00000000 	 .word efc_get_wait_state
 1327 0140 00000000 	 .word efc_set_wait_state
 1328 0144 00000000 	 .word compute_address
 1329 0148 00000000 	 .word memcpy
 1330 014c 00000000 	 .word efc_perform_command
 1331              	 .cfi_endproc
 1332              	.LFE101:
 1334              	 .section .text.flash_lock,"ax",%progbits
 1335              	 .align 1
 1336              	 .global flash_lock
 1337              	 .syntax unified
 1338              	 .thumb
 1339              	 .thumb_func
 1340              	 .fpu softvfp
 1342              	flash_lock:
 1343              	.LFB102:
 669:.././hal/sam3u1c/flash_efc.c **** 
 670:.././hal/sam3u1c/flash_efc.c **** 
 671:.././hal/sam3u1c/flash_efc.c **** /**
 672:.././hal/sam3u1c/flash_efc.c ****  * \brief Lock all the regions in the given address range. The actual lock
 673:.././hal/sam3u1c/flash_efc.c ****  * range is reported through two output parameters.
 674:.././hal/sam3u1c/flash_efc.c ****  *
 675:.././hal/sam3u1c/flash_efc.c ****  * \param ul_start Start address of lock range.
 676:.././hal/sam3u1c/flash_efc.c ****  * \param ul_end End address of lock range.
 677:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_start Start address of the actual lock range (optional).
 678:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_end End address of the actual lock range (optional).
 679:.././hal/sam3u1c/flash_efc.c ****  *
 680:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful, otherwise returns an error code.
 681:.././hal/sam3u1c/flash_efc.c ****  */
 682:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_lock(uint32_t ul_start, uint32_t ul_end,
 683:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_actual_start, uint32_t *pul_actual_end)
 684:.././hal/sam3u1c/flash_efc.c **** {
 1344              	 .loc 3 684 1
 1345              	 .cfi_startproc
 1346              	 
 1347              	 
 1348 0000 90B5     	 push {r4,r7,lr}
 1349              	.LCFI81:
 1350              	 .cfi_def_cfa_offset 12
 1351              	 .cfi_offset 4,-12
 1352              	 .cfi_offset 7,-8
 1353              	 .cfi_offset 14,-4
 1354 0002 8BB0     	 sub sp,sp,#44
 1355              	.LCFI82:
 1356              	 .cfi_def_cfa_offset 56
 1357 0004 00AF     	 add r7,sp,#0
 1358              	.LCFI83:
 1359              	 .cfi_def_cfa_register 7
 1360 0006 F860     	 str r0,[r7,#12]
 1361 0008 B960     	 str r1,[r7,#8]
 1362 000a 7A60     	 str r2,[r7,#4]
 1363 000c 3B60     	 str r3,[r7]
 685:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 686:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_actual_start, ul_actual_end;
 687:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_start_page, us_end_page;
 688:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_error;
 689:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_num_pages_in_region =
 1364              	 .loc 3 689 11
 1365 000e 2023     	 movs r3,#32
 1366 0010 FB84     	 strh r3,[r7,#38]
 690:.././hal/sam3u1c/flash_efc.c **** 			IFLASH_LOCK_REGION_SIZE / IFLASH_PAGE_SIZE;
 691:.././hal/sam3u1c/flash_efc.c **** 
 692:.././hal/sam3u1c/flash_efc.c **** 	/* Compute actual lock range and store it */
 693:.././hal/sam3u1c/flash_efc.c **** 	compute_lock_range(ul_start, ul_end, &ul_actual_start, &ul_actual_end);
 1367              	 .loc 3 693 2
 1368 0012 07F11403 	 add r3,r7,#20
 1369 0016 07F11802 	 add r2,r7,#24
 1370 001a B968     	 ldr r1,[r7,#8]
 1371 001c F868     	 ldr r0,[r7,#12]
 1372 001e 1C4C     	 ldr r4,.L98
 1373 0020 A047     	 blx r4
 1374              	.LVL29:
 694:.././hal/sam3u1c/flash_efc.c **** 
 695:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_start != NULL) {
 1375              	 .loc 3 695 5
 1376 0022 7B68     	 ldr r3,[r7,#4]
 1377 0024 002B     	 cmp r3,#0
 1378 0026 02D0     	 beq .L91
 696:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_start = ul_actual_start;
 1379              	 .loc 3 696 21
 1380 0028 BA69     	 ldr r2,[r7,#24]
 1381 002a 7B68     	 ldr r3,[r7,#4]
 1382 002c 1A60     	 str r2,[r3]
 1383              	.L91:
 697:.././hal/sam3u1c/flash_efc.c **** 	}
 698:.././hal/sam3u1c/flash_efc.c **** 
 699:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_end != NULL) {
 1384              	 .loc 3 699 5
 1385 002e 3B68     	 ldr r3,[r7]
 1386 0030 002B     	 cmp r3,#0
 1387 0032 02D0     	 beq .L92
 700:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_end = ul_actual_end;
 1388              	 .loc 3 700 19
 1389 0034 7A69     	 ldr r2,[r7,#20]
 1390 0036 3B68     	 ldr r3,[r7]
 1391 0038 1A60     	 str r2,[r3]
 1392              	.L92:
 701:.././hal/sam3u1c/flash_efc.c **** 	}
 702:.././hal/sam3u1c/flash_efc.c **** 
 703:.././hal/sam3u1c/flash_efc.c **** 	/* Compute page numbers */
 704:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_actual_start, &us_start_page, 0);
 1393              	 .loc 3 704 2
 1394 003a B969     	 ldr r1,[r7,#24]
 1395 003c 07F11202 	 add r2,r7,#18
 1396 0040 07F11C00 	 add r0,r7,#28
 1397 0044 0023     	 movs r3,#0
 1398 0046 134C     	 ldr r4,.L98+4
 1399 0048 A047     	 blx r4
 1400              	.LVL30:
 705:.././hal/sam3u1c/flash_efc.c **** 	translate_address(0, ul_actual_end, &us_end_page, 0);
 1401              	 .loc 3 705 2
 1402 004a 7969     	 ldr r1,[r7,#20]
 1403 004c 07F11002 	 add r2,r7,#16
 1404 0050 0023     	 movs r3,#0
 1405 0052 0020     	 movs r0,#0
 1406 0054 0F4C     	 ldr r4,.L98+4
 1407 0056 A047     	 blx r4
 1408              	.LVL31:
 706:.././hal/sam3u1c/flash_efc.c **** 
 707:.././hal/sam3u1c/flash_efc.c **** 	/* Lock all pages */
 708:.././hal/sam3u1c/flash_efc.c **** 	while (us_start_page < us_end_page) {
 1409              	 .loc 3 708 8
 1410 0058 10E0     	 b .L93
 1411              	.L96:
 709:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_SLB, us_start_page);
 1412              	 .loc 3 709 14
 1413 005a FB69     	 ldr r3,[r7,#28]
 1414 005c 7A8A     	 ldrh r2,[r7,#18]
 1415 005e 0821     	 movs r1,#8
 1416 0060 1846     	 mov r0,r3
 1417 0062 0D4B     	 ldr r3,.L98+8
 1418 0064 9847     	 blx r3
 1419              	.LVL32:
 1420 0066 3862     	 str r0,[r7,#32]
 710:.././hal/sam3u1c/flash_efc.c **** 
 711:.././hal/sam3u1c/flash_efc.c **** 		if (ul_error) {
 1421              	 .loc 3 711 6
 1422 0068 3B6A     	 ldr r3,[r7,#32]
 1423 006a 002B     	 cmp r3,#0
 1424 006c 01D0     	 beq .L94
 712:.././hal/sam3u1c/flash_efc.c **** 			return ul_error;
 1425              	 .loc 3 712 11
 1426 006e 3B6A     	 ldr r3,[r7,#32]
 1427 0070 09E0     	 b .L97
 1428              	.L94:
 713:.././hal/sam3u1c/flash_efc.c **** 		}
 714:.././hal/sam3u1c/flash_efc.c **** 		us_start_page += us_num_pages_in_region;
 1429              	 .loc 3 714 17
 1430 0072 7A8A     	 ldrh r2,[r7,#18]
 1431 0074 FB8C     	 ldrh r3,[r7,#38]
 1432 0076 1344     	 add r3,r3,r2
 1433 0078 9BB2     	 uxth r3,r3
 1434 007a 7B82     	 strh r3,[r7,#18]
 1435              	.L93:
 708:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_SLB, us_start_page);
 1436              	 .loc 3 708 23
 1437 007c 7A8A     	 ldrh r2,[r7,#18]
 1438 007e 3B8A     	 ldrh r3,[r7,#16]
 708:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_SLB, us_start_page);
 1439              	 .loc 3 708 8
 1440 0080 9A42     	 cmp r2,r3
 1441 0082 EAD3     	 bcc .L96
 715:.././hal/sam3u1c/flash_efc.c **** 	}
 716:.././hal/sam3u1c/flash_efc.c **** 
 717:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 1442              	 .loc 3 717 9
 1443 0084 0023     	 movs r3,#0
 1444              	.L97:
 718:.././hal/sam3u1c/flash_efc.c **** }
 1445              	 .loc 3 718 1 discriminator 1
 1446 0086 1846     	 mov r0,r3
 1447 0088 2C37     	 adds r7,r7,#44
 1448              	.LCFI84:
 1449              	 .cfi_def_cfa_offset 12
 1450 008a BD46     	 mov sp,r7
 1451              	.LCFI85:
 1452              	 .cfi_def_cfa_register 13
 1453              	 
 1454 008c 90BD     	 pop {r4,r7,pc}
 1455              	.L99:
 1456 008e 00BF     	 .align 2
 1457              	.L98:
 1458 0090 00000000 	 .word compute_lock_range
 1459 0094 00000000 	 .word translate_address
 1460 0098 00000000 	 .word efc_perform_command
 1461              	 .cfi_endproc
 1462              	.LFE102:
 1464              	 .section .text.flash_unlock,"ax",%progbits
 1465              	 .align 1
 1466              	 .global flash_unlock
 1467              	 .syntax unified
 1468              	 .thumb
 1469              	 .thumb_func
 1470              	 .fpu softvfp
 1472              	flash_unlock:
 1473              	.LFB103:
 719:.././hal/sam3u1c/flash_efc.c **** 
 720:.././hal/sam3u1c/flash_efc.c **** /**
 721:.././hal/sam3u1c/flash_efc.c ****  * \brief Unlock all the regions in the given address range. The actual unlock
 722:.././hal/sam3u1c/flash_efc.c ****  * range is reported through two output parameters.
 723:.././hal/sam3u1c/flash_efc.c ****  *
 724:.././hal/sam3u1c/flash_efc.c ****  * \param ul_start Start address of unlock range.
 725:.././hal/sam3u1c/flash_efc.c ****  * \param ul_end End address of unlock range.
 726:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_start Start address of the actual unlock range (optional).
 727:.././hal/sam3u1c/flash_efc.c ****  * \param pul_actual_end End address of the actual unlock range (optional).
 728:.././hal/sam3u1c/flash_efc.c ****  *
 729:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful, otherwise returns an error code.
 730:.././hal/sam3u1c/flash_efc.c ****  */
 731:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_unlock(uint32_t ul_start, uint32_t ul_end,
 732:.././hal/sam3u1c/flash_efc.c **** 		uint32_t *pul_actual_start, uint32_t *pul_actual_end)
 733:.././hal/sam3u1c/flash_efc.c **** {
 1474              	 .loc 3 733 1
 1475              	 .cfi_startproc
 1476              	 
 1477              	 
 1478 0000 90B5     	 push {r4,r7,lr}
 1479              	.LCFI86:
 1480              	 .cfi_def_cfa_offset 12
 1481              	 .cfi_offset 4,-12
 1482              	 .cfi_offset 7,-8
 1483              	 .cfi_offset 14,-4
 1484 0002 8BB0     	 sub sp,sp,#44
 1485              	.LCFI87:
 1486              	 .cfi_def_cfa_offset 56
 1487 0004 00AF     	 add r7,sp,#0
 1488              	.LCFI88:
 1489              	 .cfi_def_cfa_register 7
 1490 0006 F860     	 str r0,[r7,#12]
 1491 0008 B960     	 str r1,[r7,#8]
 1492 000a 7A60     	 str r2,[r7,#4]
 1493 000c 3B60     	 str r3,[r7]
 734:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 735:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_actual_start, ul_actual_end;
 736:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_start_page, us_end_page;
 737:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_error;
 738:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_num_pages_in_region =
 1494              	 .loc 3 738 11
 1495 000e 2023     	 movs r3,#32
 1496 0010 FB84     	 strh r3,[r7,#38]
 739:.././hal/sam3u1c/flash_efc.c **** 			IFLASH_LOCK_REGION_SIZE / IFLASH_PAGE_SIZE;
 740:.././hal/sam3u1c/flash_efc.c **** 
 741:.././hal/sam3u1c/flash_efc.c **** 	/* Compute actual unlock range and store it */
 742:.././hal/sam3u1c/flash_efc.c **** 	compute_lock_range(ul_start, ul_end, &ul_actual_start, &ul_actual_end);
 1497              	 .loc 3 742 2
 1498 0012 07F11403 	 add r3,r7,#20
 1499 0016 07F11802 	 add r2,r7,#24
 1500 001a B968     	 ldr r1,[r7,#8]
 1501 001c F868     	 ldr r0,[r7,#12]
 1502 001e 1C4C     	 ldr r4,.L108
 1503 0020 A047     	 blx r4
 1504              	.LVL33:
 743:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_start != NULL) {
 1505              	 .loc 3 743 5
 1506 0022 7B68     	 ldr r3,[r7,#4]
 1507 0024 002B     	 cmp r3,#0
 1508 0026 02D0     	 beq .L101
 744:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_start = ul_actual_start;
 1509              	 .loc 3 744 21
 1510 0028 BA69     	 ldr r2,[r7,#24]
 1511 002a 7B68     	 ldr r3,[r7,#4]
 1512 002c 1A60     	 str r2,[r3]
 1513              	.L101:
 745:.././hal/sam3u1c/flash_efc.c **** 	}
 746:.././hal/sam3u1c/flash_efc.c **** 	if (pul_actual_end != NULL) {
 1514              	 .loc 3 746 5
 1515 002e 3B68     	 ldr r3,[r7]
 1516 0030 002B     	 cmp r3,#0
 1517 0032 02D0     	 beq .L102
 747:.././hal/sam3u1c/flash_efc.c **** 		*pul_actual_end = ul_actual_end;
 1518              	 .loc 3 747 19
 1519 0034 7A69     	 ldr r2,[r7,#20]
 1520 0036 3B68     	 ldr r3,[r7]
 1521 0038 1A60     	 str r2,[r3]
 1522              	.L102:
 748:.././hal/sam3u1c/flash_efc.c **** 	}
 749:.././hal/sam3u1c/flash_efc.c **** 
 750:.././hal/sam3u1c/flash_efc.c **** 	/* Compute page numbers */
 751:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_actual_start, &us_start_page, 0);
 1523              	 .loc 3 751 2
 1524 003a B969     	 ldr r1,[r7,#24]
 1525 003c 07F11202 	 add r2,r7,#18
 1526 0040 07F11C00 	 add r0,r7,#28
 1527 0044 0023     	 movs r3,#0
 1528 0046 134C     	 ldr r4,.L108+4
 1529 0048 A047     	 blx r4
 1530              	.LVL34:
 752:.././hal/sam3u1c/flash_efc.c **** 	translate_address(0, ul_actual_end, &us_end_page, 0);
 1531              	 .loc 3 752 2
 1532 004a 7969     	 ldr r1,[r7,#20]
 1533 004c 07F11002 	 add r2,r7,#16
 1534 0050 0023     	 movs r3,#0
 1535 0052 0020     	 movs r0,#0
 1536 0054 0F4C     	 ldr r4,.L108+4
 1537 0056 A047     	 blx r4
 1538              	.LVL35:
 753:.././hal/sam3u1c/flash_efc.c **** 
 754:.././hal/sam3u1c/flash_efc.c **** 	/* Unlock all pages */
 755:.././hal/sam3u1c/flash_efc.c **** 	while (us_start_page < us_end_page) {
 1539              	 .loc 3 755 8
 1540 0058 10E0     	 b .L103
 1541              	.L106:
 756:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_CLB,
 1542              	 .loc 3 756 14
 1543 005a FB69     	 ldr r3,[r7,#28]
 1544 005c 7A8A     	 ldrh r2,[r7,#18]
 1545 005e 0921     	 movs r1,#9
 1546 0060 1846     	 mov r0,r3
 1547 0062 0D4B     	 ldr r3,.L108+8
 1548 0064 9847     	 blx r3
 1549              	.LVL36:
 1550 0066 3862     	 str r0,[r7,#32]
 757:.././hal/sam3u1c/flash_efc.c **** 				us_start_page);
 758:.././hal/sam3u1c/flash_efc.c **** 		if (ul_error) {
 1551              	 .loc 3 758 6
 1552 0068 3B6A     	 ldr r3,[r7,#32]
 1553 006a 002B     	 cmp r3,#0
 1554 006c 01D0     	 beq .L104
 759:.././hal/sam3u1c/flash_efc.c **** 			return ul_error;
 1555              	 .loc 3 759 11
 1556 006e 3B6A     	 ldr r3,[r7,#32]
 1557 0070 09E0     	 b .L107
 1558              	.L104:
 760:.././hal/sam3u1c/flash_efc.c **** 		}
 761:.././hal/sam3u1c/flash_efc.c **** 		us_start_page += us_num_pages_in_region;
 1559              	 .loc 3 761 17
 1560 0072 7A8A     	 ldrh r2,[r7,#18]
 1561 0074 FB8C     	 ldrh r3,[r7,#38]
 1562 0076 1344     	 add r3,r3,r2
 1563 0078 9BB2     	 uxth r3,r3
 1564 007a 7B82     	 strh r3,[r7,#18]
 1565              	.L103:
 755:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_CLB,
 1566              	 .loc 3 755 23
 1567 007c 7A8A     	 ldrh r2,[r7,#18]
 1568 007e 3B8A     	 ldrh r3,[r7,#16]
 755:.././hal/sam3u1c/flash_efc.c **** 		ul_error = efc_perform_command(p_efc, EFC_FCMD_CLB,
 1569              	 .loc 3 755 8
 1570 0080 9A42     	 cmp r2,r3
 1571 0082 EAD3     	 bcc .L106
 762:.././hal/sam3u1c/flash_efc.c **** 	}
 763:.././hal/sam3u1c/flash_efc.c **** 
 764:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 1572              	 .loc 3 764 9
 1573 0084 0023     	 movs r3,#0
 1574              	.L107:
 765:.././hal/sam3u1c/flash_efc.c **** }
 1575              	 .loc 3 765 1 discriminator 1
 1576 0086 1846     	 mov r0,r3
 1577 0088 2C37     	 adds r7,r7,#44
 1578              	.LCFI89:
 1579              	 .cfi_def_cfa_offset 12
 1580 008a BD46     	 mov sp,r7
 1581              	.LCFI90:
 1582              	 .cfi_def_cfa_register 13
 1583              	 
 1584 008c 90BD     	 pop {r4,r7,pc}
 1585              	.L109:
 1586 008e 00BF     	 .align 2
 1587              	.L108:
 1588 0090 00000000 	 .word compute_lock_range
 1589 0094 00000000 	 .word translate_address
 1590 0098 00000000 	 .word efc_perform_command
 1591              	 .cfi_endproc
 1592              	.LFE103:
 1594              	 .section .text.flash_is_locked,"ax",%progbits
 1595              	 .align 1
 1596              	 .global flash_is_locked
 1597              	 .syntax unified
 1598              	 .thumb
 1599              	 .thumb_func
 1600              	 .fpu softvfp
 1602              	flash_is_locked:
 1603              	.LFB104:
 766:.././hal/sam3u1c/flash_efc.c **** 
 767:.././hal/sam3u1c/flash_efc.c **** /**
 768:.././hal/sam3u1c/flash_efc.c ****  * \brief Get the number of locked regions inside the given address range.
 769:.././hal/sam3u1c/flash_efc.c ****  *
 770:.././hal/sam3u1c/flash_efc.c ****  * \param ul_start Start address of range
 771:.././hal/sam3u1c/flash_efc.c ****  * \param ul_end End address of range.
 772:.././hal/sam3u1c/flash_efc.c ****  *
 773:.././hal/sam3u1c/flash_efc.c ****  * \return The number of locked regions inside the given address range.
 774:.././hal/sam3u1c/flash_efc.c ****  */
 775:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_is_locked(uint32_t ul_start, uint32_t ul_end)
 776:.././hal/sam3u1c/flash_efc.c **** {
 1604              	 .loc 3 776 1
 1605              	 .cfi_startproc
 1606              	 
 1607              	 
 1608 0000 90B5     	 push {r4,r7,lr}
 1609              	.LCFI91:
 1610              	 .cfi_def_cfa_offset 12
 1611              	 .cfi_offset 4,-12
 1612              	 .cfi_offset 7,-8
 1613              	 .cfi_offset 14,-4
 1614 0002 8BB0     	 sub sp,sp,#44
 1615              	.LCFI92:
 1616              	 .cfi_def_cfa_offset 56
 1617 0004 00AF     	 add r7,sp,#0
 1618              	.LCFI93:
 1619              	 .cfi_def_cfa_register 7
 1620 0006 7860     	 str r0,[r7,#4]
 1621 0008 3960     	 str r1,[r7]
 777:.././hal/sam3u1c/flash_efc.c **** 	Efc *p_efc;
 778:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_start_page, us_end_page;
 779:.././hal/sam3u1c/flash_efc.c **** 	uint8_t uc_start_region, uc_end_region;
 780:.././hal/sam3u1c/flash_efc.c **** 	uint16_t us_num_pages_in_region;
 781:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_status;
 782:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_error;
 783:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_num_locked_regions = 0;
 1622              	 .loc 3 783 11
 1623 000a 0023     	 movs r3,#0
 1624 000c 3B62     	 str r3,[r7,#32]
 784:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_count = 0;
 1625              	 .loc 3 784 11
 1626 000e 0023     	 movs r3,#0
 1627 0010 FB61     	 str r3,[r7,#28]
 785:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_bit = 0;
 1628              	 .loc 3 785 11
 1629 0012 0023     	 movs r3,#0
 1630 0014 BB61     	 str r3,[r7,#24]
 786:.././hal/sam3u1c/flash_efc.c **** 
 787:.././hal/sam3u1c/flash_efc.c **** 	Assert(ul_end >= ul_start);
 788:.././hal/sam3u1c/flash_efc.c **** 
 789:.././hal/sam3u1c/flash_efc.c **** #ifdef EFC1
 790:.././hal/sam3u1c/flash_efc.c **** 	Assert(((ul_start >= IFLASH0_ADDR)
 791:.././hal/sam3u1c/flash_efc.c **** 				&& (ul_end <= IFLASH0_ADDR + IFLASH0_SIZE))
 792:.././hal/sam3u1c/flash_efc.c **** 				|| ((ul_start >= IFLASH1_ADDR)
 793:.././hal/sam3u1c/flash_efc.c **** 					&& (ul_end <= IFLASH1_ADDR + IFLASH1_SIZE)));
 794:.././hal/sam3u1c/flash_efc.c **** #else
 795:.././hal/sam3u1c/flash_efc.c **** 	Assert((ul_start >= IFLASH_ADDR)
 796:.././hal/sam3u1c/flash_efc.c **** 				&& (ul_end <= IFLASH_ADDR + IFLASH_SIZE));
 797:.././hal/sam3u1c/flash_efc.c **** #endif
 798:.././hal/sam3u1c/flash_efc.c **** 
 799:.././hal/sam3u1c/flash_efc.c **** 	/* Compute page numbers */
 800:.././hal/sam3u1c/flash_efc.c **** 	translate_address(&p_efc, ul_start, &us_start_page, 0);
 1631              	 .loc 3 800 2
 1632 0016 07F10A02 	 add r2,r7,#10
 1633 001a 07F10C00 	 add r0,r7,#12
 1634 001e 0023     	 movs r3,#0
 1635 0020 7968     	 ldr r1,[r7,#4]
 1636 0022 344C     	 ldr r4,.L119
 1637 0024 A047     	 blx r4
 1638              	.LVL37:
 801:.././hal/sam3u1c/flash_efc.c **** 	translate_address(0, ul_end, &us_end_page, 0);
 1639              	 .loc 3 801 2
 1640 0026 07F10802 	 add r2,r7,#8
 1641 002a 0023     	 movs r3,#0
 1642 002c 3968     	 ldr r1,[r7]
 1643 002e 0020     	 movs r0,#0
 1644 0030 304C     	 ldr r4,.L119
 1645 0032 A047     	 blx r4
 1646              	.LVL38:
 802:.././hal/sam3u1c/flash_efc.c **** 
 803:.././hal/sam3u1c/flash_efc.c **** 	/* Compute region numbers */
 804:.././hal/sam3u1c/flash_efc.c **** 	us_num_pages_in_region = IFLASH_LOCK_REGION_SIZE / IFLASH_PAGE_SIZE;
 1647              	 .loc 3 804 25
 1648 0034 2023     	 movs r3,#32
 1649 0036 FB82     	 strh r3,[r7,#22]
 805:.././hal/sam3u1c/flash_efc.c **** 	uc_start_region = us_start_page / us_num_pages_in_region;
 1650              	 .loc 3 805 18
 1651 0038 7A89     	 ldrh r2,[r7,#10]
 1652 003a FB8A     	 ldrh r3,[r7,#22]
 1653 003c B2FBF3F3 	 udiv r3,r2,r3
 1654 0040 9BB2     	 uxth r3,r3
 1655 0042 7B75     	 strb r3,[r7,#21]
 806:.././hal/sam3u1c/flash_efc.c **** 	uc_end_region = us_end_page / us_num_pages_in_region;
 1656              	 .loc 3 806 16
 1657 0044 3A89     	 ldrh r2,[r7,#8]
 1658 0046 FB8A     	 ldrh r3,[r7,#22]
 1659 0048 B2FBF3F3 	 udiv r3,r2,r3
 1660 004c 9BB2     	 uxth r3,r3
 1661 004e 3B75     	 strb r3,[r7,#20]
 807:.././hal/sam3u1c/flash_efc.c **** 
 808:.././hal/sam3u1c/flash_efc.c **** 	/* Retrieve lock status */
 809:.././hal/sam3u1c/flash_efc.c **** 	ul_error = efc_perform_command(p_efc, EFC_FCMD_GLB, 0);
 1662              	 .loc 3 809 13
 1663 0050 FB68     	 ldr r3,[r7,#12]
 1664 0052 0022     	 movs r2,#0
 1665 0054 0A21     	 movs r1,#10
 1666 0056 1846     	 mov r0,r3
 1667 0058 274B     	 ldr r3,.L119+4
 1668 005a 9847     	 blx r3
 1669              	.LVL39:
 1670 005c 3861     	 str r0,[r7,#16]
 810:.././hal/sam3u1c/flash_efc.c **** 	if (ul_error) {
 1671              	 .loc 3 810 5
 1672 005e 3B69     	 ldr r3,[r7,#16]
 1673 0060 002B     	 cmp r3,#0
 1674 0062 01D0     	 beq .L111
 811:.././hal/sam3u1c/flash_efc.c **** 		return ul_error;
 1675              	 .loc 3 811 10
 1676 0064 3B69     	 ldr r3,[r7,#16]
 1677 0066 40E0     	 b .L118
 1678              	.L111:
 812:.././hal/sam3u1c/flash_efc.c **** 	}
 813:.././hal/sam3u1c/flash_efc.c ****     UNUSED(ul_error);
 814:.././hal/sam3u1c/flash_efc.c **** 
 815:.././hal/sam3u1c/flash_efc.c **** 	/* Skip unrequested regions (if necessary) */
 816:.././hal/sam3u1c/flash_efc.c **** 	ul_status = efc_get_result(p_efc);
 1679              	 .loc 3 816 14
 1680 0068 FB68     	 ldr r3,[r7,#12]
 1681 006a 1846     	 mov r0,r3
 1682 006c 234B     	 ldr r3,.L119+8
 1683 006e 9847     	 blx r3
 1684              	.LVL40:
 1685 0070 7862     	 str r0,[r7,#36]
 817:.././hal/sam3u1c/flash_efc.c **** 	while (!(ul_count <= uc_start_region &&
 1686              	 .loc 3 817 8
 1687 0072 07E0     	 b .L113
 1688              	.L114:
 818:.././hal/sam3u1c/flash_efc.c **** 			uc_start_region < (ul_count + 32))) {
 819:.././hal/sam3u1c/flash_efc.c **** 		ul_status = efc_get_result(p_efc);
 1689              	 .loc 3 819 15
 1690 0074 FB68     	 ldr r3,[r7,#12]
 1691 0076 1846     	 mov r0,r3
 1692 0078 204B     	 ldr r3,.L119+8
 1693 007a 9847     	 blx r3
 1694              	.LVL41:
 1695 007c 7862     	 str r0,[r7,#36]
 820:.././hal/sam3u1c/flash_efc.c **** 		ul_count += 32;
 1696              	 .loc 3 820 12
 1697 007e FB69     	 ldr r3,[r7,#28]
 1698 0080 2033     	 adds r3,r3,#32
 1699 0082 FB61     	 str r3,[r7,#28]
 1700              	.L113:
 817:.././hal/sam3u1c/flash_efc.c **** 	while (!(ul_count <= uc_start_region &&
 1701              	 .loc 3 817 20
 1702 0084 7B7D     	 ldrb r3,[r7,#21]
 817:.././hal/sam3u1c/flash_efc.c **** 	while (!(ul_count <= uc_start_region &&
 1703              	 .loc 3 817 8
 1704 0086 FA69     	 ldr r2,[r7,#28]
 1705 0088 9A42     	 cmp r2,r3
 1706 008a F3D8     	 bhi .L114
 818:.././hal/sam3u1c/flash_efc.c **** 			uc_start_region < (ul_count + 32))) {
 1707              	 .loc 3 818 20 discriminator 1
 1708 008c 7A7D     	 ldrb r2,[r7,#21]
 818:.././hal/sam3u1c/flash_efc.c **** 			uc_start_region < (ul_count + 32))) {
 1709              	 .loc 3 818 32 discriminator 1
 1710 008e FB69     	 ldr r3,[r7,#28]
 1711 0090 2033     	 adds r3,r3,#32
 817:.././hal/sam3u1c/flash_efc.c **** 	while (!(ul_count <= uc_start_region &&
 1712              	 .loc 3 817 9 discriminator 1
 1713 0092 9A42     	 cmp r2,r3
 1714 0094 EED2     	 bcs .L114
 821:.././hal/sam3u1c/flash_efc.c **** 	}
 822:.././hal/sam3u1c/flash_efc.c **** 
 823:.././hal/sam3u1c/flash_efc.c **** 	/* Check status of each involved region */
 824:.././hal/sam3u1c/flash_efc.c **** 	ul_bit = uc_start_region - ul_count;
 1715              	 .loc 3 824 27
 1716 0096 7A7D     	 ldrb r2,[r7,#21]
 1717              	 .loc 3 824 9
 1718 0098 FB69     	 ldr r3,[r7,#28]
 1719 009a D31A     	 subs r3,r2,r3
 1720 009c BB61     	 str r3,[r7,#24]
 825:.././hal/sam3u1c/flash_efc.c **** 
 826:.././hal/sam3u1c/flash_efc.c **** 	/* Number of region to check (must be > 0) */
 827:.././hal/sam3u1c/flash_efc.c **** 	ul_count = uc_end_region - uc_start_region + 1;
 1721              	 .loc 3 827 27
 1722 009e 3A7D     	 ldrb r2,[r7,#20]
 1723 00a0 7B7D     	 ldrb r3,[r7,#21]
 1724 00a2 D31A     	 subs r3,r2,r3
 1725              	 .loc 3 827 45
 1726 00a4 0133     	 adds r3,r3,#1
 1727              	 .loc 3 827 11
 1728 00a6 FB61     	 str r3,[r7,#28]
 828:.././hal/sam3u1c/flash_efc.c **** 
 829:.././hal/sam3u1c/flash_efc.c **** 	while (ul_count > 0) {
 1729              	 .loc 3 829 8
 1730 00a8 1BE0     	 b .L115
 1731              	.L117:
 830:.././hal/sam3u1c/flash_efc.c **** 		if (ul_status & (1 << (ul_bit))) {
 1732              	 .loc 3 830 22
 1733 00aa 0122     	 movs r2,#1
 1734 00ac BB69     	 ldr r3,[r7,#24]
 1735 00ae 02FA03F3 	 lsl r3,r2,r3
 1736 00b2 1A46     	 mov r2,r3
 1737              	 .loc 3 830 17
 1738 00b4 7B6A     	 ldr r3,[r7,#36]
 1739 00b6 1340     	 ands r3,r3,r2
 1740              	 .loc 3 830 6
 1741 00b8 002B     	 cmp r3,#0
 1742 00ba 02D0     	 beq .L116
 831:.././hal/sam3u1c/flash_efc.c **** 			ul_num_locked_regions++;
 1743              	 .loc 3 831 25
 1744 00bc 3B6A     	 ldr r3,[r7,#32]
 1745 00be 0133     	 adds r3,r3,#1
 1746 00c0 3B62     	 str r3,[r7,#32]
 1747              	.L116:
 832:.././hal/sam3u1c/flash_efc.c **** 		}
 833:.././hal/sam3u1c/flash_efc.c **** 
 834:.././hal/sam3u1c/flash_efc.c **** 		ul_count -= 1;
 1748              	 .loc 3 834 12
 1749 00c2 FB69     	 ldr r3,[r7,#28]
 1750 00c4 013B     	 subs r3,r3,#1
 1751 00c6 FB61     	 str r3,[r7,#28]
 835:.././hal/sam3u1c/flash_efc.c **** 		ul_bit += 1;
 1752              	 .loc 3 835 10
 1753 00c8 BB69     	 ldr r3,[r7,#24]
 1754 00ca 0133     	 adds r3,r3,#1
 1755 00cc BB61     	 str r3,[r7,#24]
 836:.././hal/sam3u1c/flash_efc.c **** 		if (ul_bit == 32) {
 1756              	 .loc 3 836 6
 1757 00ce BB69     	 ldr r3,[r7,#24]
 1758 00d0 202B     	 cmp r3,#32
 1759 00d2 06D1     	 bne .L115
 837:.././hal/sam3u1c/flash_efc.c **** 			ul_status = efc_get_result(p_efc);
 1760              	 .loc 3 837 16
 1761 00d4 FB68     	 ldr r3,[r7,#12]
 1762 00d6 1846     	 mov r0,r3
 1763 00d8 084B     	 ldr r3,.L119+8
 1764 00da 9847     	 blx r3
 1765              	.LVL42:
 1766 00dc 7862     	 str r0,[r7,#36]
 838:.././hal/sam3u1c/flash_efc.c **** 			ul_bit = 0;
 1767              	 .loc 3 838 11
 1768 00de 0023     	 movs r3,#0
 1769 00e0 BB61     	 str r3,[r7,#24]
 1770              	.L115:
 829:.././hal/sam3u1c/flash_efc.c **** 		if (ul_status & (1 << (ul_bit))) {
 1771              	 .loc 3 829 8
 1772 00e2 FB69     	 ldr r3,[r7,#28]
 1773 00e4 002B     	 cmp r3,#0
 1774 00e6 E0D1     	 bne .L117
 839:.././hal/sam3u1c/flash_efc.c **** 		}
 840:.././hal/sam3u1c/flash_efc.c **** 	}
 841:.././hal/sam3u1c/flash_efc.c **** 
 842:.././hal/sam3u1c/flash_efc.c **** 	return ul_num_locked_regions;
 1775              	 .loc 3 842 9
 1776 00e8 3B6A     	 ldr r3,[r7,#32]
 1777              	.L118:
 843:.././hal/sam3u1c/flash_efc.c **** }
 1778              	 .loc 3 843 1 discriminator 1
 1779 00ea 1846     	 mov r0,r3
 1780 00ec 2C37     	 adds r7,r7,#44
 1781              	.LCFI94:
 1782              	 .cfi_def_cfa_offset 12
 1783 00ee BD46     	 mov sp,r7
 1784              	.LCFI95:
 1785              	 .cfi_def_cfa_register 13
 1786              	 
 1787 00f0 90BD     	 pop {r4,r7,pc}
 1788              	.L120:
 1789 00f2 00BF     	 .align 2
 1790              	.L119:
 1791 00f4 00000000 	 .word translate_address
 1792 00f8 00000000 	 .word efc_perform_command
 1793 00fc 00000000 	 .word efc_get_result
 1794              	 .cfi_endproc
 1795              	.LFE104:
 1797              	 .section .text.flash_set_gpnvm,"ax",%progbits
 1798              	 .align 1
 1799              	 .global flash_set_gpnvm
 1800              	 .syntax unified
 1801              	 .thumb
 1802              	 .thumb_func
 1803              	 .fpu softvfp
 1805              	flash_set_gpnvm:
 1806              	.LFB105:
 844:.././hal/sam3u1c/flash_efc.c **** 
 845:.././hal/sam3u1c/flash_efc.c **** /**
 846:.././hal/sam3u1c/flash_efc.c ****  * \brief Set the given GPNVM bit.
 847:.././hal/sam3u1c/flash_efc.c ****  *
 848:.././hal/sam3u1c/flash_efc.c ****  * \param ul_gpnvm GPNVM bit index.
 849:.././hal/sam3u1c/flash_efc.c ****  *
 850:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 851:.././hal/sam3u1c/flash_efc.c ****  */
 852:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_set_gpnvm(uint32_t ul_gpnvm)
 853:.././hal/sam3u1c/flash_efc.c **** {
 1807              	 .loc 3 853 1
 1808              	 .cfi_startproc
 1809              	 
 1810              	 
 1811 0000 80B5     	 push {r7,lr}
 1812              	.LCFI96:
 1813              	 .cfi_def_cfa_offset 8
 1814              	 .cfi_offset 7,-8
 1815              	 .cfi_offset 14,-4
 1816 0002 82B0     	 sub sp,sp,#8
 1817              	.LCFI97:
 1818              	 .cfi_def_cfa_offset 16
 1819 0004 00AF     	 add r7,sp,#0
 1820              	.LCFI98:
 1821              	 .cfi_def_cfa_register 7
 1822 0006 7860     	 str r0,[r7,#4]
 854:.././hal/sam3u1c/flash_efc.c **** 	if (ul_gpnvm >= GPNVM_NUM_MAX) {
 1823              	 .loc 3 854 5
 1824 0008 7B68     	 ldr r3,[r7,#4]
 1825 000a 012B     	 cmp r3,#1
 1826 000c 01D9     	 bls .L122
 855:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 1827              	 .loc 3 855 10
 1828 000e 1123     	 movs r3,#17
 1829 0010 12E0     	 b .L123
 1830              	.L122:
 856:.././hal/sam3u1c/flash_efc.c **** 	}
 857:.././hal/sam3u1c/flash_efc.c **** 
 858:.././hal/sam3u1c/flash_efc.c **** 	if (FLASH_RC_YES == flash_is_gpnvm_set(ul_gpnvm)) {
 1831              	 .loc 3 858 22
 1832 0012 7868     	 ldr r0,[r7,#4]
 1833 0014 0A4B     	 ldr r3,.L126
 1834 0016 9847     	 blx r3
 1835              	.LVL43:
 1836 0018 0346     	 mov r3,r0
 1837              	 .loc 3 858 5
 1838 001a 012B     	 cmp r3,#1
 1839 001c 01D1     	 bne .L124
 859:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_OK;
 1840              	 .loc 3 859 10
 1841 001e 0023     	 movs r3,#0
 1842 0020 0AE0     	 b .L123
 1843              	.L124:
 860:.././hal/sam3u1c/flash_efc.c **** 	}
 861:.././hal/sam3u1c/flash_efc.c **** 
 862:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK == efc_perform_command(EFC, EFC_FCMD_SGPB, ul_gpnvm)) {
 1844              	 .loc 3 862 19
 1845 0022 7A68     	 ldr r2,[r7,#4]
 1846 0024 0B21     	 movs r1,#11
 1847 0026 0748     	 ldr r0,.L126+4
 1848 0028 074B     	 ldr r3,.L126+8
 1849 002a 9847     	 blx r3
 1850              	.LVL44:
 1851 002c 0346     	 mov r3,r0
 1852              	 .loc 3 862 5
 1853 002e 002B     	 cmp r3,#0
 1854 0030 01D1     	 bne .L125
 863:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_OK;
 1855              	 .loc 3 863 10
 1856 0032 0023     	 movs r3,#0
 1857 0034 00E0     	 b .L123
 1858              	.L125:
 864:.././hal/sam3u1c/flash_efc.c **** 	}
 865:.././hal/sam3u1c/flash_efc.c **** 
 866:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_ERROR;
 1859              	 .loc 3 866 9
 1860 0036 1023     	 movs r3,#16
 1861              	.L123:
 867:.././hal/sam3u1c/flash_efc.c **** }
 1862              	 .loc 3 867 1
 1863 0038 1846     	 mov r0,r3
 1864 003a 0837     	 adds r7,r7,#8
 1865              	.LCFI99:
 1866              	 .cfi_def_cfa_offset 8
 1867 003c BD46     	 mov sp,r7
 1868              	.LCFI100:
 1869              	 .cfi_def_cfa_register 13
 1870              	 
 1871 003e 80BD     	 pop {r7,pc}
 1872              	.L127:
 1873              	 .align 2
 1874              	.L126:
 1875 0040 00000000 	 .word flash_is_gpnvm_set
 1876 0044 00080E40 	 .word 1074661376
 1877 0048 00000000 	 .word efc_perform_command
 1878              	 .cfi_endproc
 1879              	.LFE105:
 1881              	 .section .text.flash_clear_gpnvm,"ax",%progbits
 1882              	 .align 1
 1883              	 .global flash_clear_gpnvm
 1884              	 .syntax unified
 1885              	 .thumb
 1886              	 .thumb_func
 1887              	 .fpu softvfp
 1889              	flash_clear_gpnvm:
 1890              	.LFB106:
 868:.././hal/sam3u1c/flash_efc.c **** 
 869:.././hal/sam3u1c/flash_efc.c **** /**
 870:.././hal/sam3u1c/flash_efc.c ****  * \brief Clear the given GPNVM bit.
 871:.././hal/sam3u1c/flash_efc.c ****  *
 872:.././hal/sam3u1c/flash_efc.c ****  * \param ul_gpnvm GPNVM bit index.
 873:.././hal/sam3u1c/flash_efc.c ****  *
 874:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 875:.././hal/sam3u1c/flash_efc.c ****  */
 876:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_clear_gpnvm(uint32_t ul_gpnvm)
 877:.././hal/sam3u1c/flash_efc.c **** {
 1891              	 .loc 3 877 1
 1892              	 .cfi_startproc
 1893              	 
 1894              	 
 1895 0000 80B5     	 push {r7,lr}
 1896              	.LCFI101:
 1897              	 .cfi_def_cfa_offset 8
 1898              	 .cfi_offset 7,-8
 1899              	 .cfi_offset 14,-4
 1900 0002 82B0     	 sub sp,sp,#8
 1901              	.LCFI102:
 1902              	 .cfi_def_cfa_offset 16
 1903 0004 00AF     	 add r7,sp,#0
 1904              	.LCFI103:
 1905              	 .cfi_def_cfa_register 7
 1906 0006 7860     	 str r0,[r7,#4]
 878:.././hal/sam3u1c/flash_efc.c **** 	if (ul_gpnvm >= GPNVM_NUM_MAX) {
 1907              	 .loc 3 878 5
 1908 0008 7B68     	 ldr r3,[r7,#4]
 1909 000a 012B     	 cmp r3,#1
 1910 000c 01D9     	 bls .L129
 879:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 1911              	 .loc 3 879 10
 1912 000e 1123     	 movs r3,#17
 1913 0010 12E0     	 b .L130
 1914              	.L129:
 880:.././hal/sam3u1c/flash_efc.c **** 	}
 881:.././hal/sam3u1c/flash_efc.c **** 
 882:.././hal/sam3u1c/flash_efc.c **** 	if (FLASH_RC_NO == flash_is_gpnvm_set(ul_gpnvm)) {
 1915              	 .loc 3 882 21
 1916 0012 7868     	 ldr r0,[r7,#4]
 1917 0014 0A4B     	 ldr r3,.L133
 1918 0016 9847     	 blx r3
 1919              	.LVL45:
 1920 0018 0346     	 mov r3,r0
 1921              	 .loc 3 882 5
 1922 001a 002B     	 cmp r3,#0
 1923 001c 01D1     	 bne .L131
 883:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_OK;
 1924              	 .loc 3 883 10
 1925 001e 0023     	 movs r3,#0
 1926 0020 0AE0     	 b .L130
 1927              	.L131:
 884:.././hal/sam3u1c/flash_efc.c **** 	}
 885:.././hal/sam3u1c/flash_efc.c **** 
 886:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK == efc_perform_command(EFC, EFC_FCMD_CGPB, ul_gpnvm)) {
 1928              	 .loc 3 886 19
 1929 0022 7A68     	 ldr r2,[r7,#4]
 1930 0024 0C21     	 movs r1,#12
 1931 0026 0748     	 ldr r0,.L133+4
 1932 0028 074B     	 ldr r3,.L133+8
 1933 002a 9847     	 blx r3
 1934              	.LVL46:
 1935 002c 0346     	 mov r3,r0
 1936              	 .loc 3 886 5
 1937 002e 002B     	 cmp r3,#0
 1938 0030 01D1     	 bne .L132
 887:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_OK;
 1939              	 .loc 3 887 10
 1940 0032 0023     	 movs r3,#0
 1941 0034 00E0     	 b .L130
 1942              	.L132:
 888:.././hal/sam3u1c/flash_efc.c **** 	}
 889:.././hal/sam3u1c/flash_efc.c **** 
 890:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_ERROR;
 1943              	 .loc 3 890 9
 1944 0036 1023     	 movs r3,#16
 1945              	.L130:
 891:.././hal/sam3u1c/flash_efc.c **** }
 1946              	 .loc 3 891 1
 1947 0038 1846     	 mov r0,r3
 1948 003a 0837     	 adds r7,r7,#8
 1949              	.LCFI104:
 1950              	 .cfi_def_cfa_offset 8
 1951 003c BD46     	 mov sp,r7
 1952              	.LCFI105:
 1953              	 .cfi_def_cfa_register 13
 1954              	 
 1955 003e 80BD     	 pop {r7,pc}
 1956              	.L134:
 1957              	 .align 2
 1958              	.L133:
 1959 0040 00000000 	 .word flash_is_gpnvm_set
 1960 0044 00080E40 	 .word 1074661376
 1961 0048 00000000 	 .word efc_perform_command
 1962              	 .cfi_endproc
 1963              	.LFE106:
 1965              	 .section .text.flash_is_gpnvm_set,"ax",%progbits
 1966              	 .align 1
 1967              	 .global flash_is_gpnvm_set
 1968              	 .syntax unified
 1969              	 .thumb
 1970              	 .thumb_func
 1971              	 .fpu softvfp
 1973              	flash_is_gpnvm_set:
 1974              	.LFB107:
 892:.././hal/sam3u1c/flash_efc.c **** 
 893:.././hal/sam3u1c/flash_efc.c **** /**
 894:.././hal/sam3u1c/flash_efc.c ****  * \brief Check if the given GPNVM bit is set or not.
 895:.././hal/sam3u1c/flash_efc.c ****  *
 896:.././hal/sam3u1c/flash_efc.c ****  * \param ul_gpnvm GPNVM bit index.
 897:.././hal/sam3u1c/flash_efc.c ****  *
 898:.././hal/sam3u1c/flash_efc.c ****  * \retval 1 If the given GPNVM bit is currently set.
 899:.././hal/sam3u1c/flash_efc.c ****  * \retval 0 If the given GPNVM bit is currently cleared.
 900:.././hal/sam3u1c/flash_efc.c ****  * otherwise returns an error code.
 901:.././hal/sam3u1c/flash_efc.c ****  */
 902:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_is_gpnvm_set(uint32_t ul_gpnvm)
 903:.././hal/sam3u1c/flash_efc.c **** {
 1975              	 .loc 3 903 1
 1976              	 .cfi_startproc
 1977              	 
 1978              	 
 1979 0000 80B5     	 push {r7,lr}
 1980              	.LCFI106:
 1981              	 .cfi_def_cfa_offset 8
 1982              	 .cfi_offset 7,-8
 1983              	 .cfi_offset 14,-4
 1984 0002 84B0     	 sub sp,sp,#16
 1985              	.LCFI107:
 1986              	 .cfi_def_cfa_offset 24
 1987 0004 00AF     	 add r7,sp,#0
 1988              	.LCFI108:
 1989              	 .cfi_def_cfa_register 7
 1990 0006 7860     	 str r0,[r7,#4]
 904:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_gpnvm_bits;
 905:.././hal/sam3u1c/flash_efc.c **** 
 906:.././hal/sam3u1c/flash_efc.c **** 	if (ul_gpnvm >= GPNVM_NUM_MAX) {
 1991              	 .loc 3 906 5
 1992 0008 7B68     	 ldr r3,[r7,#4]
 1993 000a 012B     	 cmp r3,#1
 1994 000c 01D9     	 bls .L136
 907:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_INVALID;
 1995              	 .loc 3 907 10
 1996 000e 1123     	 movs r3,#17
 1997 0010 19E0     	 b .L137
 1998              	.L136:
 908:.././hal/sam3u1c/flash_efc.c **** 	}
 909:.././hal/sam3u1c/flash_efc.c **** 
 910:.././hal/sam3u1c/flash_efc.c **** 	if (EFC_RC_OK != efc_perform_command(EFC, EFC_FCMD_GGPB, 0)) {
 1999              	 .loc 3 910 19
 2000 0012 0022     	 movs r2,#0
 2001 0014 0D21     	 movs r1,#13
 2002 0016 0E48     	 ldr r0,.L140
 2003 0018 0E4B     	 ldr r3,.L140+4
 2004 001a 9847     	 blx r3
 2005              	.LVL47:
 2006 001c 0346     	 mov r3,r0
 2007              	 .loc 3 910 5
 2008 001e 002B     	 cmp r3,#0
 2009 0020 01D0     	 beq .L138
 911:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 2010              	 .loc 3 911 10
 2011 0022 1023     	 movs r3,#16
 2012 0024 0FE0     	 b .L137
 2013              	.L138:
 912:.././hal/sam3u1c/flash_efc.c **** 	}
 913:.././hal/sam3u1c/flash_efc.c **** 
 914:.././hal/sam3u1c/flash_efc.c **** 	ul_gpnvm_bits = efc_get_result(EFC);
 2014              	 .loc 3 914 18
 2015 0026 0A48     	 ldr r0,.L140
 2016 0028 0B4B     	 ldr r3,.L140+8
 2017 002a 9847     	 blx r3
 2018              	.LVL48:
 2019 002c F860     	 str r0,[r7,#12]
 915:.././hal/sam3u1c/flash_efc.c **** 	if (ul_gpnvm_bits & (1 << ul_gpnvm)) {
 2020              	 .loc 3 915 25
 2021 002e 0122     	 movs r2,#1
 2022 0030 7B68     	 ldr r3,[r7,#4]
 2023 0032 02FA03F3 	 lsl r3,r2,r3
 2024 0036 1A46     	 mov r2,r3
 2025              	 .loc 3 915 20
 2026 0038 FB68     	 ldr r3,[r7,#12]
 2027 003a 1340     	 ands r3,r3,r2
 2028              	 .loc 3 915 5
 2029 003c 002B     	 cmp r3,#0
 2030 003e 01D0     	 beq .L139
 916:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_YES;
 2031              	 .loc 3 916 10
 2032 0040 0123     	 movs r3,#1
 2033 0042 00E0     	 b .L137
 2034              	.L139:
 917:.././hal/sam3u1c/flash_efc.c **** 	}
 918:.././hal/sam3u1c/flash_efc.c **** 
 919:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_NO;
 2035              	 .loc 3 919 9
 2036 0044 0023     	 movs r3,#0
 2037              	.L137:
 920:.././hal/sam3u1c/flash_efc.c **** }
 2038              	 .loc 3 920 1
 2039 0046 1846     	 mov r0,r3
 2040 0048 1037     	 adds r7,r7,#16
 2041              	.LCFI109:
 2042              	 .cfi_def_cfa_offset 8
 2043 004a BD46     	 mov sp,r7
 2044              	.LCFI110:
 2045              	 .cfi_def_cfa_register 13
 2046              	 
 2047 004c 80BD     	 pop {r7,pc}
 2048              	.L141:
 2049 004e 00BF     	 .align 2
 2050              	.L140:
 2051 0050 00080E40 	 .word 1074661376
 2052 0054 00000000 	 .word efc_perform_command
 2053 0058 00000000 	 .word efc_get_result
 2054              	 .cfi_endproc
 2055              	.LFE107:
 2057              	 .section .text.flash_enable_security_bit,"ax",%progbits
 2058              	 .align 1
 2059              	 .global flash_enable_security_bit
 2060              	 .syntax unified
 2061              	 .thumb
 2062              	 .thumb_func
 2063              	 .fpu softvfp
 2065              	flash_enable_security_bit:
 2066              	.LFB108:
 921:.././hal/sam3u1c/flash_efc.c **** 
 922:.././hal/sam3u1c/flash_efc.c **** /**
 923:.././hal/sam3u1c/flash_efc.c ****  * \brief Set security bit.
 924:.././hal/sam3u1c/flash_efc.c ****  *
 925:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 926:.././hal/sam3u1c/flash_efc.c ****  */
 927:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_enable_security_bit(void)
 928:.././hal/sam3u1c/flash_efc.c **** {
 2067              	 .loc 3 928 1
 2068              	 .cfi_startproc
 2069              	 
 2070              	 
 2071 0000 80B5     	 push {r7,lr}
 2072              	.LCFI111:
 2073              	 .cfi_def_cfa_offset 8
 2074              	 .cfi_offset 7,-8
 2075              	 .cfi_offset 14,-4
 2076 0002 00AF     	 add r7,sp,#0
 2077              	.LCFI112:
 2078              	 .cfi_def_cfa_register 7
 929:.././hal/sam3u1c/flash_efc.c **** 	return flash_set_gpnvm(0);
 2079              	 .loc 3 929 9
 2080 0004 0020     	 movs r0,#0
 2081 0006 024B     	 ldr r3,.L144
 2082 0008 9847     	 blx r3
 2083              	.LVL49:
 2084 000a 0346     	 mov r3,r0
 930:.././hal/sam3u1c/flash_efc.c **** }
 2085              	 .loc 3 930 1
 2086 000c 1846     	 mov r0,r3
 2087 000e 80BD     	 pop {r7,pc}
 2088              	.L145:
 2089              	 .align 2
 2090              	.L144:
 2091 0010 00000000 	 .word flash_set_gpnvm
 2092              	 .cfi_endproc
 2093              	.LFE108:
 2095              	 .section .text.flash_is_security_bit_enabled,"ax",%progbits
 2096              	 .align 1
 2097              	 .global flash_is_security_bit_enabled
 2098              	 .syntax unified
 2099              	 .thumb
 2100              	 .thumb_func
 2101              	 .fpu softvfp
 2103              	flash_is_security_bit_enabled:
 2104              	.LFB109:
 931:.././hal/sam3u1c/flash_efc.c **** 
 932:.././hal/sam3u1c/flash_efc.c **** /**
 933:.././hal/sam3u1c/flash_efc.c ****  * \brief Check if the security bit is set or not.
 934:.././hal/sam3u1c/flash_efc.c ****  *
 935:.././hal/sam3u1c/flash_efc.c ****  * \retval 1 If the security bit is currently set.
 936:.././hal/sam3u1c/flash_efc.c ****  * \retval 0 If the security bit is currently cleared.
 937:.././hal/sam3u1c/flash_efc.c ****  * otherwise returns an error code.
 938:.././hal/sam3u1c/flash_efc.c ****  */
 939:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_is_security_bit_enabled(void)
 940:.././hal/sam3u1c/flash_efc.c **** {
 2105              	 .loc 3 940 1
 2106              	 .cfi_startproc
 2107              	 
 2108              	 
 2109 0000 80B5     	 push {r7,lr}
 2110              	.LCFI113:
 2111              	 .cfi_def_cfa_offset 8
 2112              	 .cfi_offset 7,-8
 2113              	 .cfi_offset 14,-4
 2114 0002 00AF     	 add r7,sp,#0
 2115              	.LCFI114:
 2116              	 .cfi_def_cfa_register 7
 941:.././hal/sam3u1c/flash_efc.c **** 	return flash_is_gpnvm_set(0);
 2117              	 .loc 3 941 9
 2118 0004 0020     	 movs r0,#0
 2119 0006 024B     	 ldr r3,.L148
 2120 0008 9847     	 blx r3
 2121              	.LVL50:
 2122 000a 0346     	 mov r3,r0
 942:.././hal/sam3u1c/flash_efc.c **** }
 2123              	 .loc 3 942 1
 2124 000c 1846     	 mov r0,r3
 2125 000e 80BD     	 pop {r7,pc}
 2126              	.L149:
 2127              	 .align 2
 2128              	.L148:
 2129 0010 00000000 	 .word flash_is_gpnvm_set
 2130              	 .cfi_endproc
 2131              	.LFE109:
 2133              	 .section .text.flash_read_unique_id,"ax",%progbits
 2134              	 .align 1
 2135              	 .global flash_read_unique_id
 2136              	 .syntax unified
 2137              	 .thumb
 2138              	 .thumb_func
 2139              	 .fpu softvfp
 2141              	flash_read_unique_id:
 2142              	.LFB110:
 943:.././hal/sam3u1c/flash_efc.c **** 
 944:.././hal/sam3u1c/flash_efc.c **** /**
 945:.././hal/sam3u1c/flash_efc.c ****  * \brief Read the flash unique ID.
 946:.././hal/sam3u1c/flash_efc.c ****  *
 947:.././hal/sam3u1c/flash_efc.c ****  * \param pul_data Pointer to a data buffer to store 128-bit unique ID.
 948:.././hal/sam3u1c/flash_efc.c ****  * \param ul_size Data buffer size in DWORD.
 949:.././hal/sam3u1c/flash_efc.c ****  *
 950:.././hal/sam3u1c/flash_efc.c ****  * \return 0 if successful; otherwise returns an error code.
 951:.././hal/sam3u1c/flash_efc.c ****  */
 952:.././hal/sam3u1c/flash_efc.c **** uint32_t flash_read_unique_id(uint32_t *pul_data, uint32_t ul_size)
 953:.././hal/sam3u1c/flash_efc.c **** {
 2143              	 .loc 3 953 1
 2144              	 .cfi_startproc
 2145              	 
 2146              	 
 2147 0000 90B5     	 push {r4,r7,lr}
 2148              	.LCFI115:
 2149              	 .cfi_def_cfa_offset 12
 2150              	 .cfi_offset 4,-12
 2151              	 .cfi_offset 7,-8
 2152              	 .cfi_offset 14,-4
 2153 0002 8BB0     	 sub sp,sp,#44
 2154              	.LCFI116:
 2155              	 .cfi_def_cfa_offset 56
 2156 0004 02AF     	 add r7,sp,#8
 2157              	.LCFI117:
 2158              	 .cfi_def_cfa 7,48
 2159 0006 7860     	 str r0,[r7,#4]
 2160 0008 3960     	 str r1,[r7]
 954:.././hal/sam3u1c/flash_efc.c **** 	uint32_t uid_buf[4];
 955:.././hal/sam3u1c/flash_efc.c **** 	uint32_t ul_idx;
 956:.././hal/sam3u1c/flash_efc.c **** 
 957:.././hal/sam3u1c/flash_efc.c **** 	if (FLASH_RC_OK != efc_perform_read_sequence(EFC, EFC_FCMD_STUI,
 2161              	 .loc 3 957 21
 2162 000a 07F10C02 	 add r2,r7,#12
 2163 000e 0423     	 movs r3,#4
 2164 0010 0093     	 str r3,[sp]
 2165 0012 1346     	 mov r3,r2
 2166 0014 0F22     	 movs r2,#15
 2167 0016 0E21     	 movs r1,#14
 2168 0018 1348     	 ldr r0,.L157
 2169 001a 144C     	 ldr r4,.L157+4
 2170 001c A047     	 blx r4
 2171              	.LVL51:
 2172 001e 0346     	 mov r3,r0
 2173              	 .loc 3 957 5
 2174 0020 002B     	 cmp r3,#0
 2175 0022 01D0     	 beq .L151
 958:.././hal/sam3u1c/flash_efc.c **** 			EFC_FCMD_SPUI, uid_buf, 4)) {
 959:.././hal/sam3u1c/flash_efc.c **** 		return FLASH_RC_ERROR;
 2176              	 .loc 3 959 10
 2177 0024 1023     	 movs r3,#16
 2178 0026 1BE0     	 b .L156
 2179              	.L151:
 960:.././hal/sam3u1c/flash_efc.c **** 	}
 961:.././hal/sam3u1c/flash_efc.c **** 
 962:.././hal/sam3u1c/flash_efc.c **** 	if (ul_size > 4) {
 2180              	 .loc 3 962 5
 2181 0028 3B68     	 ldr r3,[r7]
 2182 002a 042B     	 cmp r3,#4
 2183 002c 01D9     	 bls .L153
 963:.././hal/sam3u1c/flash_efc.c **** 		/* Only 4 dword to store unique ID */
 964:.././hal/sam3u1c/flash_efc.c **** 		ul_size = 4;
 2184              	 .loc 3 964 11
 2185 002e 0423     	 movs r3,#4
 2186 0030 3B60     	 str r3,[r7]
 2187              	.L153:
 965:.././hal/sam3u1c/flash_efc.c **** 	}
 966:.././hal/sam3u1c/flash_efc.c **** 
 967:.././hal/sam3u1c/flash_efc.c **** 	for (ul_idx = 0; ul_idx < ul_size; ul_idx++) {
 2188              	 .loc 3 967 14
 2189 0032 0023     	 movs r3,#0
 2190 0034 FB61     	 str r3,[r7,#28]
 2191              	 .loc 3 967 2
 2192 0036 0EE0     	 b .L154
 2193              	.L155:
 968:.././hal/sam3u1c/flash_efc.c **** 		pul_data[ul_idx] = uid_buf[ul_idx];
 2194              	 .loc 3 968 11 discriminator 3
 2195 0038 FB69     	 ldr r3,[r7,#28]
 2196 003a 9B00     	 lsls r3,r3,#2
 2197 003c 7A68     	 ldr r2,[r7,#4]
 2198 003e 1A44     	 add r2,r2,r3
 2199              	 .loc 3 968 29 discriminator 3
 2200 0040 FB69     	 ldr r3,[r7,#28]
 2201 0042 9B00     	 lsls r3,r3,#2
 2202 0044 07F12001 	 add r1,r7,#32
 2203 0048 0B44     	 add r3,r3,r1
 2204 004a 53F8143C 	 ldr r3,[r3,#-20]
 2205              	 .loc 3 968 20 discriminator 3
 2206 004e 1360     	 str r3,[r2]
 967:.././hal/sam3u1c/flash_efc.c **** 		pul_data[ul_idx] = uid_buf[ul_idx];
 2207              	 .loc 3 967 43 discriminator 3
 2208 0050 FB69     	 ldr r3,[r7,#28]
 2209 0052 0133     	 adds r3,r3,#1
 2210 0054 FB61     	 str r3,[r7,#28]
 2211              	.L154:
 967:.././hal/sam3u1c/flash_efc.c **** 		pul_data[ul_idx] = uid_buf[ul_idx];
 2212              	 .loc 3 967 2 discriminator 1
 2213 0056 FA69     	 ldr r2,[r7,#28]
 2214 0058 3B68     	 ldr r3,[r7]
 2215 005a 9A42     	 cmp r2,r3
 2216 005c ECD3     	 bcc .L155
 969:.././hal/sam3u1c/flash_efc.c **** 	}
 970:.././hal/sam3u1c/flash_efc.c **** 
 971:.././hal/sam3u1c/flash_efc.c **** 	return FLASH_RC_OK;
 2217              	 .loc 3 971 9
 2218 005e 0023     	 movs r3,#0
 2219              	.L156:
 972:.././hal/sam3u1c/flash_efc.c **** }
 2220              	 .loc 3 972 1 discriminator 1
 2221 0060 1846     	 mov r0,r3
 2222 0062 2437     	 adds r7,r7,#36
 2223              	.LCFI118:
 2224              	 .cfi_def_cfa_offset 12
 2225 0064 BD46     	 mov sp,r7
 2226              	.LCFI119:
 2227              	 .cfi_def_cfa_register 13
 2228              	 
 2229 0066 90BD     	 pop {r4,r7,pc}
 2230              	.L158:
 2231              	 .align 2
 2232              	.L157:
 2233 0068 00080E40 	 .word 1074661376
 2234 006c 00000000 	 .word efc_perform_read_sequence
 2235              	 .cfi_endproc
 2236              	.LFE110:
 2238              	 .text
 2239              	.Letext0:
 2240              	 .file 4 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\machine\\_default_types.h"
 2241              	 .file 5 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 2242              	 .file 6 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\sys\\_types.h"
 2243              	 .file 7 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\lib\\gcc\\arm-none-eabi\\8.2.1\\include\\stddef.h"
 2244              	 .file 8 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 2245              	 .file 9 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
 2246              	 .file 10 ".././hal/sam3u1c/inc/sam3u1c.h"
 2247              	 .file 11 ".././hal/sam3u1c/inc/core_cm3.h"
 2248              	 .file 12 ".././hal/sam3u1c/inc/system_sam3u.h"
 2249              	 .file 13 ".././hal/sam3u1c/inc/component/component_efc.h"
 2250              	 .file 14 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\stdlib.h"
 2251              	 .file 15 ".././hal/sam3u1c/inc/interrupt/interrupt_sam_nvic.h"
 2252              	 .file 16 ".././hal/sam3u1c/inc/efc.h"
 2253              	 .file 17 ".././hal/sam3u1c/inc/flash_efc.h"
 2254              	 .file 18 ".././hal/sam3u1c/inc/sam3u/pll.h"
 2255              	 .file 19 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:00000000 flash_efc.c
    {standard input}:16     .bss.cpu_irq_critical_section_counter:00000000 $d
    {standard input}:19     .bss.cpu_irq_critical_section_counter:00000000 cpu_irq_critical_section_counter
    {standard input}:24     .bss.cpu_irq_prev_interrupt_state:00000000 cpu_irq_prev_interrupt_state
    {standard input}:25     .bss.cpu_irq_prev_interrupt_state:00000000 $d
    {standard input}:27     .text.osc_get_rate:00000000 $t
    {standard input}:34     .text.osc_get_rate:00000000 osc_get_rate
    {standard input}:61     .text.osc_get_rate:00000014 $d
    {standard input}:69     .text.osc_get_rate:00000034 $t
    {standard input}:123    .text.osc_get_rate:00000064 $d
    {standard input}:130    .text.sysclk_get_main_hz:00000000 $t
    {standard input}:136    .text.sysclk_get_main_hz:00000000 sysclk_get_main_hz
    {standard input}:164    .text.sysclk_get_main_hz:00000014 $d
    {standard input}:169    .text.sysclk_get_cpu_hz:00000000 $t
    {standard input}:175    .text.sysclk_get_cpu_hz:00000000 sysclk_get_cpu_hz
    {standard input}:202    .text.sysclk_get_cpu_hz:00000010 $d
    {standard input}:207    .bss.gs_ul_page_buffer:00000000 $d
    {standard input}:210    .bss.gs_ul_page_buffer:00000000 gs_ul_page_buffer
    {standard input}:213    .text.translate_address:00000000 $t
    {standard input}:219    .text.translate_address:00000000 translate_address
    {standard input}:301    .text.translate_address:00000054 $d
    {standard input}:306    .text.compute_address:00000000 $t
    {standard input}:312    .text.compute_address:00000000 compute_address
    {standard input}:371    .text.compute_lock_range:00000000 $t
    {standard input}:377    .text.compute_lock_range:00000000 compute_lock_range
    {standard input}:447    .text.flash_init:00000000 $t
    {standard input}:454    .text.flash_init:00000000 flash_init
    {standard input}:495    .text.flash_init:00000020 $d
    {standard input}:501    .text.flash_set_wait_state:00000000 $t
    {standard input}:508    .text.flash_set_wait_state:00000000 flash_set_wait_state
    {standard input}:558    .text.flash_set_wait_state:0000002c $d
    {standard input}:564    .text.flash_set_wait_state_adaptively:00000000 $t
    {standard input}:571    .text.flash_set_wait_state_adaptively:00000000 flash_set_wait_state_adaptively
    {standard input}:682    .text.flash_set_wait_state_adaptively:00000080 $d
    {standard input}:693    .text.flash_get_wait_state:00000000 $t
    {standard input}:700    .text.flash_get_wait_state:00000000 flash_get_wait_state
    {standard input}:747    .text.flash_get_wait_state:00000028 $d
    {standard input}:753    .text.flash_get_descriptor:00000000 $t
    {standard input}:760    .text.flash_get_descriptor:00000000 flash_get_descriptor
    {standard input}:855    .text.flash_get_descriptor:00000068 $d
    {standard input}:862    .text.flash_get_page_count:00000000 $t
    {standard input}:869    .text.flash_get_page_count:00000000 flash_get_page_count
    {standard input}:915    .text.flash_get_page_count_per_region:00000000 $t
    {standard input}:922    .text.flash_get_page_count_per_region:00000000 flash_get_page_count_per_region
    {standard input}:968    .text.flash_get_region_count:00000000 $t
    {standard input}:975    .text.flash_get_region_count:00000000 flash_get_region_count
    {standard input}:1015   .text.flash_erase_all:00000000 $t
    {standard input}:1022   .text.flash_erase_all:00000000 flash_erase_all
    {standard input}:1081   .text.flash_erase_all:00000038 $d
    {standard input}:1087   .text.flash_write:00000000 $t
    {standard input}:1094   .text.flash_write:00000000 flash_write
    {standard input}:1324   .text.flash_write:00000134 $d
    {standard input}:1335   .text.flash_lock:00000000 $t
    {standard input}:1342   .text.flash_lock:00000000 flash_lock
    {standard input}:1458   .text.flash_lock:00000090 $d
    {standard input}:1465   .text.flash_unlock:00000000 $t
    {standard input}:1472   .text.flash_unlock:00000000 flash_unlock
    {standard input}:1588   .text.flash_unlock:00000090 $d
    {standard input}:1595   .text.flash_is_locked:00000000 $t
    {standard input}:1602   .text.flash_is_locked:00000000 flash_is_locked
    {standard input}:1791   .text.flash_is_locked:000000f4 $d
    {standard input}:1798   .text.flash_set_gpnvm:00000000 $t
    {standard input}:1805   .text.flash_set_gpnvm:00000000 flash_set_gpnvm
    {standard input}:1875   .text.flash_set_gpnvm:00000040 $d
    {standard input}:1973   .text.flash_is_gpnvm_set:00000000 flash_is_gpnvm_set
    {standard input}:1882   .text.flash_clear_gpnvm:00000000 $t
    {standard input}:1889   .text.flash_clear_gpnvm:00000000 flash_clear_gpnvm
    {standard input}:1959   .text.flash_clear_gpnvm:00000040 $d
    {standard input}:1966   .text.flash_is_gpnvm_set:00000000 $t
    {standard input}:2051   .text.flash_is_gpnvm_set:00000050 $d
    {standard input}:2058   .text.flash_enable_security_bit:00000000 $t
    {standard input}:2065   .text.flash_enable_security_bit:00000000 flash_enable_security_bit
    {standard input}:2091   .text.flash_enable_security_bit:00000010 $d
    {standard input}:2096   .text.flash_is_security_bit_enabled:00000000 $t
    {standard input}:2103   .text.flash_is_security_bit_enabled:00000000 flash_is_security_bit_enabled
    {standard input}:2129   .text.flash_is_security_bit_enabled:00000010 $d
    {standard input}:2134   .text.flash_read_unique_id:00000000 $t
    {standard input}:2141   .text.flash_read_unique_id:00000000 flash_read_unique_id
    {standard input}:2233   .text.flash_read_unique_id:00000068 $d
                           .group:00000000 wm4.0.bacf6c85951b42af729d707f36a7fff6
                           .group:00000000 wm4._newlib_version.h.4.875b979a44719054cd750d0952ad3fd6
                           .group:00000000 wm4.newlib.h.18.5e5ca3429233af402d406a202f1fc1ac
                           .group:00000000 wm4.ieeefp.h.77.d5685ba212d3ed6e914898d045f873e3
                           .group:00000000 wm4.features.h.22.026edb2397769f4ae13f35900dbdb560
                           .group:00000000 wm4.config.h.220.6cac6a9685cfce5e83c17784171638d9
                           .group:00000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:00000000 wm4.stddef.h.39.99b5021e28f91cdb161c889e07266673
                           .group:00000000 wm4._default_types.h.6.959254cf5f09734ea7516c89e8bb21bd
                           .group:00000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:00000000 wm4._types.h.125.5cf8a495f1f7ef36777ad868a1e32068
                           .group:00000000 wm4.stddef.h.161.5349cb105733e8777bfb0cf53c4e3f34
                           .group:00000000 wm4._types.h.184.03611d4f6b5bec9997bcf4279eceba07
                           .group:00000000 wm4.reent.h.17.90c2574d4acdcfce933db5cb09ff35fe
                           .group:00000000 wm4.cdefs.h.49.2bf373aedffd8b393ccd11dc057e8547
                           .group:00000000 wm4.string.h.15.dab3980bf35408a4c507182805e2de3a
                           .group:00000000 wm4.stddef.h.161.19e15733342b50ead2919490b095303e
                           .group:00000000 wm4.assert.h.11.7fe9eb241be6b0fee772a1e693b81ae3
                           .group:00000000 wm4.parts.h.45.afc900689b2c82332e69d798acedc875
                           .group:00000000 wm4.tpaste.h.45.af3ee36765243b162c88f7f944858426
                           .group:00000000 wm4.stringz.h.45.c4f6cbe0005e6c1d2139bc6c0e4f4722
                           .group:00000000 wm4.mrepeat.h.59.c5daaed201a4340b0edf435161d0b77f
                           .group:00000000 wm4._intsup.h.10.cce27fed8484c08a33f522034c30d2b5
                           .group:00000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:00000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:00000000 wm4.sam3u1c.h.220.c0b54b5a55bc87791749ae17b1487779
                           .group:00000000 wm4.core_cm3.h.32.5c59c312db585622d253fdb887b0afb1
                           .group:00000000 wm4.core_cmInstr.h.25.d8165482ef3061013a2fc83e2d85f3d9
                           .group:00000000 wm4.core_cm3.h.127.b561404f2a159dc517b409bc244d16c1
                           .group:00000000 wm4.component_adc.h.43.d49887380d07d1cd08cc4e37b3485e31
                           .group:00000000 wm4.component_adc12b.h.43.eadc09f1073923fb91f1f393cc397dcb
                           .group:00000000 wm4.component_chipid.h.43.15825c969b1cc9eeea3d9416499874c8
                           .group:00000000 wm4.component_dmac.h.43.cc8187b1cf6bfeadc91b14fdd28b9e8b
                           .group:00000000 wm4.component_efc.h.43.cb1b3997ad9ea3733ad421ecbfd02fdd
                           .group:00000000 wm4.component_gpbr.h.43.49b7e13894fe38b29f2243bbbe530227
                           .group:00000000 wm4.component_hsmci.h.43.7b7194c92e1480c038f3342f7cec440a
                           .group:00000000 wm4.component_matrix.h.43.1d209838fb75b4827119203a357141ee
                           .group:00000000 wm4.component_pdc.h.43.19528a5f9ef5a348234ea06f89069c55
                           .group:00000000 wm4.component_pio.h.43.163b46c3683ccf92e8de39a5554f50e8
                           .group:00000000 wm4.component_pmc.h.43.ee4f030602866917aeed15fb2b948de8
                           .group:00000000 wm4.component_pwm.h.43.ab6262a86f0aea354b43fe6dce7e7eb3
                           .group:00000000 wm4.component_rstc.h.43.4eb59dc2ddcf585fabf251d0c329fcdd
                           .group:00000000 wm4.component_rtc.h.43.ba8ccafc772b11d562a3cceab8b95072
                           .group:00000000 wm4.component_rtt.h.43.3206ef8f067e5e747c3c4c7e719c1429
                           .group:00000000 wm4.component_smc.h.43.907847915f1a5616734199d7e34424fa
                           .group:00000000 wm4.component_spi.h.43.a2a09df64ab768c0a32be55285c74ded
                           .group:00000000 wm4.component_ssc.h.43.d7c78f990c13fc511671b64798c4bcd0
                           .group:00000000 wm4.component_supc.h.43.7d17f8e5ed3ba815e84381152735062f
                           .group:00000000 wm4.component_tc.h.43.662eac8137408372b4f9d26c0b5f8621
                           .group:00000000 wm4.component_twi.h.43.eda18625bd851fc4605861f5b3240c0b
                           .group:00000000 wm4.component_uart.h.43.2d92735c5ea05c973661e1ba99a2f37c
                           .group:00000000 wm4.component_udphs.h.43.21cecd26a4e44df0013037f29f2716e4
                           .group:00000000 wm4.component_usart.h.43.7872f8f455adb38b67b9fbdb15657fbe
                           .group:00000000 wm4.component_wdt.h.43.e31e10a5469b62c3660b49ab250f802f
                           .group:00000000 wm4.instance_hsmci.h.43.e233236cc7fd5a805539a7ecc0e1d8d2
                           .group:00000000 wm4.instance_ssc.h.43.c0cfabc3b9f3bb60745c913111bce965
                           .group:00000000 wm4.instance_spi.h.43.570ae46af19e4179d9796872b9a8b9bc
                           .group:00000000 wm4.instance_tc0.h.43.049b3a82387d2961594190609e896a29
                           .group:00000000 wm4.instance_twi0.h.43.255dc0afa9e0d45eaea0a935eca2f103
                           .group:00000000 wm4.instance_twi1.h.43.652d1d407893f259f2a817544ba662c2
                           .group:00000000 wm4.instance_pwm.h.43.88294acec3ca56d6fc521038521a1567
                           .group:00000000 wm4.instance_usart0.h.43.e26677512aee3dd3bedd71d394410000
                           .group:00000000 wm4.instance_usart1.h.43.1ba97dbc6610d9fb3132b9d845688201
                           .group:00000000 wm4.instance_usart2.h.43.baa1bf30b3c5acdee90c4a1f50fe9ebd
                           .group:00000000 wm4.instance_udphs.h.43.b1ce94181e0d1f22877b81c6040a4363
                           .group:00000000 wm4.instance_adc12b.h.43.d73ed59e867ccdfdb846d9ef32a50c0c
                           .group:00000000 wm4.instance_adc.h.43.2b7611a00afeb4c555339b844d4b8456
                           .group:00000000 wm4.instance_dmac.h.43.ee72691d84889c8f285932be4a075ddb
                           .group:00000000 wm4.instance_smc.h.43.29610fd00979caaaa65821ad40e9da06
                           .group:00000000 wm4.instance_matrix.h.43.01ee474141594385374c41a29daeeefe
                           .group:00000000 wm4.instance_pmc.h.43.37430325ed7b8b24c3fe640c41c29ef5
                           .group:00000000 wm4.instance_uart.h.43.bd378395ba022bc8670c82ebe656fbbd
                           .group:00000000 wm4.instance_chipid.h.43.29cd8fb600f149aa58830fcc78fe36f9
                           .group:00000000 wm4.instance_efc0.h.43.6b85dba20721a7e9fc4350e78d193680
                           .group:00000000 wm4.instance_efc1.h.43.2c5e94fc4d2742678318d73450d08d57
                           .group:00000000 wm4.instance_pioa.h.43.eeb46cc3bfe01a1f28e67aa3a6851ed8
                           .group:00000000 wm4.instance_piob.h.43.652ce26b6c37ac56f9ed42a9216d9aca
                           .group:00000000 wm4.instance_rstc.h.43.c5de224364a50a85f237c0b864aa4c8f
                           .group:00000000 wm4.instance_supc.h.43.a5f1a5ca08f468ccf34ed3653e045f1f
                           .group:00000000 wm4.instance_rtt.h.43.8622b192c23334996132415e3095df7f
                           .group:00000000 wm4.instance_wdt.h.43.407ea53e133eacf09acf2c7fcb6b7524
                           .group:00000000 wm4.instance_rtc.h.43.f70b77f9180401c8d9d920cb4a1cd166
                           .group:00000000 wm4.instance_gpbr.h.43.9066cb40d557f6755101368854272348
                           .group:00000000 wm4.sam3u1c.h.312.ae446d8e874d34ca3df78faf190c678f
                           .group:00000000 wm4.pio_sam3u1c.h.43.18b24f16e1710ff2a400d88fe33c5107
                           .group:00000000 wm4.sam3u1c.h.442.cd4bbc3af493e98bc9b60c2905132ed0
                           .group:00000000 wm4.stdio.h.27.3fc80220048df77954e38daec3bb9670
                           .group:00000000 wm4.stdarg.h.34.3a23a216c0c293b3d2ea2e89281481e6
                           .group:00000000 wm4.types.h.40.e8c16e7ec36ba55f133d0616070e25fc
                           .group:00000000 wm4._endian.h.31.65a10590763c3dde1ac4a7f66d7d4891
                           .group:00000000 wm4.endian.h.9.49f3a4695c1b61e8a0808de3c4a106cb
                           .group:00000000 wm4._timeval.h.30.0e8bfd94e85db17dda3286ee81496fe6
                           .group:00000000 wm4.timespec.h.41.d855182eb0e690443ab8651bcedca6e1
                           .group:00000000 wm4.select.h.19.97ca6fd0c752a0f3b6719fd314d361e6
                           .group:00000000 wm4.types.h.69.ed3eae3cf73030a737515151ebcab7a1
                           .group:00000000 wm4.sched.h.22.c60982713a5c428609783c78f9c78d95
                           .group:00000000 wm4._pthreadtypes.h.36.fcee9961c35163dde6267ef772ad1972
                           .group:00000000 wm4.stdio.h.2.4aa87247282eca6c8f36f9de33d8df1a
                           .group:00000000 wm4.stdio.h.81.932d0c162786b883f622b8d05c120c78
                           .group:00000000 wm4.stdbool.h.29.07dce69c3b78884144b7f7bd19483461
                           .group:00000000 wm4.stdlib.h.13.4ed386f5c1a80d71e72172885d946ef2
                           .group:00000000 wm4.alloca.h.8.dfc0c703c47ec3e69746825b17d9e66d
                           .group:00000000 wm4.stdlib.h.56.d4493cd3736e51e9d56335045f26df45
                           .group:00000000 wm4.compiler.h.88.0e6ad966134fa012ce9a34053d3f48aa
                           .group:00000000 wm4.interrupt_sam_nvic.h.45.4876da6c127868305d66389e87e0876f
                           .group:00000000 wm4.compiler.h.425.66dd29c210af3287ed85ec3553a3e6b1
                           .group:00000000 wm4.efc.h.45.ec5734119c630498df26106bacf9a684
                           .group:00000000 wm4.flash_efc.h.90.a4a39259055880dc10b861c5fe1b99e7
                           .group:00000000 wm4.conf_clock.h.45.5dc276d21b4d793a62f1a9757cc18d5c
                           .group:00000000 wm4.board.h.48.ce8d06c36cc583d9bf62738411f62e4d
                           .group:00000000 wm4.cw521.h.62.d34c289ace4a92d90be8fb389db40479
                           .group:00000000 wm4.pmc.h.45.bbe1bf97a811e3b283420b2eeadf0b35
                           .group:00000000 wm4.osc.h.94.b766cddafe899eca01d775f7b2906680
                           .group:00000000 wm4.pll.h.45.a605c31ca466ae25752a678e8572be48
                           .group:00000000 wm4.sysclk.h.156.541a142b0016a365728ea1f7c0e3db84

UNDEFINED SYMBOLS
efc_init
efc_set_wait_state
efc_get_wait_state
efc_perform_command
efc_get_result
memcpy
efc_perform_read_sequence
