   1              	 .cpu cortex-m3
   2              	 .eabi_attribute 20,1
   3              	 .eabi_attribute 21,1
   4              	 .eabi_attribute 23,3
   5              	 .eabi_attribute 24,1
   6              	 .eabi_attribute 25,1
   7              	 .eabi_attribute 26,1
   8              	 .eabi_attribute 30,6
   9              	 .eabi_attribute 34,1
  10              	 .eabi_attribute 18,4
  11              	 .file "udc.c"
  12              	 .text
  13              	.Ltext0:
  14              	 .cfi_sections .debug_frame
  15              	 .section .bss.cpu_irq_critical_section_counter,"aw",%nobits
  16              	 .align 2
  19              	cpu_irq_critical_section_counter:
  20 0000 00000000 	 .space 4
  21              	 .section .bss.cpu_irq_prev_interrupt_state,"aw",%nobits
  24              	cpu_irq_prev_interrupt_state:
  25 0000 00       	 .space 1
  26              	 .section .bss.udc_device_status,"aw",%nobits
  27              	 .align 1
  30              	udc_device_status:
  31 0000 0000     	 .space 2
  32              	 .section .bss.udc_num_configuration,"aw",%nobits
  35              	udc_num_configuration:
  36 0000 00       	 .space 1
  37              	 .section .bss.udc_ptr_conf,"aw",%nobits
  38              	 .align 2
  41              	udc_ptr_conf:
  42 0000 00000000 	 .space 4
  43              	 .section .bss.udc_ptr_iface,"aw",%nobits
  44              	 .align 2
  47              	udc_ptr_iface:
  48 0000 00000000 	 .space 4
  49              	 .section .data.udc_string_desc_languageid,"aw"
  50              	 .align 2
  53              	udc_string_desc_languageid:
  54 0000 04       	 .byte 4
  55 0001 03       	 .byte 3
  56 0002 0904     	 .short 1033
  57              	 .section .data.udc_string_manufacturer_name,"aw"
  58              	 .align 2
  61              	udc_string_manufacturer_name:
  62 0000 4E657741 	 .ascii "NewAE Technology Inc.\000"
  62      45205465 
  62      63686E6F 
  62      6C6F6779 
  62      20496E63 
  63              	 .section .data.udc_string_product_name,"aw"
  64              	 .align 2
  67              	udc_string_product_name:
  68 0000 42616C6C 	 .ascii "Ballistic Gel CW521\000"
  68      69737469 
  68      63204765 
  68      6C204357 
  68      35323100 
  69              	 .section .text.udc_get_string_serial_name,"ax",%progbits
  70              	 .align 1
  71              	 .arch armv7-m
  72              	 .syntax unified
  73              	 .thumb
  74              	 .thumb_func
  75              	 .fpu softvfp
  77              	udc_get_string_serial_name:
  78              	.LFB73:
  79              	 .file 1 ".././hal/sam3u1c/udc.c"
   1:.././hal/sam3u1c/udc.c **** /**
   2:.././hal/sam3u1c/udc.c ****  * \file
   3:.././hal/sam3u1c/udc.c ****  *
   4:.././hal/sam3u1c/udc.c ****  * \brief USB Device Controller (UDC)
   5:.././hal/sam3u1c/udc.c ****  *
   6:.././hal/sam3u1c/udc.c ****  * Copyright (c) 2009 - 2014 Atmel Corporation. All rights reserved.
   7:.././hal/sam3u1c/udc.c ****  *
   8:.././hal/sam3u1c/udc.c ****  * \asf_license_start
   9:.././hal/sam3u1c/udc.c ****  *
  10:.././hal/sam3u1c/udc.c ****  * \page License
  11:.././hal/sam3u1c/udc.c ****  *
  12:.././hal/sam3u1c/udc.c ****  * Redistribution and use in source and binary forms, with or without
  13:.././hal/sam3u1c/udc.c ****  * modification, are permitted provided that the following conditions are met:
  14:.././hal/sam3u1c/udc.c ****  *
  15:.././hal/sam3u1c/udc.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:.././hal/sam3u1c/udc.c ****  *    this list of conditions and the following disclaimer.
  17:.././hal/sam3u1c/udc.c ****  *
  18:.././hal/sam3u1c/udc.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:.././hal/sam3u1c/udc.c ****  *    this list of conditions and the following disclaimer in the documentation
  20:.././hal/sam3u1c/udc.c ****  *    and/or other materials provided with the distribution.
  21:.././hal/sam3u1c/udc.c ****  *
  22:.././hal/sam3u1c/udc.c ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:.././hal/sam3u1c/udc.c ****  *    from this software without specific prior written permission.
  24:.././hal/sam3u1c/udc.c ****  *
  25:.././hal/sam3u1c/udc.c ****  * 4. This software may only be redistributed and used in connection with an
  26:.././hal/sam3u1c/udc.c ****  *    Atmel microcontroller product.
  27:.././hal/sam3u1c/udc.c ****  *
  28:.././hal/sam3u1c/udc.c ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:.././hal/sam3u1c/udc.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:.././hal/sam3u1c/udc.c ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:.././hal/sam3u1c/udc.c ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:.././hal/sam3u1c/udc.c ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:.././hal/sam3u1c/udc.c ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:.././hal/sam3u1c/udc.c ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:.././hal/sam3u1c/udc.c ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:.././hal/sam3u1c/udc.c ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:.././hal/sam3u1c/udc.c ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:.././hal/sam3u1c/udc.c ****  * POSSIBILITY OF SUCH DAMAGE.
  39:.././hal/sam3u1c/udc.c ****  *
  40:.././hal/sam3u1c/udc.c ****  * \asf_license_stop
  41:.././hal/sam3u1c/udc.c ****  *
  42:.././hal/sam3u1c/udc.c ****  */
  43:.././hal/sam3u1c/udc.c **** 
  44:.././hal/sam3u1c/udc.c **** #include "conf_usb.h"
  45:.././hal/sam3u1c/udc.c **** #include "usb_protocol.h"
  46:.././hal/sam3u1c/udc.c **** #include "udd.h"
  47:.././hal/sam3u1c/udc.c **** #include "udc_desc.h"
  48:.././hal/sam3u1c/udc.c **** #include "udi.h"
  49:.././hal/sam3u1c/udc.c **** #include "udc.h"
  50:.././hal/sam3u1c/udc.c **** 
  51:.././hal/sam3u1c/udc.c **** /**
  52:.././hal/sam3u1c/udc.c ****  * \ingroup udc_group
  53:.././hal/sam3u1c/udc.c ****  * \defgroup udc_group_interne Implementation of UDC
  54:.././hal/sam3u1c/udc.c ****  *
  55:.././hal/sam3u1c/udc.c ****  * Internal implementation
  56:.././hal/sam3u1c/udc.c ****  * @{
  57:.././hal/sam3u1c/udc.c ****  */
  58:.././hal/sam3u1c/udc.c **** 
  59:.././hal/sam3u1c/udc.c **** //! \name Internal variables to manage the USB device
  60:.././hal/sam3u1c/udc.c **** //! @{
  61:.././hal/sam3u1c/udc.c **** 
  62:.././hal/sam3u1c/udc.c **** //! Device status state (see enum usb_device_status in usb_protocol.h)
  63:.././hal/sam3u1c/udc.c **** static le16_t udc_device_status;
  64:.././hal/sam3u1c/udc.c **** 
  65:.././hal/sam3u1c/udc.c **** //! Device Configuration number selected by the USB host
  66:.././hal/sam3u1c/udc.c **** static uint8_t udc_num_configuration = 0;
  67:.././hal/sam3u1c/udc.c **** 
  68:.././hal/sam3u1c/udc.c **** //! Pointer on the selected speed device configuration
  69:.././hal/sam3u1c/udc.c **** static udc_config_speed_t UDC_DESC_STORAGE *udc_ptr_conf;
  70:.././hal/sam3u1c/udc.c **** 
  71:.././hal/sam3u1c/udc.c **** //! Pointer on interface descriptor used by SETUP request.
  72:.././hal/sam3u1c/udc.c **** static usb_iface_desc_t UDC_DESC_STORAGE *udc_ptr_iface;
  73:.././hal/sam3u1c/udc.c **** 
  74:.././hal/sam3u1c/udc.c **** //! @}
  75:.././hal/sam3u1c/udc.c **** 
  76:.././hal/sam3u1c/udc.c **** 
  77:.././hal/sam3u1c/udc.c **** //! \name Internal structure to store the USB device main strings
  78:.././hal/sam3u1c/udc.c **** //! @{
  79:.././hal/sam3u1c/udc.c **** 
  80:.././hal/sam3u1c/udc.c **** /**
  81:.././hal/sam3u1c/udc.c ****  * \brief Language ID of USB device (US ID by default)
  82:.././hal/sam3u1c/udc.c ****  */
  83:.././hal/sam3u1c/udc.c **** COMPILER_WORD_ALIGNED
  84:.././hal/sam3u1c/udc.c **** static UDC_DESC_STORAGE usb_str_lgid_desc_t udc_string_desc_languageid = {
  85:.././hal/sam3u1c/udc.c **** 	.desc.bLength = sizeof(usb_str_lgid_desc_t),
  86:.././hal/sam3u1c/udc.c **** 	.desc.bDescriptorType = USB_DT_STRING,
  87:.././hal/sam3u1c/udc.c **** 	.string = {LE16(USB_LANGID_EN_US)}
  88:.././hal/sam3u1c/udc.c **** };
  89:.././hal/sam3u1c/udc.c **** 
  90:.././hal/sam3u1c/udc.c **** /**
  91:.././hal/sam3u1c/udc.c ****  * \brief USB device manufacture name storage
  92:.././hal/sam3u1c/udc.c ****  * String is allocated only if USB_DEVICE_MANUFACTURE_NAME is declared
  93:.././hal/sam3u1c/udc.c ****  * by usb application configuration
  94:.././hal/sam3u1c/udc.c ****  */
  95:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_MANUFACTURE_NAME
  96:.././hal/sam3u1c/udc.c **** static uint8_t udc_string_manufacturer_name[] = USB_DEVICE_MANUFACTURE_NAME;
  97:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_MANUFACTURE_NAME_SIZE  \
  98:.././hal/sam3u1c/udc.c **** 	(sizeof(udc_string_manufacturer_name)-1)
  99:.././hal/sam3u1c/udc.c **** #else
 100:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_MANUFACTURE_NAME_SIZE  0
 101:.././hal/sam3u1c/udc.c **** #endif
 102:.././hal/sam3u1c/udc.c **** 
 103:.././hal/sam3u1c/udc.c **** /**
 104:.././hal/sam3u1c/udc.c ****  * \brief USB device product name storage
 105:.././hal/sam3u1c/udc.c ****  * String is allocated only if USB_DEVICE_PRODUCT_NAME is declared
 106:.././hal/sam3u1c/udc.c ****  * by usb application configuration
 107:.././hal/sam3u1c/udc.c ****  */
 108:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_PRODUCT_NAME
 109:.././hal/sam3u1c/udc.c **** static uint8_t udc_string_product_name[] = USB_DEVICE_PRODUCT_NAME;
 110:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_PRODUCT_NAME_SIZE  (sizeof(udc_string_product_name)-1)
 111:.././hal/sam3u1c/udc.c **** #else
 112:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_PRODUCT_NAME_SIZE  0
 113:.././hal/sam3u1c/udc.c **** #endif
 114:.././hal/sam3u1c/udc.c **** 
 115:.././hal/sam3u1c/udc.c **** /**
 116:.././hal/sam3u1c/udc.c ****  * \brief Get USB device serial number
 117:.././hal/sam3u1c/udc.c ****  *
 118:.././hal/sam3u1c/udc.c ****  * Use the define USB_DEVICE_SERIAL_NAME to set static serial number.
 119:.././hal/sam3u1c/udc.c ****  *
 120:.././hal/sam3u1c/udc.c ****  * For dynamic serial number set the define USB_DEVICE_GET_SERIAL_NAME_POINTER
 121:.././hal/sam3u1c/udc.c ****  * to a suitable pointer. This will also require the serial number length
 122:.././hal/sam3u1c/udc.c ****  * define USB_DEVICE_GET_SERIAL_NAME_LENGTH.
 123:.././hal/sam3u1c/udc.c ****  */
 124:.././hal/sam3u1c/udc.c **** #if defined USB_DEVICE_GET_SERIAL_NAME_POINTER
 125:.././hal/sam3u1c/udc.c **** 	static const uint8_t *udc_get_string_serial_name(void)
 126:.././hal/sam3u1c/udc.c **** 	{
  80              	 .loc 1 126 2
  81              	 .cfi_startproc
  82              	 
  83              	 
  84              	 
  85 0000 80B4     	 push {r7}
  86              	.LCFI0:
  87              	 .cfi_def_cfa_offset 4
  88              	 .cfi_offset 7,-4
  89 0002 00AF     	 add r7,sp,#0
  90              	.LCFI1:
  91              	 .cfi_def_cfa_register 7
 127:.././hal/sam3u1c/udc.c **** 		return (const uint8_t *)USB_DEVICE_GET_SERIAL_NAME_POINTER;
  92              	 .loc 1 127 10
  93 0004 024B     	 ldr r3,.L3
 128:.././hal/sam3u1c/udc.c **** 	}
  94              	 .loc 1 128 2
  95 0006 1846     	 mov r0,r3
  96 0008 BD46     	 mov sp,r7
  97              	.LCFI2:
  98              	 .cfi_def_cfa_register 13
  99              	 
 100 000a 80BC     	 pop {r7}
 101              	.LCFI3:
 102              	 .cfi_restore 7
 103              	 .cfi_def_cfa_offset 0
 104 000c 7047     	 bx lr
 105              	.L4:
 106 000e 00BF     	 .align 2
 107              	.L3:
 108 0010 00000000 	 .word usb_serial_number
 109              	 .cfi_endproc
 110              	.LFE73:
 112              	 .section .data.udc_string_desc,"aw"
 113              	 .align 2
 116              	udc_string_desc:
 117 0000 00       	 .space 1
 118 0001 03       	 .byte 3
 119 0002 00000000 	 .space 64
 119      00000000 
 119      00000000 
 119      00000000 
 119      00000000 
 120              	 .section .text.udc_get_interface_desc,"ax",%progbits
 121              	 .align 1
 122              	 .global udc_get_interface_desc
 123              	 .syntax unified
 124              	 .thumb
 125              	 .thumb_func
 126              	 .fpu softvfp
 128              	udc_get_interface_desc:
 129              	.LFB74:
 129:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_SERIAL_NAME_SIZE \
 130:.././hal/sam3u1c/udc.c **** 	USB_DEVICE_GET_SERIAL_NAME_LENGTH
 131:.././hal/sam3u1c/udc.c **** #elif defined USB_DEVICE_SERIAL_NAME
 132:.././hal/sam3u1c/udc.c **** 	static const uint8_t *udc_get_string_serial_name(void)
 133:.././hal/sam3u1c/udc.c **** 	{
 134:.././hal/sam3u1c/udc.c **** 		return (const uint8_t *)USB_DEVICE_SERIAL_NAME;
 135:.././hal/sam3u1c/udc.c **** 	}
 136:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_SERIAL_NAME_SIZE \
 137:.././hal/sam3u1c/udc.c **** 	(sizeof(USB_DEVICE_SERIAL_NAME)-1)
 138:.././hal/sam3u1c/udc.c **** #else
 139:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_SERIAL_NAME_SIZE  0
 140:.././hal/sam3u1c/udc.c **** #endif
 141:.././hal/sam3u1c/udc.c **** 
 142:.././hal/sam3u1c/udc.c **** /**
 143:.././hal/sam3u1c/udc.c ****  * \brief USB device string descriptor
 144:.././hal/sam3u1c/udc.c ****  * Structure used to transfer ASCII strings to USB String descriptor structure.
 145:.././hal/sam3u1c/udc.c ****  */
 146:.././hal/sam3u1c/udc.c **** struct udc_string_desc_t {
 147:.././hal/sam3u1c/udc.c **** 	usb_str_desc_t header;
 148:.././hal/sam3u1c/udc.c **** 	le16_t string[Max(Max(USB_DEVICE_MANUFACTURE_NAME_SIZE, \
 149:.././hal/sam3u1c/udc.c **** 			USB_DEVICE_PRODUCT_NAME_SIZE), USB_DEVICE_SERIAL_NAME_SIZE)];
 150:.././hal/sam3u1c/udc.c **** };
 151:.././hal/sam3u1c/udc.c **** COMPILER_WORD_ALIGNED
 152:.././hal/sam3u1c/udc.c **** static UDC_DESC_STORAGE struct udc_string_desc_t udc_string_desc = {
 153:.././hal/sam3u1c/udc.c **** 	.header.bDescriptorType = USB_DT_STRING
 154:.././hal/sam3u1c/udc.c **** };
 155:.././hal/sam3u1c/udc.c **** //! @}
 156:.././hal/sam3u1c/udc.c **** 
 157:.././hal/sam3u1c/udc.c **** usb_iface_desc_t UDC_DESC_STORAGE *udc_get_interface_desc(void)
 158:.././hal/sam3u1c/udc.c **** {
 130              	 .loc 1 158 1
 131              	 .cfi_startproc
 132              	 
 133              	 
 134              	 
 135 0000 80B4     	 push {r7}
 136              	.LCFI4:
 137              	 .cfi_def_cfa_offset 4
 138              	 .cfi_offset 7,-4
 139 0002 00AF     	 add r7,sp,#0
 140              	.LCFI5:
 141              	 .cfi_def_cfa_register 7
 159:.././hal/sam3u1c/udc.c **** 	return udc_ptr_iface;
 142              	 .loc 1 159 9
 143 0004 024B     	 ldr r3,.L7
 144 0006 1B68     	 ldr r3,[r3]
 160:.././hal/sam3u1c/udc.c **** }
 145              	 .loc 1 160 1
 146 0008 1846     	 mov r0,r3
 147 000a BD46     	 mov sp,r7
 148              	.LCFI6:
 149              	 .cfi_def_cfa_register 13
 150              	 
 151 000c 80BC     	 pop {r7}
 152              	.LCFI7:
 153              	 .cfi_restore 7
 154              	 .cfi_def_cfa_offset 0
 155 000e 7047     	 bx lr
 156              	.L8:
 157              	 .align 2
 158              	.L7:
 159 0010 00000000 	 .word udc_ptr_iface
 160              	 .cfi_endproc
 161              	.LFE74:
 163              	 .section .text.udc_get_eof_conf,"ax",%progbits
 164              	 .align 1
 165              	 .syntax unified
 166              	 .thumb
 167              	 .thumb_func
 168              	 .fpu softvfp
 170              	udc_get_eof_conf:
 171              	.LFB75:
 161:.././hal/sam3u1c/udc.c **** 
 162:.././hal/sam3u1c/udc.c **** /**
 163:.././hal/sam3u1c/udc.c ****  * \brief Returns a value to check the end of USB Configuration descriptor
 164:.././hal/sam3u1c/udc.c ****  *
 165:.././hal/sam3u1c/udc.c ****  * \return address after the last byte of USB Configuration descriptor
 166:.././hal/sam3u1c/udc.c ****  */
 167:.././hal/sam3u1c/udc.c **** static usb_conf_desc_t UDC_DESC_STORAGE *udc_get_eof_conf(void)
 168:.././hal/sam3u1c/udc.c **** {
 172              	 .loc 1 168 1
 173              	 .cfi_startproc
 174              	 
 175              	 
 176              	 
 177 0000 80B4     	 push {r7}
 178              	.LCFI8:
 179              	 .cfi_def_cfa_offset 4
 180              	 .cfi_offset 7,-4
 181 0002 00AF     	 add r7,sp,#0
 182              	.LCFI9:
 183              	 .cfi_def_cfa_register 7
 169:.././hal/sam3u1c/udc.c **** 	return (UDC_DESC_STORAGE usb_conf_desc_t *) ((uint8_t *)
 170:.././hal/sam3u1c/udc.c **** 			udc_ptr_conf->desc +
 184              	 .loc 1 170 16
 185 0004 064B     	 ldr r3,.L11
 186 0006 1B68     	 ldr r3,[r3]
 187 0008 1B68     	 ldr r3,[r3]
 171:.././hal/sam3u1c/udc.c **** 			le16_to_cpu(udc_ptr_conf->desc->wTotalLength));
 188              	 .loc 1 171 4
 189 000a 054A     	 ldr r2,.L11
 190 000c 1268     	 ldr r2,[r2]
 191 000e 1268     	 ldr r2,[r2]
 192 0010 5288     	 ldrh r2,[r2,#2]
 193 0012 92B2     	 uxth r2,r2
 169:.././hal/sam3u1c/udc.c **** 	return (UDC_DESC_STORAGE usb_conf_desc_t *) ((uint8_t *)
 194              	 .loc 1 169 9
 195 0014 1344     	 add r3,r3,r2
 172:.././hal/sam3u1c/udc.c **** }
 196              	 .loc 1 172 1
 197 0016 1846     	 mov r0,r3
 198 0018 BD46     	 mov sp,r7
 199              	.LCFI10:
 200              	 .cfi_def_cfa_register 13
 201              	 
 202 001a 80BC     	 pop {r7}
 203              	.LCFI11:
 204              	 .cfi_restore 7
 205              	 .cfi_def_cfa_offset 0
 206 001c 7047     	 bx lr
 207              	.L12:
 208 001e 00BF     	 .align 2
 209              	.L11:
 210 0020 00000000 	 .word udc_ptr_conf
 211              	 .cfi_endproc
 212              	.LFE75:
 214              	 .section .text.udc_next_desc_in_iface,"ax",%progbits
 215              	 .align 1
 216              	 .syntax unified
 217              	 .thumb
 218              	 .thumb_func
 219              	 .fpu softvfp
 221              	udc_next_desc_in_iface:
 222              	.LFB76:
 173:.././hal/sam3u1c/udc.c **** 
 174:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 175:.././hal/sam3u1c/udc.c **** /**
 176:.././hal/sam3u1c/udc.c ****  * \brief Search specific descriptor in global interface descriptor
 177:.././hal/sam3u1c/udc.c ****  *
 178:.././hal/sam3u1c/udc.c ****  * \param desc       Address of interface descriptor
 179:.././hal/sam3u1c/udc.c ****  *                   or previous specific descriptor found
 180:.././hal/sam3u1c/udc.c ****  * \param desc_id    Descriptor ID to search
 181:.././hal/sam3u1c/udc.c ****  *
 182:.././hal/sam3u1c/udc.c ****  * \return address of specific descriptor found
 183:.././hal/sam3u1c/udc.c ****  * \return NULL if it is the end of global interface descriptor
 184:.././hal/sam3u1c/udc.c ****  */
 185:.././hal/sam3u1c/udc.c **** static usb_conf_desc_t UDC_DESC_STORAGE *udc_next_desc_in_iface(usb_conf_desc_t
 186:.././hal/sam3u1c/udc.c **** 		UDC_DESC_STORAGE * desc, uint8_t desc_id)
 187:.././hal/sam3u1c/udc.c **** {
 223              	 .loc 1 187 1
 224              	 .cfi_startproc
 225              	 
 226              	 
 227 0000 80B5     	 push {r7,lr}
 228              	.LCFI12:
 229              	 .cfi_def_cfa_offset 8
 230              	 .cfi_offset 7,-8
 231              	 .cfi_offset 14,-4
 232 0002 84B0     	 sub sp,sp,#16
 233              	.LCFI13:
 234              	 .cfi_def_cfa_offset 24
 235 0004 00AF     	 add r7,sp,#0
 236              	.LCFI14:
 237              	 .cfi_def_cfa_register 7
 238 0006 7860     	 str r0,[r7,#4]
 239 0008 0B46     	 mov r3,r1
 240 000a FB70     	 strb r3,[r7,#3]
 188:.././hal/sam3u1c/udc.c **** 	usb_conf_desc_t UDC_DESC_STORAGE *ptr_eof_desc;
 189:.././hal/sam3u1c/udc.c **** 
 190:.././hal/sam3u1c/udc.c **** 	ptr_eof_desc = udc_get_eof_conf();
 241              	 .loc 1 190 17
 242 000c 124B     	 ldr r3,.L21
 243 000e 9847     	 blx r3
 244              	.LVL0:
 245 0010 F860     	 str r0,[r7,#12]
 191:.././hal/sam3u1c/udc.c **** 	// Go to next descriptor
 192:.././hal/sam3u1c/udc.c **** 	desc = (UDC_DESC_STORAGE usb_conf_desc_t *) ((uint8_t *) desc +
 193:.././hal/sam3u1c/udc.c **** 			desc->bLength);
 246              	 .loc 1 193 8
 247 0012 7B68     	 ldr r3,[r7,#4]
 248 0014 1B78     	 ldrb r3,[r3]
 249 0016 1A46     	 mov r2,r3
 192:.././hal/sam3u1c/udc.c **** 			desc->bLength);
 250              	 .loc 1 192 7
 251 0018 7B68     	 ldr r3,[r7,#4]
 252 001a 1344     	 add r3,r3,r2
 253 001c 7B60     	 str r3,[r7,#4]
 194:.././hal/sam3u1c/udc.c **** 	// Check the end of configuration descriptor
 195:.././hal/sam3u1c/udc.c **** 	while (ptr_eof_desc > desc) {
 254              	 .loc 1 195 8
 255 001e 10E0     	 b .L14
 256              	.L19:
 196:.././hal/sam3u1c/udc.c **** 		// If new interface descriptor is found,
 197:.././hal/sam3u1c/udc.c **** 		// then it is the end of the current global interface descriptor
 198:.././hal/sam3u1c/udc.c **** 		if (USB_DT_INTERFACE == desc->bDescriptorType) {
 257              	 .loc 1 198 31
 258 0020 7B68     	 ldr r3,[r7,#4]
 259 0022 5B78     	 ldrb r3,[r3,#1]
 260              	 .loc 1 198 6
 261 0024 042B     	 cmp r3,#4
 262 0026 11D0     	 beq .L20
 199:.././hal/sam3u1c/udc.c **** 			break; // End of global interface descriptor
 200:.././hal/sam3u1c/udc.c **** 		}
 201:.././hal/sam3u1c/udc.c **** 		if (desc_id == desc->bDescriptorType) {
 263              	 .loc 1 201 22
 264 0028 7B68     	 ldr r3,[r7,#4]
 265 002a 5B78     	 ldrb r3,[r3,#1]
 266              	 .loc 1 201 6
 267 002c FA78     	 ldrb r2,[r7,#3]
 268 002e 9A42     	 cmp r2,r3
 269 0030 01D1     	 bne .L17
 202:.././hal/sam3u1c/udc.c **** 			return desc; // Specific descriptor found
 270              	 .loc 1 202 11
 271 0032 7B68     	 ldr r3,[r7,#4]
 272 0034 0CE0     	 b .L18
 273              	.L17:
 203:.././hal/sam3u1c/udc.c **** 		}
 204:.././hal/sam3u1c/udc.c **** 		// Go to next descriptor
 205:.././hal/sam3u1c/udc.c **** 		desc = (UDC_DESC_STORAGE usb_conf_desc_t *) ((uint8_t *) desc +
 206:.././hal/sam3u1c/udc.c **** 				desc->bLength);
 274              	 .loc 1 206 9
 275 0036 7B68     	 ldr r3,[r7,#4]
 276 0038 1B78     	 ldrb r3,[r3]
 277 003a 1A46     	 mov r2,r3
 205:.././hal/sam3u1c/udc.c **** 				desc->bLength);
 278              	 .loc 1 205 8
 279 003c 7B68     	 ldr r3,[r7,#4]
 280 003e 1344     	 add r3,r3,r2
 281 0040 7B60     	 str r3,[r7,#4]
 282              	.L14:
 195:.././hal/sam3u1c/udc.c **** 		// If new interface descriptor is found,
 283              	 .loc 1 195 8
 284 0042 FA68     	 ldr r2,[r7,#12]
 285 0044 7B68     	 ldr r3,[r7,#4]
 286 0046 9A42     	 cmp r2,r3
 287 0048 EAD8     	 bhi .L19
 288 004a 00E0     	 b .L16
 289              	.L20:
 199:.././hal/sam3u1c/udc.c **** 		}
 290              	 .loc 1 199 4
 291 004c 00BF     	 nop
 292              	.L16:
 207:.././hal/sam3u1c/udc.c **** 	}
 208:.././hal/sam3u1c/udc.c **** 	return NULL; // No specific descriptor found
 293              	 .loc 1 208 9
 294 004e 0023     	 movs r3,#0
 295              	.L18:
 209:.././hal/sam3u1c/udc.c **** }
 296              	 .loc 1 209 1
 297 0050 1846     	 mov r0,r3
 298 0052 1037     	 adds r7,r7,#16
 299              	.LCFI15:
 300              	 .cfi_def_cfa_offset 8
 301 0054 BD46     	 mov sp,r7
 302              	.LCFI16:
 303              	 .cfi_def_cfa_register 13
 304              	 
 305 0056 80BD     	 pop {r7,pc}
 306              	.L22:
 307              	 .align 2
 308              	.L21:
 309 0058 00000000 	 .word udc_get_eof_conf
 310              	 .cfi_endproc
 311              	.LFE76:
 313              	 .section .text.udc_update_iface_desc,"ax",%progbits
 314              	 .align 1
 315              	 .syntax unified
 316              	 .thumb
 317              	 .thumb_func
 318              	 .fpu softvfp
 320              	udc_update_iface_desc:
 321              	.LFB77:
 210:.././hal/sam3u1c/udc.c **** #endif
 211:.././hal/sam3u1c/udc.c **** 
 212:.././hal/sam3u1c/udc.c **** /**
 213:.././hal/sam3u1c/udc.c ****  * \brief Search an interface descriptor
 214:.././hal/sam3u1c/udc.c ****  * This routine updates the internal pointer udc_ptr_iface.
 215:.././hal/sam3u1c/udc.c ****  *
 216:.././hal/sam3u1c/udc.c ****  * \param iface_num     Interface number to find in Configuration Descriptor
 217:.././hal/sam3u1c/udc.c ****  * \param setting_num   Setting number of interface to find
 218:.././hal/sam3u1c/udc.c ****  *
 219:.././hal/sam3u1c/udc.c ****  * \return 1 if found or 0 if not found
 220:.././hal/sam3u1c/udc.c ****  */
 221:.././hal/sam3u1c/udc.c **** static bool udc_update_iface_desc(uint8_t iface_num, uint8_t setting_num)
 222:.././hal/sam3u1c/udc.c **** {
 322              	 .loc 1 222 1
 323              	 .cfi_startproc
 324              	 
 325              	 
 326 0000 80B5     	 push {r7,lr}
 327              	.LCFI17:
 328              	 .cfi_def_cfa_offset 8
 329              	 .cfi_offset 7,-8
 330              	 .cfi_offset 14,-4
 331 0002 84B0     	 sub sp,sp,#16
 332              	.LCFI18:
 333              	 .cfi_def_cfa_offset 24
 334 0004 00AF     	 add r7,sp,#0
 335              	.LCFI19:
 336              	 .cfi_def_cfa_register 7
 337 0006 0346     	 mov r3,r0
 338 0008 0A46     	 mov r2,r1
 339 000a FB71     	 strb r3,[r7,#7]
 340 000c 1346     	 mov r3,r2
 341 000e BB71     	 strb r3,[r7,#6]
 223:.././hal/sam3u1c/udc.c **** 	usb_conf_desc_t UDC_DESC_STORAGE *ptr_end_desc;
 224:.././hal/sam3u1c/udc.c **** 
 225:.././hal/sam3u1c/udc.c **** 	if (0 == udc_num_configuration) {
 342              	 .loc 1 225 8
 343 0010 1E4B     	 ldr r3,.L30
 344 0012 1B78     	 ldrb r3,[r3]
 345              	 .loc 1 225 5
 346 0014 002B     	 cmp r3,#0
 347 0016 01D1     	 bne .L24
 226:.././hal/sam3u1c/udc.c **** 		return false;
 348              	 .loc 1 226 10
 349 0018 0023     	 movs r3,#0
 350 001a 32E0     	 b .L25
 351              	.L24:
 227:.././hal/sam3u1c/udc.c **** 	}
 228:.././hal/sam3u1c/udc.c **** 
 229:.././hal/sam3u1c/udc.c **** 	if (iface_num >= udc_ptr_conf->desc->bNumInterfaces) {
 352              	 .loc 1 229 31
 353 001c 1C4B     	 ldr r3,.L30+4
 354 001e 1B68     	 ldr r3,[r3]
 355 0020 1B68     	 ldr r3,[r3]
 356              	 .loc 1 229 37
 357 0022 1B79     	 ldrb r3,[r3,#4]
 358              	 .loc 1 229 5
 359 0024 FA79     	 ldrb r2,[r7,#7]
 360 0026 9A42     	 cmp r2,r3
 361 0028 01D3     	 bcc .L26
 230:.././hal/sam3u1c/udc.c **** 		return false;
 362              	 .loc 1 230 10
 363 002a 0023     	 movs r3,#0
 364 002c 29E0     	 b .L25
 365              	.L26:
 231:.././hal/sam3u1c/udc.c **** 	}
 232:.././hal/sam3u1c/udc.c **** 
 233:.././hal/sam3u1c/udc.c **** 	// Start at the beginning of configuration descriptor
 234:.././hal/sam3u1c/udc.c **** 	udc_ptr_iface = (UDC_DESC_STORAGE usb_iface_desc_t *)
 235:.././hal/sam3u1c/udc.c **** 			udc_ptr_conf->desc;
 366              	 .loc 1 235 16
 367 002e 184B     	 ldr r3,.L30+4
 368 0030 1B68     	 ldr r3,[r3]
 369 0032 1B68     	 ldr r3,[r3]
 234:.././hal/sam3u1c/udc.c **** 			udc_ptr_conf->desc;
 370              	 .loc 1 234 16
 371 0034 174A     	 ldr r2,.L30+8
 372 0036 1360     	 str r3,[r2]
 236:.././hal/sam3u1c/udc.c **** 
 237:.././hal/sam3u1c/udc.c **** 	// Check the end of configuration descriptor
 238:.././hal/sam3u1c/udc.c **** 	ptr_end_desc = udc_get_eof_conf();
 373              	 .loc 1 238 17
 374 0038 174B     	 ldr r3,.L30+12
 375 003a 9847     	 blx r3
 376              	.LVL1:
 377 003c F860     	 str r0,[r7,#12]
 239:.././hal/sam3u1c/udc.c **** 	while (ptr_end_desc >
 378              	 .loc 1 239 8
 379 003e 1AE0     	 b .L27
 380              	.L29:
 240:.././hal/sam3u1c/udc.c **** 			(UDC_DESC_STORAGE usb_conf_desc_t *) udc_ptr_iface) {
 241:.././hal/sam3u1c/udc.c **** 		if (USB_DT_INTERFACE == udc_ptr_iface->bDescriptorType) {
 381              	 .loc 1 241 40
 382 0040 144B     	 ldr r3,.L30+8
 383 0042 1B68     	 ldr r3,[r3]
 384 0044 5B78     	 ldrb r3,[r3,#1]
 385              	 .loc 1 241 6
 386 0046 042B     	 cmp r3,#4
 387 0048 0DD1     	 bne .L28
 242:.././hal/sam3u1c/udc.c **** 			// A interface descriptor is found
 243:.././hal/sam3u1c/udc.c **** 			// Check interface and alternate setting number
 244:.././hal/sam3u1c/udc.c **** 			if ((iface_num == udc_ptr_iface->bInterfaceNumber) &&
 388              	 .loc 1 244 35
 389 004a 124B     	 ldr r3,.L30+8
 390 004c 1B68     	 ldr r3,[r3]
 391 004e 9B78     	 ldrb r3,[r3,#2]
 392              	 .loc 1 244 7
 393 0050 FA79     	 ldrb r2,[r7,#7]
 394 0052 9A42     	 cmp r2,r3
 395 0054 07D1     	 bne .L28
 245:.././hal/sam3u1c/udc.c **** 					(setting_num ==
 246:.././hal/sam3u1c/udc.c **** 					udc_ptr_iface->bAlternateSetting)) {
 396              	 .loc 1 246 19 discriminator 1
 397 0056 0F4B     	 ldr r3,.L30+8
 398 0058 1B68     	 ldr r3,[r3]
 399 005a DB78     	 ldrb r3,[r3,#3]
 244:.././hal/sam3u1c/udc.c **** 					(setting_num ==
 400              	 .loc 1 244 55 discriminator 1
 401 005c BA79     	 ldrb r2,[r7,#6]
 402 005e 9A42     	 cmp r2,r3
 403 0060 01D1     	 bne .L28
 247:.././hal/sam3u1c/udc.c **** 				return true; // Interface found
 404              	 .loc 1 247 12
 405 0062 0123     	 movs r3,#1
 406 0064 0DE0     	 b .L25
 407              	.L28:
 248:.././hal/sam3u1c/udc.c **** 			}
 249:.././hal/sam3u1c/udc.c **** 		}
 250:.././hal/sam3u1c/udc.c **** 		// Go to next descriptor
 251:.././hal/sam3u1c/udc.c **** 		udc_ptr_iface = (UDC_DESC_STORAGE usb_iface_desc_t *) (
 408              	 .loc 1 251 19
 409 0066 0B4B     	 ldr r3,.L30+8
 410 0068 1B68     	 ldr r3,[r3]
 252:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_ptr_iface +
 253:.././hal/sam3u1c/udc.c **** 				udc_ptr_iface->bLength);
 411              	 .loc 1 253 18
 412 006a 0A4A     	 ldr r2,.L30+8
 413 006c 1268     	 ldr r2,[r2]
 414 006e 1278     	 ldrb r2,[r2]
 251:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_ptr_iface +
 415              	 .loc 1 251 19
 416 0070 1344     	 add r3,r3,r2
 251:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_ptr_iface +
 417              	 .loc 1 251 17
 418 0072 084A     	 ldr r2,.L30+8
 419 0074 1360     	 str r3,[r2]
 420              	.L27:
 240:.././hal/sam3u1c/udc.c **** 		if (USB_DT_INTERFACE == udc_ptr_iface->bDescriptorType) {
 421              	 .loc 1 240 4
 422 0076 074B     	 ldr r3,.L30+8
 423 0078 1B68     	 ldr r3,[r3]
 239:.././hal/sam3u1c/udc.c **** 			(UDC_DESC_STORAGE usb_conf_desc_t *) udc_ptr_iface) {
 424              	 .loc 1 239 8
 425 007a FA68     	 ldr r2,[r7,#12]
 426 007c 9A42     	 cmp r2,r3
 427 007e DFD8     	 bhi .L29
 254:.././hal/sam3u1c/udc.c **** 	}
 255:.././hal/sam3u1c/udc.c **** 	return false; // Interface not found
 428              	 .loc 1 255 9
 429 0080 0023     	 movs r3,#0
 430              	.L25:
 256:.././hal/sam3u1c/udc.c **** }
 431              	 .loc 1 256 1
 432 0082 1846     	 mov r0,r3
 433 0084 1037     	 adds r7,r7,#16
 434              	.LCFI20:
 435              	 .cfi_def_cfa_offset 8
 436 0086 BD46     	 mov sp,r7
 437              	.LCFI21:
 438              	 .cfi_def_cfa_register 13
 439              	 
 440 0088 80BD     	 pop {r7,pc}
 441              	.L31:
 442 008a 00BF     	 .align 2
 443              	.L30:
 444 008c 00000000 	 .word udc_num_configuration
 445 0090 00000000 	 .word udc_ptr_conf
 446 0094 00000000 	 .word udc_ptr_iface
 447 0098 00000000 	 .word udc_get_eof_conf
 448              	 .cfi_endproc
 449              	.LFE77:
 451              	 .section .text.udc_iface_disable,"ax",%progbits
 452              	 .align 1
 453              	 .syntax unified
 454              	 .thumb
 455              	 .thumb_func
 456              	 .fpu softvfp
 458              	udc_iface_disable:
 459              	.LFB78:
 257:.././hal/sam3u1c/udc.c **** 
 258:.././hal/sam3u1c/udc.c **** /**
 259:.././hal/sam3u1c/udc.c ****  * \brief Disables an usb device interface (UDI)
 260:.././hal/sam3u1c/udc.c ****  * This routine call the UDI corresponding to interface number
 261:.././hal/sam3u1c/udc.c ****  *
 262:.././hal/sam3u1c/udc.c ****  * \param iface_num     Interface number to disable
 263:.././hal/sam3u1c/udc.c ****  *
 264:.././hal/sam3u1c/udc.c ****  * \return 1 if it is done or 0 if interface is not found
 265:.././hal/sam3u1c/udc.c ****  */
 266:.././hal/sam3u1c/udc.c **** static bool udc_iface_disable(uint8_t iface_num)
 267:.././hal/sam3u1c/udc.c **** {
 460              	 .loc 1 267 1
 461              	 .cfi_startproc
 462              	 
 463              	 
 464 0000 80B5     	 push {r7,lr}
 465              	.LCFI22:
 466              	 .cfi_def_cfa_offset 8
 467              	 .cfi_offset 7,-8
 468              	 .cfi_offset 14,-4
 469 0002 84B0     	 sub sp,sp,#16
 470              	.LCFI23:
 471              	 .cfi_def_cfa_offset 24
 472 0004 00AF     	 add r7,sp,#0
 473              	.LCFI24:
 474              	 .cfi_def_cfa_register 7
 475 0006 0346     	 mov r3,r0
 476 0008 FB71     	 strb r3,[r7,#7]
 268:.././hal/sam3u1c/udc.c **** 	udi_api_t UDC_DESC_STORAGE *udi_api;
 269:.././hal/sam3u1c/udc.c **** 
 270:.././hal/sam3u1c/udc.c **** 	// Select first alternate setting of the interface
 271:.././hal/sam3u1c/udc.c **** 	// to update udc_ptr_iface before call iface->getsetting()
 272:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, 0)) {
 477              	 .loc 1 272 7
 478 000a FB79     	 ldrb r3,[r7,#7]
 479 000c 0021     	 movs r1,#0
 480 000e 1846     	 mov r0,r3
 481 0010 1E4B     	 ldr r3,.L41
 482 0012 9847     	 blx r3
 483              	.LVL2:
 484 0014 0346     	 mov r3,r0
 485              	 .loc 1 272 6
 486 0016 83F00103 	 eor r3,r3,#1
 487 001a DBB2     	 uxtb r3,r3
 488              	 .loc 1 272 5
 489 001c 002B     	 cmp r3,#0
 490 001e 01D0     	 beq .L33
 273:.././hal/sam3u1c/udc.c **** 		return false;
 491              	 .loc 1 273 10
 492 0020 0023     	 movs r3,#0
 493 0022 2FE0     	 b .L34
 494              	.L33:
 274:.././hal/sam3u1c/udc.c **** 	}
 275:.././hal/sam3u1c/udc.c **** 
 276:.././hal/sam3u1c/udc.c **** 	// Select the interface with the current alternate setting
 277:.././hal/sam3u1c/udc.c **** 	udi_api = udc_ptr_conf->udi_apis[iface_num];
 495              	 .loc 1 277 24
 496 0024 1A4B     	 ldr r3,.L41+4
 497 0026 1B68     	 ldr r3,[r3]
 498 0028 5A68     	 ldr r2,[r3,#4]
 499              	 .loc 1 277 34
 500 002a FB79     	 ldrb r3,[r7,#7]
 501 002c 9B00     	 lsls r3,r3,#2
 502 002e 1344     	 add r3,r3,r2
 503              	 .loc 1 277 10
 504 0030 1B68     	 ldr r3,[r3]
 505 0032 BB60     	 str r3,[r7,#8]
 278:.././hal/sam3u1c/udc.c **** 
 279:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 280:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, udi_api->getsetting())) {
 506              	 .loc 1 280 47
 507 0034 BB68     	 ldr r3,[r7,#8]
 508 0036 DB68     	 ldr r3,[r3,#12]
 509              	 .loc 1 280 7
 510 0038 9847     	 blx r3
 511              	.LVL3:
 512 003a 0346     	 mov r3,r0
 513 003c 1A46     	 mov r2,r3
 514 003e FB79     	 ldrb r3,[r7,#7]
 515 0040 1146     	 mov r1,r2
 516 0042 1846     	 mov r0,r3
 517 0044 114B     	 ldr r3,.L41
 518 0046 9847     	 blx r3
 519              	.LVL4:
 520 0048 0346     	 mov r3,r0
 521              	 .loc 1 280 6
 522 004a 83F00103 	 eor r3,r3,#1
 523 004e DBB2     	 uxtb r3,r3
 524              	 .loc 1 280 5
 525 0050 002B     	 cmp r3,#0
 526 0052 01D0     	 beq .L35
 281:.././hal/sam3u1c/udc.c **** 		return false;
 527              	 .loc 1 281 10
 528 0054 0023     	 movs r3,#0
 529 0056 15E0     	 b .L34
 530              	.L35:
 531              	.LBB2:
 282:.././hal/sam3u1c/udc.c **** 	}
 283:.././hal/sam3u1c/udc.c **** 
 284:.././hal/sam3u1c/udc.c **** 	// Start at the beginning of interface descriptor
 285:.././hal/sam3u1c/udc.c **** 	{
 286:.././hal/sam3u1c/udc.c **** 		usb_ep_desc_t UDC_DESC_STORAGE *ep_desc;
 287:.././hal/sam3u1c/udc.c **** 		ep_desc = (UDC_DESC_STORAGE usb_ep_desc_t *) udc_ptr_iface;
 532              	 .loc 1 287 11
 533 0058 0E4B     	 ldr r3,.L41+8
 534 005a 1B68     	 ldr r3,[r3]
 535 005c FB60     	 str r3,[r7,#12]
 536              	.L38:
 288:.././hal/sam3u1c/udc.c **** 		while (1) {
 289:.././hal/sam3u1c/udc.c **** 			// Search Endpoint descriptor included in global interface descriptor
 290:.././hal/sam3u1c/udc.c **** 			ep_desc = (UDC_DESC_STORAGE usb_ep_desc_t *)
 291:.././hal/sam3u1c/udc.c **** 					udc_next_desc_in_iface((UDC_DESC_STORAGE
 537              	 .loc 1 291 6
 538 005e 0521     	 movs r1,#5
 539 0060 F868     	 ldr r0,[r7,#12]
 540 0062 0D4B     	 ldr r3,.L41+12
 541 0064 9847     	 blx r3
 542              	.LVL5:
 543 0066 F860     	 str r0,[r7,#12]
 292:.././hal/sam3u1c/udc.c **** 					usb_conf_desc_t *)
 293:.././hal/sam3u1c/udc.c **** 					ep_desc, USB_DT_ENDPOINT);
 294:.././hal/sam3u1c/udc.c **** 			if (NULL == ep_desc) {
 544              	 .loc 1 294 7
 545 0068 FB68     	 ldr r3,[r7,#12]
 546 006a 002B     	 cmp r3,#0
 547 006c 05D0     	 beq .L40
 295:.././hal/sam3u1c/udc.c **** 				break;
 296:.././hal/sam3u1c/udc.c **** 			}
 297:.././hal/sam3u1c/udc.c **** 			// Free the endpoint used by the interface
 298:.././hal/sam3u1c/udc.c **** 			udd_ep_free(ep_desc->bEndpointAddress);
 548              	 .loc 1 298 4
 549 006e FB68     	 ldr r3,[r7,#12]
 550 0070 9B78     	 ldrb r3,[r3,#2]
 551 0072 1846     	 mov r0,r3
 552 0074 094B     	 ldr r3,.L41+16
 553 0076 9847     	 blx r3
 554              	.LVL6:
 290:.././hal/sam3u1c/udc.c **** 					udc_next_desc_in_iface((UDC_DESC_STORAGE
 555              	 .loc 1 290 12
 556 0078 F1E7     	 b .L38
 557              	.L40:
 295:.././hal/sam3u1c/udc.c **** 				break;
 558              	 .loc 1 295 5
 559 007a 00BF     	 nop
 560              	.LBE2:
 299:.././hal/sam3u1c/udc.c **** 		}
 300:.././hal/sam3u1c/udc.c **** 	}
 301:.././hal/sam3u1c/udc.c **** #endif
 302:.././hal/sam3u1c/udc.c **** 
 303:.././hal/sam3u1c/udc.c **** 	// Disable interface
 304:.././hal/sam3u1c/udc.c **** 	udi_api->disable();
 561              	 .loc 1 304 9
 562 007c BB68     	 ldr r3,[r7,#8]
 563 007e 5B68     	 ldr r3,[r3,#4]
 564              	 .loc 1 304 2
 565 0080 9847     	 blx r3
 566              	.LVL7:
 305:.././hal/sam3u1c/udc.c **** 	return true;
 567              	 .loc 1 305 9
 568 0082 0123     	 movs r3,#1
 569              	.L34:
 306:.././hal/sam3u1c/udc.c **** }
 570              	 .loc 1 306 1
 571 0084 1846     	 mov r0,r3
 572 0086 1037     	 adds r7,r7,#16
 573              	.LCFI25:
 574              	 .cfi_def_cfa_offset 8
 575 0088 BD46     	 mov sp,r7
 576              	.LCFI26:
 577              	 .cfi_def_cfa_register 13
 578              	 
 579 008a 80BD     	 pop {r7,pc}
 580              	.L42:
 581              	 .align 2
 582              	.L41:
 583 008c 00000000 	 .word udc_update_iface_desc
 584 0090 00000000 	 .word udc_ptr_conf
 585 0094 00000000 	 .word udc_ptr_iface
 586 0098 00000000 	 .word udc_next_desc_in_iface
 587 009c 00000000 	 .word udd_ep_free
 588              	 .cfi_endproc
 589              	.LFE78:
 591              	 .section .text.udc_iface_enable,"ax",%progbits
 592              	 .align 1
 593              	 .syntax unified
 594              	 .thumb
 595              	 .thumb_func
 596              	 .fpu softvfp
 598              	udc_iface_enable:
 599              	.LFB79:
 307:.././hal/sam3u1c/udc.c **** 
 308:.././hal/sam3u1c/udc.c **** /**
 309:.././hal/sam3u1c/udc.c ****  * \brief Enables an usb device interface (UDI)
 310:.././hal/sam3u1c/udc.c ****  * This routine calls the UDI corresponding
 311:.././hal/sam3u1c/udc.c ****  * to the interface and setting number.
 312:.././hal/sam3u1c/udc.c ****  *
 313:.././hal/sam3u1c/udc.c ****  * \param iface_num     Interface number to enable
 314:.././hal/sam3u1c/udc.c ****  * \param setting_num   Setting number to enable
 315:.././hal/sam3u1c/udc.c ****  *
 316:.././hal/sam3u1c/udc.c ****  * \return 1 if it is done or 0 if interface is not found
 317:.././hal/sam3u1c/udc.c ****  */
 318:.././hal/sam3u1c/udc.c **** static bool udc_iface_enable(uint8_t iface_num, uint8_t setting_num)
 319:.././hal/sam3u1c/udc.c **** {
 600              	 .loc 1 319 1
 601              	 .cfi_startproc
 602              	 
 603              	 
 604 0000 80B5     	 push {r7,lr}
 605              	.LCFI27:
 606              	 .cfi_def_cfa_offset 8
 607              	 .cfi_offset 7,-8
 608              	 .cfi_offset 14,-4
 609 0002 84B0     	 sub sp,sp,#16
 610              	.LCFI28:
 611              	 .cfi_def_cfa_offset 24
 612 0004 00AF     	 add r7,sp,#0
 613              	.LCFI29:
 614              	 .cfi_def_cfa_register 7
 615 0006 0346     	 mov r3,r0
 616 0008 0A46     	 mov r2,r1
 617 000a FB71     	 strb r3,[r7,#7]
 618 000c 1346     	 mov r3,r2
 619 000e BB71     	 strb r3,[r7,#6]
 320:.././hal/sam3u1c/udc.c **** 	// Select the interface descriptor
 321:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, setting_num)) {
 620              	 .loc 1 321 7
 621 0010 BA79     	 ldrb r2,[r7,#6]
 622 0012 FB79     	 ldrb r3,[r7,#7]
 623 0014 1146     	 mov r1,r2
 624 0016 1846     	 mov r0,r3
 625 0018 1A4B     	 ldr r3,.L52
 626 001a 9847     	 blx r3
 627              	.LVL8:
 628 001c 0346     	 mov r3,r0
 629              	 .loc 1 321 6
 630 001e 83F00103 	 eor r3,r3,#1
 631 0022 DBB2     	 uxtb r3,r3
 632              	 .loc 1 321 5
 633 0024 002B     	 cmp r3,#0
 634 0026 01D0     	 beq .L44
 322:.././hal/sam3u1c/udc.c **** 		return false;
 635              	 .loc 1 322 10
 636 0028 0023     	 movs r3,#0
 637 002a 27E0     	 b .L45
 638              	.L44:
 323:.././hal/sam3u1c/udc.c **** 	}
 324:.././hal/sam3u1c/udc.c **** 
 325:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 326:.././hal/sam3u1c/udc.c **** 	usb_ep_desc_t UDC_DESC_STORAGE *ep_desc;
 327:.././hal/sam3u1c/udc.c **** 
 328:.././hal/sam3u1c/udc.c **** 	// Start at the beginning of the global interface descriptor
 329:.././hal/sam3u1c/udc.c **** 	ep_desc = (UDC_DESC_STORAGE usb_ep_desc_t *) udc_ptr_iface;
 639              	 .loc 1 329 10
 640 002c 164B     	 ldr r3,.L52+4
 641 002e 1B68     	 ldr r3,[r3]
 642 0030 FB60     	 str r3,[r7,#12]
 643              	.L49:
 330:.././hal/sam3u1c/udc.c **** 	while (1) {
 331:.././hal/sam3u1c/udc.c **** 		// Search Endpoint descriptor included in the global interface descriptor
 332:.././hal/sam3u1c/udc.c **** 		ep_desc = (UDC_DESC_STORAGE usb_ep_desc_t *)
 333:.././hal/sam3u1c/udc.c **** 				udc_next_desc_in_iface((UDC_DESC_STORAGE
 644              	 .loc 1 333 5
 645 0032 0521     	 movs r1,#5
 646 0034 F868     	 ldr r0,[r7,#12]
 647 0036 154B     	 ldr r3,.L52+8
 648 0038 9847     	 blx r3
 649              	.LVL9:
 650 003a F860     	 str r0,[r7,#12]
 334:.././hal/sam3u1c/udc.c **** 						usb_conf_desc_t *) ep_desc,
 335:.././hal/sam3u1c/udc.c **** 				USB_DT_ENDPOINT);
 336:.././hal/sam3u1c/udc.c **** 		if (NULL == ep_desc)
 651              	 .loc 1 336 6
 652 003c FB68     	 ldr r3,[r7,#12]
 653 003e 002B     	 cmp r3,#0
 654 0040 11D0     	 beq .L51
 337:.././hal/sam3u1c/udc.c **** 			break;
 338:.././hal/sam3u1c/udc.c **** 		// Alloc the endpoint used by the interface
 339:.././hal/sam3u1c/udc.c **** 		if (!udd_ep_alloc(ep_desc->bEndpointAddress,
 655              	 .loc 1 339 8
 656 0042 FB68     	 ldr r3,[r7,#12]
 657 0044 9878     	 ldrb r0,[r3,#2]
 658 0046 FB68     	 ldr r3,[r7,#12]
 659 0048 D978     	 ldrb r1,[r3,#3]
 660 004a FB68     	 ldr r3,[r7,#12]
 661 004c 9B88     	 ldrh r3,[r3,#4]
 662 004e 9BB2     	 uxth r3,r3
 663 0050 1A46     	 mov r2,r3
 664 0052 0F4B     	 ldr r3,.L52+12
 665 0054 9847     	 blx r3
 666              	.LVL10:
 667 0056 0346     	 mov r3,r0
 668              	 .loc 1 339 7
 669 0058 83F00103 	 eor r3,r3,#1
 670 005c DBB2     	 uxtb r3,r3
 671              	 .loc 1 339 6
 672 005e 002B     	 cmp r3,#0
 673 0060 E7D0     	 beq .L49
 340:.././hal/sam3u1c/udc.c **** 				ep_desc->bmAttributes,
 341:.././hal/sam3u1c/udc.c **** 				le16_to_cpu
 342:.././hal/sam3u1c/udc.c **** 				(ep_desc->wMaxPacketSize))) {
 343:.././hal/sam3u1c/udc.c **** 			return false;
 674              	 .loc 1 343 11
 675 0062 0023     	 movs r3,#0
 676 0064 0AE0     	 b .L45
 677              	.L51:
 337:.././hal/sam3u1c/udc.c **** 			break;
 678              	 .loc 1 337 4
 679 0066 00BF     	 nop
 344:.././hal/sam3u1c/udc.c **** 		}
 345:.././hal/sam3u1c/udc.c **** 	}
 346:.././hal/sam3u1c/udc.c **** #endif
 347:.././hal/sam3u1c/udc.c **** 	// Enable the interface
 348:.././hal/sam3u1c/udc.c **** 	return udc_ptr_conf->udi_apis[iface_num]->enable();
 680              	 .loc 1 348 21
 681 0068 0A4B     	 ldr r3,.L52+16
 682 006a 1B68     	 ldr r3,[r3]
 683 006c 5A68     	 ldr r2,[r3,#4]
 684              	 .loc 1 348 31
 685 006e FB79     	 ldrb r3,[r7,#7]
 686 0070 9B00     	 lsls r3,r3,#2
 687 0072 1344     	 add r3,r3,r2
 688 0074 1B68     	 ldr r3,[r3]
 689              	 .loc 1 348 42
 690 0076 1B68     	 ldr r3,[r3]
 691              	 .loc 1 348 9
 692 0078 9847     	 blx r3
 693              	.LVL11:
 694 007a 0346     	 mov r3,r0
 695              	.L45:
 349:.././hal/sam3u1c/udc.c **** }
 696              	 .loc 1 349 1
 697 007c 1846     	 mov r0,r3
 698 007e 1037     	 adds r7,r7,#16
 699              	.LCFI30:
 700              	 .cfi_def_cfa_offset 8
 701 0080 BD46     	 mov sp,r7
 702              	.LCFI31:
 703              	 .cfi_def_cfa_register 13
 704              	 
 705 0082 80BD     	 pop {r7,pc}
 706              	.L53:
 707              	 .align 2
 708              	.L52:
 709 0084 00000000 	 .word udc_update_iface_desc
 710 0088 00000000 	 .word udc_ptr_iface
 711 008c 00000000 	 .word udc_next_desc_in_iface
 712 0090 00000000 	 .word udd_ep_alloc
 713 0094 00000000 	 .word udc_ptr_conf
 714              	 .cfi_endproc
 715              	.LFE79:
 717              	 .section .text.udc_start,"ax",%progbits
 718              	 .align 1
 719              	 .global udc_start
 720              	 .syntax unified
 721              	 .thumb
 722              	 .thumb_func
 723              	 .fpu softvfp
 725              	udc_start:
 726              	.LFB80:
 350:.././hal/sam3u1c/udc.c **** 
 351:.././hal/sam3u1c/udc.c **** /*! \brief Start the USB Device stack
 352:.././hal/sam3u1c/udc.c ****  */
 353:.././hal/sam3u1c/udc.c **** void udc_start(void)
 354:.././hal/sam3u1c/udc.c **** {
 727              	 .loc 1 354 1
 728              	 .cfi_startproc
 729              	 
 730              	 
 731 0000 80B5     	 push {r7,lr}
 732              	.LCFI32:
 733              	 .cfi_def_cfa_offset 8
 734              	 .cfi_offset 7,-8
 735              	 .cfi_offset 14,-4
 736 0002 00AF     	 add r7,sp,#0
 737              	.LCFI33:
 738              	 .cfi_def_cfa_register 7
 355:.././hal/sam3u1c/udc.c **** 	udd_enable();
 739              	 .loc 1 355 2
 740 0004 014B     	 ldr r3,.L55
 741 0006 9847     	 blx r3
 742              	.LVL12:
 356:.././hal/sam3u1c/udc.c **** }
 743              	 .loc 1 356 1
 744 0008 00BF     	 nop
 745 000a 80BD     	 pop {r7,pc}
 746              	.L56:
 747              	 .align 2
 748              	.L55:
 749 000c 00000000 	 .word udd_enable
 750              	 .cfi_endproc
 751              	.LFE80:
 753              	 .section .text.udc_stop,"ax",%progbits
 754              	 .align 1
 755              	 .global udc_stop
 756              	 .syntax unified
 757              	 .thumb
 758              	 .thumb_func
 759              	 .fpu softvfp
 761              	udc_stop:
 762              	.LFB81:
 357:.././hal/sam3u1c/udc.c **** 
 358:.././hal/sam3u1c/udc.c **** /*! \brief Stop the USB Device stack
 359:.././hal/sam3u1c/udc.c ****  */
 360:.././hal/sam3u1c/udc.c **** void udc_stop(void)
 361:.././hal/sam3u1c/udc.c **** {
 763              	 .loc 1 361 1
 764              	 .cfi_startproc
 765              	 
 766              	 
 767 0000 80B5     	 push {r7,lr}
 768              	.LCFI34:
 769              	 .cfi_def_cfa_offset 8
 770              	 .cfi_offset 7,-8
 771              	 .cfi_offset 14,-4
 772 0002 00AF     	 add r7,sp,#0
 773              	.LCFI35:
 774              	 .cfi_def_cfa_register 7
 362:.././hal/sam3u1c/udc.c **** 	udd_disable();
 775              	 .loc 1 362 2
 776 0004 024B     	 ldr r3,.L58
 777 0006 9847     	 blx r3
 778              	.LVL13:
 363:.././hal/sam3u1c/udc.c **** 	udc_reset();
 779              	 .loc 1 363 2
 780 0008 024B     	 ldr r3,.L58+4
 781 000a 9847     	 blx r3
 782              	.LVL14:
 364:.././hal/sam3u1c/udc.c **** }
 783              	 .loc 1 364 1
 784 000c 00BF     	 nop
 785 000e 80BD     	 pop {r7,pc}
 786              	.L59:
 787              	 .align 2
 788              	.L58:
 789 0010 00000000 	 .word udd_disable
 790 0014 00000000 	 .word udc_reset
 791              	 .cfi_endproc
 792              	.LFE81:
 794              	 .section .text.udc_reset,"ax",%progbits
 795              	 .align 1
 796              	 .global udc_reset
 797              	 .syntax unified
 798              	 .thumb
 799              	 .thumb_func
 800              	 .fpu softvfp
 802              	udc_reset:
 803              	.LFB82:
 365:.././hal/sam3u1c/udc.c **** 
 366:.././hal/sam3u1c/udc.c **** /**
 367:.././hal/sam3u1c/udc.c ****  * \brief Reset the current configuration of the USB device,
 368:.././hal/sam3u1c/udc.c ****  * This routines can be called by UDD when a RESET on the USB line occurs.
 369:.././hal/sam3u1c/udc.c ****  */
 370:.././hal/sam3u1c/udc.c **** void udc_reset(void)
 371:.././hal/sam3u1c/udc.c **** {
 804              	 .loc 1 371 1
 805              	 .cfi_startproc
 806              	 
 807              	 
 808 0000 80B5     	 push {r7,lr}
 809              	.LCFI36:
 810              	 .cfi_def_cfa_offset 8
 811              	 .cfi_offset 7,-8
 812              	 .cfi_offset 14,-4
 813 0002 82B0     	 sub sp,sp,#8
 814              	.LCFI37:
 815              	 .cfi_def_cfa_offset 16
 816 0004 00AF     	 add r7,sp,#0
 817              	.LCFI38:
 818              	 .cfi_def_cfa_register 7
 372:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
 373:.././hal/sam3u1c/udc.c **** 
 374:.././hal/sam3u1c/udc.c **** 	if (udc_num_configuration) {
 819              	 .loc 1 374 6
 820 0006 0F4B     	 ldr r3,.L64
 821 0008 1B78     	 ldrb r3,[r3]
 822              	 .loc 1 374 5
 823 000a 002B     	 cmp r3,#0
 824 000c 10D0     	 beq .L61
 375:.././hal/sam3u1c/udc.c **** 		for (iface_num = 0;
 825              	 .loc 1 375 18
 826 000e 0023     	 movs r3,#0
 827 0010 FB71     	 strb r3,[r7,#7]
 828              	 .loc 1 375 3
 829 0012 06E0     	 b .L62
 830              	.L63:
 376:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 377:.././hal/sam3u1c/udc.c **** 				iface_num++) {
 378:.././hal/sam3u1c/udc.c **** 			udc_iface_disable(iface_num);
 831              	 .loc 1 378 4
 832 0014 FB79     	 ldrb r3,[r7,#7]
 833 0016 1846     	 mov r0,r3
 834 0018 0B4B     	 ldr r3,.L64+4
 835 001a 9847     	 blx r3
 836              	.LVL15:
 377:.././hal/sam3u1c/udc.c **** 			udc_iface_disable(iface_num);
 837              	 .loc 1 377 14
 838 001c FB79     	 ldrb r3,[r7,#7]
 839 001e 0133     	 adds r3,r3,#1
 840 0020 FB71     	 strb r3,[r7,#7]
 841              	.L62:
 376:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 842              	 .loc 1 376 29 discriminator 1
 843 0022 0A4B     	 ldr r3,.L64+8
 844 0024 1B68     	 ldr r3,[r3]
 845 0026 1B68     	 ldr r3,[r3]
 376:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 846              	 .loc 1 376 35 discriminator 1
 847 0028 1B79     	 ldrb r3,[r3,#4]
 375:.././hal/sam3u1c/udc.c **** 		for (iface_num = 0;
 848              	 .loc 1 375 3 discriminator 1
 849 002a FA79     	 ldrb r2,[r7,#7]
 850 002c 9A42     	 cmp r2,r3
 851 002e F1D3     	 bcc .L63
 852              	.L61:
 379:.././hal/sam3u1c/udc.c **** 		}
 380:.././hal/sam3u1c/udc.c **** 	}
 381:.././hal/sam3u1c/udc.c **** 	udc_num_configuration = 0;
 853              	 .loc 1 381 24
 854 0030 044B     	 ldr r3,.L64
 855 0032 0022     	 movs r2,#0
 856 0034 1A70     	 strb r2,[r3]
 382:.././hal/sam3u1c/udc.c **** #if (USB_CONFIG_ATTR_REMOTE_WAKEUP \
 383:.././hal/sam3u1c/udc.c **** 	== (USB_DEVICE_ATTR & USB_CONFIG_ATTR_REMOTE_WAKEUP))
 384:.././hal/sam3u1c/udc.c **** 	if (CPU_TO_LE16(USB_DEV_STATUS_REMOTEWAKEUP) & udc_device_status) {
 385:.././hal/sam3u1c/udc.c **** 		// Remote wakeup is enabled then disable it
 386:.././hal/sam3u1c/udc.c **** 		UDC_REMOTEWAKEUP_DISABLE();
 387:.././hal/sam3u1c/udc.c **** 	}
 388:.././hal/sam3u1c/udc.c **** #endif
 389:.././hal/sam3u1c/udc.c **** 	udc_device_status =
 857              	 .loc 1 389 20
 858 0036 064B     	 ldr r3,.L64+12
 859 0038 0022     	 movs r2,#0
 860 003a 1A80     	 strh r2,[r3]
 390:.././hal/sam3u1c/udc.c **** #if (USB_DEVICE_ATTR & USB_CONFIG_ATTR_SELF_POWERED)
 391:.././hal/sam3u1c/udc.c **** 			CPU_TO_LE16(USB_DEV_STATUS_SELF_POWERED);
 392:.././hal/sam3u1c/udc.c **** #else
 393:.././hal/sam3u1c/udc.c **** 			CPU_TO_LE16(USB_DEV_STATUS_BUS_POWERED);
 394:.././hal/sam3u1c/udc.c **** #endif
 395:.././hal/sam3u1c/udc.c **** }
 861              	 .loc 1 395 1
 862 003c 00BF     	 nop
 863 003e 0837     	 adds r7,r7,#8
 864              	.LCFI39:
 865              	 .cfi_def_cfa_offset 8
 866 0040 BD46     	 mov sp,r7
 867              	.LCFI40:
 868              	 .cfi_def_cfa_register 13
 869              	 
 870 0042 80BD     	 pop {r7,pc}
 871              	.L65:
 872              	 .align 2
 873              	.L64:
 874 0044 00000000 	 .word udc_num_configuration
 875 0048 00000000 	 .word udc_iface_disable
 876 004c 00000000 	 .word udc_ptr_conf
 877 0050 00000000 	 .word udc_device_status
 878              	 .cfi_endproc
 879              	.LFE82:
 881              	 .section .text.udc_sof_notify,"ax",%progbits
 882              	 .align 1
 883              	 .global udc_sof_notify
 884              	 .syntax unified
 885              	 .thumb
 886              	 .thumb_func
 887              	 .fpu softvfp
 889              	udc_sof_notify:
 890              	.LFB83:
 396:.././hal/sam3u1c/udc.c **** 
 397:.././hal/sam3u1c/udc.c **** void udc_sof_notify(void)
 398:.././hal/sam3u1c/udc.c **** {
 891              	 .loc 1 398 1
 892              	 .cfi_startproc
 893              	 
 894              	 
 895 0000 80B5     	 push {r7,lr}
 896              	.LCFI41:
 897              	 .cfi_def_cfa_offset 8
 898              	 .cfi_offset 7,-8
 899              	 .cfi_offset 14,-4
 900 0002 82B0     	 sub sp,sp,#8
 901              	.LCFI42:
 902              	 .cfi_def_cfa_offset 16
 903 0004 00AF     	 add r7,sp,#0
 904              	.LCFI43:
 905              	 .cfi_def_cfa_register 7
 399:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
 400:.././hal/sam3u1c/udc.c **** 
 401:.././hal/sam3u1c/udc.c **** 	if (udc_num_configuration) {
 906              	 .loc 1 401 6
 907 0006 144B     	 ldr r3,.L72
 908 0008 1B78     	 ldrb r3,[r3]
 909              	 .loc 1 401 5
 910 000a 002B     	 cmp r3,#0
 911 000c 1FD0     	 beq .L71
 402:.././hal/sam3u1c/udc.c **** 		for (iface_num = 0;
 912              	 .loc 1 402 18
 913 000e 0023     	 movs r3,#0
 914 0010 FB71     	 strb r3,[r7,#7]
 915              	 .loc 1 402 3
 916 0012 15E0     	 b .L68
 917              	.L70:
 403:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 404:.././hal/sam3u1c/udc.c **** 				iface_num++) {
 405:.././hal/sam3u1c/udc.c **** 			if (udc_ptr_conf->udi_apis[iface_num]->sof_notify != NULL) {
 918              	 .loc 1 405 20
 919 0014 114B     	 ldr r3,.L72+4
 920 0016 1B68     	 ldr r3,[r3]
 921 0018 5A68     	 ldr r2,[r3,#4]
 922              	 .loc 1 405 30
 923 001a FB79     	 ldrb r3,[r7,#7]
 924 001c 9B00     	 lsls r3,r3,#2
 925 001e 1344     	 add r3,r3,r2
 926 0020 1B68     	 ldr r3,[r3]
 927              	 .loc 1 405 41
 928 0022 1B69     	 ldr r3,[r3,#16]
 929              	 .loc 1 405 7
 930 0024 002B     	 cmp r3,#0
 931 0026 08D0     	 beq .L69
 406:.././hal/sam3u1c/udc.c **** 				udc_ptr_conf->udi_apis[iface_num]->sof_notify();
 932              	 .loc 1 406 17
 933 0028 0C4B     	 ldr r3,.L72+4
 934 002a 1B68     	 ldr r3,[r3]
 935 002c 5A68     	 ldr r2,[r3,#4]
 936              	 .loc 1 406 27
 937 002e FB79     	 ldrb r3,[r7,#7]
 938 0030 9B00     	 lsls r3,r3,#2
 939 0032 1344     	 add r3,r3,r2
 940 0034 1B68     	 ldr r3,[r3]
 941              	 .loc 1 406 38
 942 0036 1B69     	 ldr r3,[r3,#16]
 943              	 .loc 1 406 5
 944 0038 9847     	 blx r3
 945              	.LVL16:
 946              	.L69:
 404:.././hal/sam3u1c/udc.c **** 			if (udc_ptr_conf->udi_apis[iface_num]->sof_notify != NULL) {
 947              	 .loc 1 404 14
 948 003a FB79     	 ldrb r3,[r7,#7]
 949 003c 0133     	 adds r3,r3,#1
 950 003e FB71     	 strb r3,[r7,#7]
 951              	.L68:
 403:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 952              	 .loc 1 403 29 discriminator 1
 953 0040 064B     	 ldr r3,.L72+4
 954 0042 1B68     	 ldr r3,[r3]
 955 0044 1B68     	 ldr r3,[r3]
 403:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 956              	 .loc 1 403 35 discriminator 1
 957 0046 1B79     	 ldrb r3,[r3,#4]
 402:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 958              	 .loc 1 402 3 discriminator 1
 959 0048 FA79     	 ldrb r2,[r7,#7]
 960 004a 9A42     	 cmp r2,r3
 961 004c E2D3     	 bcc .L70
 962              	.L71:
 407:.././hal/sam3u1c/udc.c **** 			}
 408:.././hal/sam3u1c/udc.c **** 		}
 409:.././hal/sam3u1c/udc.c **** 	}
 410:.././hal/sam3u1c/udc.c **** }
 963              	 .loc 1 410 1
 964 004e 00BF     	 nop
 965 0050 0837     	 adds r7,r7,#8
 966              	.LCFI44:
 967              	 .cfi_def_cfa_offset 8
 968 0052 BD46     	 mov sp,r7
 969              	.LCFI45:
 970              	 .cfi_def_cfa_register 13
 971              	 
 972 0054 80BD     	 pop {r7,pc}
 973              	.L73:
 974 0056 00BF     	 .align 2
 975              	.L72:
 976 0058 00000000 	 .word udc_num_configuration
 977 005c 00000000 	 .word udc_ptr_conf
 978              	 .cfi_endproc
 979              	.LFE83:
 981              	 .section .text.udc_req_std_dev_get_status,"ax",%progbits
 982              	 .align 1
 983              	 .syntax unified
 984              	 .thumb
 985              	 .thumb_func
 986              	 .fpu softvfp
 988              	udc_req_std_dev_get_status:
 989              	.LFB84:
 411:.././hal/sam3u1c/udc.c **** 
 412:.././hal/sam3u1c/udc.c **** /**
 413:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to get device status
 414:.././hal/sam3u1c/udc.c ****  *
 415:.././hal/sam3u1c/udc.c ****  * \return true if success
 416:.././hal/sam3u1c/udc.c ****  */
 417:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_get_status(void)
 418:.././hal/sam3u1c/udc.c **** {
 990              	 .loc 1 418 1
 991              	 .cfi_startproc
 992              	 
 993              	 
 994 0000 80B5     	 push {r7,lr}
 995              	.LCFI46:
 996              	 .cfi_def_cfa_offset 8
 997              	 .cfi_offset 7,-8
 998              	 .cfi_offset 14,-4
 999 0002 00AF     	 add r7,sp,#0
 1000              	.LCFI47:
 1001              	 .cfi_def_cfa_register 7
 419:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength != sizeof(udc_device_status)) {
 1002              	 .loc 1 419 23
 1003 0004 064B     	 ldr r3,.L77
 1004 0006 DB88     	 ldrh r3,[r3,#6]
 1005              	 .loc 1 419 5
 1006 0008 022B     	 cmp r3,#2
 1007 000a 01D0     	 beq .L75
 420:.././hal/sam3u1c/udc.c **** 		return false;
 1008              	 .loc 1 420 10
 1009 000c 0023     	 movs r3,#0
 1010 000e 04E0     	 b .L76
 1011              	.L75:
 421:.././hal/sam3u1c/udc.c **** 	}
 422:.././hal/sam3u1c/udc.c **** 
 423:.././hal/sam3u1c/udc.c **** 	udd_set_setup_payload( (uint8_t *) & udc_device_status,
 1012              	 .loc 1 423 2
 1013 0010 0221     	 movs r1,#2
 1014 0012 0448     	 ldr r0,.L77+4
 1015 0014 044B     	 ldr r3,.L77+8
 1016 0016 9847     	 blx r3
 1017              	.LVL17:
 424:.././hal/sam3u1c/udc.c **** 			sizeof(udc_device_status));
 425:.././hal/sam3u1c/udc.c **** 	return true;
 1018              	 .loc 1 425 9
 1019 0018 0123     	 movs r3,#1
 1020              	.L76:
 426:.././hal/sam3u1c/udc.c **** }
 1021              	 .loc 1 426 1
 1022 001a 1846     	 mov r0,r3
 1023 001c 80BD     	 pop {r7,pc}
 1024              	.L78:
 1025 001e 00BF     	 .align 2
 1026              	.L77:
 1027 0020 00000000 	 .word udd_g_ctrlreq
 1028 0024 00000000 	 .word udc_device_status
 1029 0028 00000000 	 .word udd_set_setup_payload
 1030              	 .cfi_endproc
 1031              	.LFE84:
 1033              	 .section .text.udc_req_std_ep_get_status,"ax",%progbits
 1034              	 .align 1
 1035              	 .syntax unified
 1036              	 .thumb
 1037              	 .thumb_func
 1038              	 .fpu softvfp
 1040              	udc_req_std_ep_get_status:
 1041              	.LFB85:
 427:.././hal/sam3u1c/udc.c **** 
 428:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 429:.././hal/sam3u1c/udc.c **** /**
 430:.././hal/sam3u1c/udc.c ****  * \brief Standard endpoint request to get endpoint status
 431:.././hal/sam3u1c/udc.c ****  *
 432:.././hal/sam3u1c/udc.c ****  * \return true if success
 433:.././hal/sam3u1c/udc.c ****  */
 434:.././hal/sam3u1c/udc.c **** static bool udc_req_std_ep_get_status(void)
 435:.././hal/sam3u1c/udc.c **** {
 1042              	 .loc 1 435 1
 1043              	 .cfi_startproc
 1044              	 
 1045              	 
 1046 0000 80B5     	 push {r7,lr}
 1047              	.LCFI48:
 1048              	 .cfi_def_cfa_offset 8
 1049              	 .cfi_offset 7,-8
 1050              	 .cfi_offset 14,-4
 1051 0002 00AF     	 add r7,sp,#0
 1052              	.LCFI49:
 1053              	 .cfi_def_cfa_register 7
 436:.././hal/sam3u1c/udc.c **** 	static le16_t udc_ep_status;
 437:.././hal/sam3u1c/udc.c **** 
 438:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength != sizeof(udc_ep_status)) {
 1054              	 .loc 1 438 23
 1055 0004 0B4B     	 ldr r3,.L82
 1056 0006 DB88     	 ldrh r3,[r3,#6]
 1057              	 .loc 1 438 5
 1058 0008 022B     	 cmp r3,#2
 1059 000a 01D0     	 beq .L80
 439:.././hal/sam3u1c/udc.c **** 		return false;
 1060              	 .loc 1 439 10
 1061 000c 0023     	 movs r3,#0
 1062 000e 0EE0     	 b .L81
 1063              	.L80:
 440:.././hal/sam3u1c/udc.c **** 	}
 441:.././hal/sam3u1c/udc.c **** 
 442:.././hal/sam3u1c/udc.c **** 	udc_ep_status = udd_ep_is_halted(udd_g_ctrlreq.req.
 1064              	 .loc 1 442 52
 1065 0010 084B     	 ldr r3,.L82
 1066 0012 9B88     	 ldrh r3,[r3,#4]
 1067              	 .loc 1 442 18
 1068 0014 DBB2     	 uxtb r3,r3
 1069 0016 1846     	 mov r0,r3
 1070 0018 074B     	 ldr r3,.L82+4
 1071 001a 9847     	 blx r3
 1072              	.LVL18:
 1073 001c 0346     	 mov r3,r0
 443:.././hal/sam3u1c/udc.c **** 			wIndex & 0xFF) ? CPU_TO_LE16(USB_EP_STATUS_HALTED) : 0;
 1074              	 .loc 1 443 55
 1075 001e 9AB2     	 uxth r2,r3
 442:.././hal/sam3u1c/udc.c **** 			wIndex & 0xFF) ? CPU_TO_LE16(USB_EP_STATUS_HALTED) : 0;
 1076              	 .loc 1 442 16
 1077 0020 064B     	 ldr r3,.L82+8
 1078 0022 1A80     	 strh r2,[r3]
 444:.././hal/sam3u1c/udc.c **** 
 445:.././hal/sam3u1c/udc.c **** 	udd_set_setup_payload( (uint8_t *) & udc_ep_status,
 1079              	 .loc 1 445 2
 1080 0024 0221     	 movs r1,#2
 1081 0026 0548     	 ldr r0,.L82+8
 1082 0028 054B     	 ldr r3,.L82+12
 1083 002a 9847     	 blx r3
 1084              	.LVL19:
 446:.././hal/sam3u1c/udc.c **** 			sizeof(udc_ep_status));
 447:.././hal/sam3u1c/udc.c **** 	return true;
 1085              	 .loc 1 447 9
 1086 002c 0123     	 movs r3,#1
 1087              	.L81:
 448:.././hal/sam3u1c/udc.c **** }
 1088              	 .loc 1 448 1
 1089 002e 1846     	 mov r0,r3
 1090 0030 80BD     	 pop {r7,pc}
 1091              	.L83:
 1092 0032 00BF     	 .align 2
 1093              	.L82:
 1094 0034 00000000 	 .word udd_g_ctrlreq
 1095 0038 00000000 	 .word udd_ep_is_halted
 1096 003c 00000000 	 .word udc_ep_status.7396
 1097 0040 00000000 	 .word udd_set_setup_payload
 1098              	 .cfi_endproc
 1099              	.LFE85:
 1101              	 .section .text.udc_req_std_dev_clear_feature,"ax",%progbits
 1102              	 .align 1
 1103              	 .syntax unified
 1104              	 .thumb
 1105              	 .thumb_func
 1106              	 .fpu softvfp
 1108              	udc_req_std_dev_clear_feature:
 1109              	.LFB86:
 449:.././hal/sam3u1c/udc.c **** #endif
 450:.././hal/sam3u1c/udc.c **** 
 451:.././hal/sam3u1c/udc.c **** /**
 452:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to change device status
 453:.././hal/sam3u1c/udc.c ****  *
 454:.././hal/sam3u1c/udc.c ****  * \return true if success
 455:.././hal/sam3u1c/udc.c ****  */
 456:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_clear_feature(void)
 457:.././hal/sam3u1c/udc.c **** {
 1110              	 .loc 1 457 1
 1111              	 .cfi_startproc
 1112              	 
 1113              	 
 1114              	 
 1115 0000 80B4     	 push {r7}
 1116              	.LCFI50:
 1117              	 .cfi_def_cfa_offset 4
 1118              	 .cfi_offset 7,-4
 1119 0002 00AF     	 add r7,sp,#0
 1120              	.LCFI51:
 1121              	 .cfi_def_cfa_register 7
 458:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1122              	 .loc 1 458 23
 1123 0004 0B4B     	 ldr r3,.L88
 1124 0006 DB88     	 ldrh r3,[r3,#6]
 1125              	 .loc 1 458 5
 1126 0008 002B     	 cmp r3,#0
 1127 000a 01D0     	 beq .L85
 459:.././hal/sam3u1c/udc.c **** 		return false;
 1128              	 .loc 1 459 10
 1129 000c 0023     	 movs r3,#0
 1130 000e 0DE0     	 b .L86
 1131              	.L85:
 460:.././hal/sam3u1c/udc.c **** 	}
 461:.././hal/sam3u1c/udc.c **** 
 462:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wValue == USB_DEV_FEATURE_REMOTE_WAKEUP) {
 1132              	 .loc 1 462 23
 1133 0010 084B     	 ldr r3,.L88
 1134 0012 5B88     	 ldrh r3,[r3,#2]
 1135              	 .loc 1 462 5
 1136 0014 012B     	 cmp r3,#1
 1137 0016 08D1     	 bne .L87
 463:.././hal/sam3u1c/udc.c **** 		udc_device_status &= CPU_TO_LE16(~(uint32_t)USB_DEV_STATUS_REMOTEWAKEUP);
 1138              	 .loc 1 463 21
 1139 0018 074B     	 ldr r3,.L88+4
 1140 001a 1B88     	 ldrh r3,[r3]
 1141 001c 23F00203 	 bic r3,r3,#2
 1142 0020 9AB2     	 uxth r2,r3
 1143 0022 054B     	 ldr r3,.L88+4
 1144 0024 1A80     	 strh r2,[r3]
 464:.././hal/sam3u1c/udc.c **** #if (USB_CONFIG_ATTR_REMOTE_WAKEUP \
 465:.././hal/sam3u1c/udc.c **** 	== (USB_DEVICE_ATTR & USB_CONFIG_ATTR_REMOTE_WAKEUP))
 466:.././hal/sam3u1c/udc.c **** 		UDC_REMOTEWAKEUP_DISABLE();
 467:.././hal/sam3u1c/udc.c **** #endif
 468:.././hal/sam3u1c/udc.c **** 		return true;
 1145              	 .loc 1 468 10
 1146 0026 0123     	 movs r3,#1
 1147 0028 00E0     	 b .L86
 1148              	.L87:
 469:.././hal/sam3u1c/udc.c **** 	}
 470:.././hal/sam3u1c/udc.c **** 	return false;
 1149              	 .loc 1 470 9
 1150 002a 0023     	 movs r3,#0
 1151              	.L86:
 471:.././hal/sam3u1c/udc.c **** }
 1152              	 .loc 1 471 1
 1153 002c 1846     	 mov r0,r3
 1154 002e BD46     	 mov sp,r7
 1155              	.LCFI52:
 1156              	 .cfi_def_cfa_register 13
 1157              	 
 1158 0030 80BC     	 pop {r7}
 1159              	.LCFI53:
 1160              	 .cfi_restore 7
 1161              	 .cfi_def_cfa_offset 0
 1162 0032 7047     	 bx lr
 1163              	.L89:
 1164              	 .align 2
 1165              	.L88:
 1166 0034 00000000 	 .word udd_g_ctrlreq
 1167 0038 00000000 	 .word udc_device_status
 1168              	 .cfi_endproc
 1169              	.LFE86:
 1171              	 .section .text.udc_req_std_ep_clear_feature,"ax",%progbits
 1172              	 .align 1
 1173              	 .syntax unified
 1174              	 .thumb
 1175              	 .thumb_func
 1176              	 .fpu softvfp
 1178              	udc_req_std_ep_clear_feature:
 1179              	.LFB87:
 472:.././hal/sam3u1c/udc.c **** 
 473:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 474:.././hal/sam3u1c/udc.c **** /**
 475:.././hal/sam3u1c/udc.c ****  * \brief Standard endpoint request to clear endpoint feature
 476:.././hal/sam3u1c/udc.c ****  *
 477:.././hal/sam3u1c/udc.c ****  * \return true if success
 478:.././hal/sam3u1c/udc.c ****  */
 479:.././hal/sam3u1c/udc.c **** static bool udc_req_std_ep_clear_feature(void)
 480:.././hal/sam3u1c/udc.c **** {
 1180              	 .loc 1 480 1
 1181              	 .cfi_startproc
 1182              	 
 1183              	 
 1184 0000 80B5     	 push {r7,lr}
 1185              	.LCFI54:
 1186              	 .cfi_def_cfa_offset 8
 1187              	 .cfi_offset 7,-8
 1188              	 .cfi_offset 14,-4
 1189 0002 00AF     	 add r7,sp,#0
 1190              	.LCFI55:
 1191              	 .cfi_def_cfa_register 7
 481:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1192              	 .loc 1 481 23
 1193 0004 0A4B     	 ldr r3,.L94
 1194 0006 DB88     	 ldrh r3,[r3,#6]
 1195              	 .loc 1 481 5
 1196 0008 002B     	 cmp r3,#0
 1197 000a 01D0     	 beq .L91
 482:.././hal/sam3u1c/udc.c **** 		return false;
 1198              	 .loc 1 482 10
 1199 000c 0023     	 movs r3,#0
 1200 000e 0CE0     	 b .L92
 1201              	.L91:
 483:.././hal/sam3u1c/udc.c **** 	}
 484:.././hal/sam3u1c/udc.c **** 
 485:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wValue == USB_EP_FEATURE_HALT) {
 1202              	 .loc 1 485 23
 1203 0010 074B     	 ldr r3,.L94
 1204 0012 5B88     	 ldrh r3,[r3,#2]
 1205              	 .loc 1 485 5
 1206 0014 002B     	 cmp r3,#0
 1207 0016 07D1     	 bne .L93
 486:.././hal/sam3u1c/udc.c **** 		return udd_ep_clear_halt(udd_g_ctrlreq.req.wIndex & 0xFF);
 1208              	 .loc 1 486 45
 1209 0018 054B     	 ldr r3,.L94
 1210 001a 9B88     	 ldrh r3,[r3,#4]
 1211              	 .loc 1 486 10
 1212 001c DBB2     	 uxtb r3,r3
 1213 001e 1846     	 mov r0,r3
 1214 0020 044B     	 ldr r3,.L94+4
 1215 0022 9847     	 blx r3
 1216              	.LVL20:
 1217 0024 0346     	 mov r3,r0
 1218 0026 00E0     	 b .L92
 1219              	.L93:
 487:.././hal/sam3u1c/udc.c **** 	}
 488:.././hal/sam3u1c/udc.c **** 	return false;
 1220              	 .loc 1 488 9
 1221 0028 0023     	 movs r3,#0
 1222              	.L92:
 489:.././hal/sam3u1c/udc.c **** }
 1223              	 .loc 1 489 1
 1224 002a 1846     	 mov r0,r3
 1225 002c 80BD     	 pop {r7,pc}
 1226              	.L95:
 1227 002e 00BF     	 .align 2
 1228              	.L94:
 1229 0030 00000000 	 .word udd_g_ctrlreq
 1230 0034 00000000 	 .word udd_ep_clear_halt
 1231              	 .cfi_endproc
 1232              	.LFE87:
 1234              	 .section .text.udc_req_std_dev_set_feature,"ax",%progbits
 1235              	 .align 1
 1236              	 .syntax unified
 1237              	 .thumb
 1238              	 .thumb_func
 1239              	 .fpu softvfp
 1241              	udc_req_std_dev_set_feature:
 1242              	.LFB88:
 490:.././hal/sam3u1c/udc.c **** #endif
 491:.././hal/sam3u1c/udc.c **** 
 492:.././hal/sam3u1c/udc.c **** /**
 493:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to set a feature
 494:.././hal/sam3u1c/udc.c ****  *
 495:.././hal/sam3u1c/udc.c ****  * \return true if success
 496:.././hal/sam3u1c/udc.c ****  */
 497:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_set_feature(void)
 498:.././hal/sam3u1c/udc.c **** {
 1243              	 .loc 1 498 1
 1244              	 .cfi_startproc
 1245              	 
 1246              	 
 1247 0000 80B5     	 push {r7,lr}
 1248              	.LCFI56:
 1249              	 .cfi_def_cfa_offset 8
 1250              	 .cfi_offset 7,-8
 1251              	 .cfi_offset 14,-4
 1252 0002 00AF     	 add r7,sp,#0
 1253              	.LCFI57:
 1254              	 .cfi_def_cfa_register 7
 499:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1255              	 .loc 1 499 23
 1256 0004 264B     	 ldr r3,.L115
 1257 0006 DB88     	 ldrh r3,[r3,#6]
 1258              	 .loc 1 499 5
 1259 0008 002B     	 cmp r3,#0
 1260 000a 01D0     	 beq .L97
 500:.././hal/sam3u1c/udc.c **** 		return false;
 1261              	 .loc 1 500 10
 1262 000c 0023     	 movs r3,#0
 1263 000e 45E0     	 b .L98
 1264              	.L97:
 501:.././hal/sam3u1c/udc.c **** 	}
 502:.././hal/sam3u1c/udc.c **** 
 503:.././hal/sam3u1c/udc.c **** 	switch (udd_g_ctrlreq.req.wValue) {
 1265              	 .loc 1 503 27
 1266 0010 234B     	 ldr r3,.L115
 1267 0012 5B88     	 ldrh r3,[r3,#2]
 1268              	 .loc 1 503 2
 1269 0014 012B     	 cmp r3,#1
 1270 0016 02D0     	 beq .L99
 1271 0018 022B     	 cmp r3,#2
 1272 001a 02D0     	 beq .L100
 504:.././hal/sam3u1c/udc.c **** 
 505:.././hal/sam3u1c/udc.c **** 	case USB_DEV_FEATURE_REMOTE_WAKEUP:
 506:.././hal/sam3u1c/udc.c **** #if (USB_CONFIG_ATTR_REMOTE_WAKEUP \
 507:.././hal/sam3u1c/udc.c **** 	== (USB_DEVICE_ATTR & USB_CONFIG_ATTR_REMOTE_WAKEUP))
 508:.././hal/sam3u1c/udc.c **** 		udc_device_status |= CPU_TO_LE16(USB_DEV_STATUS_REMOTEWAKEUP);
 509:.././hal/sam3u1c/udc.c **** 		UDC_REMOTEWAKEUP_ENABLE();
 510:.././hal/sam3u1c/udc.c **** 		return true;
 511:.././hal/sam3u1c/udc.c **** #else
 512:.././hal/sam3u1c/udc.c **** 		return false;
 513:.././hal/sam3u1c/udc.c **** #endif
 514:.././hal/sam3u1c/udc.c **** 
 515:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 516:.././hal/sam3u1c/udc.c **** 	case USB_DEV_FEATURE_TEST_MODE:
 517:.././hal/sam3u1c/udc.c **** 		if (!udd_is_high_speed()) {
 518:.././hal/sam3u1c/udc.c **** 			break;
 519:.././hal/sam3u1c/udc.c **** 		}
 520:.././hal/sam3u1c/udc.c **** 		if (udd_g_ctrlreq.req.wIndex & 0xff) {
 521:.././hal/sam3u1c/udc.c **** 			break;
 522:.././hal/sam3u1c/udc.c **** 		}
 523:.././hal/sam3u1c/udc.c **** 		// Unconfigure the device, terminating all ongoing requests
 524:.././hal/sam3u1c/udc.c **** 		udc_reset();
 525:.././hal/sam3u1c/udc.c **** 		switch ((udd_g_ctrlreq.req.wIndex >> 8) & 0xFF) {
 526:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_J:
 527:.././hal/sam3u1c/udc.c **** 			udd_g_ctrlreq.callback = udd_test_mode_j;
 528:.././hal/sam3u1c/udc.c **** 			return true;
 529:.././hal/sam3u1c/udc.c **** 
 530:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_K:
 531:.././hal/sam3u1c/udc.c **** 			udd_g_ctrlreq.callback = udd_test_mode_k;
 532:.././hal/sam3u1c/udc.c **** 			return true;
 533:.././hal/sam3u1c/udc.c **** 
 534:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_SE0_NAK:
 535:.././hal/sam3u1c/udc.c **** 			udd_g_ctrlreq.callback = udd_test_mode_se0_nak;
 536:.././hal/sam3u1c/udc.c **** 			return true;
 537:.././hal/sam3u1c/udc.c **** 
 538:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_PACKET:
 539:.././hal/sam3u1c/udc.c **** 			udd_g_ctrlreq.callback = udd_test_mode_packet;
 540:.././hal/sam3u1c/udc.c **** 			return true;
 541:.././hal/sam3u1c/udc.c **** 
 542:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_FORCE_ENABLE: // Only for downstream facing hub ports
 543:.././hal/sam3u1c/udc.c **** 		default:
 544:.././hal/sam3u1c/udc.c **** 			break;
 545:.././hal/sam3u1c/udc.c **** 		}
 546:.././hal/sam3u1c/udc.c **** 		break;
 547:.././hal/sam3u1c/udc.c **** #endif
 548:.././hal/sam3u1c/udc.c **** 	default:
 549:.././hal/sam3u1c/udc.c **** 		break;
 1273              	 .loc 1 549 3
 1274 001c 3DE0     	 b .L103
 1275              	.L99:
 512:.././hal/sam3u1c/udc.c **** #endif
 1276              	 .loc 1 512 10
 1277 001e 0023     	 movs r3,#0
 1278 0020 3CE0     	 b .L98
 1279              	.L100:
 517:.././hal/sam3u1c/udc.c **** 			break;
 1280              	 .loc 1 517 8
 1281 0022 204B     	 ldr r3,.L115+4
 1282 0024 9847     	 blx r3
 1283              	.LVL21:
 1284 0026 0346     	 mov r3,r0
 517:.././hal/sam3u1c/udc.c **** 			break;
 1285              	 .loc 1 517 7
 1286 0028 83F00103 	 eor r3,r3,#1
 1287 002c DBB2     	 uxtb r3,r3
 517:.././hal/sam3u1c/udc.c **** 			break;
 1288              	 .loc 1 517 6
 1289 002e 002B     	 cmp r3,#0
 1290 0030 30D1     	 bne .L112
 520:.././hal/sam3u1c/udc.c **** 			break;
 1291              	 .loc 1 520 24
 1292 0032 1B4B     	 ldr r3,.L115
 1293 0034 9B88     	 ldrh r3,[r3,#4]
 520:.././hal/sam3u1c/udc.c **** 			break;
 1294              	 .loc 1 520 32
 1295 0036 DBB2     	 uxtb r3,r3
 520:.././hal/sam3u1c/udc.c **** 			break;
 1296              	 .loc 1 520 6
 1297 0038 002B     	 cmp r3,#0
 1298 003a 2DD1     	 bne .L113
 524:.././hal/sam3u1c/udc.c **** 		switch ((udd_g_ctrlreq.req.wIndex >> 8) & 0xFF) {
 1299              	 .loc 1 524 3
 1300 003c 1A4B     	 ldr r3,.L115+8
 1301 003e 9847     	 blx r3
 1302              	.LVL22:
 525:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_J:
 1303              	 .loc 1 525 29
 1304 0040 174B     	 ldr r3,.L115
 1305 0042 9B88     	 ldrh r3,[r3,#4]
 525:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_J:
 1306              	 .loc 1 525 43
 1307 0044 1B0A     	 lsrs r3,r3,#8
 1308 0046 9BB2     	 uxth r3,r3
 1309 0048 DBB2     	 uxtb r3,r3
 1310 004a 013B     	 subs r3,r3,#1
 1311 004c 032B     	 cmp r3,#3
 1312 004e 1FD8     	 bhi .L114
 1313 0050 01A2     	 adr r2,.L107
 1314 0052 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 1315 0056 00BF     	 .p2align 2
 1316              	.L107:
 1317 0058 69000000 	 .word .L110+1
 1318 005c 73000000 	 .word .L109+1
 1319 0060 7D000000 	 .word .L108+1
 1320 0064 87000000 	 .word .L106+1
 1321              	 .p2align 1
 1322              	.L110:
 527:.././hal/sam3u1c/udc.c **** 			return true;
 1323              	 .loc 1 527 27
 1324 0068 0D4B     	 ldr r3,.L115
 1325 006a 104A     	 ldr r2,.L115+12
 1326 006c 1A61     	 str r2,[r3,#16]
 528:.././hal/sam3u1c/udc.c **** 
 1327              	 .loc 1 528 11
 1328 006e 0123     	 movs r3,#1
 1329 0070 14E0     	 b .L98
 1330              	.L109:
 531:.././hal/sam3u1c/udc.c **** 			return true;
 1331              	 .loc 1 531 27
 1332 0072 0B4B     	 ldr r3,.L115
 1333 0074 0E4A     	 ldr r2,.L115+16
 1334 0076 1A61     	 str r2,[r3,#16]
 532:.././hal/sam3u1c/udc.c **** 
 1335              	 .loc 1 532 11
 1336 0078 0123     	 movs r3,#1
 1337 007a 0FE0     	 b .L98
 1338              	.L108:
 535:.././hal/sam3u1c/udc.c **** 			return true;
 1339              	 .loc 1 535 27
 1340 007c 084B     	 ldr r3,.L115
 1341 007e 0D4A     	 ldr r2,.L115+20
 1342 0080 1A61     	 str r2,[r3,#16]
 536:.././hal/sam3u1c/udc.c **** 
 1343              	 .loc 1 536 11
 1344 0082 0123     	 movs r3,#1
 1345 0084 0AE0     	 b .L98
 1346              	.L106:
 539:.././hal/sam3u1c/udc.c **** 			return true;
 1347              	 .loc 1 539 27
 1348 0086 064B     	 ldr r3,.L115
 1349 0088 0B4A     	 ldr r2,.L115+24
 1350 008a 1A61     	 str r2,[r3,#16]
 540:.././hal/sam3u1c/udc.c **** 
 1351              	 .loc 1 540 11
 1352 008c 0123     	 movs r3,#1
 1353 008e 05E0     	 b .L98
 1354              	.L114:
 544:.././hal/sam3u1c/udc.c **** 		}
 1355              	 .loc 1 544 4
 1356 0090 00BF     	 nop
 546:.././hal/sam3u1c/udc.c **** #endif
 1357              	 .loc 1 546 3
 1358 0092 02E0     	 b .L103
 1359              	.L112:
 518:.././hal/sam3u1c/udc.c **** 		}
 1360              	 .loc 1 518 4
 1361 0094 00BF     	 nop
 1362 0096 00E0     	 b .L103
 1363              	.L113:
 521:.././hal/sam3u1c/udc.c **** 		}
 1364              	 .loc 1 521 4
 1365 0098 00BF     	 nop
 1366              	.L103:
 550:.././hal/sam3u1c/udc.c **** 	}
 551:.././hal/sam3u1c/udc.c **** 	return false;
 1367              	 .loc 1 551 9
 1368 009a 0023     	 movs r3,#0
 1369              	.L98:
 552:.././hal/sam3u1c/udc.c **** }
 1370              	 .loc 1 552 1
 1371 009c 1846     	 mov r0,r3
 1372 009e 80BD     	 pop {r7,pc}
 1373              	.L116:
 1374              	 .align 2
 1375              	.L115:
 1376 00a0 00000000 	 .word udd_g_ctrlreq
 1377 00a4 00000000 	 .word udd_is_high_speed
 1378 00a8 00000000 	 .word udc_reset
 1379 00ac 00000000 	 .word udd_test_mode_j
 1380 00b0 00000000 	 .word udd_test_mode_k
 1381 00b4 00000000 	 .word udd_test_mode_se0_nak
 1382 00b8 00000000 	 .word udd_test_mode_packet
 1383              	 .cfi_endproc
 1384              	.LFE88:
 1386              	 .section .text.udc_req_std_ep_set_feature,"ax",%progbits
 1387              	 .align 1
 1388              	 .syntax unified
 1389              	 .thumb
 1390              	 .thumb_func
 1391              	 .fpu softvfp
 1393              	udc_req_std_ep_set_feature:
 1394              	.LFB89:
 553:.././hal/sam3u1c/udc.c **** 
 554:.././hal/sam3u1c/udc.c **** /**
 555:.././hal/sam3u1c/udc.c ****  * \brief Standard endpoint request to halt an endpoint
 556:.././hal/sam3u1c/udc.c ****  *
 557:.././hal/sam3u1c/udc.c ****  * \return true if success
 558:.././hal/sam3u1c/udc.c ****  */
 559:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 560:.././hal/sam3u1c/udc.c **** static bool udc_req_std_ep_set_feature(void)
 561:.././hal/sam3u1c/udc.c **** {
 1395              	 .loc 1 561 1
 1396              	 .cfi_startproc
 1397              	 
 1398              	 
 1399 0000 80B5     	 push {r7,lr}
 1400              	.LCFI58:
 1401              	 .cfi_def_cfa_offset 8
 1402              	 .cfi_offset 7,-8
 1403              	 .cfi_offset 14,-4
 1404 0002 00AF     	 add r7,sp,#0
 1405              	.LCFI59:
 1406              	 .cfi_def_cfa_register 7
 562:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1407              	 .loc 1 562 23
 1408 0004 0D4B     	 ldr r3,.L121
 1409 0006 DB88     	 ldrh r3,[r3,#6]
 1410              	 .loc 1 562 5
 1411 0008 002B     	 cmp r3,#0
 1412 000a 01D0     	 beq .L118
 563:.././hal/sam3u1c/udc.c **** 		return false;
 1413              	 .loc 1 563 10
 1414 000c 0023     	 movs r3,#0
 1415 000e 12E0     	 b .L119
 1416              	.L118:
 564:.././hal/sam3u1c/udc.c **** 	}
 565:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wValue == USB_EP_FEATURE_HALT) {
 1417              	 .loc 1 565 23
 1418 0010 0A4B     	 ldr r3,.L121
 1419 0012 5B88     	 ldrh r3,[r3,#2]
 1420              	 .loc 1 565 5
 1421 0014 002B     	 cmp r3,#0
 1422 0016 0DD1     	 bne .L120
 566:.././hal/sam3u1c/udc.c **** 		udd_ep_abort(udd_g_ctrlreq.req.wIndex & 0xFF);
 1423              	 .loc 1 566 33
 1424 0018 084B     	 ldr r3,.L121
 1425 001a 9B88     	 ldrh r3,[r3,#4]
 1426              	 .loc 1 566 3
 1427 001c DBB2     	 uxtb r3,r3
 1428 001e 1846     	 mov r0,r3
 1429 0020 074B     	 ldr r3,.L121+4
 1430 0022 9847     	 blx r3
 1431              	.LVL23:
 567:.././hal/sam3u1c/udc.c **** 		return udd_ep_set_halt(udd_g_ctrlreq.req.wIndex & 0xFF);
 1432              	 .loc 1 567 43
 1433 0024 054B     	 ldr r3,.L121
 1434 0026 9B88     	 ldrh r3,[r3,#4]
 1435              	 .loc 1 567 10
 1436 0028 DBB2     	 uxtb r3,r3
 1437 002a 1846     	 mov r0,r3
 1438 002c 054B     	 ldr r3,.L121+8
 1439 002e 9847     	 blx r3
 1440              	.LVL24:
 1441 0030 0346     	 mov r3,r0
 1442 0032 00E0     	 b .L119
 1443              	.L120:
 568:.././hal/sam3u1c/udc.c **** 	}
 569:.././hal/sam3u1c/udc.c **** 	return false;
 1444              	 .loc 1 569 9
 1445 0034 0023     	 movs r3,#0
 1446              	.L119:
 570:.././hal/sam3u1c/udc.c **** }
 1447              	 .loc 1 570 1
 1448 0036 1846     	 mov r0,r3
 1449 0038 80BD     	 pop {r7,pc}
 1450              	.L122:
 1451 003a 00BF     	 .align 2
 1452              	.L121:
 1453 003c 00000000 	 .word udd_g_ctrlreq
 1454 0040 00000000 	 .word udd_ep_abort
 1455 0044 00000000 	 .word udd_ep_set_halt
 1456              	 .cfi_endproc
 1457              	.LFE89:
 1459              	 .section .text.udc_valid_address,"ax",%progbits
 1460              	 .align 1
 1461              	 .syntax unified
 1462              	 .thumb
 1463              	 .thumb_func
 1464              	 .fpu softvfp
 1466              	udc_valid_address:
 1467              	.LFB90:
 571:.././hal/sam3u1c/udc.c **** #endif
 572:.././hal/sam3u1c/udc.c **** 
 573:.././hal/sam3u1c/udc.c **** /**
 574:.././hal/sam3u1c/udc.c ****  * \brief Change the address of device
 575:.././hal/sam3u1c/udc.c ****  * Callback called at the end of request set address
 576:.././hal/sam3u1c/udc.c ****  */
 577:.././hal/sam3u1c/udc.c **** static void udc_valid_address(void)
 578:.././hal/sam3u1c/udc.c **** {
 1468              	 .loc 1 578 1
 1469              	 .cfi_startproc
 1470              	 
 1471              	 
 1472 0000 80B5     	 push {r7,lr}
 1473              	.LCFI60:
 1474              	 .cfi_def_cfa_offset 8
 1475              	 .cfi_offset 7,-8
 1476              	 .cfi_offset 14,-4
 1477 0002 00AF     	 add r7,sp,#0
 1478              	.LCFI61:
 1479              	 .cfi_def_cfa_register 7
 579:.././hal/sam3u1c/udc.c **** 	udd_set_address(udd_g_ctrlreq.req.wValue & 0x7F);
 1480              	 .loc 1 579 35
 1481 0004 054B     	 ldr r3,.L124
 1482 0006 5B88     	 ldrh r3,[r3,#2]
 1483              	 .loc 1 579 43
 1484 0008 DBB2     	 uxtb r3,r3
 1485              	 .loc 1 579 2
 1486 000a 03F07F03 	 and r3,r3,#127
 1487 000e DBB2     	 uxtb r3,r3
 1488 0010 1846     	 mov r0,r3
 1489 0012 034B     	 ldr r3,.L124+4
 1490 0014 9847     	 blx r3
 1491              	.LVL25:
 580:.././hal/sam3u1c/udc.c **** }
 1492              	 .loc 1 580 1
 1493 0016 00BF     	 nop
 1494 0018 80BD     	 pop {r7,pc}
 1495              	.L125:
 1496 001a 00BF     	 .align 2
 1497              	.L124:
 1498 001c 00000000 	 .word udd_g_ctrlreq
 1499 0020 00000000 	 .word udd_set_address
 1500              	 .cfi_endproc
 1501              	.LFE90:
 1503              	 .section .text.udc_req_std_dev_set_address,"ax",%progbits
 1504              	 .align 1
 1505              	 .syntax unified
 1506              	 .thumb
 1507              	 .thumb_func
 1508              	 .fpu softvfp
 1510              	udc_req_std_dev_set_address:
 1511              	.LFB91:
 581:.././hal/sam3u1c/udc.c **** 
 582:.././hal/sam3u1c/udc.c **** /**
 583:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to set device address
 584:.././hal/sam3u1c/udc.c ****  *
 585:.././hal/sam3u1c/udc.c ****  * \return true if success
 586:.././hal/sam3u1c/udc.c ****  */
 587:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_set_address(void)
 588:.././hal/sam3u1c/udc.c **** {
 1512              	 .loc 1 588 1
 1513              	 .cfi_startproc
 1514              	 
 1515              	 
 1516              	 
 1517 0000 80B4     	 push {r7}
 1518              	.LCFI62:
 1519              	 .cfi_def_cfa_offset 4
 1520              	 .cfi_offset 7,-4
 1521 0002 00AF     	 add r7,sp,#0
 1522              	.LCFI63:
 1523              	 .cfi_def_cfa_register 7
 589:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1524              	 .loc 1 589 23
 1525 0004 064B     	 ldr r3,.L129
 1526 0006 DB88     	 ldrh r3,[r3,#6]
 1527              	 .loc 1 589 5
 1528 0008 002B     	 cmp r3,#0
 1529 000a 01D0     	 beq .L127
 590:.././hal/sam3u1c/udc.c **** 		return false;
 1530              	 .loc 1 590 10
 1531 000c 0023     	 movs r3,#0
 1532 000e 03E0     	 b .L128
 1533              	.L127:
 591:.././hal/sam3u1c/udc.c **** 	}
 592:.././hal/sam3u1c/udc.c **** 
 593:.././hal/sam3u1c/udc.c **** 	// The address must be changed at the end of setup request after the handshake
 594:.././hal/sam3u1c/udc.c **** 	// then we use a callback to change address
 595:.././hal/sam3u1c/udc.c **** 	udd_g_ctrlreq.callback = udc_valid_address;
 1534              	 .loc 1 595 25
 1535 0010 034B     	 ldr r3,.L129
 1536 0012 044A     	 ldr r2,.L129+4
 1537 0014 1A61     	 str r2,[r3,#16]
 596:.././hal/sam3u1c/udc.c **** 	return true;
 1538              	 .loc 1 596 9
 1539 0016 0123     	 movs r3,#1
 1540              	.L128:
 597:.././hal/sam3u1c/udc.c **** }
 1541              	 .loc 1 597 1
 1542 0018 1846     	 mov r0,r3
 1543 001a BD46     	 mov sp,r7
 1544              	.LCFI64:
 1545              	 .cfi_def_cfa_register 13
 1546              	 
 1547 001c 80BC     	 pop {r7}
 1548              	.LCFI65:
 1549              	 .cfi_restore 7
 1550              	 .cfi_def_cfa_offset 0
 1551 001e 7047     	 bx lr
 1552              	.L130:
 1553              	 .align 2
 1554              	.L129:
 1555 0020 00000000 	 .word udd_g_ctrlreq
 1556 0024 00000000 	 .word udc_valid_address
 1557              	 .cfi_endproc
 1558              	.LFE91:
 1560              	 .section .text.udc_req_std_dev_get_str_desc,"ax",%progbits
 1561              	 .align 1
 1562              	 .syntax unified
 1563              	 .thumb
 1564              	 .thumb_func
 1565              	 .fpu softvfp
 1567              	udc_req_std_dev_get_str_desc:
 1568              	.LFB92:
 598:.././hal/sam3u1c/udc.c **** 
 599:.././hal/sam3u1c/udc.c **** /**
 600:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to get device string descriptor
 601:.././hal/sam3u1c/udc.c ****  *
 602:.././hal/sam3u1c/udc.c ****  * \return true if success
 603:.././hal/sam3u1c/udc.c ****  */
 604:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_get_str_desc(void)
 605:.././hal/sam3u1c/udc.c **** {
 1569              	 .loc 1 605 1
 1570              	 .cfi_startproc
 1571              	 
 1572              	 
 1573 0000 80B5     	 push {r7,lr}
 1574              	.LCFI66:
 1575              	 .cfi_def_cfa_offset 8
 1576              	 .cfi_offset 7,-8
 1577              	 .cfi_offset 14,-4
 1578 0002 84B0     	 sub sp,sp,#16
 1579              	.LCFI67:
 1580              	 .cfi_def_cfa_offset 24
 1581 0004 00AF     	 add r7,sp,#0
 1582              	.LCFI68:
 1583              	 .cfi_def_cfa_register 7
 606:.././hal/sam3u1c/udc.c **** 	uint8_t i;
 607:.././hal/sam3u1c/udc.c **** 	const uint8_t *str;
 608:.././hal/sam3u1c/udc.c **** 	uint8_t str_length = 0;
 1584              	 .loc 1 608 10
 1585 0006 0023     	 movs r3,#0
 1586 0008 FB71     	 strb r3,[r7,#7]
 609:.././hal/sam3u1c/udc.c **** 
 610:.././hal/sam3u1c/udc.c **** 	// Link payload pointer to the string corresponding at request
 611:.././hal/sam3u1c/udc.c **** 	switch (udd_g_ctrlreq.req.wValue & 0xff) {
 1587              	 .loc 1 611 27
 1588 000a 294B     	 ldr r3,.L143
 1589 000c 5B88     	 ldrh r3,[r3,#2]
 1590              	 .loc 1 611 35
 1591 000e DBB2     	 uxtb r3,r3
 1592              	 .loc 1 611 2
 1593 0010 032B     	 cmp r3,#3
 1594 0012 20D8     	 bhi .L132
 1595 0014 01A2     	 adr r2,.L134
 1596 0016 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 1597 001a 00BF     	 .p2align 2
 1598              	.L134:
 1599 001c 2D000000 	 .word .L137+1
 1600 0020 37000000 	 .word .L136+1
 1601 0024 41000000 	 .word .L135+1
 1602 0028 4B000000 	 .word .L133+1
 1603              	 .p2align 1
 1604              	.L137:
 612:.././hal/sam3u1c/udc.c **** 	case 0:
 613:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload((uint8_t *) &udc_string_desc_languageid,
 1605              	 .loc 1 613 3
 1606 002c 0421     	 movs r1,#4
 1607 002e 2148     	 ldr r0,.L143+4
 1608 0030 214B     	 ldr r3,.L143+8
 1609 0032 9847     	 blx r3
 1610              	.LVL26:
 614:.././hal/sam3u1c/udc.c **** 				sizeof(udc_string_desc_languageid));
 615:.././hal/sam3u1c/udc.c **** 		break;
 1611              	 .loc 1 615 3
 1612 0034 11E0     	 b .L138
 1613              	.L136:
 616:.././hal/sam3u1c/udc.c **** 
 617:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_MANUFACTURE_NAME
 618:.././hal/sam3u1c/udc.c **** 	case 1:
 619:.././hal/sam3u1c/udc.c **** 		str_length = USB_DEVICE_MANUFACTURE_NAME_SIZE;
 1614              	 .loc 1 619 14
 1615 0036 1523     	 movs r3,#21
 1616 0038 FB71     	 strb r3,[r7,#7]
 620:.././hal/sam3u1c/udc.c **** 		str = udc_string_manufacturer_name;
 1617              	 .loc 1 620 7
 1618 003a 204B     	 ldr r3,.L143+12
 1619 003c BB60     	 str r3,[r7,#8]
 621:.././hal/sam3u1c/udc.c **** 		break;
 1620              	 .loc 1 621 3
 1621 003e 0CE0     	 b .L138
 1622              	.L135:
 622:.././hal/sam3u1c/udc.c **** #endif
 623:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_PRODUCT_NAME
 624:.././hal/sam3u1c/udc.c **** 	case 2:
 625:.././hal/sam3u1c/udc.c **** 		str_length = USB_DEVICE_PRODUCT_NAME_SIZE;
 1623              	 .loc 1 625 14
 1624 0040 1323     	 movs r3,#19
 1625 0042 FB71     	 strb r3,[r7,#7]
 626:.././hal/sam3u1c/udc.c **** 		str = udc_string_product_name;
 1626              	 .loc 1 626 7
 1627 0044 1E4B     	 ldr r3,.L143+16
 1628 0046 BB60     	 str r3,[r7,#8]
 627:.././hal/sam3u1c/udc.c **** 		break;
 1629              	 .loc 1 627 3
 1630 0048 07E0     	 b .L138
 1631              	.L133:
 628:.././hal/sam3u1c/udc.c **** #endif
 629:.././hal/sam3u1c/udc.c **** #if defined USB_DEVICE_SERIAL_NAME || defined USB_DEVICE_GET_SERIAL_NAME_POINTER
 630:.././hal/sam3u1c/udc.c **** 	case 3:
 631:.././hal/sam3u1c/udc.c **** 		str_length = USB_DEVICE_SERIAL_NAME_SIZE;
 1632              	 .loc 1 631 14
 1633 004a 2023     	 movs r3,#32
 1634 004c FB71     	 strb r3,[r7,#7]
 632:.././hal/sam3u1c/udc.c **** 		str = udc_get_string_serial_name();
 1635              	 .loc 1 632 9
 1636 004e 1D4B     	 ldr r3,.L143+20
 1637 0050 9847     	 blx r3
 1638              	.LVL27:
 1639 0052 B860     	 str r0,[r7,#8]
 633:.././hal/sam3u1c/udc.c **** 		break;
 1640              	 .loc 1 633 3
 1641 0054 01E0     	 b .L138
 1642              	.L132:
 634:.././hal/sam3u1c/udc.c **** #endif
 635:.././hal/sam3u1c/udc.c **** 	default:
 636:.././hal/sam3u1c/udc.c **** #ifdef UDC_GET_EXTRA_STRING
 637:.././hal/sam3u1c/udc.c **** 		if (UDC_GET_EXTRA_STRING()) {
 638:.././hal/sam3u1c/udc.c **** 			break;
 639:.././hal/sam3u1c/udc.c **** 		}
 640:.././hal/sam3u1c/udc.c **** #endif
 641:.././hal/sam3u1c/udc.c **** 		return false;
 1643              	 .loc 1 641 10
 1644 0056 0023     	 movs r3,#0
 1645 0058 26E0     	 b .L139
 1646              	.L138:
 642:.././hal/sam3u1c/udc.c **** 	}
 643:.././hal/sam3u1c/udc.c **** 
 644:.././hal/sam3u1c/udc.c **** 	if (str_length) {
 1647              	 .loc 1 644 5
 1648 005a FB79     	 ldrb r3,[r7,#7]
 1649 005c 002B     	 cmp r3,#0
 1650 005e 22D0     	 beq .L140
 645:.././hal/sam3u1c/udc.c **** 		for(i = 0; i < str_length; i++) {
 1651              	 .loc 1 645 9
 1652 0060 0023     	 movs r3,#0
 1653 0062 FB73     	 strb r3,[r7,#15]
 1654              	 .loc 1 645 3
 1655 0064 0DE0     	 b .L141
 1656              	.L142:
 646:.././hal/sam3u1c/udc.c **** 			udc_string_desc.string[i] = cpu_to_le16((le16_t)str[i]);
 1657              	 .loc 1 646 32 discriminator 3
 1658 0066 FB7B     	 ldrb r3,[r7,#15]
 1659 0068 BA68     	 ldr r2,[r7,#8]
 1660 006a 1344     	 add r3,r3,r2
 1661 006c 1A78     	 ldrb r2,[r3]
 1662              	 .loc 1 646 26 discriminator 3
 1663 006e FB7B     	 ldrb r3,[r7,#15]
 1664              	 .loc 1 646 32 discriminator 3
 1665 0070 91B2     	 uxth r1,r2
 1666              	 .loc 1 646 30 discriminator 3
 1667 0072 154A     	 ldr r2,.L143+24
 1668 0074 5B00     	 lsls r3,r3,#1
 1669 0076 1344     	 add r3,r3,r2
 1670 0078 0A46     	 mov r2,r1
 1671 007a 5A80     	 strh r2,[r3,#2]
 645:.././hal/sam3u1c/udc.c **** 		for(i = 0; i < str_length; i++) {
 1672              	 .loc 1 645 31 discriminator 3
 1673 007c FB7B     	 ldrb r3,[r7,#15]
 1674 007e 0133     	 adds r3,r3,#1
 1675 0080 FB73     	 strb r3,[r7,#15]
 1676              	.L141:
 645:.././hal/sam3u1c/udc.c **** 		for(i = 0; i < str_length; i++) {
 1677              	 .loc 1 645 3 discriminator 1
 1678 0082 FA7B     	 ldrb r2,[r7,#15]
 1679 0084 FB79     	 ldrb r3,[r7,#7]
 1680 0086 9A42     	 cmp r2,r3
 1681 0088 EDD3     	 bcc .L142
 647:.././hal/sam3u1c/udc.c **** 		}
 648:.././hal/sam3u1c/udc.c **** 
 649:.././hal/sam3u1c/udc.c **** 		udc_string_desc.header.bLength = 2 + (str_length) * 2;
 1682              	 .loc 1 649 34
 1683 008a FB79     	 ldrb r3,[r7,#7]
 1684 008c 0133     	 adds r3,r3,#1
 1685 008e DBB2     	 uxtb r3,r3
 1686 0090 5B00     	 lsls r3,r3,#1
 1687 0092 DAB2     	 uxtb r2,r3
 1688 0094 0C4B     	 ldr r3,.L143+24
 1689 0096 1A70     	 strb r2,[r3]
 650:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload(
 651:.././hal/sam3u1c/udc.c **** 			(uint8_t *) &udc_string_desc,
 652:.././hal/sam3u1c/udc.c **** 			udc_string_desc.header.bLength);
 1690              	 .loc 1 652 26
 1691 0098 0B4B     	 ldr r3,.L143+24
 1692 009a 1B78     	 ldrb r3,[r3]
 650:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload(
 1693              	 .loc 1 650 3
 1694 009c 9BB2     	 uxth r3,r3
 1695 009e 1946     	 mov r1,r3
 1696 00a0 0948     	 ldr r0,.L143+24
 1697 00a2 054B     	 ldr r3,.L143+8
 1698 00a4 9847     	 blx r3
 1699              	.LVL28:
 1700              	.L140:
 653:.././hal/sam3u1c/udc.c **** 	}
 654:.././hal/sam3u1c/udc.c **** 
 655:.././hal/sam3u1c/udc.c **** 	return true;
 1701              	 .loc 1 655 9
 1702 00a6 0123     	 movs r3,#1
 1703              	.L139:
 656:.././hal/sam3u1c/udc.c **** }
 1704              	 .loc 1 656 1
 1705 00a8 1846     	 mov r0,r3
 1706 00aa 1037     	 adds r7,r7,#16
 1707              	.LCFI69:
 1708              	 .cfi_def_cfa_offset 8
 1709 00ac BD46     	 mov sp,r7
 1710              	.LCFI70:
 1711              	 .cfi_def_cfa_register 13
 1712              	 
 1713 00ae 80BD     	 pop {r7,pc}
 1714              	.L144:
 1715              	 .align 2
 1716              	.L143:
 1717 00b0 00000000 	 .word udd_g_ctrlreq
 1718 00b4 00000000 	 .word udc_string_desc_languageid
 1719 00b8 00000000 	 .word udd_set_setup_payload
 1720 00bc 00000000 	 .word udc_string_manufacturer_name
 1721 00c0 00000000 	 .word udc_string_product_name
 1722 00c4 00000000 	 .word udc_get_string_serial_name
 1723 00c8 00000000 	 .word udc_string_desc
 1724              	 .cfi_endproc
 1725              	.LFE92:
 1727              	 .section .text.udc_req_std_dev_get_descriptor,"ax",%progbits
 1728              	 .align 1
 1729              	 .syntax unified
 1730              	 .thumb
 1731              	 .thumb_func
 1732              	 .fpu softvfp
 1734              	udc_req_std_dev_get_descriptor:
 1735              	.LFB93:
 657:.././hal/sam3u1c/udc.c **** 
 658:.././hal/sam3u1c/udc.c **** /**
 659:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to get descriptors about USB device
 660:.././hal/sam3u1c/udc.c ****  *
 661:.././hal/sam3u1c/udc.c ****  * \return true if success
 662:.././hal/sam3u1c/udc.c ****  */
 663:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_get_descriptor(void)
 664:.././hal/sam3u1c/udc.c **** {
 1736              	 .loc 1 664 1
 1737              	 .cfi_startproc
 1738              	 
 1739              	 
 1740 0000 80B5     	 push {r7,lr}
 1741              	.LCFI71:
 1742              	 .cfi_def_cfa_offset 8
 1743              	 .cfi_offset 7,-8
 1744              	 .cfi_offset 14,-4
 1745 0002 82B0     	 sub sp,sp,#8
 1746              	.LCFI72:
 1747              	 .cfi_def_cfa_offset 16
 1748 0004 00AF     	 add r7,sp,#0
 1749              	.LCFI73:
 1750              	 .cfi_def_cfa_register 7
 665:.././hal/sam3u1c/udc.c **** 	uint8_t conf_num;
 666:.././hal/sam3u1c/udc.c **** 
 667:.././hal/sam3u1c/udc.c **** 	conf_num = udd_g_ctrlreq.req.wValue & 0xff;
 1751              	 .loc 1 667 30
 1752 0006 804B     	 ldr r3,.L170
 1753 0008 5B88     	 ldrh r3,[r3,#2]
 1754              	 .loc 1 667 11
 1755 000a FB71     	 strb r3,[r7,#7]
 668:.././hal/sam3u1c/udc.c **** 
 669:.././hal/sam3u1c/udc.c **** 	// Check descriptor ID
 670:.././hal/sam3u1c/udc.c **** 	switch ((uint8_t) (udd_g_ctrlreq.req.wValue >> 8)) {
 1756              	 .loc 1 670 38
 1757 000c 7E4B     	 ldr r3,.L170
 1758 000e 5B88     	 ldrh r3,[r3,#2]
 1759              	 .loc 1 670 10
 1760 0010 1B0A     	 lsrs r3,r3,#8
 1761 0012 9BB2     	 uxth r3,r3
 1762 0014 DBB2     	 uxtb r3,r3
 1763              	 .loc 1 670 2
 1764 0016 013B     	 subs r3,r3,#1
 1765 0018 0E2B     	 cmp r3,#14
 1766 001a 00F2E280 	 bhi .L146
 1767 001e 01A2     	 adr r2,.L148
 1768 0020 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 1769              	 .p2align 2
 1770              	.L148:
 1771 0024 61000000 	 .word .L153+1
 1772 0028 9D000000 	 .word .L152+1
 1773 002c CF010000 	 .word .L151+1
 1774 0030 E3010000 	 .word .L146+1
 1775 0034 E3010000 	 .word .L146+1
 1776 0038 17010000 	 .word .L150+1
 1777 003c 2D010000 	 .word .L149+1
 1778 0040 E3010000 	 .word .L146+1
 1779 0044 E3010000 	 .word .L146+1
 1780 0048 E3010000 	 .word .L146+1
 1781 004c E3010000 	 .word .L146+1
 1782 0050 E3010000 	 .word .L146+1
 1783 0054 E3010000 	 .word .L146+1
 1784 0058 E3010000 	 .word .L146+1
 1785 005c AD010000 	 .word .L147+1
 1786              	 .p2align 1
 1787              	.L153:
 671:.././hal/sam3u1c/udc.c **** 	case USB_DT_DEVICE:
 672:.././hal/sam3u1c/udc.c **** 		// Device descriptor requested
 673:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 674:.././hal/sam3u1c/udc.c **** 		if (!udd_is_high_speed()) {
 1788              	 .loc 1 674 8
 1789 0060 6A4B     	 ldr r3,.L170+4
 1790 0062 9847     	 blx r3
 1791              	.LVL29:
 1792 0064 0346     	 mov r3,r0
 1793              	 .loc 1 674 7
 1794 0066 83F00103 	 eor r3,r3,#1
 1795 006a DBB2     	 uxtb r3,r3
 1796              	 .loc 1 674 6
 1797 006c 002B     	 cmp r3,#0
 1798 006e 0AD0     	 beq .L154
 675:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 676:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_config.confdev_hs,
 1799              	 .loc 1 676 27
 1800 0070 674B     	 ldr r3,.L170+8
 1801 0072 9A68     	 ldr r2,[r3,#8]
 677:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_hs->bLength);
 1802              	 .loc 1 677 15
 1803 0074 664B     	 ldr r3,.L170+8
 1804 0076 9B68     	 ldr r3,[r3,#8]
 1805              	 .loc 1 677 26
 1806 0078 1B78     	 ldrb r3,[r3]
 675:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 1807              	 .loc 1 675 4
 1808 007a 9BB2     	 uxth r3,r3
 1809 007c 1946     	 mov r1,r3
 1810 007e 1046     	 mov r0,r2
 1811 0080 644B     	 ldr r3,.L170+12
 1812 0082 9847     	 blx r3
 1813              	.LVL30:
 678:.././hal/sam3u1c/udc.c **** 		} else
 679:.././hal/sam3u1c/udc.c **** #endif
 680:.././hal/sam3u1c/udc.c **** 		{
 681:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 682:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_config.confdev_lsfs,
 683:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_lsfs->bLength);
 684:.././hal/sam3u1c/udc.c **** 		}
 685:.././hal/sam3u1c/udc.c **** 		break;
 1814              	 .loc 1 685 3
 1815 0084 B0E0     	 b .L156
 1816              	.L154:
 682:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_lsfs->bLength);
 1817              	 .loc 1 682 27
 1818 0086 624B     	 ldr r3,.L170+8
 1819 0088 1A68     	 ldr r2,[r3]
 683:.././hal/sam3u1c/udc.c **** 		}
 1820              	 .loc 1 683 15
 1821 008a 614B     	 ldr r3,.L170+8
 1822 008c 1B68     	 ldr r3,[r3]
 683:.././hal/sam3u1c/udc.c **** 		}
 1823              	 .loc 1 683 28
 1824 008e 1B78     	 ldrb r3,[r3]
 681:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_config.confdev_lsfs,
 1825              	 .loc 1 681 4
 1826 0090 9BB2     	 uxth r3,r3
 1827 0092 1946     	 mov r1,r3
 1828 0094 1046     	 mov r0,r2
 1829 0096 5F4B     	 ldr r3,.L170+12
 1830 0098 9847     	 blx r3
 1831              	.LVL31:
 1832              	 .loc 1 685 3
 1833 009a A5E0     	 b .L156
 1834              	.L152:
 686:.././hal/sam3u1c/udc.c **** 
 687:.././hal/sam3u1c/udc.c **** 	case USB_DT_CONFIGURATION:
 688:.././hal/sam3u1c/udc.c **** 		// Configuration descriptor requested
 689:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 690:.././hal/sam3u1c/udc.c **** 		if (udd_is_high_speed()) {
 1835              	 .loc 1 690 7
 1836 009c 5B4B     	 ldr r3,.L170+4
 1837 009e 9847     	 blx r3
 1838              	.LVL32:
 1839 00a0 0346     	 mov r3,r0
 1840              	 .loc 1 690 6
 1841 00a2 002B     	 cmp r3,#0
 1842 00a4 19D0     	 beq .L157
 691:.././hal/sam3u1c/udc.c **** 			// HS descriptor
 692:.././hal/sam3u1c/udc.c **** 			if (conf_num >= udc_config.confdev_hs->
 1843              	 .loc 1 692 30
 1844 00a6 5A4B     	 ldr r3,.L170+8
 1845 00a8 9B68     	 ldr r3,[r3,#8]
 1846              	 .loc 1 692 41
 1847 00aa 5B7C     	 ldrb r3,[r3,#17]
 1848              	 .loc 1 692 7
 1849 00ac FA79     	 ldrb r2,[r7,#7]
 1850 00ae 9A42     	 cmp r2,r3
 1851 00b0 01D3     	 bcc .L158
 693:.././hal/sam3u1c/udc.c **** 					bNumConfigurations) {
 694:.././hal/sam3u1c/udc.c **** 				return false;
 1852              	 .loc 1 694 12
 1853 00b2 0023     	 movs r3,#0
 1854 00b4 A3E0     	 b .L159
 1855              	.L158:
 695:.././hal/sam3u1c/udc.c **** 			}
 696:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 697:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_hs[conf_num].desc,
 1856              	 .loc 1 697 26
 1857 00b6 564B     	 ldr r3,.L170+8
 1858 00b8 1A69     	 ldr r2,[r3,#16]
 1859              	 .loc 1 697 34
 1860 00ba FB79     	 ldrb r3,[r7,#7]
 1861 00bc DB00     	 lsls r3,r3,#3
 1862 00be 1344     	 add r3,r3,r2
 1863              	 .loc 1 697 44
 1864 00c0 1868     	 ldr r0,[r3]
 698:.././hal/sam3u1c/udc.c **** 				le16_to_cpu(udc_config.conf_hs[conf_num].desc->wTotalLength));
 1865              	 .loc 1 698 5
 1866 00c2 534B     	 ldr r3,.L170+8
 1867 00c4 1A69     	 ldr r2,[r3,#16]
 1868 00c6 FB79     	 ldrb r3,[r7,#7]
 1869 00c8 DB00     	 lsls r3,r3,#3
 1870 00ca 1344     	 add r3,r3,r2
 1871 00cc 1B68     	 ldr r3,[r3]
 696:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_hs[conf_num].desc,
 1872              	 .loc 1 696 4
 1873 00ce 5B88     	 ldrh r3,[r3,#2]
 1874 00d0 9BB2     	 uxth r3,r3
 1875 00d2 1946     	 mov r1,r3
 1876 00d4 4F4B     	 ldr r3,.L170+12
 1877 00d6 9847     	 blx r3
 1878              	.LVL33:
 1879 00d8 18E0     	 b .L160
 1880              	.L157:
 699:.././hal/sam3u1c/udc.c **** 		} else
 700:.././hal/sam3u1c/udc.c **** #endif
 701:.././hal/sam3u1c/udc.c **** 		{
 702:.././hal/sam3u1c/udc.c **** 			// FS descriptor
 703:.././hal/sam3u1c/udc.c **** 			if (conf_num >= udc_config.confdev_lsfs->
 1881              	 .loc 1 703 30
 1882 00da 4D4B     	 ldr r3,.L170+8
 1883 00dc 1B68     	 ldr r3,[r3]
 1884              	 .loc 1 703 43
 1885 00de 5B7C     	 ldrb r3,[r3,#17]
 1886              	 .loc 1 703 7
 1887 00e0 FA79     	 ldrb r2,[r7,#7]
 1888 00e2 9A42     	 cmp r2,r3
 1889 00e4 01D3     	 bcc .L161
 704:.././hal/sam3u1c/udc.c **** 					bNumConfigurations) {
 705:.././hal/sam3u1c/udc.c **** 				return false;
 1890              	 .loc 1 705 12
 1891 00e6 0023     	 movs r3,#0
 1892 00e8 89E0     	 b .L159
 1893              	.L161:
 706:.././hal/sam3u1c/udc.c **** 			}
 707:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 708:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_lsfs[conf_num].desc,
 1894              	 .loc 1 708 26
 1895 00ea 494B     	 ldr r3,.L170+8
 1896 00ec 5A68     	 ldr r2,[r3,#4]
 1897              	 .loc 1 708 36
 1898 00ee FB79     	 ldrb r3,[r7,#7]
 1899 00f0 DB00     	 lsls r3,r3,#3
 1900 00f2 1344     	 add r3,r3,r2
 1901              	 .loc 1 708 46
 1902 00f4 1868     	 ldr r0,[r3]
 709:.././hal/sam3u1c/udc.c **** 				le16_to_cpu(udc_config.conf_lsfs[conf_num].desc->wTotalLength));
 1903              	 .loc 1 709 5
 1904 00f6 464B     	 ldr r3,.L170+8
 1905 00f8 5A68     	 ldr r2,[r3,#4]
 1906 00fa FB79     	 ldrb r3,[r7,#7]
 1907 00fc DB00     	 lsls r3,r3,#3
 1908 00fe 1344     	 add r3,r3,r2
 1909 0100 1B68     	 ldr r3,[r3]
 707:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_lsfs[conf_num].desc,
 1910              	 .loc 1 707 4
 1911 0102 5B88     	 ldrh r3,[r3,#2]
 1912 0104 9BB2     	 uxth r3,r3
 1913 0106 1946     	 mov r1,r3
 1914 0108 424B     	 ldr r3,.L170+12
 1915 010a 9847     	 blx r3
 1916              	.LVL34:
 1917              	.L160:
 710:.././hal/sam3u1c/udc.c **** 		}
 711:.././hal/sam3u1c/udc.c **** 		((usb_conf_desc_t *) udd_g_ctrlreq.payload)->bDescriptorType =
 1918              	 .loc 1 711 37
 1919 010c 3E4B     	 ldr r3,.L170
 1920 010e 9B68     	 ldr r3,[r3,#8]
 1921              	 .loc 1 711 64
 1922 0110 0222     	 movs r2,#2
 1923 0112 5A70     	 strb r2,[r3,#1]
 712:.././hal/sam3u1c/udc.c **** 				USB_DT_CONFIGURATION;
 713:.././hal/sam3u1c/udc.c **** 		break;
 1924              	 .loc 1 713 3
 1925 0114 68E0     	 b .L156
 1926              	.L150:
 714:.././hal/sam3u1c/udc.c **** 
 715:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 716:.././hal/sam3u1c/udc.c **** 	case USB_DT_DEVICE_QUALIFIER:
 717:.././hal/sam3u1c/udc.c **** 		// Device qualifier descriptor requested
 718:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload( (uint8_t *) udc_config.qualifier,
 1927              	 .loc 1 718 48
 1928 0116 3E4B     	 ldr r3,.L170+8
 1929 0118 DA68     	 ldr r2,[r3,#12]
 719:.././hal/sam3u1c/udc.c **** 				udc_config.qualifier->bLength);
 1930              	 .loc 1 719 15
 1931 011a 3D4B     	 ldr r3,.L170+8
 1932 011c DB68     	 ldr r3,[r3,#12]
 1933              	 .loc 1 719 25
 1934 011e 1B78     	 ldrb r3,[r3]
 718:.././hal/sam3u1c/udc.c **** 				udc_config.qualifier->bLength);
 1935              	 .loc 1 718 3
 1936 0120 9BB2     	 uxth r3,r3
 1937 0122 1946     	 mov r1,r3
 1938 0124 1046     	 mov r0,r2
 1939 0126 3B4B     	 ldr r3,.L170+12
 1940 0128 9847     	 blx r3
 1941              	.LVL35:
 720:.././hal/sam3u1c/udc.c **** 		break;
 1942              	 .loc 1 720 3
 1943 012a 5DE0     	 b .L156
 1944              	.L149:
 721:.././hal/sam3u1c/udc.c **** 
 722:.././hal/sam3u1c/udc.c **** 	case USB_DT_OTHER_SPEED_CONFIGURATION:
 723:.././hal/sam3u1c/udc.c **** 		// Other configuration descriptor requested
 724:.././hal/sam3u1c/udc.c **** 		if (!udd_is_high_speed()) {
 1945              	 .loc 1 724 8
 1946 012c 374B     	 ldr r3,.L170+4
 1947 012e 9847     	 blx r3
 1948              	.LVL36:
 1949 0130 0346     	 mov r3,r0
 1950              	 .loc 1 724 7
 1951 0132 83F00103 	 eor r3,r3,#1
 1952 0136 DBB2     	 uxtb r3,r3
 1953              	 .loc 1 724 6
 1954 0138 002B     	 cmp r3,#0
 1955 013a 19D0     	 beq .L162
 725:.././hal/sam3u1c/udc.c **** 			// HS descriptor
 726:.././hal/sam3u1c/udc.c **** 			if (conf_num >= udc_config.confdev_hs->
 1956              	 .loc 1 726 30
 1957 013c 344B     	 ldr r3,.L170+8
 1958 013e 9B68     	 ldr r3,[r3,#8]
 1959              	 .loc 1 726 41
 1960 0140 5B7C     	 ldrb r3,[r3,#17]
 1961              	 .loc 1 726 7
 1962 0142 FA79     	 ldrb r2,[r7,#7]
 1963 0144 9A42     	 cmp r2,r3
 1964 0146 01D3     	 bcc .L163
 727:.././hal/sam3u1c/udc.c **** 					bNumConfigurations) {
 728:.././hal/sam3u1c/udc.c **** 				return false;
 1965              	 .loc 1 728 12
 1966 0148 0023     	 movs r3,#0
 1967 014a 58E0     	 b .L159
 1968              	.L163:
 729:.././hal/sam3u1c/udc.c **** 			}
 730:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 731:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_hs[conf_num].desc,
 1969              	 .loc 1 731 26
 1970 014c 304B     	 ldr r3,.L170+8
 1971 014e 1A69     	 ldr r2,[r3,#16]
 1972              	 .loc 1 731 34
 1973 0150 FB79     	 ldrb r3,[r7,#7]
 1974 0152 DB00     	 lsls r3,r3,#3
 1975 0154 1344     	 add r3,r3,r2
 1976              	 .loc 1 731 44
 1977 0156 1868     	 ldr r0,[r3]
 732:.././hal/sam3u1c/udc.c **** 				le16_to_cpu(udc_config.conf_hs[conf_num].desc->wTotalLength));
 1978              	 .loc 1 732 5
 1979 0158 2D4B     	 ldr r3,.L170+8
 1980 015a 1A69     	 ldr r2,[r3,#16]
 1981 015c FB79     	 ldrb r3,[r7,#7]
 1982 015e DB00     	 lsls r3,r3,#3
 1983 0160 1344     	 add r3,r3,r2
 1984 0162 1B68     	 ldr r3,[r3]
 730:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_hs[conf_num].desc,
 1985              	 .loc 1 730 4
 1986 0164 5B88     	 ldrh r3,[r3,#2]
 1987 0166 9BB2     	 uxth r3,r3
 1988 0168 1946     	 mov r1,r3
 1989 016a 2A4B     	 ldr r3,.L170+12
 1990 016c 9847     	 blx r3
 1991              	.LVL37:
 1992 016e 18E0     	 b .L164
 1993              	.L162:
 733:.././hal/sam3u1c/udc.c **** 		} else {
 734:.././hal/sam3u1c/udc.c **** 			// FS descriptor
 735:.././hal/sam3u1c/udc.c **** 			if (conf_num >= udc_config.confdev_lsfs->
 1994              	 .loc 1 735 30
 1995 0170 274B     	 ldr r3,.L170+8
 1996 0172 1B68     	 ldr r3,[r3]
 1997              	 .loc 1 735 43
 1998 0174 5B7C     	 ldrb r3,[r3,#17]
 1999              	 .loc 1 735 7
 2000 0176 FA79     	 ldrb r2,[r7,#7]
 2001 0178 9A42     	 cmp r2,r3
 2002 017a 01D3     	 bcc .L165
 736:.././hal/sam3u1c/udc.c **** 					bNumConfigurations) {
 737:.././hal/sam3u1c/udc.c **** 				return false;
 2003              	 .loc 1 737 12
 2004 017c 0023     	 movs r3,#0
 2005 017e 3EE0     	 b .L159
 2006              	.L165:
 738:.././hal/sam3u1c/udc.c **** 			}
 739:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 740:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_lsfs[conf_num].desc,
 2007              	 .loc 1 740 26
 2008 0180 234B     	 ldr r3,.L170+8
 2009 0182 5A68     	 ldr r2,[r3,#4]
 2010              	 .loc 1 740 36
 2011 0184 FB79     	 ldrb r3,[r7,#7]
 2012 0186 DB00     	 lsls r3,r3,#3
 2013 0188 1344     	 add r3,r3,r2
 2014              	 .loc 1 740 46
 2015 018a 1868     	 ldr r0,[r3]
 741:.././hal/sam3u1c/udc.c **** 				le16_to_cpu(udc_config.conf_lsfs[conf_num].desc->wTotalLength));
 2016              	 .loc 1 741 5
 2017 018c 204B     	 ldr r3,.L170+8
 2018 018e 5A68     	 ldr r2,[r3,#4]
 2019 0190 FB79     	 ldrb r3,[r7,#7]
 2020 0192 DB00     	 lsls r3,r3,#3
 2021 0194 1344     	 add r3,r3,r2
 2022 0196 1B68     	 ldr r3,[r3]
 739:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_lsfs[conf_num].desc,
 2023              	 .loc 1 739 4
 2024 0198 5B88     	 ldrh r3,[r3,#2]
 2025 019a 9BB2     	 uxth r3,r3
 2026 019c 1946     	 mov r1,r3
 2027 019e 1D4B     	 ldr r3,.L170+12
 2028 01a0 9847     	 blx r3
 2029              	.LVL38:
 2030              	.L164:
 742:.././hal/sam3u1c/udc.c **** 		}
 743:.././hal/sam3u1c/udc.c **** 		((usb_conf_desc_t *) udd_g_ctrlreq.payload)->bDescriptorType =
 2031              	 .loc 1 743 37
 2032 01a2 194B     	 ldr r3,.L170
 2033 01a4 9B68     	 ldr r3,[r3,#8]
 2034              	 .loc 1 743 64
 2035 01a6 0722     	 movs r2,#7
 2036 01a8 5A70     	 strb r2,[r3,#1]
 744:.././hal/sam3u1c/udc.c **** 				USB_DT_OTHER_SPEED_CONFIGURATION;
 745:.././hal/sam3u1c/udc.c **** 		break;
 2037              	 .loc 1 745 3
 2038 01aa 1DE0     	 b .L156
 2039              	.L147:
 746:.././hal/sam3u1c/udc.c **** #endif
 747:.././hal/sam3u1c/udc.c **** 
 748:.././hal/sam3u1c/udc.c **** 	case USB_DT_BOS:
 749:.././hal/sam3u1c/udc.c **** 		// Device BOS descriptor requested
 750:.././hal/sam3u1c/udc.c **** 		if (udc_config.conf_bos == NULL) {
 2040              	 .loc 1 750 17
 2041 01ac 184B     	 ldr r3,.L170+8
 2042 01ae 5B69     	 ldr r3,[r3,#20]
 2043              	 .loc 1 750 6
 2044 01b0 002B     	 cmp r3,#0
 2045 01b2 01D1     	 bne .L166
 751:.././hal/sam3u1c/udc.c **** 			return false;
 2046              	 .loc 1 751 11
 2047 01b4 0023     	 movs r3,#0
 2048 01b6 22E0     	 b .L159
 2049              	.L166:
 752:.././hal/sam3u1c/udc.c **** 		}
 753:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload( (uint8_t *) udc_config.conf_bos,
 2050              	 .loc 1 753 48
 2051 01b8 154B     	 ldr r3,.L170+8
 2052 01ba 5A69     	 ldr r2,[r3,#20]
 754:.././hal/sam3u1c/udc.c **** 				udc_config.conf_bos->wTotalLength);
 2053              	 .loc 1 754 15
 2054 01bc 144B     	 ldr r3,.L170+8
 2055 01be 5B69     	 ldr r3,[r3,#20]
 753:.././hal/sam3u1c/udc.c **** 				udc_config.conf_bos->wTotalLength);
 2056              	 .loc 1 753 3
 2057 01c0 5B88     	 ldrh r3,[r3,#2]
 2058 01c2 9BB2     	 uxth r3,r3
 2059 01c4 1946     	 mov r1,r3
 2060 01c6 1046     	 mov r0,r2
 2061 01c8 124B     	 ldr r3,.L170+12
 2062 01ca 9847     	 blx r3
 2063              	.LVL39:
 755:.././hal/sam3u1c/udc.c **** 		break;
 2064              	 .loc 1 755 3
 2065 01cc 0CE0     	 b .L156
 2066              	.L151:
 756:.././hal/sam3u1c/udc.c **** 
 757:.././hal/sam3u1c/udc.c **** 	case USB_DT_STRING:
 758:.././hal/sam3u1c/udc.c **** 		// String descriptor requested
 759:.././hal/sam3u1c/udc.c **** 		if (!udc_req_std_dev_get_str_desc()) {
 2067              	 .loc 1 759 8
 2068 01ce 124B     	 ldr r3,.L170+16
 2069 01d0 9847     	 blx r3
 2070              	.LVL40:
 2071 01d2 0346     	 mov r3,r0
 2072              	 .loc 1 759 7
 2073 01d4 83F00103 	 eor r3,r3,#1
 2074 01d8 DBB2     	 uxtb r3,r3
 2075              	 .loc 1 759 6
 2076 01da 002B     	 cmp r3,#0
 2077 01dc 03D0     	 beq .L169
 760:.././hal/sam3u1c/udc.c **** 			return false;
 2078              	 .loc 1 760 11
 2079 01de 0023     	 movs r3,#0
 2080 01e0 0DE0     	 b .L159
 2081              	.L146:
 761:.././hal/sam3u1c/udc.c **** 		}
 762:.././hal/sam3u1c/udc.c **** 		break;
 763:.././hal/sam3u1c/udc.c **** 
 764:.././hal/sam3u1c/udc.c **** 	default:
 765:.././hal/sam3u1c/udc.c **** 		// Unknown descriptor requested
 766:.././hal/sam3u1c/udc.c **** 		return false;
 2082              	 .loc 1 766 10
 2083 01e2 0023     	 movs r3,#0
 2084 01e4 0BE0     	 b .L159
 2085              	.L169:
 762:.././hal/sam3u1c/udc.c **** 
 2086              	 .loc 1 762 3
 2087 01e6 00BF     	 nop
 2088              	.L156:
 767:.././hal/sam3u1c/udc.c **** 	}
 768:.././hal/sam3u1c/udc.c **** 	// if the descriptor is larger than length requested, then reduce it
 769:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength < udd_g_ctrlreq.payload_size) {
 2089              	 .loc 1 769 23
 2090 01e8 074B     	 ldr r3,.L170
 2091 01ea DA88     	 ldrh r2,[r3,#6]
 2092              	 .loc 1 769 47
 2093 01ec 064B     	 ldr r3,.L170
 2094 01ee 9B89     	 ldrh r3,[r3,#12]
 2095              	 .loc 1 769 5
 2096 01f0 9A42     	 cmp r2,r3
 2097 01f2 03D2     	 bcs .L168
 770:.././hal/sam3u1c/udc.c **** 		udd_g_ctrlreq.payload_size = udd_g_ctrlreq.req.wLength;
 2098              	 .loc 1 770 49
 2099 01f4 044B     	 ldr r3,.L170
 2100 01f6 DA88     	 ldrh r2,[r3,#6]
 2101              	 .loc 1 770 30
 2102 01f8 034B     	 ldr r3,.L170
 2103 01fa 9A81     	 strh r2,[r3,#12]
 2104              	.L168:
 771:.././hal/sam3u1c/udc.c **** 	}
 772:.././hal/sam3u1c/udc.c **** 	return true;
 2105              	 .loc 1 772 9
 2106 01fc 0123     	 movs r3,#1
 2107              	.L159:
 773:.././hal/sam3u1c/udc.c **** }
 2108              	 .loc 1 773 1
 2109 01fe 1846     	 mov r0,r3
 2110 0200 0837     	 adds r7,r7,#8
 2111              	.LCFI74:
 2112              	 .cfi_def_cfa_offset 8
 2113 0202 BD46     	 mov sp,r7
 2114              	.LCFI75:
 2115              	 .cfi_def_cfa_register 13
 2116              	 
 2117 0204 80BD     	 pop {r7,pc}
 2118              	.L171:
 2119 0206 00BF     	 .align 2
 2120              	.L170:
 2121 0208 00000000 	 .word udd_g_ctrlreq
 2122 020c 00000000 	 .word udd_is_high_speed
 2123 0210 00000000 	 .word udc_config
 2124 0214 00000000 	 .word udd_set_setup_payload
 2125 0218 00000000 	 .word udc_req_std_dev_get_str_desc
 2126              	 .cfi_endproc
 2127              	.LFE93:
 2129              	 .section .text.udc_req_std_dev_get_configuration,"ax",%progbits
 2130              	 .align 1
 2131              	 .syntax unified
 2132              	 .thumb
 2133              	 .thumb_func
 2134              	 .fpu softvfp
 2136              	udc_req_std_dev_get_configuration:
 2137              	.LFB94:
 774:.././hal/sam3u1c/udc.c **** 
 775:.././hal/sam3u1c/udc.c **** /**
 776:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to get configuration number
 777:.././hal/sam3u1c/udc.c ****  *
 778:.././hal/sam3u1c/udc.c ****  * \return true if success
 779:.././hal/sam3u1c/udc.c ****  */
 780:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_get_configuration(void)
 781:.././hal/sam3u1c/udc.c **** {
 2138              	 .loc 1 781 1
 2139              	 .cfi_startproc
 2140              	 
 2141              	 
 2142 0000 80B5     	 push {r7,lr}
 2143              	.LCFI76:
 2144              	 .cfi_def_cfa_offset 8
 2145              	 .cfi_offset 7,-8
 2146              	 .cfi_offset 14,-4
 2147 0002 00AF     	 add r7,sp,#0
 2148              	.LCFI77:
 2149              	 .cfi_def_cfa_register 7
 782:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength != 1) {
 2150              	 .loc 1 782 23
 2151 0004 064B     	 ldr r3,.L175
 2152 0006 DB88     	 ldrh r3,[r3,#6]
 2153              	 .loc 1 782 5
 2154 0008 012B     	 cmp r3,#1
 2155 000a 01D0     	 beq .L173
 783:.././hal/sam3u1c/udc.c **** 		return false;
 2156              	 .loc 1 783 10
 2157 000c 0023     	 movs r3,#0
 2158 000e 04E0     	 b .L174
 2159              	.L173:
 784:.././hal/sam3u1c/udc.c **** 	}
 785:.././hal/sam3u1c/udc.c **** 
 786:.././hal/sam3u1c/udc.c **** 	udd_set_setup_payload(&udc_num_configuration,1);
 2160              	 .loc 1 786 2
 2161 0010 0121     	 movs r1,#1
 2162 0012 0448     	 ldr r0,.L175+4
 2163 0014 044B     	 ldr r3,.L175+8
 2164 0016 9847     	 blx r3
 2165              	.LVL41:
 787:.././hal/sam3u1c/udc.c **** 	return true;
 2166              	 .loc 1 787 9
 2167 0018 0123     	 movs r3,#1
 2168              	.L174:
 788:.././hal/sam3u1c/udc.c **** }
 2169              	 .loc 1 788 1
 2170 001a 1846     	 mov r0,r3
 2171 001c 80BD     	 pop {r7,pc}
 2172              	.L176:
 2173 001e 00BF     	 .align 2
 2174              	.L175:
 2175 0020 00000000 	 .word udd_g_ctrlreq
 2176 0024 00000000 	 .word udc_num_configuration
 2177 0028 00000000 	 .word udd_set_setup_payload
 2178              	 .cfi_endproc
 2179              	.LFE94:
 2181              	 .section .text.udc_req_std_dev_set_configuration,"ax",%progbits
 2182              	 .align 1
 2183              	 .syntax unified
 2184              	 .thumb
 2185              	 .thumb_func
 2186              	 .fpu softvfp
 2188              	udc_req_std_dev_set_configuration:
 2189              	.LFB95:
 789:.././hal/sam3u1c/udc.c **** 
 790:.././hal/sam3u1c/udc.c **** /**
 791:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to enable a configuration
 792:.././hal/sam3u1c/udc.c ****  *
 793:.././hal/sam3u1c/udc.c ****  * \return true if success
 794:.././hal/sam3u1c/udc.c ****  */
 795:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_set_configuration(void)
 796:.././hal/sam3u1c/udc.c **** {
 2190              	 .loc 1 796 1
 2191              	 .cfi_startproc
 2192              	 
 2193              	 
 2194 0000 80B5     	 push {r7,lr}
 2195              	.LCFI78:
 2196              	 .cfi_def_cfa_offset 8
 2197              	 .cfi_offset 7,-8
 2198              	 .cfi_offset 14,-4
 2199 0002 82B0     	 sub sp,sp,#8
 2200              	.LCFI79:
 2201              	 .cfi_def_cfa_offset 16
 2202 0004 00AF     	 add r7,sp,#0
 2203              	.LCFI80:
 2204              	 .cfi_def_cfa_register 7
 797:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
 798:.././hal/sam3u1c/udc.c **** 
 799:.././hal/sam3u1c/udc.c **** 	// Check request length
 800:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 2205              	 .loc 1 800 23
 2206 0006 374B     	 ldr r3,.L189
 2207 0008 DB88     	 ldrh r3,[r3,#6]
 2208              	 .loc 1 800 5
 2209 000a 002B     	 cmp r3,#0
 2210 000c 01D0     	 beq .L178
 801:.././hal/sam3u1c/udc.c **** 		return false;
 2211              	 .loc 1 801 10
 2212 000e 0023     	 movs r3,#0
 2213 0010 63E0     	 b .L179
 2214              	.L178:
 802:.././hal/sam3u1c/udc.c **** 	}
 803:.././hal/sam3u1c/udc.c **** 	// Authorize configuration only if the address is valid
 804:.././hal/sam3u1c/udc.c **** 	if (!udd_getaddress()) {
 2215              	 .loc 1 804 7
 2216 0012 354B     	 ldr r3,.L189+4
 2217 0014 9847     	 blx r3
 2218              	.LVL42:
 2219 0016 0346     	 mov r3,r0
 2220              	 .loc 1 804 5
 2221 0018 002B     	 cmp r3,#0
 2222 001a 01D1     	 bne .L180
 805:.././hal/sam3u1c/udc.c **** 		return false;
 2223              	 .loc 1 805 10
 2224 001c 0023     	 movs r3,#0
 2225 001e 5CE0     	 b .L179
 2226              	.L180:
 806:.././hal/sam3u1c/udc.c **** 	}
 807:.././hal/sam3u1c/udc.c **** 	// Check the configuration number requested
 808:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 809:.././hal/sam3u1c/udc.c **** 	if (udd_is_high_speed()) {
 2227              	 .loc 1 809 6
 2228 0020 324B     	 ldr r3,.L189+8
 2229 0022 9847     	 blx r3
 2230              	.LVL43:
 2231 0024 0346     	 mov r3,r0
 2232              	 .loc 1 809 5
 2233 0026 002B     	 cmp r3,#0
 2234 0028 09D0     	 beq .L181
 810:.././hal/sam3u1c/udc.c **** 		// HS descriptor
 811:.././hal/sam3u1c/udc.c **** 		if ((udd_g_ctrlreq.req.wValue & 0xFF) >
 2235              	 .loc 1 811 25
 2236 002a 2E4B     	 ldr r3,.L189
 2237 002c 5B88     	 ldrh r3,[r3,#2]
 2238              	 .loc 1 811 33
 2239 002e DBB2     	 uxtb r3,r3
 812:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_hs->bNumConfigurations) {
 2240              	 .loc 1 812 15
 2241 0030 2F4A     	 ldr r2,.L189+12
 2242 0032 9268     	 ldr r2,[r2,#8]
 2243              	 .loc 1 812 26
 2244 0034 527C     	 ldrb r2,[r2,#17]
 811:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_hs->bNumConfigurations) {
 2245              	 .loc 1 811 6
 2246 0036 9342     	 cmp r3,r2
 2247 0038 0BDD     	 ble .L182
 813:.././hal/sam3u1c/udc.c **** 			return false;
 2248              	 .loc 1 813 11
 2249 003a 0023     	 movs r3,#0
 2250 003c 4DE0     	 b .L179
 2251              	.L181:
 814:.././hal/sam3u1c/udc.c **** 		}
 815:.././hal/sam3u1c/udc.c **** 	} else
 816:.././hal/sam3u1c/udc.c **** #endif
 817:.././hal/sam3u1c/udc.c **** 	{
 818:.././hal/sam3u1c/udc.c **** 		// FS descriptor
 819:.././hal/sam3u1c/udc.c **** 		if ((udd_g_ctrlreq.req.wValue & 0xFF) >
 2252              	 .loc 1 819 25
 2253 003e 294B     	 ldr r3,.L189
 2254 0040 5B88     	 ldrh r3,[r3,#2]
 2255              	 .loc 1 819 33
 2256 0042 DBB2     	 uxtb r3,r3
 820:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_lsfs->bNumConfigurations) {
 2257              	 .loc 1 820 15
 2258 0044 2A4A     	 ldr r2,.L189+12
 2259 0046 1268     	 ldr r2,[r2]
 2260              	 .loc 1 820 28
 2261 0048 527C     	 ldrb r2,[r2,#17]
 819:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_lsfs->bNumConfigurations) {
 2262              	 .loc 1 819 6
 2263 004a 9342     	 cmp r3,r2
 2264 004c 01DD     	 ble .L182
 821:.././hal/sam3u1c/udc.c **** 			return false;
 2265              	 .loc 1 821 11
 2266 004e 0023     	 movs r3,#0
 2267 0050 43E0     	 b .L179
 2268              	.L182:
 822:.././hal/sam3u1c/udc.c **** 		}
 823:.././hal/sam3u1c/udc.c **** 	}
 824:.././hal/sam3u1c/udc.c **** 
 825:.././hal/sam3u1c/udc.c **** 	// Reset current configuration
 826:.././hal/sam3u1c/udc.c **** 	udc_reset();
 2269              	 .loc 1 826 2
 2270 0052 284B     	 ldr r3,.L189+16
 2271 0054 9847     	 blx r3
 2272              	.LVL44:
 827:.././hal/sam3u1c/udc.c **** 
 828:.././hal/sam3u1c/udc.c **** 	// Enable new configuration
 829:.././hal/sam3u1c/udc.c **** 	udc_num_configuration = udd_g_ctrlreq.req.wValue & 0xFF;
 2273              	 .loc 1 829 43
 2274 0056 234B     	 ldr r3,.L189
 2275 0058 5B88     	 ldrh r3,[r3,#2]
 2276              	 .loc 1 829 24
 2277 005a DAB2     	 uxtb r2,r3
 2278 005c 264B     	 ldr r3,.L189+20
 2279 005e 1A70     	 strb r2,[r3]
 830:.././hal/sam3u1c/udc.c **** 	if (udc_num_configuration == 0) {
 2280              	 .loc 1 830 28
 2281 0060 254B     	 ldr r3,.L189+20
 2282 0062 1B78     	 ldrb r3,[r3]
 2283              	 .loc 1 830 5
 2284 0064 002B     	 cmp r3,#0
 2285 0066 01D1     	 bne .L183
 831:.././hal/sam3u1c/udc.c **** 		return true; // Default empty configuration requested
 2286              	 .loc 1 831 10
 2287 0068 0123     	 movs r3,#1
 2288 006a 36E0     	 b .L179
 2289              	.L183:
 832:.././hal/sam3u1c/udc.c **** 	}
 833:.././hal/sam3u1c/udc.c **** 	// Update pointer of the configuration descriptor
 834:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 835:.././hal/sam3u1c/udc.c **** 	if (udd_is_high_speed()) {
 2290              	 .loc 1 835 6
 2291 006c 1F4B     	 ldr r3,.L189+8
 2292 006e 9847     	 blx r3
 2293              	.LVL45:
 2294 0070 0346     	 mov r3,r0
 2295              	 .loc 1 835 5
 2296 0072 002B     	 cmp r3,#0
 2297 0074 0BD0     	 beq .L184
 836:.././hal/sam3u1c/udc.c **** 		// HS descriptor
 837:.././hal/sam3u1c/udc.c **** 		udc_ptr_conf = &udc_config.conf_hs[udc_num_configuration - 1];
 2298              	 .loc 1 837 29
 2299 0076 1E4B     	 ldr r3,.L189+12
 2300 0078 1A69     	 ldr r2,[r3,#16]
 2301              	 .loc 1 837 37
 2302 007a 1F4B     	 ldr r3,.L189+20
 2303 007c 1B78     	 ldrb r3,[r3]
 2304              	 .loc 1 837 18
 2305 007e 03F10053 	 add r3,r3,#536870912
 2306 0082 013B     	 subs r3,r3,#1
 2307 0084 DB00     	 lsls r3,r3,#3
 2308 0086 1344     	 add r3,r3,r2
 2309              	 .loc 1 837 16
 2310 0088 1C4A     	 ldr r2,.L189+24
 2311 008a 1360     	 str r3,[r2]
 2312 008c 0AE0     	 b .L185
 2313              	.L184:
 838:.././hal/sam3u1c/udc.c **** 	} else
 839:.././hal/sam3u1c/udc.c **** #endif
 840:.././hal/sam3u1c/udc.c **** 	{
 841:.././hal/sam3u1c/udc.c **** 		// FS descriptor
 842:.././hal/sam3u1c/udc.c **** 		udc_ptr_conf = &udc_config.conf_lsfs[udc_num_configuration - 1];
 2314              	 .loc 1 842 29
 2315 008e 184B     	 ldr r3,.L189+12
 2316 0090 5A68     	 ldr r2,[r3,#4]
 2317              	 .loc 1 842 39
 2318 0092 194B     	 ldr r3,.L189+20
 2319 0094 1B78     	 ldrb r3,[r3]
 2320              	 .loc 1 842 18
 2321 0096 03F10053 	 add r3,r3,#536870912
 2322 009a 013B     	 subs r3,r3,#1
 2323 009c DB00     	 lsls r3,r3,#3
 2324 009e 1344     	 add r3,r3,r2
 2325              	 .loc 1 842 16
 2326 00a0 164A     	 ldr r2,.L189+24
 2327 00a2 1360     	 str r3,[r2]
 2328              	.L185:
 843:.././hal/sam3u1c/udc.c **** 	}
 844:.././hal/sam3u1c/udc.c **** 	// Enable all interfaces of the selected configuration
 845:.././hal/sam3u1c/udc.c **** 	for (iface_num = 0; iface_num < udc_ptr_conf->desc->bNumInterfaces;
 2329              	 .loc 1 845 17
 2330 00a4 0023     	 movs r3,#0
 2331 00a6 FB71     	 strb r3,[r7,#7]
 2332              	 .loc 1 845 2
 2333 00a8 0FE0     	 b .L186
 2334              	.L188:
 846:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 847:.././hal/sam3u1c/udc.c **** 		if (!udc_iface_enable(iface_num, 0)) {
 2335              	 .loc 1 847 8
 2336 00aa FB79     	 ldrb r3,[r7,#7]
 2337 00ac 0021     	 movs r1,#0
 2338 00ae 1846     	 mov r0,r3
 2339 00b0 134B     	 ldr r3,.L189+28
 2340 00b2 9847     	 blx r3
 2341              	.LVL46:
 2342 00b4 0346     	 mov r3,r0
 2343              	 .loc 1 847 7
 2344 00b6 83F00103 	 eor r3,r3,#1
 2345 00ba DBB2     	 uxtb r3,r3
 2346              	 .loc 1 847 6
 2347 00bc 002B     	 cmp r3,#0
 2348 00be 01D0     	 beq .L187
 848:.././hal/sam3u1c/udc.c **** 			return false;
 2349              	 .loc 1 848 11
 2350 00c0 0023     	 movs r3,#0
 2351 00c2 0AE0     	 b .L179
 2352              	.L187:
 846:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 2353              	 .loc 1 846 13
 2354 00c4 FB79     	 ldrb r3,[r7,#7]
 2355 00c6 0133     	 adds r3,r3,#1
 2356 00c8 FB71     	 strb r3,[r7,#7]
 2357              	.L186:
 845:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 2358              	 .loc 1 845 46 discriminator 1
 2359 00ca 0C4B     	 ldr r3,.L189+24
 2360 00cc 1B68     	 ldr r3,[r3]
 2361 00ce 1B68     	 ldr r3,[r3]
 845:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 2362              	 .loc 1 845 52 discriminator 1
 2363 00d0 1B79     	 ldrb r3,[r3,#4]
 845:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 2364              	 .loc 1 845 2 discriminator 1
 2365 00d2 FA79     	 ldrb r2,[r7,#7]
 2366 00d4 9A42     	 cmp r2,r3
 2367 00d6 E8D3     	 bcc .L188
 849:.././hal/sam3u1c/udc.c **** 		}
 850:.././hal/sam3u1c/udc.c **** 	}
 851:.././hal/sam3u1c/udc.c **** 	return true;
 2368              	 .loc 1 851 9
 2369 00d8 0123     	 movs r3,#1
 2370              	.L179:
 852:.././hal/sam3u1c/udc.c **** }
 2371              	 .loc 1 852 1
 2372 00da 1846     	 mov r0,r3
 2373 00dc 0837     	 adds r7,r7,#8
 2374              	.LCFI81:
 2375              	 .cfi_def_cfa_offset 8
 2376 00de BD46     	 mov sp,r7
 2377              	.LCFI82:
 2378              	 .cfi_def_cfa_register 13
 2379              	 
 2380 00e0 80BD     	 pop {r7,pc}
 2381              	.L190:
 2382 00e2 00BF     	 .align 2
 2383              	.L189:
 2384 00e4 00000000 	 .word udd_g_ctrlreq
 2385 00e8 00000000 	 .word udd_getaddress
 2386 00ec 00000000 	 .word udd_is_high_speed
 2387 00f0 00000000 	 .word udc_config
 2388 00f4 00000000 	 .word udc_reset
 2389 00f8 00000000 	 .word udc_num_configuration
 2390 00fc 00000000 	 .word udc_ptr_conf
 2391 0100 00000000 	 .word udc_iface_enable
 2392              	 .cfi_endproc
 2393              	.LFE95:
 2395              	 .section .text.udc_req_std_iface_get_setting,"ax",%progbits
 2396              	 .align 1
 2397              	 .syntax unified
 2398              	 .thumb
 2399              	 .thumb_func
 2400              	 .fpu softvfp
 2402              	udc_req_std_iface_get_setting:
 2403              	.LFB96:
 853:.././hal/sam3u1c/udc.c **** 
 854:.././hal/sam3u1c/udc.c **** /**
 855:.././hal/sam3u1c/udc.c ****  * \brief Standard interface request
 856:.././hal/sam3u1c/udc.c ****  * to get the alternate setting number of an interface
 857:.././hal/sam3u1c/udc.c ****  *
 858:.././hal/sam3u1c/udc.c ****  * \return true if success
 859:.././hal/sam3u1c/udc.c ****  */
 860:.././hal/sam3u1c/udc.c **** static bool udc_req_std_iface_get_setting(void)
 861:.././hal/sam3u1c/udc.c **** {
 2404              	 .loc 1 861 1
 2405              	 .cfi_startproc
 2406              	 
 2407              	 
 2408 0000 80B5     	 push {r7,lr}
 2409              	.LCFI83:
 2410              	 .cfi_def_cfa_offset 8
 2411              	 .cfi_offset 7,-8
 2412              	 .cfi_offset 14,-4
 2413 0002 82B0     	 sub sp,sp,#8
 2414              	.LCFI84:
 2415              	 .cfi_def_cfa_offset 16
 2416 0004 00AF     	 add r7,sp,#0
 2417              	.LCFI85:
 2418              	 .cfi_def_cfa_register 7
 862:.././hal/sam3u1c/udc.c **** 	static uint8_t udc_iface_setting;
 863:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
 864:.././hal/sam3u1c/udc.c **** 	udi_api_t UDC_DESC_STORAGE *udi_api;
 865:.././hal/sam3u1c/udc.c **** 
 866:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength != 1) {
 2419              	 .loc 1 866 23
 2420 0006 1E4B     	 ldr r3,.L197
 2421 0008 DB88     	 ldrh r3,[r3,#6]
 2422              	 .loc 1 866 5
 2423 000a 012B     	 cmp r3,#1
 2424 000c 01D0     	 beq .L192
 867:.././hal/sam3u1c/udc.c **** 		return false; // Error in request
 2425              	 .loc 1 867 10
 2426 000e 0023     	 movs r3,#0
 2427 0010 32E0     	 b .L193
 2428              	.L192:
 868:.././hal/sam3u1c/udc.c **** 	}
 869:.././hal/sam3u1c/udc.c **** 	if (!udc_num_configuration) {
 2429              	 .loc 1 869 6
 2430 0012 1C4B     	 ldr r3,.L197+4
 2431 0014 1B78     	 ldrb r3,[r3]
 2432              	 .loc 1 869 5
 2433 0016 002B     	 cmp r3,#0
 2434 0018 01D1     	 bne .L194
 870:.././hal/sam3u1c/udc.c **** 		return false; // The device is not is configured state yet
 2435              	 .loc 1 870 10
 2436 001a 0023     	 movs r3,#0
 2437 001c 2CE0     	 b .L193
 2438              	.L194:
 871:.././hal/sam3u1c/udc.c **** 	}
 872:.././hal/sam3u1c/udc.c **** 
 873:.././hal/sam3u1c/udc.c **** 	// Check the interface number included in the request
 874:.././hal/sam3u1c/udc.c **** 	iface_num = udd_g_ctrlreq.req.wIndex & 0xFF;
 2439              	 .loc 1 874 31
 2440 001e 184B     	 ldr r3,.L197
 2441 0020 9B88     	 ldrh r3,[r3,#4]
 2442              	 .loc 1 874 12
 2443 0022 FB71     	 strb r3,[r7,#7]
 875:.././hal/sam3u1c/udc.c **** 	if (iface_num >= udc_ptr_conf->desc->bNumInterfaces) {
 2444              	 .loc 1 875 31
 2445 0024 184B     	 ldr r3,.L197+8
 2446 0026 1B68     	 ldr r3,[r3]
 2447 0028 1B68     	 ldr r3,[r3]
 2448              	 .loc 1 875 37
 2449 002a 1B79     	 ldrb r3,[r3,#4]
 2450              	 .loc 1 875 5
 2451 002c FA79     	 ldrb r2,[r7,#7]
 2452 002e 9A42     	 cmp r2,r3
 2453 0030 01D3     	 bcc .L195
 876:.././hal/sam3u1c/udc.c **** 		return false;
 2454              	 .loc 1 876 10
 2455 0032 0023     	 movs r3,#0
 2456 0034 20E0     	 b .L193
 2457              	.L195:
 877:.././hal/sam3u1c/udc.c **** 	}
 878:.././hal/sam3u1c/udc.c **** 
 879:.././hal/sam3u1c/udc.c **** 	// Select first alternate setting of the interface to update udc_ptr_iface
 880:.././hal/sam3u1c/udc.c **** 	// before call iface->getsetting()
 881:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, 0)) {
 2458              	 .loc 1 881 7
 2459 0036 FB79     	 ldrb r3,[r7,#7]
 2460 0038 0021     	 movs r1,#0
 2461 003a 1846     	 mov r0,r3
 2462 003c 134B     	 ldr r3,.L197+12
 2463 003e 9847     	 blx r3
 2464              	.LVL47:
 2465 0040 0346     	 mov r3,r0
 2466              	 .loc 1 881 6
 2467 0042 83F00103 	 eor r3,r3,#1
 2468 0046 DBB2     	 uxtb r3,r3
 2469              	 .loc 1 881 5
 2470 0048 002B     	 cmp r3,#0
 2471 004a 01D0     	 beq .L196
 882:.././hal/sam3u1c/udc.c **** 		return false;
 2472              	 .loc 1 882 10
 2473 004c 0023     	 movs r3,#0
 2474 004e 13E0     	 b .L193
 2475              	.L196:
 883:.././hal/sam3u1c/udc.c **** 	}
 884:.././hal/sam3u1c/udc.c **** 	// Get alternate setting from UDI
 885:.././hal/sam3u1c/udc.c **** 	udi_api = udc_ptr_conf->udi_apis[iface_num];
 2476              	 .loc 1 885 24
 2477 0050 0D4B     	 ldr r3,.L197+8
 2478 0052 1B68     	 ldr r3,[r3]
 2479 0054 5A68     	 ldr r2,[r3,#4]
 2480              	 .loc 1 885 34
 2481 0056 FB79     	 ldrb r3,[r7,#7]
 2482 0058 9B00     	 lsls r3,r3,#2
 2483 005a 1344     	 add r3,r3,r2
 2484              	 .loc 1 885 10
 2485 005c 1B68     	 ldr r3,[r3]
 2486 005e 3B60     	 str r3,[r7]
 886:.././hal/sam3u1c/udc.c **** 	udc_iface_setting = udi_api->getsetting();
 2487              	 .loc 1 886 29
 2488 0060 3B68     	 ldr r3,[r7]
 2489 0062 DB68     	 ldr r3,[r3,#12]
 2490              	 .loc 1 886 22
 2491 0064 9847     	 blx r3
 2492              	.LVL48:
 2493 0066 0346     	 mov r3,r0
 2494 0068 1A46     	 mov r2,r3
 2495              	 .loc 1 886 20
 2496 006a 094B     	 ldr r3,.L197+16
 2497 006c 1A70     	 strb r2,[r3]
 887:.././hal/sam3u1c/udc.c **** 
 888:.././hal/sam3u1c/udc.c **** 	// Link value to payload pointer of request
 889:.././hal/sam3u1c/udc.c **** 	udd_set_setup_payload(&udc_iface_setting,1);
 2498              	 .loc 1 889 2
 2499 006e 0121     	 movs r1,#1
 2500 0070 0748     	 ldr r0,.L197+16
 2501 0072 084B     	 ldr r3,.L197+20
 2502 0074 9847     	 blx r3
 2503              	.LVL49:
 890:.././hal/sam3u1c/udc.c **** 	return true;
 2504              	 .loc 1 890 9
 2505 0076 0123     	 movs r3,#1
 2506              	.L193:
 891:.././hal/sam3u1c/udc.c **** }
 2507              	 .loc 1 891 1
 2508 0078 1846     	 mov r0,r3
 2509 007a 0837     	 adds r7,r7,#8
 2510              	.LCFI86:
 2511              	 .cfi_def_cfa_offset 8
 2512 007c BD46     	 mov sp,r7
 2513              	.LCFI87:
 2514              	 .cfi_def_cfa_register 13
 2515              	 
 2516 007e 80BD     	 pop {r7,pc}
 2517              	.L198:
 2518              	 .align 2
 2519              	.L197:
 2520 0080 00000000 	 .word udd_g_ctrlreq
 2521 0084 00000000 	 .word udc_num_configuration
 2522 0088 00000000 	 .word udc_ptr_conf
 2523 008c 00000000 	 .word udc_update_iface_desc
 2524 0090 00000000 	 .word udc_iface_setting.7466
 2525 0094 00000000 	 .word udd_set_setup_payload
 2526              	 .cfi_endproc
 2527              	.LFE96:
 2529              	 .section .text.udc_req_std_iface_set_setting,"ax",%progbits
 2530              	 .align 1
 2531              	 .syntax unified
 2532              	 .thumb
 2533              	 .thumb_func
 2534              	 .fpu softvfp
 2536              	udc_req_std_iface_set_setting:
 2537              	.LFB97:
 892:.././hal/sam3u1c/udc.c **** 
 893:.././hal/sam3u1c/udc.c **** /**
 894:.././hal/sam3u1c/udc.c ****  * \brief Standard interface request
 895:.././hal/sam3u1c/udc.c ****  * to set an alternate setting of an interface
 896:.././hal/sam3u1c/udc.c ****  *
 897:.././hal/sam3u1c/udc.c ****  * \return true if success
 898:.././hal/sam3u1c/udc.c ****  */
 899:.././hal/sam3u1c/udc.c **** static bool udc_req_std_iface_set_setting(void)
 900:.././hal/sam3u1c/udc.c **** {
 2538              	 .loc 1 900 1
 2539              	 .cfi_startproc
 2540              	 
 2541              	 
 2542 0000 80B5     	 push {r7,lr}
 2543              	.LCFI88:
 2544              	 .cfi_def_cfa_offset 8
 2545              	 .cfi_offset 7,-8
 2546              	 .cfi_offset 14,-4
 2547 0002 82B0     	 sub sp,sp,#8
 2548              	.LCFI89:
 2549              	 .cfi_def_cfa_offset 16
 2550 0004 00AF     	 add r7,sp,#0
 2551              	.LCFI90:
 2552              	 .cfi_def_cfa_register 7
 901:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num, setting_num;
 902:.././hal/sam3u1c/udc.c **** 
 903:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 2553              	 .loc 1 903 23
 2554 0006 144B     	 ldr r3,.L204
 2555 0008 DB88     	 ldrh r3,[r3,#6]
 2556              	 .loc 1 903 5
 2557 000a 002B     	 cmp r3,#0
 2558 000c 01D0     	 beq .L200
 904:.././hal/sam3u1c/udc.c **** 		return false; // Error in request
 2559              	 .loc 1 904 10
 2560 000e 0023     	 movs r3,#0
 2561 0010 1EE0     	 b .L201
 2562              	.L200:
 905:.././hal/sam3u1c/udc.c **** 	}
 906:.././hal/sam3u1c/udc.c **** 	if (!udc_num_configuration) {
 2563              	 .loc 1 906 6
 2564 0012 124B     	 ldr r3,.L204+4
 2565 0014 1B78     	 ldrb r3,[r3]
 2566              	 .loc 1 906 5
 2567 0016 002B     	 cmp r3,#0
 2568 0018 01D1     	 bne .L202
 907:.././hal/sam3u1c/udc.c **** 		return false; // The device is not is configured state yet
 2569              	 .loc 1 907 10
 2570 001a 0023     	 movs r3,#0
 2571 001c 18E0     	 b .L201
 2572              	.L202:
 908:.././hal/sam3u1c/udc.c **** 	}
 909:.././hal/sam3u1c/udc.c **** 
 910:.././hal/sam3u1c/udc.c **** 	iface_num = udd_g_ctrlreq.req.wIndex & 0xFF;
 2573              	 .loc 1 910 31
 2574 001e 0E4B     	 ldr r3,.L204
 2575 0020 9B88     	 ldrh r3,[r3,#4]
 2576              	 .loc 1 910 12
 2577 0022 FB71     	 strb r3,[r7,#7]
 911:.././hal/sam3u1c/udc.c **** 	setting_num = udd_g_ctrlreq.req.wValue & 0xFF;
 2578              	 .loc 1 911 33
 2579 0024 0C4B     	 ldr r3,.L204
 2580 0026 5B88     	 ldrh r3,[r3,#2]
 2581              	 .loc 1 911 14
 2582 0028 BB71     	 strb r3,[r7,#6]
 912:.././hal/sam3u1c/udc.c **** 
 913:.././hal/sam3u1c/udc.c **** 	// Disable current setting
 914:.././hal/sam3u1c/udc.c **** 	if (!udc_iface_disable(iface_num)) {
 2583              	 .loc 1 914 7
 2584 002a FB79     	 ldrb r3,[r7,#7]
 2585 002c 1846     	 mov r0,r3
 2586 002e 0C4B     	 ldr r3,.L204+8
 2587 0030 9847     	 blx r3
 2588              	.LVL50:
 2589 0032 0346     	 mov r3,r0
 2590              	 .loc 1 914 6
 2591 0034 83F00103 	 eor r3,r3,#1
 2592 0038 DBB2     	 uxtb r3,r3
 2593              	 .loc 1 914 5
 2594 003a 002B     	 cmp r3,#0
 2595 003c 01D0     	 beq .L203
 915:.././hal/sam3u1c/udc.c **** 		return false;
 2596              	 .loc 1 915 10
 2597 003e 0023     	 movs r3,#0
 2598 0040 06E0     	 b .L201
 2599              	.L203:
 916:.././hal/sam3u1c/udc.c **** 	}
 917:.././hal/sam3u1c/udc.c **** 
 918:.././hal/sam3u1c/udc.c **** 	// Enable new setting
 919:.././hal/sam3u1c/udc.c **** 	return udc_iface_enable(iface_num, setting_num);
 2600              	 .loc 1 919 9
 2601 0042 BA79     	 ldrb r2,[r7,#6]
 2602 0044 FB79     	 ldrb r3,[r7,#7]
 2603 0046 1146     	 mov r1,r2
 2604 0048 1846     	 mov r0,r3
 2605 004a 064B     	 ldr r3,.L204+12
 2606 004c 9847     	 blx r3
 2607              	.LVL51:
 2608 004e 0346     	 mov r3,r0
 2609              	.L201:
 920:.././hal/sam3u1c/udc.c **** }
 2610              	 .loc 1 920 1
 2611 0050 1846     	 mov r0,r3
 2612 0052 0837     	 adds r7,r7,#8
 2613              	.LCFI91:
 2614              	 .cfi_def_cfa_offset 8
 2615 0054 BD46     	 mov sp,r7
 2616              	.LCFI92:
 2617              	 .cfi_def_cfa_register 13
 2618              	 
 2619 0056 80BD     	 pop {r7,pc}
 2620              	.L205:
 2621              	 .align 2
 2622              	.L204:
 2623 0058 00000000 	 .word udd_g_ctrlreq
 2624 005c 00000000 	 .word udc_num_configuration
 2625 0060 00000000 	 .word udc_iface_disable
 2626 0064 00000000 	 .word udc_iface_enable
 2627              	 .cfi_endproc
 2628              	.LFE97:
 2630              	 .section .text.udc_reqstd,"ax",%progbits
 2631              	 .align 1
 2632              	 .syntax unified
 2633              	 .thumb
 2634              	 .thumb_func
 2635              	 .fpu softvfp
 2637              	udc_reqstd:
 2638              	.LFB98:
 921:.././hal/sam3u1c/udc.c **** 
 922:.././hal/sam3u1c/udc.c **** /**
 923:.././hal/sam3u1c/udc.c ****  * \brief Main routine to manage the standard USB SETUP request
 924:.././hal/sam3u1c/udc.c ****  *
 925:.././hal/sam3u1c/udc.c ****  * \return true if the request is supported
 926:.././hal/sam3u1c/udc.c ****  */
 927:.././hal/sam3u1c/udc.c **** static bool udc_reqstd(void)
 928:.././hal/sam3u1c/udc.c **** {
 2639              	 .loc 1 928 1
 2640              	 .cfi_startproc
 2641              	 
 2642              	 
 2643 0000 80B5     	 push {r7,lr}
 2644              	.LCFI93:
 2645              	 .cfi_def_cfa_offset 8
 2646              	 .cfi_offset 7,-8
 2647              	 .cfi_offset 14,-4
 2648 0002 00AF     	 add r7,sp,#0
 2649              	.LCFI94:
 2650              	 .cfi_def_cfa_register 7
 929:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_is_in()) {
 2651              	 .loc 1 929 6
 2652 0004 544B     	 ldr r3,.L243
 2653 0006 1B78     	 ldrb r3,[r3]
 2654 0008 5BB2     	 sxtb r3,r3
 2655              	 .loc 1 929 5
 2656 000a 002B     	 cmp r3,#0
 2657 000c 41DA     	 bge .L207
 930:.././hal/sam3u1c/udc.c **** 		// GET Standard Requests
 931:.././hal/sam3u1c/udc.c **** 		if (udd_g_ctrlreq.req.wLength == 0) {
 2658              	 .loc 1 931 24
 2659 000e 524B     	 ldr r3,.L243
 2660 0010 DB88     	 ldrh r3,[r3,#6]
 2661              	 .loc 1 931 6
 2662 0012 002B     	 cmp r3,#0
 2663 0014 01D1     	 bne .L208
 932:.././hal/sam3u1c/udc.c **** 			return false; // Error for USB host
 2664              	 .loc 1 932 11
 2665 0016 0023     	 movs r3,#0
 2666 0018 9BE0     	 b .L209
 2667              	.L208:
 933:.././hal/sam3u1c/udc.c **** 		}
 934:.././hal/sam3u1c/udc.c **** 
 935:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_DEVICE == Udd_setup_recipient()) {
 2668              	 .loc 1 935 31
 2669 001a 4F4B     	 ldr r3,.L243
 2670 001c 1B78     	 ldrb r3,[r3]
 2671 001e 03F01F03 	 and r3,r3,#31
 2672              	 .loc 1 935 6
 2673 0022 002B     	 cmp r3,#0
 2674 0024 13D1     	 bne .L232
 936:.././hal/sam3u1c/udc.c **** 			// Standard Get Device request
 937:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2675              	 .loc 1 937 29
 2676 0026 4C4B     	 ldr r3,.L243
 2677 0028 5B78     	 ldrb r3,[r3,#1]
 2678              	 .loc 1 937 4
 2679 002a 062B     	 cmp r3,#6
 2680 002c 07D0     	 beq .L211
 2681 002e 082B     	 cmp r3,#8
 2682 0030 09D0     	 beq .L212
 2683 0032 002B     	 cmp r3,#0
 2684 0034 0DD1     	 bne .L233
 938:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_STATUS:
 939:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_get_status();
 2685              	 .loc 1 939 12
 2686 0036 494B     	 ldr r3,.L243+4
 2687 0038 9847     	 blx r3
 2688              	.LVL52:
 2689 003a 0346     	 mov r3,r0
 2690 003c 89E0     	 b .L209
 2691              	.L211:
 940:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_DESCRIPTOR:
 941:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_get_descriptor();
 2692              	 .loc 1 941 12
 2693 003e 484B     	 ldr r3,.L243+8
 2694 0040 9847     	 blx r3
 2695              	.LVL53:
 2696 0042 0346     	 mov r3,r0
 2697 0044 85E0     	 b .L209
 2698              	.L212:
 942:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_CONFIGURATION:
 943:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_get_configuration();
 2699              	 .loc 1 943 12
 2700 0046 474B     	 ldr r3,.L243+12
 2701 0048 9847     	 blx r3
 2702              	.LVL54:
 2703 004a 0346     	 mov r3,r0
 2704 004c 81E0     	 b .L209
 2705              	.L232:
 944:.././hal/sam3u1c/udc.c **** 			default:
 945:.././hal/sam3u1c/udc.c **** 				break;
 946:.././hal/sam3u1c/udc.c **** 			}
 947:.././hal/sam3u1c/udc.c **** 		}
 2706              	 .loc 1 947 3
 2707 004e 00BF     	 nop
 2708 0050 00E0     	 b .L210
 2709              	.L233:
 945:.././hal/sam3u1c/udc.c **** 			}
 2710              	 .loc 1 945 5
 2711 0052 00BF     	 nop
 2712              	.L210:
 948:.././hal/sam3u1c/udc.c **** 
 949:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_INTERFACE == Udd_setup_recipient()) {
 2713              	 .loc 1 949 34
 2714 0054 404B     	 ldr r3,.L243
 2715 0056 1B78     	 ldrb r3,[r3]
 2716 0058 03F01F03 	 and r3,r3,#31
 2717              	 .loc 1 949 6
 2718 005c 012B     	 cmp r3,#1
 2719 005e 07D1     	 bne .L234
 950:.././hal/sam3u1c/udc.c **** 			// Standard Get Interface request
 951:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2720              	 .loc 1 951 29
 2721 0060 3D4B     	 ldr r3,.L243
 2722 0062 5B78     	 ldrb r3,[r3,#1]
 2723              	 .loc 1 951 4
 2724 0064 0A2B     	 cmp r3,#10
 2725 0066 05D1     	 bne .L235
 952:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_INTERFACE:
 953:.././hal/sam3u1c/udc.c **** 				return udc_req_std_iface_get_setting();
 2726              	 .loc 1 953 12
 2727 0068 3F4B     	 ldr r3,.L243+16
 2728 006a 9847     	 blx r3
 2729              	.LVL55:
 2730 006c 0346     	 mov r3,r0
 2731 006e 70E0     	 b .L209
 2732              	.L234:
 954:.././hal/sam3u1c/udc.c **** 			default:
 955:.././hal/sam3u1c/udc.c **** 				break;
 956:.././hal/sam3u1c/udc.c **** 			}
 957:.././hal/sam3u1c/udc.c **** 		}
 2733              	 .loc 1 957 3
 2734 0070 00BF     	 nop
 2735 0072 00E0     	 b .L214
 2736              	.L235:
 955:.././hal/sam3u1c/udc.c **** 			}
 2737              	 .loc 1 955 5
 2738 0074 00BF     	 nop
 2739              	.L214:
 958:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 959:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_ENDPOINT == Udd_setup_recipient()) {
 2740              	 .loc 1 959 33
 2741 0076 384B     	 ldr r3,.L243
 2742 0078 1B78     	 ldrb r3,[r3]
 2743 007a 03F01F03 	 and r3,r3,#31
 2744              	 .loc 1 959 6
 2745 007e 022B     	 cmp r3,#2
 2746 0080 61D1     	 bne .L236
 960:.././hal/sam3u1c/udc.c **** 			// Standard Get Endpoint request
 961:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2747              	 .loc 1 961 29
 2748 0082 354B     	 ldr r3,.L243
 2749 0084 5B78     	 ldrb r3,[r3,#1]
 2750              	 .loc 1 961 4
 2751 0086 002B     	 cmp r3,#0
 2752 0088 5FD1     	 bne .L237
 962:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_STATUS:
 963:.././hal/sam3u1c/udc.c **** 				return udc_req_std_ep_get_status();
 2753              	 .loc 1 963 12
 2754 008a 384B     	 ldr r3,.L243+20
 2755 008c 9847     	 blx r3
 2756              	.LVL56:
 2757 008e 0346     	 mov r3,r0
 2758 0090 5FE0     	 b .L209
 2759              	.L207:
 964:.././hal/sam3u1c/udc.c **** 			default:
 965:.././hal/sam3u1c/udc.c **** 				break;
 966:.././hal/sam3u1c/udc.c **** 			}
 967:.././hal/sam3u1c/udc.c **** 		}
 968:.././hal/sam3u1c/udc.c **** #endif
 969:.././hal/sam3u1c/udc.c **** 	} else {
 970:.././hal/sam3u1c/udc.c **** 		// SET Standard Requests
 971:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_DEVICE == Udd_setup_recipient()) {
 2760              	 .loc 1 971 31
 2761 0092 314B     	 ldr r3,.L243
 2762 0094 1B78     	 ldrb r3,[r3]
 2763 0096 03F01F03 	 and r3,r3,#31
 2764              	 .loc 1 971 6
 2765 009a 002B     	 cmp r3,#0
 2766 009c 2AD1     	 bne .L238
 972:.././hal/sam3u1c/udc.c **** 			// Standard Set Device request
 973:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2767              	 .loc 1 973 29
 2768 009e 2E4B     	 ldr r3,.L243
 2769 00a0 5B78     	 ldrb r3,[r3,#1]
 2770              	 .loc 1 973 4
 2771 00a2 013B     	 subs r3,r3,#1
 2772 00a4 082B     	 cmp r3,#8
 2773 00a6 27D8     	 bhi .L239
 2774 00a8 01A2     	 adr r2,.L222
 2775 00aa 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 2776 00ae 00BF     	 .p2align 2
 2777              	.L222:
 2778 00b0 DD000000 	 .word .L226+1
 2779 00b4 F9000000 	 .word .L239+1
 2780 00b8 E5000000 	 .word .L225+1
 2781 00bc F9000000 	 .word .L239+1
 2782 00c0 D5000000 	 .word .L224+1
 2783 00c4 F9000000 	 .word .L239+1
 2784 00c8 F9000000 	 .word .L239+1
 2785 00cc F9000000 	 .word .L239+1
 2786 00d0 ED000000 	 .word .L221+1
 2787              	 .p2align 1
 2788              	.L224:
 974:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_ADDRESS:
 975:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_set_address();
 2789              	 .loc 1 975 12
 2790 00d4 264B     	 ldr r3,.L243+24
 2791 00d6 9847     	 blx r3
 2792              	.LVL57:
 2793 00d8 0346     	 mov r3,r0
 2794 00da 3AE0     	 b .L209
 2795              	.L226:
 976:.././hal/sam3u1c/udc.c **** 			case USB_REQ_CLEAR_FEATURE:
 977:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_clear_feature();
 2796              	 .loc 1 977 12
 2797 00dc 254B     	 ldr r3,.L243+28
 2798 00de 9847     	 blx r3
 2799              	.LVL58:
 2800 00e0 0346     	 mov r3,r0
 2801 00e2 36E0     	 b .L209
 2802              	.L225:
 978:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_FEATURE:
 979:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_set_feature();
 2803              	 .loc 1 979 12
 2804 00e4 244B     	 ldr r3,.L243+32
 2805 00e6 9847     	 blx r3
 2806              	.LVL59:
 2807 00e8 0346     	 mov r3,r0
 2808 00ea 32E0     	 b .L209
 2809              	.L221:
 980:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_CONFIGURATION:
 981:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_set_configuration();
 2810              	 .loc 1 981 12
 2811 00ec 234B     	 ldr r3,.L243+36
 2812 00ee 9847     	 blx r3
 2813              	.LVL60:
 2814 00f0 0346     	 mov r3,r0
 2815 00f2 2EE0     	 b .L209
 2816              	.L238:
 982:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_DESCRIPTOR:
 983:.././hal/sam3u1c/udc.c **** 				/* Not supported (defined as optional by the USB 2.0 spec) */
 984:.././hal/sam3u1c/udc.c **** 				break;
 985:.././hal/sam3u1c/udc.c **** 			default:
 986:.././hal/sam3u1c/udc.c **** 				break;
 987:.././hal/sam3u1c/udc.c **** 			}
 988:.././hal/sam3u1c/udc.c **** 		}
 2817              	 .loc 1 988 3
 2818 00f4 00BF     	 nop
 2819 00f6 00E0     	 b .L219
 2820              	.L239:
 986:.././hal/sam3u1c/udc.c **** 			}
 2821              	 .loc 1 986 5
 2822 00f8 00BF     	 nop
 2823              	.L219:
 989:.././hal/sam3u1c/udc.c **** 
 990:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_INTERFACE == Udd_setup_recipient()) {
 2824              	 .loc 1 990 34
 2825 00fa 174B     	 ldr r3,.L243
 2826 00fc 1B78     	 ldrb r3,[r3]
 2827 00fe 03F01F03 	 and r3,r3,#31
 2828              	 .loc 1 990 6
 2829 0102 012B     	 cmp r3,#1
 2830 0104 07D1     	 bne .L240
 991:.././hal/sam3u1c/udc.c **** 			// Standard Set Interface request
 992:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2831              	 .loc 1 992 29
 2832 0106 144B     	 ldr r3,.L243
 2833 0108 5B78     	 ldrb r3,[r3,#1]
 2834              	 .loc 1 992 4
 2835 010a 0B2B     	 cmp r3,#11
 2836 010c 05D1     	 bne .L241
 993:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_INTERFACE:
 994:.././hal/sam3u1c/udc.c **** 				return udc_req_std_iface_set_setting();
 2837              	 .loc 1 994 12
 2838 010e 1C4B     	 ldr r3,.L243+40
 2839 0110 9847     	 blx r3
 2840              	.LVL61:
 2841 0112 0346     	 mov r3,r0
 2842 0114 1DE0     	 b .L209
 2843              	.L240:
 995:.././hal/sam3u1c/udc.c **** 			default:
 996:.././hal/sam3u1c/udc.c **** 				break;
 997:.././hal/sam3u1c/udc.c **** 			}
 998:.././hal/sam3u1c/udc.c **** 		}
 2844              	 .loc 1 998 3
 2845 0116 00BF     	 nop
 2846 0118 00E0     	 b .L227
 2847              	.L241:
 996:.././hal/sam3u1c/udc.c **** 			}
 2848              	 .loc 1 996 5
 2849 011a 00BF     	 nop
 2850              	.L227:
 999:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
1000:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_ENDPOINT == Udd_setup_recipient()) {
 2851              	 .loc 1 1000 33
 2852 011c 0E4B     	 ldr r3,.L243
 2853 011e 1B78     	 ldrb r3,[r3]
 2854 0120 03F01F03 	 and r3,r3,#31
 2855              	 .loc 1 1000 6
 2856 0124 022B     	 cmp r3,#2
 2857 0126 12D1     	 bne .L242
1001:.././hal/sam3u1c/udc.c **** 			// Standard Set Endpoint request
1002:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2858              	 .loc 1 1002 29
 2859 0128 0B4B     	 ldr r3,.L243
 2860 012a 5B78     	 ldrb r3,[r3,#1]
 2861              	 .loc 1 1002 4
 2862 012c 012B     	 cmp r3,#1
 2863 012e 02D0     	 beq .L229
 2864 0130 032B     	 cmp r3,#3
 2865 0132 04D0     	 beq .L230
1003:.././hal/sam3u1c/udc.c **** 			case USB_REQ_CLEAR_FEATURE:
1004:.././hal/sam3u1c/udc.c **** 				return udc_req_std_ep_clear_feature();
1005:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_FEATURE:
1006:.././hal/sam3u1c/udc.c **** 				return udc_req_std_ep_set_feature();
1007:.././hal/sam3u1c/udc.c **** 			default:
1008:.././hal/sam3u1c/udc.c **** 				break;
 2866              	 .loc 1 1008 5
 2867 0134 0CE0     	 b .L218
 2868              	.L229:
1004:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_FEATURE:
 2869              	 .loc 1 1004 12
 2870 0136 134B     	 ldr r3,.L243+44
 2871 0138 9847     	 blx r3
 2872              	.LVL62:
 2873 013a 0346     	 mov r3,r0
 2874 013c 09E0     	 b .L209
 2875              	.L230:
1006:.././hal/sam3u1c/udc.c **** 			default:
 2876              	 .loc 1 1006 12
 2877 013e 124B     	 ldr r3,.L243+48
 2878 0140 9847     	 blx r3
 2879              	.LVL63:
 2880 0142 0346     	 mov r3,r0
 2881 0144 05E0     	 b .L209
 2882              	.L236:
 967:.././hal/sam3u1c/udc.c **** #endif
 2883              	 .loc 1 967 3
 2884 0146 00BF     	 nop
 2885 0148 02E0     	 b .L218
 2886              	.L237:
 965:.././hal/sam3u1c/udc.c **** 			}
 2887              	 .loc 1 965 5
 2888 014a 00BF     	 nop
 2889 014c 00E0     	 b .L218
 2890              	.L242:
1009:.././hal/sam3u1c/udc.c **** 			}
1010:.././hal/sam3u1c/udc.c **** 		}
 2891              	 .loc 1 1010 3
 2892 014e 00BF     	 nop
 2893              	.L218:
1011:.././hal/sam3u1c/udc.c **** #endif
1012:.././hal/sam3u1c/udc.c **** 	}
1013:.././hal/sam3u1c/udc.c **** 	return false;
 2894              	 .loc 1 1013 9
 2895 0150 0023     	 movs r3,#0
 2896              	.L209:
1014:.././hal/sam3u1c/udc.c **** }
 2897              	 .loc 1 1014 1
 2898 0152 1846     	 mov r0,r3
 2899 0154 80BD     	 pop {r7,pc}
 2900              	.L244:
 2901 0156 00BF     	 .align 2
 2902              	.L243:
 2903 0158 00000000 	 .word udd_g_ctrlreq
 2904 015c 00000000 	 .word udc_req_std_dev_get_status
 2905 0160 00000000 	 .word udc_req_std_dev_get_descriptor
 2906 0164 00000000 	 .word udc_req_std_dev_get_configuration
 2907 0168 00000000 	 .word udc_req_std_iface_get_setting
 2908 016c 00000000 	 .word udc_req_std_ep_get_status
 2909 0170 00000000 	 .word udc_req_std_dev_set_address
 2910 0174 00000000 	 .word udc_req_std_dev_clear_feature
 2911 0178 00000000 	 .word udc_req_std_dev_set_feature
 2912 017c 00000000 	 .word udc_req_std_dev_set_configuration
 2913 0180 00000000 	 .word udc_req_std_iface_set_setting
 2914 0184 00000000 	 .word udc_req_std_ep_clear_feature
 2915 0188 00000000 	 .word udc_req_std_ep_set_feature
 2916              	 .cfi_endproc
 2917              	.LFE98:
 2919              	 .section .text.udc_req_iface,"ax",%progbits
 2920              	 .align 1
 2921              	 .syntax unified
 2922              	 .thumb
 2923              	 .thumb_func
 2924              	 .fpu softvfp
 2926              	udc_req_iface:
 2927              	.LFB99:
1015:.././hal/sam3u1c/udc.c **** 
1016:.././hal/sam3u1c/udc.c **** /**
1017:.././hal/sam3u1c/udc.c ****  * \brief Send the SETUP interface request to UDI
1018:.././hal/sam3u1c/udc.c ****  *
1019:.././hal/sam3u1c/udc.c ****  * \return true if the request is supported
1020:.././hal/sam3u1c/udc.c ****  */
1021:.././hal/sam3u1c/udc.c **** static bool udc_req_iface(void)
1022:.././hal/sam3u1c/udc.c **** {
 2928              	 .loc 1 1022 1
 2929              	 .cfi_startproc
 2930              	 
 2931              	 
 2932 0000 80B5     	 push {r7,lr}
 2933              	.LCFI95:
 2934              	 .cfi_def_cfa_offset 8
 2935              	 .cfi_offset 7,-8
 2936              	 .cfi_offset 14,-4
 2937 0002 82B0     	 sub sp,sp,#8
 2938              	.LCFI96:
 2939              	 .cfi_def_cfa_offset 16
 2940 0004 00AF     	 add r7,sp,#0
 2941              	.LCFI97:
 2942              	 .cfi_def_cfa_register 7
1023:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
1024:.././hal/sam3u1c/udc.c **** 	udi_api_t UDC_DESC_STORAGE *udi_api;
1025:.././hal/sam3u1c/udc.c **** 
1026:.././hal/sam3u1c/udc.c **** 	if (0 == udc_num_configuration) {
 2943              	 .loc 1 1026 8
 2944 0006 204B     	 ldr r3,.L251
 2945 0008 1B78     	 ldrb r3,[r3]
 2946              	 .loc 1 1026 5
 2947 000a 002B     	 cmp r3,#0
 2948 000c 01D1     	 bne .L246
1027:.././hal/sam3u1c/udc.c **** 		return false; // The device is not is configured state yet
 2949              	 .loc 1 1027 10
 2950 000e 0023     	 movs r3,#0
 2951 0010 36E0     	 b .L247
 2952              	.L246:
1028:.././hal/sam3u1c/udc.c **** 	}
1029:.././hal/sam3u1c/udc.c **** 	// Check interface number
1030:.././hal/sam3u1c/udc.c **** 	iface_num = udd_g_ctrlreq.req.wIndex & 0xFF;
 2953              	 .loc 1 1030 31
 2954 0012 1E4B     	 ldr r3,.L251+4
 2955 0014 9B88     	 ldrh r3,[r3,#4]
 2956              	 .loc 1 1030 12
 2957 0016 FB71     	 strb r3,[r7,#7]
1031:.././hal/sam3u1c/udc.c **** 	if (iface_num >= udc_ptr_conf->desc->bNumInterfaces) {
 2958              	 .loc 1 1031 31
 2959 0018 1D4B     	 ldr r3,.L251+8
 2960 001a 1B68     	 ldr r3,[r3]
 2961 001c 1B68     	 ldr r3,[r3]
 2962              	 .loc 1 1031 37
 2963 001e 1B79     	 ldrb r3,[r3,#4]
 2964              	 .loc 1 1031 5
 2965 0020 FA79     	 ldrb r2,[r7,#7]
 2966 0022 9A42     	 cmp r2,r3
 2967 0024 01D3     	 bcc .L248
1032:.././hal/sam3u1c/udc.c **** 		return false;
 2968              	 .loc 1 1032 10
 2969 0026 0023     	 movs r3,#0
 2970 0028 2AE0     	 b .L247
 2971              	.L248:
1033:.././hal/sam3u1c/udc.c **** 	}
1034:.././hal/sam3u1c/udc.c **** 
1035:.././hal/sam3u1c/udc.c **** 	//* To update udc_ptr_iface with the selected interface in request
1036:.././hal/sam3u1c/udc.c **** 	// Select first alternate setting of interface to update udc_ptr_iface
1037:.././hal/sam3u1c/udc.c **** 	// before calling udi_api->getsetting()
1038:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, 0)) {
 2972              	 .loc 1 1038 7
 2973 002a FB79     	 ldrb r3,[r7,#7]
 2974 002c 0021     	 movs r1,#0
 2975 002e 1846     	 mov r0,r3
 2976 0030 184B     	 ldr r3,.L251+12
 2977 0032 9847     	 blx r3
 2978              	.LVL64:
 2979 0034 0346     	 mov r3,r0
 2980              	 .loc 1 1038 6
 2981 0036 83F00103 	 eor r3,r3,#1
 2982 003a DBB2     	 uxtb r3,r3
 2983              	 .loc 1 1038 5
 2984 003c 002B     	 cmp r3,#0
 2985 003e 01D0     	 beq .L249
1039:.././hal/sam3u1c/udc.c **** 		return false;
 2986              	 .loc 1 1039 10
 2987 0040 0023     	 movs r3,#0
 2988 0042 1DE0     	 b .L247
 2989              	.L249:
1040:.././hal/sam3u1c/udc.c **** 	}
1041:.././hal/sam3u1c/udc.c **** 	// Select the interface with the current alternate setting
1042:.././hal/sam3u1c/udc.c **** 	udi_api = udc_ptr_conf->udi_apis[iface_num];
 2990              	 .loc 1 1042 24
 2991 0044 124B     	 ldr r3,.L251+8
 2992 0046 1B68     	 ldr r3,[r3]
 2993 0048 5A68     	 ldr r2,[r3,#4]
 2994              	 .loc 1 1042 34
 2995 004a FB79     	 ldrb r3,[r7,#7]
 2996 004c 9B00     	 lsls r3,r3,#2
 2997 004e 1344     	 add r3,r3,r2
 2998              	 .loc 1 1042 10
 2999 0050 1B68     	 ldr r3,[r3]
 3000 0052 3B60     	 str r3,[r7]
1043:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, udi_api->getsetting())) {
 3001              	 .loc 1 1043 47
 3002 0054 3B68     	 ldr r3,[r7]
 3003 0056 DB68     	 ldr r3,[r3,#12]
 3004              	 .loc 1 1043 7
 3005 0058 9847     	 blx r3
 3006              	.LVL65:
 3007 005a 0346     	 mov r3,r0
 3008 005c 1A46     	 mov r2,r3
 3009 005e FB79     	 ldrb r3,[r7,#7]
 3010 0060 1146     	 mov r1,r2
 3011 0062 1846     	 mov r0,r3
 3012 0064 0B4B     	 ldr r3,.L251+12
 3013 0066 9847     	 blx r3
 3014              	.LVL66:
 3015 0068 0346     	 mov r3,r0
 3016              	 .loc 1 1043 6
 3017 006a 83F00103 	 eor r3,r3,#1
 3018 006e DBB2     	 uxtb r3,r3
 3019              	 .loc 1 1043 5
 3020 0070 002B     	 cmp r3,#0
 3021 0072 01D0     	 beq .L250
1044:.././hal/sam3u1c/udc.c **** 		return false;
 3022              	 .loc 1 1044 10
 3023 0074 0023     	 movs r3,#0
 3024 0076 03E0     	 b .L247
 3025              	.L250:
1045:.././hal/sam3u1c/udc.c **** 	}
1046:.././hal/sam3u1c/udc.c **** 
1047:.././hal/sam3u1c/udc.c **** 	// Send the SETUP request to the UDI corresponding to the interface number
1048:.././hal/sam3u1c/udc.c **** 	return udi_api->setup();
 3026              	 .loc 1 1048 16
 3027 0078 3B68     	 ldr r3,[r7]
 3028 007a 9B68     	 ldr r3,[r3,#8]
 3029              	 .loc 1 1048 9
 3030 007c 9847     	 blx r3
 3031              	.LVL67:
 3032 007e 0346     	 mov r3,r0
 3033              	.L247:
1049:.././hal/sam3u1c/udc.c **** }
 3034              	 .loc 1 1049 1
 3035 0080 1846     	 mov r0,r3
 3036 0082 0837     	 adds r7,r7,#8
 3037              	.LCFI98:
 3038              	 .cfi_def_cfa_offset 8
 3039 0084 BD46     	 mov sp,r7
 3040              	.LCFI99:
 3041              	 .cfi_def_cfa_register 13
 3042              	 
 3043 0086 80BD     	 pop {r7,pc}
 3044              	.L252:
 3045              	 .align 2
 3046              	.L251:
 3047 0088 00000000 	 .word udc_num_configuration
 3048 008c 00000000 	 .word udd_g_ctrlreq
 3049 0090 00000000 	 .word udc_ptr_conf
 3050 0094 00000000 	 .word udc_update_iface_desc
 3051              	 .cfi_endproc
 3052              	.LFE99:
 3054              	 .section .text.udc_req_ep,"ax",%progbits
 3055              	 .align 1
 3056              	 .syntax unified
 3057              	 .thumb
 3058              	 .thumb_func
 3059              	 .fpu softvfp
 3061              	udc_req_ep:
 3062              	.LFB100:
1050:.././hal/sam3u1c/udc.c **** 
1051:.././hal/sam3u1c/udc.c **** /**
1052:.././hal/sam3u1c/udc.c ****  * \brief Send the SETUP interface request to UDI
1053:.././hal/sam3u1c/udc.c ****  *
1054:.././hal/sam3u1c/udc.c ****  * \return true if the request is supported
1055:.././hal/sam3u1c/udc.c ****  */
1056:.././hal/sam3u1c/udc.c **** static bool udc_req_ep(void)
1057:.././hal/sam3u1c/udc.c **** {
 3063              	 .loc 1 1057 1
 3064              	 .cfi_startproc
 3065              	 
 3066              	 
 3067 0000 80B5     	 push {r7,lr}
 3068              	.LCFI100:
 3069              	 .cfi_def_cfa_offset 8
 3070              	 .cfi_offset 7,-8
 3071              	 .cfi_offset 14,-4
 3072 0002 82B0     	 sub sp,sp,#8
 3073              	.LCFI101:
 3074              	 .cfi_def_cfa_offset 16
 3075 0004 00AF     	 add r7,sp,#0
 3076              	.LCFI102:
 3077              	 .cfi_def_cfa_register 7
1058:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
1059:.././hal/sam3u1c/udc.c **** 	udi_api_t UDC_DESC_STORAGE *udi_api;
1060:.././hal/sam3u1c/udc.c **** 
1061:.././hal/sam3u1c/udc.c **** 	if (0 == udc_num_configuration) {
 3078              	 .loc 1 1061 8
 3079 0006 1E4B     	 ldr r3,.L260
 3080 0008 1B78     	 ldrb r3,[r3]
 3081              	 .loc 1 1061 5
 3082 000a 002B     	 cmp r3,#0
 3083 000c 01D1     	 bne .L254
1062:.././hal/sam3u1c/udc.c **** 		return false; // The device is not is configured state yet
 3084              	 .loc 1 1062 10
 3085 000e 0023     	 movs r3,#0
 3086 0010 32E0     	 b .L255
 3087              	.L254:
1063:.././hal/sam3u1c/udc.c **** 	}
1064:.././hal/sam3u1c/udc.c **** 	// Send this request on all enabled interfaces
1065:.././hal/sam3u1c/udc.c **** 	iface_num = udd_g_ctrlreq.req.wIndex & 0xFF;
 3088              	 .loc 1 1065 31
 3089 0012 1C4B     	 ldr r3,.L260+4
 3090 0014 9B88     	 ldrh r3,[r3,#4]
 3091              	 .loc 1 1065 12
 3092 0016 FB71     	 strb r3,[r7,#7]
1066:.././hal/sam3u1c/udc.c **** 	for (iface_num = 0; iface_num < udc_ptr_conf->desc->bNumInterfaces;
 3093              	 .loc 1 1066 17
 3094 0018 0023     	 movs r3,#0
 3095 001a FB71     	 strb r3,[r7,#7]
 3096              	 .loc 1 1066 2
 3097 001c 24E0     	 b .L256
 3098              	.L259:
1067:.././hal/sam3u1c/udc.c **** 			iface_num++) {
1068:.././hal/sam3u1c/udc.c **** 		// Select the interface with the current alternate setting
1069:.././hal/sam3u1c/udc.c **** 		udi_api = udc_ptr_conf->udi_apis[iface_num];
 3099              	 .loc 1 1069 25
 3100 001e 1A4B     	 ldr r3,.L260+8
 3101 0020 1B68     	 ldr r3,[r3]
 3102 0022 5A68     	 ldr r2,[r3,#4]
 3103              	 .loc 1 1069 35
 3104 0024 FB79     	 ldrb r3,[r7,#7]
 3105 0026 9B00     	 lsls r3,r3,#2
 3106 0028 1344     	 add r3,r3,r2
 3107              	 .loc 1 1069 11
 3108 002a 1B68     	 ldr r3,[r3]
 3109 002c 3B60     	 str r3,[r7]
1070:.././hal/sam3u1c/udc.c **** 		if (!udc_update_iface_desc(iface_num, udi_api->getsetting())) {
 3110              	 .loc 1 1070 48
 3111 002e 3B68     	 ldr r3,[r7]
 3112 0030 DB68     	 ldr r3,[r3,#12]
 3113              	 .loc 1 1070 8
 3114 0032 9847     	 blx r3
 3115              	.LVL68:
 3116 0034 0346     	 mov r3,r0
 3117 0036 1A46     	 mov r2,r3
 3118 0038 FB79     	 ldrb r3,[r7,#7]
 3119 003a 1146     	 mov r1,r2
 3120 003c 1846     	 mov r0,r3
 3121 003e 134B     	 ldr r3,.L260+12
 3122 0040 9847     	 blx r3
 3123              	.LVL69:
 3124 0042 0346     	 mov r3,r0
 3125              	 .loc 1 1070 7
 3126 0044 83F00103 	 eor r3,r3,#1
 3127 0048 DBB2     	 uxtb r3,r3
 3128              	 .loc 1 1070 6
 3129 004a 002B     	 cmp r3,#0
 3130 004c 01D0     	 beq .L257
1071:.././hal/sam3u1c/udc.c **** 			return false;
 3131              	 .loc 1 1071 11
 3132 004e 0023     	 movs r3,#0
 3133 0050 12E0     	 b .L255
 3134              	.L257:
1072:.././hal/sam3u1c/udc.c **** 		}
1073:.././hal/sam3u1c/udc.c **** 
1074:.././hal/sam3u1c/udc.c **** 		// Send the SETUP request to the UDI
1075:.././hal/sam3u1c/udc.c **** 		if (udi_api->setup()) {
 3135              	 .loc 1 1075 14
 3136 0052 3B68     	 ldr r3,[r7]
 3137 0054 9B68     	 ldr r3,[r3,#8]
 3138              	 .loc 1 1075 7
 3139 0056 9847     	 blx r3
 3140              	.LVL70:
 3141 0058 0346     	 mov r3,r0
 3142              	 .loc 1 1075 6
 3143 005a 002B     	 cmp r3,#0
 3144 005c 01D0     	 beq .L258
1076:.././hal/sam3u1c/udc.c **** 			return true;
 3145              	 .loc 1 1076 11
 3146 005e 0123     	 movs r3,#1
 3147 0060 0AE0     	 b .L255
 3148              	.L258:
1067:.././hal/sam3u1c/udc.c **** 		// Select the interface with the current alternate setting
 3149              	 .loc 1 1067 13
 3150 0062 FB79     	 ldrb r3,[r7,#7]
 3151 0064 0133     	 adds r3,r3,#1
 3152 0066 FB71     	 strb r3,[r7,#7]
 3153              	.L256:
1066:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 3154              	 .loc 1 1066 46 discriminator 1
 3155 0068 074B     	 ldr r3,.L260+8
 3156 006a 1B68     	 ldr r3,[r3]
 3157 006c 1B68     	 ldr r3,[r3]
1066:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 3158              	 .loc 1 1066 52 discriminator 1
 3159 006e 1B79     	 ldrb r3,[r3,#4]
1066:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 3160              	 .loc 1 1066 2 discriminator 1
 3161 0070 FA79     	 ldrb r2,[r7,#7]
 3162 0072 9A42     	 cmp r2,r3
 3163 0074 D3D3     	 bcc .L259
1077:.././hal/sam3u1c/udc.c **** 		}
1078:.././hal/sam3u1c/udc.c **** 	}
1079:.././hal/sam3u1c/udc.c **** 	return false;
 3164              	 .loc 1 1079 9
 3165 0076 0023     	 movs r3,#0
 3166              	.L255:
1080:.././hal/sam3u1c/udc.c **** }
 3167              	 .loc 1 1080 1
 3168 0078 1846     	 mov r0,r3
 3169 007a 0837     	 adds r7,r7,#8
 3170              	.LCFI103:
 3171              	 .cfi_def_cfa_offset 8
 3172 007c BD46     	 mov sp,r7
 3173              	.LCFI104:
 3174              	 .cfi_def_cfa_register 13
 3175              	 
 3176 007e 80BD     	 pop {r7,pc}
 3177              	.L261:
 3178              	 .align 2
 3179              	.L260:
 3180 0080 00000000 	 .word udc_num_configuration
 3181 0084 00000000 	 .word udd_g_ctrlreq
 3182 0088 00000000 	 .word udc_ptr_conf
 3183 008c 00000000 	 .word udc_update_iface_desc
 3184              	 .cfi_endproc
 3185              	.LFE100:
 3187              	 .section .text.udc_process_setup,"ax",%progbits
 3188              	 .align 1
 3189              	 .global udc_process_setup
 3190              	 .syntax unified
 3191              	 .thumb
 3192              	 .thumb_func
 3193              	 .fpu softvfp
 3195              	udc_process_setup:
 3196              	.LFB101:
1081:.././hal/sam3u1c/udc.c **** 
1082:.././hal/sam3u1c/udc.c **** /**
1083:.././hal/sam3u1c/udc.c ****  * \brief Main routine to manage the USB SETUP request.
1084:.././hal/sam3u1c/udc.c ****  *
1085:.././hal/sam3u1c/udc.c ****  * This function parses a USB SETUP request and submits an appropriate
1086:.././hal/sam3u1c/udc.c ****  * response back to the host or, in the case of SETUP OUT requests
1087:.././hal/sam3u1c/udc.c ****  * with data, sets up a buffer for receiving the data payload.
1088:.././hal/sam3u1c/udc.c ****  *
1089:.././hal/sam3u1c/udc.c ****  * The main standard requests defined by the USB 2.0 standard are handled
1090:.././hal/sam3u1c/udc.c ****  * internally. The interface requests are sent to UDI, and the specific request
1091:.././hal/sam3u1c/udc.c ****  * sent to a specific application callback.
1092:.././hal/sam3u1c/udc.c ****  *
1093:.././hal/sam3u1c/udc.c ****  * \return true if the request is supported, else the request is stalled by UDD
1094:.././hal/sam3u1c/udc.c ****  */
1095:.././hal/sam3u1c/udc.c **** bool udc_process_setup(void)
1096:.././hal/sam3u1c/udc.c **** {
 3197              	 .loc 1 1096 1
 3198              	 .cfi_startproc
 3199              	 
 3200              	 
 3201 0000 80B5     	 push {r7,lr}
 3202              	.LCFI105:
 3203              	 .cfi_def_cfa_offset 8
 3204              	 .cfi_offset 7,-8
 3205              	 .cfi_offset 14,-4
 3206 0002 00AF     	 add r7,sp,#0
 3207              	.LCFI106:
 3208              	 .cfi_def_cfa_register 7
1097:.././hal/sam3u1c/udc.c **** 	// By default no data (receive/send) and no callbacks registered
1098:.././hal/sam3u1c/udc.c **** 	udd_g_ctrlreq.payload_size = 0;
 3209              	 .loc 1 1098 29
 3210 0004 1E4B     	 ldr r3,.L268
 3211 0006 0022     	 movs r2,#0
 3212 0008 9A81     	 strh r2,[r3,#12]
1099:.././hal/sam3u1c/udc.c **** 	udd_g_ctrlreq.callback = NULL;
 3213              	 .loc 1 1099 25
 3214 000a 1D4B     	 ldr r3,.L268
 3215 000c 0022     	 movs r2,#0
 3216 000e 1A61     	 str r2,[r3,#16]
1100:.././hal/sam3u1c/udc.c **** 	udd_g_ctrlreq.over_under_run = NULL;
 3217              	 .loc 1 1100 31
 3218 0010 1B4B     	 ldr r3,.L268
 3219 0012 0022     	 movs r2,#0
 3220 0014 5A61     	 str r2,[r3,#20]
1101:.././hal/sam3u1c/udc.c **** 
1102:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_is_in()) {
 3221              	 .loc 1 1102 6
 3222 0016 1A4B     	 ldr r3,.L268
 3223 0018 1B78     	 ldrb r3,[r3]
 3224 001a 5BB2     	 sxtb r3,r3
 3225              	 .loc 1 1102 5
 3226 001c 002B     	 cmp r3,#0
 3227 001e 05DA     	 bge .L263
1103:.././hal/sam3u1c/udc.c **** 		if (udd_g_ctrlreq.req.wLength == 0) {
 3228              	 .loc 1 1103 24
 3229 0020 174B     	 ldr r3,.L268
 3230 0022 DB88     	 ldrh r3,[r3,#6]
 3231              	 .loc 1 1103 6
 3232 0024 002B     	 cmp r3,#0
 3233 0026 01D1     	 bne .L263
1104:.././hal/sam3u1c/udc.c **** 			return false; // Error from USB host
 3234              	 .loc 1 1104 11
 3235 0028 0023     	 movs r3,#0
 3236 002a 27E0     	 b .L264
 3237              	.L263:
1105:.././hal/sam3u1c/udc.c **** 		}
1106:.././hal/sam3u1c/udc.c **** 	}
1107:.././hal/sam3u1c/udc.c **** 
1108:.././hal/sam3u1c/udc.c **** 	// If standard request then try to decode it in UDC
1109:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_type() == USB_REQ_TYPE_STANDARD) {
 3238              	 .loc 1 1109 6
 3239 002c 144B     	 ldr r3,.L268
 3240 002e 1B78     	 ldrb r3,[r3]
 3241 0030 03F06003 	 and r3,r3,#96
 3242              	 .loc 1 1109 5
 3243 0034 002B     	 cmp r3,#0
 3244 0036 06D1     	 bne .L265
1110:.././hal/sam3u1c/udc.c **** 		if (udc_reqstd()) {
 3245              	 .loc 1 1110 7
 3246 0038 124B     	 ldr r3,.L268+4
 3247 003a 9847     	 blx r3
 3248              	.LVL71:
 3249 003c 0346     	 mov r3,r0
 3250              	 .loc 1 1110 6
 3251 003e 002B     	 cmp r3,#0
 3252 0040 01D0     	 beq .L265
1111:.././hal/sam3u1c/udc.c **** 			return true;
 3253              	 .loc 1 1111 11
 3254 0042 0123     	 movs r3,#1
 3255 0044 1AE0     	 b .L264
 3256              	.L265:
1112:.././hal/sam3u1c/udc.c **** 		}
1113:.././hal/sam3u1c/udc.c **** 	}
1114:.././hal/sam3u1c/udc.c **** 
1115:.././hal/sam3u1c/udc.c **** 	// If interface request then try to decode it in UDI
1116:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_recipient() == USB_REQ_RECIP_INTERFACE) {
 3257              	 .loc 1 1116 6
 3258 0046 0E4B     	 ldr r3,.L268
 3259 0048 1B78     	 ldrb r3,[r3]
 3260 004a 03F01F03 	 and r3,r3,#31
 3261              	 .loc 1 1116 5
 3262 004e 012B     	 cmp r3,#1
 3263 0050 06D1     	 bne .L266
1117:.././hal/sam3u1c/udc.c **** 		if (udc_req_iface()) {
 3264              	 .loc 1 1117 7
 3265 0052 0D4B     	 ldr r3,.L268+8
 3266 0054 9847     	 blx r3
 3267              	.LVL72:
 3268 0056 0346     	 mov r3,r0
 3269              	 .loc 1 1117 6
 3270 0058 002B     	 cmp r3,#0
 3271 005a 01D0     	 beq .L266
1118:.././hal/sam3u1c/udc.c **** 			return true;
 3272              	 .loc 1 1118 11
 3273 005c 0123     	 movs r3,#1
 3274 005e 0DE0     	 b .L264
 3275              	.L266:
1119:.././hal/sam3u1c/udc.c **** 		}
1120:.././hal/sam3u1c/udc.c **** 	}
1121:.././hal/sam3u1c/udc.c **** 
1122:.././hal/sam3u1c/udc.c **** 	// If endpoint request then try to decode it in UDI
1123:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_recipient() == USB_REQ_RECIP_ENDPOINT) {
 3276              	 .loc 1 1123 6
 3277 0060 074B     	 ldr r3,.L268
 3278 0062 1B78     	 ldrb r3,[r3]
 3279 0064 03F01F03 	 and r3,r3,#31
 3280              	 .loc 1 1123 5
 3281 0068 022B     	 cmp r3,#2
 3282 006a 06D1     	 bne .L267
1124:.././hal/sam3u1c/udc.c **** 		if (udc_req_ep()) {
 3283              	 .loc 1 1124 7
 3284 006c 074B     	 ldr r3,.L268+12
 3285 006e 9847     	 blx r3
 3286              	.LVL73:
 3287 0070 0346     	 mov r3,r0
 3288              	 .loc 1 1124 6
 3289 0072 002B     	 cmp r3,#0
 3290 0074 01D0     	 beq .L267
1125:.././hal/sam3u1c/udc.c **** 			return true;
 3291              	 .loc 1 1125 11
 3292 0076 0123     	 movs r3,#1
 3293 0078 00E0     	 b .L264
 3294              	.L267:
1126:.././hal/sam3u1c/udc.c **** 		}
1127:.././hal/sam3u1c/udc.c **** 	}
1128:.././hal/sam3u1c/udc.c **** 
1129:.././hal/sam3u1c/udc.c **** 	// Here SETUP request unknown by UDC and UDIs
1130:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_SPECIFIC_REQUEST
1131:.././hal/sam3u1c/udc.c **** 	// Try to decode it in specific callback
1132:.././hal/sam3u1c/udc.c **** 	return USB_DEVICE_SPECIFIC_REQUEST(); // Ex: Vendor request,...
1133:.././hal/sam3u1c/udc.c **** #else
1134:.././hal/sam3u1c/udc.c **** 	return false;
 3295              	 .loc 1 1134 9
 3296 007a 0023     	 movs r3,#0
 3297              	.L264:
1135:.././hal/sam3u1c/udc.c **** #endif
1136:.././hal/sam3u1c/udc.c **** }
 3298              	 .loc 1 1136 1
 3299 007c 1846     	 mov r0,r3
 3300 007e 80BD     	 pop {r7,pc}
 3301              	.L269:
 3302              	 .align 2
 3303              	.L268:
 3304 0080 00000000 	 .word udd_g_ctrlreq
 3305 0084 00000000 	 .word udc_reqstd
 3306 0088 00000000 	 .word udc_req_iface
 3307 008c 00000000 	 .word udc_req_ep
 3308              	 .cfi_endproc
 3309              	.LFE101:
 3311              	 .section .bss.udc_ep_status.7396,"aw",%nobits
 3312              	 .align 1
 3315              	udc_ep_status.7396:
 3316 0000 0000     	 .space 2
 3317              	 .section .bss.udc_iface_setting.7466,"aw",%nobits
 3320              	udc_iface_setting.7466:
 3321 0000 00       	 .space 1
 3322              	 .text
 3323              	.Letext0:
 3324              	 .file 2 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\machine\\_default_types.h"
 3325              	 .file 3 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
 3326              	 .file 4 ".././hal/sam3u1c/inc/core_cm3.h"
 3327              	 .file 5 ".././hal/sam3u1c/inc/system_sam3u.h"
 3328              	 .file 6 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 3329              	 .file 7 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\sys\\_types.h"
 3330              	 .file 8 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\lib\\gcc\\arm-none-eabi\\8.2.1\\include\\stddef.h"
 3331              	 .file 9 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 3332              	 .file 10 "c:\\program files (x86)\\gnu tools arm embedded\\8 2018-q4-major\\arm-none-eabi\\include\\stdlib.h"
 3333              	 .file 11 ".././hal/sam3u1c/inc/interrupt/interrupt_sam_nvic.h"
 3334              	 .file 12 ".././hal/sam3u1c/inc/compiler.h"
 3335              	 .file 13 "./conf_usb.h"
 3336              	 .file 14 ".././hal/sam3u1c/inc/usb_protocol.h"
 3337              	 .file 15 ".././hal/sam3u1c/inc/udi.h"
 3338              	 .file 16 ".././hal/sam3u1c/inc/udc_desc.h"
 3339              	 .file 17 ".././hal/sam3u1c/inc/udd.h"
 3340              	 .file 18 ".././hal/sam3u1c/inc/udi_vendor.h"
DEFINED SYMBOLS
                            *ABS*:00000000 udc.c
    {standard input}:16     .bss.cpu_irq_critical_section_counter:00000000 $d
    {standard input}:19     .bss.cpu_irq_critical_section_counter:00000000 cpu_irq_critical_section_counter
    {standard input}:24     .bss.cpu_irq_prev_interrupt_state:00000000 cpu_irq_prev_interrupt_state
    {standard input}:25     .bss.cpu_irq_prev_interrupt_state:00000000 $d
    {standard input}:27     .bss.udc_device_status:00000000 $d
    {standard input}:30     .bss.udc_device_status:00000000 udc_device_status
    {standard input}:35     .bss.udc_num_configuration:00000000 udc_num_configuration
    {standard input}:36     .bss.udc_num_configuration:00000000 $d
    {standard input}:38     .bss.udc_ptr_conf:00000000 $d
    {standard input}:41     .bss.udc_ptr_conf:00000000 udc_ptr_conf
    {standard input}:44     .bss.udc_ptr_iface:00000000 $d
    {standard input}:47     .bss.udc_ptr_iface:00000000 udc_ptr_iface
    {standard input}:50     .data.udc_string_desc_languageid:00000000 $d
    {standard input}:53     .data.udc_string_desc_languageid:00000000 udc_string_desc_languageid
    {standard input}:58     .data.udc_string_manufacturer_name:00000000 $d
    {standard input}:61     .data.udc_string_manufacturer_name:00000000 udc_string_manufacturer_name
    {standard input}:64     .data.udc_string_product_name:00000000 $d
    {standard input}:67     .data.udc_string_product_name:00000000 udc_string_product_name
    {standard input}:70     .text.udc_get_string_serial_name:00000000 $t
    {standard input}:77     .text.udc_get_string_serial_name:00000000 udc_get_string_serial_name
    {standard input}:108    .text.udc_get_string_serial_name:00000010 $d
    {standard input}:113    .data.udc_string_desc:00000000 $d
    {standard input}:116    .data.udc_string_desc:00000000 udc_string_desc
    {standard input}:121    .text.udc_get_interface_desc:00000000 $t
    {standard input}:128    .text.udc_get_interface_desc:00000000 udc_get_interface_desc
    {standard input}:159    .text.udc_get_interface_desc:00000010 $d
    {standard input}:164    .text.udc_get_eof_conf:00000000 $t
    {standard input}:170    .text.udc_get_eof_conf:00000000 udc_get_eof_conf
    {standard input}:210    .text.udc_get_eof_conf:00000020 $d
    {standard input}:215    .text.udc_next_desc_in_iface:00000000 $t
    {standard input}:221    .text.udc_next_desc_in_iface:00000000 udc_next_desc_in_iface
    {standard input}:309    .text.udc_next_desc_in_iface:00000058 $d
    {standard input}:314    .text.udc_update_iface_desc:00000000 $t
    {standard input}:320    .text.udc_update_iface_desc:00000000 udc_update_iface_desc
    {standard input}:444    .text.udc_update_iface_desc:0000008c $d
    {standard input}:452    .text.udc_iface_disable:00000000 $t
    {standard input}:458    .text.udc_iface_disable:00000000 udc_iface_disable
    {standard input}:583    .text.udc_iface_disable:0000008c $d
    {standard input}:592    .text.udc_iface_enable:00000000 $t
    {standard input}:598    .text.udc_iface_enable:00000000 udc_iface_enable
    {standard input}:709    .text.udc_iface_enable:00000084 $d
    {standard input}:718    .text.udc_start:00000000 $t
    {standard input}:725    .text.udc_start:00000000 udc_start
    {standard input}:749    .text.udc_start:0000000c $d
    {standard input}:754    .text.udc_stop:00000000 $t
    {standard input}:761    .text.udc_stop:00000000 udc_stop
    {standard input}:789    .text.udc_stop:00000010 $d
    {standard input}:802    .text.udc_reset:00000000 udc_reset
    {standard input}:795    .text.udc_reset:00000000 $t
    {standard input}:874    .text.udc_reset:00000044 $d
    {standard input}:882    .text.udc_sof_notify:00000000 $t
    {standard input}:889    .text.udc_sof_notify:00000000 udc_sof_notify
    {standard input}:976    .text.udc_sof_notify:00000058 $d
    {standard input}:982    .text.udc_req_std_dev_get_status:00000000 $t
    {standard input}:988    .text.udc_req_std_dev_get_status:00000000 udc_req_std_dev_get_status
    {standard input}:1027   .text.udc_req_std_dev_get_status:00000020 $d
    {standard input}:1034   .text.udc_req_std_ep_get_status:00000000 $t
    {standard input}:1040   .text.udc_req_std_ep_get_status:00000000 udc_req_std_ep_get_status
    {standard input}:1094   .text.udc_req_std_ep_get_status:00000034 $d
    {standard input}:3315   .bss.udc_ep_status.7396:00000000 udc_ep_status.7396
    {standard input}:1102   .text.udc_req_std_dev_clear_feature:00000000 $t
    {standard input}:1108   .text.udc_req_std_dev_clear_feature:00000000 udc_req_std_dev_clear_feature
    {standard input}:1166   .text.udc_req_std_dev_clear_feature:00000034 $d
    {standard input}:1172   .text.udc_req_std_ep_clear_feature:00000000 $t
    {standard input}:1178   .text.udc_req_std_ep_clear_feature:00000000 udc_req_std_ep_clear_feature
    {standard input}:1229   .text.udc_req_std_ep_clear_feature:00000030 $d
    {standard input}:1235   .text.udc_req_std_dev_set_feature:00000000 $t
    {standard input}:1241   .text.udc_req_std_dev_set_feature:00000000 udc_req_std_dev_set_feature
    {standard input}:1317   .text.udc_req_std_dev_set_feature:00000058 $d
    {standard input}:1321   .text.udc_req_std_dev_set_feature:00000068 $t
    {standard input}:1376   .text.udc_req_std_dev_set_feature:000000a0 $d
    {standard input}:1387   .text.udc_req_std_ep_set_feature:00000000 $t
    {standard input}:1393   .text.udc_req_std_ep_set_feature:00000000 udc_req_std_ep_set_feature
    {standard input}:1453   .text.udc_req_std_ep_set_feature:0000003c $d
    {standard input}:1460   .text.udc_valid_address:00000000 $t
    {standard input}:1466   .text.udc_valid_address:00000000 udc_valid_address
    {standard input}:1498   .text.udc_valid_address:0000001c $d
    {standard input}:1504   .text.udc_req_std_dev_set_address:00000000 $t
    {standard input}:1510   .text.udc_req_std_dev_set_address:00000000 udc_req_std_dev_set_address
    {standard input}:1555   .text.udc_req_std_dev_set_address:00000020 $d
    {standard input}:1561   .text.udc_req_std_dev_get_str_desc:00000000 $t
    {standard input}:1567   .text.udc_req_std_dev_get_str_desc:00000000 udc_req_std_dev_get_str_desc
    {standard input}:1599   .text.udc_req_std_dev_get_str_desc:0000001c $d
    {standard input}:1603   .text.udc_req_std_dev_get_str_desc:0000002c $t
    {standard input}:1717   .text.udc_req_std_dev_get_str_desc:000000b0 $d
    {standard input}:1728   .text.udc_req_std_dev_get_descriptor:00000000 $t
    {standard input}:1734   .text.udc_req_std_dev_get_descriptor:00000000 udc_req_std_dev_get_descriptor
    {standard input}:1771   .text.udc_req_std_dev_get_descriptor:00000024 $d
    {standard input}:1786   .text.udc_req_std_dev_get_descriptor:00000060 $t
    {standard input}:2121   .text.udc_req_std_dev_get_descriptor:00000208 $d
    {standard input}:2130   .text.udc_req_std_dev_get_configuration:00000000 $t
    {standard input}:2136   .text.udc_req_std_dev_get_configuration:00000000 udc_req_std_dev_get_configuration
    {standard input}:2175   .text.udc_req_std_dev_get_configuration:00000020 $d
    {standard input}:2182   .text.udc_req_std_dev_set_configuration:00000000 $t
    {standard input}:2188   .text.udc_req_std_dev_set_configuration:00000000 udc_req_std_dev_set_configuration
    {standard input}:2384   .text.udc_req_std_dev_set_configuration:000000e4 $d
    {standard input}:2396   .text.udc_req_std_iface_get_setting:00000000 $t
    {standard input}:2402   .text.udc_req_std_iface_get_setting:00000000 udc_req_std_iface_get_setting
    {standard input}:2520   .text.udc_req_std_iface_get_setting:00000080 $d
    {standard input}:3320   .bss.udc_iface_setting.7466:00000000 udc_iface_setting.7466
    {standard input}:2530   .text.udc_req_std_iface_set_setting:00000000 $t
    {standard input}:2536   .text.udc_req_std_iface_set_setting:00000000 udc_req_std_iface_set_setting
    {standard input}:2623   .text.udc_req_std_iface_set_setting:00000058 $d
    {standard input}:2631   .text.udc_reqstd:00000000 $t
    {standard input}:2637   .text.udc_reqstd:00000000 udc_reqstd
    {standard input}:2778   .text.udc_reqstd:000000b0 $d
    {standard input}:2787   .text.udc_reqstd:000000d4 $t
    {standard input}:2903   .text.udc_reqstd:00000158 $d
    {standard input}:2920   .text.udc_req_iface:00000000 $t
    {standard input}:2926   .text.udc_req_iface:00000000 udc_req_iface
    {standard input}:3047   .text.udc_req_iface:00000088 $d
    {standard input}:3055   .text.udc_req_ep:00000000 $t
    {standard input}:3061   .text.udc_req_ep:00000000 udc_req_ep
    {standard input}:3180   .text.udc_req_ep:00000080 $d
    {standard input}:3188   .text.udc_process_setup:00000000 $t
    {standard input}:3195   .text.udc_process_setup:00000000 udc_process_setup
    {standard input}:3304   .text.udc_process_setup:00000080 $d
    {standard input}:3312   .bss.udc_ep_status.7396:00000000 $d
    {standard input}:3321   .bss.udc_iface_setting.7466:00000000 $d
                           .group:00000000 wm4.0.bacf6c85951b42af729d707f36a7fff6
                           .group:00000000 wm4.stddef.h.39.99b5021e28f91cdb161c889e07266673
                           .group:00000000 wm4.parts.h.45.afc900689b2c82332e69d798acedc875
                           .group:00000000 wm4.tpaste.h.45.af3ee36765243b162c88f7f944858426
                           .group:00000000 wm4.stringz.h.45.c4f6cbe0005e6c1d2139bc6c0e4f4722
                           .group:00000000 wm4.mrepeat.h.59.c5daaed201a4340b0edf435161d0b77f
                           .group:00000000 wm4._newlib_version.h.4.875b979a44719054cd750d0952ad3fd6
                           .group:00000000 wm4.features.h.33.5bd1eea2d80518b50f7af0b5ce6750e0
                           .group:00000000 wm4._default_types.h.15.247e5cd201eca3442cbf5404108c4935
                           .group:00000000 wm4._intsup.h.10.cce27fed8484c08a33f522034c30d2b5
                           .group:00000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:00000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:00000000 wm4.sam3u1c.h.220.c0b54b5a55bc87791749ae17b1487779
                           .group:00000000 wm4.core_cm3.h.32.5c59c312db585622d253fdb887b0afb1
                           .group:00000000 wm4.core_cmInstr.h.25.d8165482ef3061013a2fc83e2d85f3d9
                           .group:00000000 wm4.core_cm3.h.127.b561404f2a159dc517b409bc244d16c1
                           .group:00000000 wm4.component_adc.h.43.d49887380d07d1cd08cc4e37b3485e31
                           .group:00000000 wm4.component_adc12b.h.43.eadc09f1073923fb91f1f393cc397dcb
                           .group:00000000 wm4.component_chipid.h.43.15825c969b1cc9eeea3d9416499874c8
                           .group:00000000 wm4.component_dmac.h.43.cc8187b1cf6bfeadc91b14fdd28b9e8b
                           .group:00000000 wm4.component_efc.h.43.cb1b3997ad9ea3733ad421ecbfd02fdd
                           .group:00000000 wm4.component_gpbr.h.43.49b7e13894fe38b29f2243bbbe530227
                           .group:00000000 wm4.component_hsmci.h.43.7b7194c92e1480c038f3342f7cec440a
                           .group:00000000 wm4.component_matrix.h.43.1d209838fb75b4827119203a357141ee
                           .group:00000000 wm4.component_pdc.h.43.19528a5f9ef5a348234ea06f89069c55
                           .group:00000000 wm4.component_pio.h.43.163b46c3683ccf92e8de39a5554f50e8
                           .group:00000000 wm4.component_pmc.h.43.ee4f030602866917aeed15fb2b948de8
                           .group:00000000 wm4.component_pwm.h.43.ab6262a86f0aea354b43fe6dce7e7eb3
                           .group:00000000 wm4.component_rstc.h.43.4eb59dc2ddcf585fabf251d0c329fcdd
                           .group:00000000 wm4.component_rtc.h.43.ba8ccafc772b11d562a3cceab8b95072
                           .group:00000000 wm4.component_rtt.h.43.3206ef8f067e5e747c3c4c7e719c1429
                           .group:00000000 wm4.component_smc.h.43.907847915f1a5616734199d7e34424fa
                           .group:00000000 wm4.component_spi.h.43.a2a09df64ab768c0a32be55285c74ded
                           .group:00000000 wm4.component_ssc.h.43.d7c78f990c13fc511671b64798c4bcd0
                           .group:00000000 wm4.component_supc.h.43.7d17f8e5ed3ba815e84381152735062f
                           .group:00000000 wm4.component_tc.h.43.662eac8137408372b4f9d26c0b5f8621
                           .group:00000000 wm4.component_twi.h.43.eda18625bd851fc4605861f5b3240c0b
                           .group:00000000 wm4.component_uart.h.43.2d92735c5ea05c973661e1ba99a2f37c
                           .group:00000000 wm4.component_udphs.h.43.21cecd26a4e44df0013037f29f2716e4
                           .group:00000000 wm4.component_usart.h.43.7872f8f455adb38b67b9fbdb15657fbe
                           .group:00000000 wm4.component_wdt.h.43.e31e10a5469b62c3660b49ab250f802f
                           .group:00000000 wm4.instance_hsmci.h.43.e233236cc7fd5a805539a7ecc0e1d8d2
                           .group:00000000 wm4.instance_ssc.h.43.c0cfabc3b9f3bb60745c913111bce965
                           .group:00000000 wm4.instance_spi.h.43.570ae46af19e4179d9796872b9a8b9bc
                           .group:00000000 wm4.instance_tc0.h.43.049b3a82387d2961594190609e896a29
                           .group:00000000 wm4.instance_twi0.h.43.255dc0afa9e0d45eaea0a935eca2f103
                           .group:00000000 wm4.instance_twi1.h.43.652d1d407893f259f2a817544ba662c2
                           .group:00000000 wm4.instance_pwm.h.43.88294acec3ca56d6fc521038521a1567
                           .group:00000000 wm4.instance_usart0.h.43.e26677512aee3dd3bedd71d394410000
                           .group:00000000 wm4.instance_usart1.h.43.1ba97dbc6610d9fb3132b9d845688201
                           .group:00000000 wm4.instance_usart2.h.43.baa1bf30b3c5acdee90c4a1f50fe9ebd
                           .group:00000000 wm4.instance_udphs.h.43.b1ce94181e0d1f22877b81c6040a4363
                           .group:00000000 wm4.instance_adc12b.h.43.d73ed59e867ccdfdb846d9ef32a50c0c
                           .group:00000000 wm4.instance_adc.h.43.2b7611a00afeb4c555339b844d4b8456
                           .group:00000000 wm4.instance_dmac.h.43.ee72691d84889c8f285932be4a075ddb
                           .group:00000000 wm4.instance_smc.h.43.29610fd00979caaaa65821ad40e9da06
                           .group:00000000 wm4.instance_matrix.h.43.01ee474141594385374c41a29daeeefe
                           .group:00000000 wm4.instance_pmc.h.43.37430325ed7b8b24c3fe640c41c29ef5
                           .group:00000000 wm4.instance_uart.h.43.bd378395ba022bc8670c82ebe656fbbd
                           .group:00000000 wm4.instance_chipid.h.43.29cd8fb600f149aa58830fcc78fe36f9
                           .group:00000000 wm4.instance_efc0.h.43.6b85dba20721a7e9fc4350e78d193680
                           .group:00000000 wm4.instance_efc1.h.43.2c5e94fc4d2742678318d73450d08d57
                           .group:00000000 wm4.instance_pioa.h.43.eeb46cc3bfe01a1f28e67aa3a6851ed8
                           .group:00000000 wm4.instance_piob.h.43.652ce26b6c37ac56f9ed42a9216d9aca
                           .group:00000000 wm4.instance_rstc.h.43.c5de224364a50a85f237c0b864aa4c8f
                           .group:00000000 wm4.instance_supc.h.43.a5f1a5ca08f468ccf34ed3653e045f1f
                           .group:00000000 wm4.instance_rtt.h.43.8622b192c23334996132415e3095df7f
                           .group:00000000 wm4.instance_wdt.h.43.407ea53e133eacf09acf2c7fcb6b7524
                           .group:00000000 wm4.instance_rtc.h.43.f70b77f9180401c8d9d920cb4a1cd166
                           .group:00000000 wm4.instance_gpbr.h.43.9066cb40d557f6755101368854272348
                           .group:00000000 wm4.sam3u1c.h.312.ae446d8e874d34ca3df78faf190c678f
                           .group:00000000 wm4.pio_sam3u1c.h.43.18b24f16e1710ff2a400d88fe33c5107
                           .group:00000000 wm4.sam3u1c.h.442.cd4bbc3af493e98bc9b60c2905132ed0
                           .group:00000000 wm4.newlib.h.8.f6e543eac3f2f65163ba2ffe3b04987b
                           .group:00000000 wm4.ieeefp.h.77.d5685ba212d3ed6e914898d045f873e3
                           .group:00000000 wm4.config.h.220.6cac6a9685cfce5e83c17784171638d9
                           .group:00000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:00000000 wm4.stdio.h.31.7c0e28c411445f3f9c5b11accf882760
                           .group:00000000 wm4.stddef.h.161.19e15733342b50ead2919490b095303e
                           .group:00000000 wm4.cdefs.h.49.2bf373aedffd8b393ccd11dc057e8547
                           .group:00000000 wm4.stdarg.h.34.3a23a216c0c293b3d2ea2e89281481e6
                           .group:00000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:00000000 wm4._types.h.125.5cf8a495f1f7ef36777ad868a1e32068
                           .group:00000000 wm4.stddef.h.161.5349cb105733e8777bfb0cf53c4e3f34
                           .group:00000000 wm4._types.h.184.03611d4f6b5bec9997bcf4279eceba07
                           .group:00000000 wm4.reent.h.17.90c2574d4acdcfce933db5cb09ff35fe
                           .group:00000000 wm4.types.h.40.e8c16e7ec36ba55f133d0616070e25fc
                           .group:00000000 wm4._endian.h.31.65a10590763c3dde1ac4a7f66d7d4891
                           .group:00000000 wm4.endian.h.9.49f3a4695c1b61e8a0808de3c4a106cb
                           .group:00000000 wm4._timeval.h.30.0e8bfd94e85db17dda3286ee81496fe6
                           .group:00000000 wm4.timespec.h.41.d855182eb0e690443ab8651bcedca6e1
                           .group:00000000 wm4.select.h.19.97ca6fd0c752a0f3b6719fd314d361e6
                           .group:00000000 wm4.types.h.69.ed3eae3cf73030a737515151ebcab7a1
                           .group:00000000 wm4.sched.h.22.c60982713a5c428609783c78f9c78d95
                           .group:00000000 wm4._pthreadtypes.h.36.fcee9961c35163dde6267ef772ad1972
                           .group:00000000 wm4.stdio.h.2.4aa87247282eca6c8f36f9de33d8df1a
                           .group:00000000 wm4.stdio.h.81.932d0c162786b883f622b8d05c120c78
                           .group:00000000 wm4.stdbool.h.29.07dce69c3b78884144b7f7bd19483461
                           .group:00000000 wm4.stdlib.h.13.4ed386f5c1a80d71e72172885d946ef2
                           .group:00000000 wm4.alloca.h.8.dfc0c703c47ec3e69746825b17d9e66d
                           .group:00000000 wm4.stdlib.h.56.d4493cd3736e51e9d56335045f26df45
                           .group:00000000 wm4.compiler.h.88.0e6ad966134fa012ce9a34053d3f48aa
                           .group:00000000 wm4.interrupt_sam_nvic.h.45.4876da6c127868305d66389e87e0876f
                           .group:00000000 wm4.compiler.h.425.66dd29c210af3287ed85ec3553a3e6b1
                           .group:00000000 wm4.conf_usb.h.56.3123a395939a56b38cb84f3590ea54ec
                           .group:00000000 wm4.udi_vendor_conf.h.56.4348c8e521d040f44df868219dae6785
                           .group:00000000 wm4.usb_atmel.h.45.c31b525dbe01f8d9e2022a03356ec174
                           .group:00000000 wm4.usb_protocol.h.63.850c58f3469fce50a9ac9a6854f7594b
                           .group:00000000 wm4.usb_protocol_vendor.h.45.83dfe073428ff799abc3ed1c7b04c77d
                           .group:00000000 wm4.udc_desc.h.77.5fec235bd7553e7256e345e020840072
                           .group:00000000 wm4.udd.h.103.3ccc59b50c14ec70568e6136eeb22d56
                           .group:00000000 wm4.udi_vendor.h.125.7b9085237d4d4a9757f4c148fba1918d

UNDEFINED SYMBOLS
usb_serial_number
udd_ep_free
udd_ep_alloc
udd_enable
udd_disable
udd_g_ctrlreq
udd_set_setup_payload
udd_ep_is_halted
udd_ep_clear_halt
udd_is_high_speed
udd_test_mode_j
udd_test_mode_k
udd_test_mode_se0_nak
udd_test_mode_packet
udd_ep_abort
udd_ep_set_halt
udd_set_address
udc_config
udd_getaddress
